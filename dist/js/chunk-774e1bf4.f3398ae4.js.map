{"version":3,"sources":["webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ListenerDetailProps.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/CallActivityProps.js","webpack:///./node_modules/lodash/_baseKeys.js","webpack:///./node_modules/diagram-js/lib/navigation/movecanvas/MoveCanvas.js","webpack:///./node_modules/diagram-js/lib/navigation/movecanvas/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConnectorInputOutputProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConnectorDetailProps.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./src/components/Search.vue?528b","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Properties.js","webpack:///./node_modules/lodash/_arrayPush.js","webpack:///./node_modules/lodash/_isStrictComparable.js","webpack:///./node_modules/lodash/_strictIndexOf.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/CreateHelper.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/EventProps.js","webpack:///./node_modules/lodash/_getFuncName.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ElementHelper.js","webpack:///./node_modules/bpmnlint/rules/conditional-flows.js","webpack:///./node_modules/lodash/_createCtor.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/HistoryTimeToLiveProps.js","webpack:///./node_modules/lodash/_isKeyable.js","webpack:///./node_modules/lodash/_castFunction.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/lodash/isEmpty.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/util/ModelingUtil.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/CandidateStarter.js","webpack:///./node_modules/diagram-js/lib/features/keyboard/KeyboardUtil.js","webpack:///./node_modules/lodash/_baseMatchesProperty.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/LinkEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Callable.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/diagram-js/lib/features/keyboard/KeyboardBindings.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/bpmn-js/lib/NavigatedViewer.js","webpack:///./src/network/request.js","webpack:///./node_modules/lodash/_equalByTag.js","webpack:///./node_modules/bpmn-js-properties-panel/index.js","webpack:///./node_modules/lodash/_Promise.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/CreateBusinessObjectListHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/TimerEventDefinition.js","webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/lodash/_hashDelete.js","webpack:///./node_modules/lodash/_mapCacheSet.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/External.js","webpack:///./node_modules/lodash/_matchesStrictComparable.js","webpack:///./node_modules/lodash/_overRest.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/CustomElementsPropertiesActivator.js","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/lodash/_Uint8Array.js","webpack:///./node_modules/lodash/_mapCacheGet.js","webpack:///./node_modules/lodash/_hashSet.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ListenerFieldInjectionProps.js","webpack:///./node_modules/lodash/_realNames.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/NameProps.js","webpack:///./node_modules/lodash/_baseValues.js","webpack:///./node_modules/lodash/bind.js","webpack:///./node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/lodash/find.js","webpack:///./node_modules/lodash/_getData.js","webpack:///./node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/Name.js","webpack:///./src/components/Editor/fileLoader.vue?4c5e","webpack:///src/components/Editor/fileLoader.vue","webpack:///./src/components/Editor/fileLoader.vue?38e7","webpack:///./src/components/Editor/fileLoader.vue","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/wrapperLodash.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/ElementTemplates.js","webpack:///./node_modules/bpmnlint/lib/linter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/CmdHelper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ExtensionElementsHelper.js","webpack:///./node_modules/lodash/_baseFindIndex.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_arrayFilter.js","webpack:///./node_modules/lodash/_getPrototype.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/UserTaskProps.js","webpack:///./node_modules/lodash/_baseDifference.js","webpack:///./node_modules/lodash/_createAssigner.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ListenerProps.js","webpack:///./node_modules/diagram-js/lib/features/keyboard/Keyboard.js","webpack:///./node_modules/diagram-js/lib/features/keyboard/index.js","webpack:///./node_modules/lodash/_stackDelete.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/IdProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/Utils.js","webpack:///./node_modules/lodash/_composeArgsRight.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/bpmnlint/rules/single-event-definition.js","webpack:///./node_modules/lodash/_assignValue.js","webpack:///./node_modules/lodash/_getSymbols.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/Validator.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/InputOutput.js","webpack:///./node_modules/lodash/_isLaziable.js","webpack:///./node_modules/bpmnlint/rules/end-event-required.js","webpack:///./node_modules/lodash/_WeakMap.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/lodash/_getMatchData.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/HistoryTimeToLive.js","webpack:///./node_modules/lodash/values.js","webpack:///./node_modules/diagram-js/lib/navigation/zoomscroll/ZoomUtil.js","webpack:///./node_modules/diagram-js/lib/navigation/zoomscroll/ZoomScroll.js","webpack:///./node_modules/diagram-js/lib/navigation/zoomscroll/index.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/bpmnlint/rules/sub-process-blank-start-event.js","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/lodash/keyBy.js","webpack:///./node_modules/lodash/xor.js","webpack:///./node_modules/lodash/_getMapData.js","webpack:///./node_modules/lodash/_arraySome.js","webpack:///./node_modules/lodash/_getTag.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./node_modules/lodash/_copyArray.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ServiceTaskDelegateProps.js","webpack:///./node_modules/lodash/_baseLodash.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/ChooserProps.js","webpack:///./node_modules/lodash/_createCurry.js","webpack:///./node_modules/lodash/_baseIndexOf.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/_hashClear.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/cmd/ChangeElementTemplateHandler.js","webpack:///./node_modules/lodash/toInteger.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/MultiInstanceLoopProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/TextBoxEntryFactory.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/lodash/_setWrapToString.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/AsyncCapableHelper.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/transform.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/findIndex.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/SignalEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/UpdateBusinessObjectListHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/InputOutputHelper.js","webpack:///./node_modules/lodash/_stackHas.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ErrorEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/TableEntryFactory.js","webpack:///./node_modules/lodash/_nativeKeys.js","webpack:///./node_modules/lodash/_getHolder.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/FieldInjectionProps.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/_createFind.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ScriptTaskProps.js","webpack:///./node_modules/lodash/_ListCache.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/LabelFactory.js","webpack:///./node_modules/lodash/_nativeCreate.js","webpack:///./node_modules/lodash/_LazyWrapper.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/lodash/toFinite.js","webpack:///./node_modules/lodash/_baseMatches.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConditionalProps.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/JobPriority.js","webpack:///./node_modules/lodash/isArray.js","webpack:///./node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/index.js","webpack:///./node_modules/bpmnlint/rules/no-duplicate-sequence-flows.js","webpack:///./node_modules/bpmnlint/rules/event-sub-process-typed-start-event.js","webpack:///./src/components/FileUpload.vue?7528","webpack:///src/components/FileUpload.vue","webpack:///./src/components/FileUpload.vue?cda3","webpack:///./src/components/FileUpload.vue","webpack:///./node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/lodash/_createHybrid.js","webpack:///./node_modules/lodash/_metaMap.js","webpack:///./node_modules/lodash/forEach.js","webpack:///./node_modules/bpmnlint/lib/traverse.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/bpmn-js/lib/BaseModeler.js","webpack:///./node_modules/diagram-js/lib/features/touch/TouchInteractionEvents.js","webpack:///./node_modules/diagram-js/lib/features/touch/TouchFix.js","webpack:///./node_modules/diagram-js/lib/features/touch/index.js","webpack:///./node_modules/diagram-js/lib/navigation/touch/index.js","webpack:///./node_modules/diagram-js/lib/features/align-elements/AlignElements.js","webpack:///./node_modules/diagram-js/lib/features/align-elements/index.js","webpack:///./node_modules/bpmn-js/lib/features/auto-place/AutoPlaceUtil.js","webpack:///./node_modules/bpmn-js/lib/features/auto-place/AutoPlace.js","webpack:///./node_modules/bpmn-js/lib/features/auto-place/AutoPlaceSelectionBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/auto-place/index.js","webpack:///./node_modules/diagram-js/lib/command/CommandInterceptor.js","webpack:///./node_modules/diagram-js/lib/features/auto-resize/AutoResize.js","webpack:///./node_modules/bpmn-js/lib/features/auto-resize/BpmnAutoResize.js","webpack:///./node_modules/diagram-js/lib/features/rules/RuleProvider.js","webpack:///./node_modules/diagram-js/lib/features/auto-resize/AutoResizeProvider.js","webpack:///./node_modules/bpmn-js/lib/features/auto-resize/BpmnAutoResizeProvider.js","webpack:///./node_modules/bpmn-js/lib/features/auto-resize/index.js","webpack:///./node_modules/diagram-js/lib/features/dragging/Dragging.js","webpack:///./node_modules/diagram-js/lib/features/dragging/HoverFix.js","webpack:///./node_modules/diagram-js/lib/features/dragging/index.js","webpack:///./node_modules/diagram-js/lib/features/auto-scroll/AutoScroll.js","webpack:///./node_modules/diagram-js/lib/features/auto-scroll/index.js","webpack:///./node_modules/diagram-js/lib/features/rules/Rules.js","webpack:///./node_modules/diagram-js/lib/features/rules/index.js","webpack:///./node_modules/diagram-js/lib/util/LineIntersection.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/BendpointUtil.js","webpack:///./node_modules/diagram-js/lib/util/EscapeUtil.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/Bendpoints.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/BendpointMove.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/BendpointMovePreview.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/ConnectionSegmentMove.js","webpack:///./node_modules/diagram-js/lib/features/snapping/SnapUtil.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/BendpointSnapping.js","webpack:///./node_modules/diagram-js/lib/features/bendpoints/index.js","webpack:///./node_modules/diagram-js/lib/features/connect/Connect.js","webpack:///./node_modules/diagram-js/lib/features/connect/ConnectPreview.js","webpack:///./node_modules/diagram-js/lib/features/connect/index.js","webpack:///./node_modules/diagram-js/lib/features/connection-preview/ConnectionPreview.js","webpack:///./node_modules/diagram-js/lib/features/connection-preview/index.js","webpack:///./node_modules/diagram-js-direct-editing/lib/TextBox.js","webpack:///./node_modules/diagram-js-direct-editing/lib/DirectEditing.js","webpack:///./node_modules/diagram-js-direct-editing/index.js","webpack:///./node_modules/diagram-js/lib/features/context-pad/ContextPad.js","webpack:///./node_modules/diagram-js/lib/features/context-pad/index.js","webpack:///./node_modules/diagram-js/lib/features/preview-support/PreviewSupport.js","webpack:///./node_modules/diagram-js/lib/features/preview-support/index.js","webpack:///./node_modules/diagram-js/lib/features/create/Create.js","webpack:///./node_modules/diagram-js/lib/features/create/CreatePreview.js","webpack:///./node_modules/diagram-js/lib/features/create/index.js","webpack:///./node_modules/diagram-js/lib/features/popup-menu/PopupMenu.js","webpack:///./node_modules/diagram-js/lib/features/popup-menu/index.js","webpack:///./node_modules/diagram-js/lib/features/clipboard/Clipboard.js","webpack:///./node_modules/diagram-js/lib/features/clipboard/index.js","webpack:///./node_modules/diagram-js/lib/features/mouse/Mouse.js","webpack:///./node_modules/diagram-js/lib/features/mouse/index.js","webpack:///./node_modules/diagram-js/lib/features/copy-paste/CopyPaste.js","webpack:///./node_modules/diagram-js/lib/features/copy-paste/index.js","webpack:///./node_modules/bpmn-js/lib/features/copy-paste/BpmnCopyPaste.js","webpack:///./node_modules/bpmn-js/lib/features/copy-paste/ModdleCopy.js","webpack:///./node_modules/bpmn-js/lib/features/copy-paste/index.js","webpack:///./node_modules/diagram-js/lib/features/replace/Replace.js","webpack:///./node_modules/diagram-js/lib/features/replace/index.js","webpack:///./node_modules/bpmn-js/lib/features/replace/BpmnReplace.js","webpack:///./node_modules/bpmn-js/lib/features/replace/index.js","webpack:///./node_modules/bpmn-js/lib/features/popup-menu/util/TypeUtil.js","webpack:///./node_modules/bpmn-js/lib/features/replace/ReplaceOptions.js","webpack:///./node_modules/bpmn-js/lib/features/popup-menu/ReplaceMenuProvider.js","webpack:///./node_modules/bpmn-js/lib/features/popup-menu/index.js","webpack:///./node_modules/diagram-js/lib/features/resize/ResizeUtil.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/util/LaneUtil.js","webpack:///./node_modules/bpmn-js/lib/features/context-pad/ContextPadProvider.js","webpack:///./node_modules/bpmn-js/lib/features/context-pad/index.js","webpack:///./node_modules/diagram-js/lib/features/distribute-elements/DistributeElements.js","webpack:///./node_modules/diagram-js/lib/features/distribute-elements/index.js","webpack:///./node_modules/bpmn-js/lib/features/distribute-elements/BpmnDistributeElements.js","webpack:///./node_modules/bpmn-js/lib/features/distribute-elements/index.js","webpack:///./node_modules/diagram-js/lib/features/editor-actions/EditorActions.js","webpack:///./node_modules/diagram-js/lib/features/editor-actions/index.js","webpack:///./node_modules/bpmn-js/lib/features/editor-actions/BpmnEditorActions.js","webpack:///./node_modules/bpmn-js/lib/features/editor-actions/index.js","webpack:///./node_modules/bpmn-js/lib/features/grid-snapping/BpmnGridSnapping.js","webpack:///./node_modules/diagram-js/lib/features/grid-snapping/GridUtil.js","webpack:///./node_modules/diagram-js/lib/features/grid-snapping/GridSnapping.js","webpack:///./node_modules/diagram-js/lib/features/grid-snapping/behavior/ResizeBehavior.js","webpack:///./node_modules/diagram-js/lib/features/grid-snapping/behavior/SpaceToolBehavior.js","webpack:///./node_modules/diagram-js/lib/features/grid-snapping/behavior/index.js","webpack:///./node_modules/diagram-js/lib/features/grid-snapping/index.js","webpack:///./node_modules/bpmn-js/lib/features/grid-snapping/behavior/AutoPlaceBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/grid-snapping/behavior/CreateParticipantBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/grid-snapping/behavior/LayoutConnectionBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/grid-snapping/behavior/index.js","webpack:///./node_modules/bpmn-js/lib/features/grid-snapping/index.js","webpack:///./node_modules/bpmn-js/lib/features/interaction-events/BpmnInteractionEvents.js","webpack:///./node_modules/bpmn-js/lib/features/interaction-events/index.js","webpack:///./node_modules/bpmn-js/lib/features/keyboard/BpmnKeyboardBindings.js","webpack:///./node_modules/bpmn-js/lib/features/keyboard/index.js","webpack:///./node_modules/diagram-js/lib/features/keyboard-move-selection/KeyboardMoveSelection.js","webpack:///./node_modules/diagram-js/lib/features/keyboard-move-selection/index.js","webpack:///./node_modules/diagram-js/lib/features/change-support/ChangeSupport.js","webpack:///./node_modules/diagram-js/lib/features/change-support/index.js","webpack:///./node_modules/diagram-js/lib/features/resize/Resize.js","webpack:///./node_modules/diagram-js/lib/features/resize/ResizePreview.js","webpack:///./node_modules/diagram-js/lib/features/resize/ResizeHandles.js","webpack:///./node_modules/diagram-js/lib/features/resize/index.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/util/CategoryUtil.js","webpack:///./node_modules/bpmn-js/lib/features/label-editing/LabelEditingProvider.js","webpack:///./node_modules/bpmn-js/lib/features/label-editing/LabelEditingPreview.js","webpack:///./node_modules/bpmn-js/lib/features/label-editing/index.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/AdaptiveLabelPositioningBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/AppendBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/AssociationBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/AttachEventBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/BoundaryEventBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/RootElementReferenceBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/CreateBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/FixHoverBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/CreateDataObjectBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/CreateParticipantBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/DataInputAssociationBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/UpdateSemanticParentHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/DataStoreBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/DeleteLaneBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/DetachEventBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/DropOnFlowBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/EventBasedGatewayBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/GroupBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/util/LineIntersect.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ImportDockingFix.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/IsHorizontalFix.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/util/GeometricUtil.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/util/LineAttachmentUtil.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/util/LabelLayoutUtil.js","webpack:///./node_modules/diagram-js/lib/util/AttachUtil.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/LabelBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ModelingFeedback.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ReplaceConnectionBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/RemoveParticipantBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ReplaceElementBehaviour.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/util/ResizeUtil.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ResizeBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ResizeLaneBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/RemoveElementBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/SpaceToolBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/SubProcessStartEventBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/ToggleElementCollapseBehaviour.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/UnclaimIdBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/UpdateFlowNodeRefsBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/UnsetDefaultFlowBehavior.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/behavior/index.js","webpack:///./node_modules/bpmn-js/lib/features/snapping/BpmnSnappingUtil.js","webpack:///./node_modules/bpmn-js/lib/features/rules/BpmnRules.js","webpack:///./node_modules/bpmn-js/lib/features/rules/index.js","webpack:///./node_modules/diagram-js/lib/features/ordering/OrderingProvider.js","webpack:///./node_modules/bpmn-js/lib/features/ordering/BpmnOrderingProvider.js","webpack:///./node_modules/bpmn-js/lib/features/ordering/index.js","webpack:///./node_modules/diagram-js/lib/command/CommandStack.js","webpack:///./node_modules/diagram-js/lib/command/index.js","webpack:///./node_modules/diagram-js/lib/features/tooltips/Tooltips.js","webpack:///./node_modules/diagram-js/lib/features/tooltips/index.js","webpack:///./node_modules/diagram-js/lib/util/Removal.js","webpack:///./node_modules/diagram-js/lib/features/label-support/LabelSupport.js","webpack:///./node_modules/diagram-js/lib/features/label-support/index.js","webpack:///./node_modules/diagram-js/lib/features/attach-support/AttachSupport.js","webpack:///./node_modules/diagram-js/lib/features/attach-support/index.js","webpack:///./node_modules/diagram-js/lib/features/tool-manager/ToolManager.js","webpack:///./node_modules/diagram-js/lib/features/tool-manager/index.js","webpack:///./node_modules/diagram-js/lib/features/space-tool/SpaceUtil.js","webpack:///./node_modules/diagram-js/lib/features/space-tool/SpaceTool.js","webpack:///./node_modules/diagram-js/lib/features/space-tool/SpaceToolPreview.js","webpack:///./node_modules/diagram-js/lib/features/space-tool/index.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/BpmnFactory.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/BpmnUpdater.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/ElementFactory.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/AlignElementsHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/AppendShapeHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/CreateConnectionHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/CreateElementsHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/CreateShapeHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/CreateLabelHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/DeleteConnectionHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/DeleteElementsHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/DeleteShapeHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/DistributeElementsHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/LayoutConnectionHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/MoveConnectionHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/helper/AnchorsHelper.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/helper/MoveClosure.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/helper/MoveHelper.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/MoveElementsHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/MoveShapeHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/ReconnectConnectionHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/ReplaceShapeHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/ResizeShapeHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/SpaceToolHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/ToggleShapeCollapseHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/UpdateAttachmentHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/cmd/UpdateWaypointsHandler.js","webpack:///./node_modules/diagram-js/lib/features/modeling/Modeling.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/UpdatePropertiesHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/UpdateCanvasRootHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/AddLaneHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/SplitLaneHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/ResizeLaneHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/UpdateFlowNodeRefsHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/IdClaimHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/cmd/SetColorHandler.js","webpack:///./node_modules/bpmn-js/lib/features/label-editing/cmd/UpdateLabelHandler.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/Modeling.js","webpack:///./node_modules/diagram-js/lib/layout/BaseLayouter.js","webpack:///./node_modules/diagram-js/lib/layout/ManhattanLayout.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/BpmnLayouter.js","webpack:///./node_modules/diagram-js/lib/layout/CroppingConnectionDocking.js","webpack:///./node_modules/bpmn-js/lib/features/modeling/index.js","webpack:///./node_modules/diagram-js/lib/features/move/Move.js","webpack:///./node_modules/diagram-js/lib/features/move/MovePreview.js","webpack:///./node_modules/diagram-js/lib/features/move/index.js","webpack:///./node_modules/diagram-js/lib/features/palette/Palette.js","webpack:///./node_modules/diagram-js/lib/features/palette/index.js","webpack:///./node_modules/diagram-js/lib/features/lasso-tool/LassoTool.js","webpack:///./node_modules/diagram-js/lib/features/lasso-tool/index.js","webpack:///./node_modules/diagram-js/lib/features/hand-tool/HandTool.js","webpack:///./node_modules/diagram-js/lib/features/hand-tool/index.js","webpack:///./node_modules/diagram-js/lib/features/global-connect/GlobalConnect.js","webpack:///./node_modules/diagram-js/lib/features/global-connect/index.js","webpack:///./node_modules/bpmn-js/lib/features/palette/PaletteProvider.js","webpack:///./node_modules/bpmn-js/lib/features/palette/index.js","webpack:///./node_modules/bpmn-js/lib/features/replace-preview/BpmnReplacePreview.js","webpack:///./node_modules/bpmn-js/lib/features/replace-preview/index.js","webpack:///./node_modules/bpmn-js/lib/features/snapping/BpmnConnectSnapping.js","webpack:///./node_modules/diagram-js/lib/features/snapping/SnapContext.js","webpack:///./node_modules/diagram-js/lib/features/snapping/CreateMoveSnapping.js","webpack:///./node_modules/bpmn-js/lib/features/snapping/BpmnCreateMoveSnapping.js","webpack:///./node_modules/diagram-js/lib/features/snapping/ResizeSnapping.js","webpack:///./node_modules/diagram-js/lib/features/snapping/Snapping.js","webpack:///./node_modules/diagram-js/lib/features/snapping/index.js","webpack:///./node_modules/bpmn-js/lib/features/snapping/index.js","webpack:///./node_modules/diagram-js/lib/features/search-pad/SearchPad.js","webpack:///./node_modules/diagram-js/lib/features/search-pad/index.js","webpack:///./node_modules/bpmn-js/lib/features/search/BpmnSearchProvider.js","webpack:///./node_modules/bpmn-js/lib/features/search/index.js","webpack:///./node_modules/bpmn-js/lib/Modeler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/TasklistProps.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/LinkProps.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/ElementTemplatesLoader.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/ComboEntryFactory.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ExternalTaskConfigurationProps.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./node_modules/lodash/_baseCreate.js","webpack:///./node_modules/lodash/toString.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ExtensionElements.js","webpack:///./node_modules/lodash/_Map.js","webpack:///./node_modules/lodash/_hashHas.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Listener.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/cmd/index.js","webpack:///./node_modules/lodash/_MapCache.js","webpack:///./node_modules/bpmnlint-utils/dist/index.esm.js","webpack:///./node_modules/lodash/_baseIsEqualDeep.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/InputOutputProps.js","webpack:///./node_modules/lodash/_mapCacheClear.js","webpack:///./node_modules/selection-update/index.js","webpack:///./node_modules/lodash/_baseGetAllKeys.js","webpack:///./node_modules/diagram-js/lib/util/ClickTrap.js","webpack:///./node_modules/lodash/_Stack.js","webpack:///./node_modules/lodash/_setCacheAdd.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/CamundaPropertiesProvider.js","webpack:///./node_modules/lodash/_stackGet.js","webpack:///./node_modules/lodash/_arrayEach.js","webpack:///./node_modules/diagram-js/lib/navigation/keyboard-move/KeyboardMove.js","webpack:///./node_modules/diagram-js/lib/navigation/keyboard-move/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/EntryFieldDescription.js","webpack:///./node_modules/lodash/_apply.js","webpack:///./node_modules/lodash/hasIn.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/MultiInstanceLoopCharacteristics.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/lodash/_createBind.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/ErrorEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/CheckboxEntryFactory.js","webpack:///./node_modules/bpmnlint/rules/no-gateway-join-fork.js","webpack:///./node_modules/lodash/_arrayIncludes.js","webpack:///./node_modules/lodash/_copyObject.js","webpack:///./node_modules/lodash/_overArg.js","webpack:///./node_modules/lodash/filter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/AsynchronousContinuationProps.js","webpack:///./node_modules/lodash/_mapCacheDelete.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/CategoryHelper.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ImplementationType.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/ProcessProps.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/_baseIsMatch.js","webpack:///./node_modules/diagram-js/lib/util/Math.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/FormHelper.js","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/lodash/flattenDeep.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/CustomProps.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/JobRetryTimeCycle.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/qs/lib/parse.js","webpack:///./node_modules/lodash/_baseFilter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Script.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/bpmnlint/lib/test-rule.js","webpack:///./node_modules/lodash/_equalArrays.js","webpack:///./node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/lodash/_mapCacheHas.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/CompensateEventDefinition.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Delegate.js","webpack:///./node_modules/lodash/_reorder.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/ElementReferenceProperty.js","webpack:///./node_modules/lodash/_getAllKeys.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/InputOutputParameter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/InputOutputParameterProps.js","webpack:///./node_modules/lodash/_mergeData.js","webpack:///./node_modules/lodash/_setToArray.js","webpack:///./node_modules/diagram-js/lib/util/PositionUtil.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ResultVariable.js","webpack:///./node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/StartEventInitiator.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/_equalObjects.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ErrorEventProps.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/qs/lib/formats.js","webpack:///./node_modules/lodash/_baseSetData.js","webpack:///./node_modules/bpmnlint/rules/no-implicit-split.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///./node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/lodash/_DataView.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./node_modules/lodash/_countHolders.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/VersionTagProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/PropertiesActivator.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/PropertiesProps.js","webpack:///./node_modules/lodash/_getWrapDetails.js","webpack:///./node_modules/lodash/_baseIteratee.js","webpack:///./node_modules/lodash/_hashGet.js","webpack:///./node_modules/lodash/noop.js","webpack:///./node_modules/bpmnlint/rules/no-complex-gateway.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ExternalTaskPriority.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/TextInputEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/DocumentationProps.js","webpack:///./node_modules/lodash/_baseIsEqual.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/ConditionalEventDefinition.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./src/components/Search.vue?23ee","webpack:///src/components/Search.vue","webpack:///./src/components/Search.vue?329d","webpack:///./src/components/Search.vue","webpack:///./node_modules/bpmnlint/rules/helper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/CreateAndReferenceHandler.js","webpack:///./node_modules/bpmnlint/rules/single-blank-start-event.js","webpack:///./node_modules/lodash/_setToString.js","webpack:///./src/bpmn/lint/.bpmnlintrc","webpack:///./node_modules/lodash/_wrapperClone.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/VariableMappingProps.js","webpack:///./node_modules/bpmnlint/rules/no-disconnected.js","webpack:///./node_modules/lodash/_cacheHas.js","webpack:///./node_modules/lodash/_Set.js","webpack:///./node_modules/hammerjs/hammer.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/bpmnlint/rules/label-required.js","webpack:///./node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/lodash/_composeArgs.js","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/lodash/_baseToString.js","webpack:///./node_modules/lodash/_createPartial.js","webpack:///./node_modules/lodash/_stackSet.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/PropertiesPanel.js","webpack:///./node_modules/qs/lib/utils.js","webpack:///./node_modules/lodash/stubArray.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/bpmnlint/rules/no-inclusive-gateway.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/MultiCommandHandler.js","webpack:///./node_modules/bpmnlint/rules/start-event-required.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/EventDefinitionHelper.js","webpack:///./node_modules/lodash/_SetCache.js","webpack:///./node_modules/lodash/_baseIsNaN.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/lodash/_insertWrapDetails.js","webpack:///./node_modules/lodash/_setCacheHas.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./node_modules/lodash/assign.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ParticipantHelper.js","webpack:///./node_modules/lodash/map.js","webpack:///./node_modules/diagram-js/lib/util/Cursor.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/SelectEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/UpdateBusinessObjectHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ImplementationTypeHelper.js","webpack:///./node_modules/lodash/_Hash.js","webpack:///./node_modules/lodash/_hasPath.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/AsyncContinuation.js","webpack:///./node_modules/bpmnlint/lib/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/Helper.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./node_modules/lodash/_basePropertyDeep.js","webpack:///./node_modules/bpmn-js-bpmnlint/node_modules/diagram-js/lib/util/EscapeUtil.js","webpack:///./node_modules/bpmn-js-bpmnlint/dist/index.esm.js","webpack:///./node_modules/lodash/_createRecurry.js","webpack:///./node_modules/css.escape/css.escape.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/EntryFactory.js","webpack:///./node_modules/lodash/_replaceHolders.js","webpack:///./node_modules/core-js/internals/is-array.js","webpack:///./node_modules/lodash/_createWrap.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConnectorInputOutputParameterProps.js","webpack:///./node_modules/lodash/_LodashWrapper.js","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/lodash/keys.js","webpack:///./node_modules/lodash/_baseXor.js","webpack:///./node_modules/lodash/_mapToArray.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/CandidateStarterProps.js","webpack:///./node_modules/lodash/_baseProperty.js","webpack:///./node_modules/lodash/_stackClear.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/FormProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Tasklist.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/ExecutableProps.js","webpack:///./node_modules/lodash/_shortOut.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/EscalationEventDefinition.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///./node_modules/lodash/_setData.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/EventDefinitionReference.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/MessageEventDefinition.js","webpack:///./node_modules/lodash/property.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/JobConfigurationProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/FieldInjection.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/ValidationAwareTextInput.js","webpack:///./node_modules/lodash/_listCacheHas.js","webpack:///./src/components/FileUpload.vue?6704","webpack:///./node_modules/lodash/_updateWrapDetails.js","webpack:///./node_modules/bpmnlint/rules/fake-join.js","webpack:///./node_modules/mitt/dist/mitt.es.js","webpack:///./node_modules/scroll-tabs/index.js","webpack:///./node_modules/lodash/isSymbol.js"],"names":["is","find","entryFactory","cmdHelper","ImplementationTypeHelper","scriptImplementation","timerImplementation","isTimeoutTaskListener","listener","eventType","event","getTimerEventDefinition","bo","eventDefinitions","module","exports","group","element","bpmnFactory","options","translate","LISTENER_TYPE_LABEL","class","expression","delegateExpression","script","getSelectedListener","classProp","expressionProp","delegateExpressionProp","scriptProp","executionListenerEventTypeOptions","isSequenceFlow","name","value","taskListenerEventTypeOptions","isSelected","node","entries","push","selectBox","id","label","modelProperty","emptyParameter","get","set","values","updateBusinessObject","selectOptions","eventTypeOptions","selectedListener","isTaskListener","isExecutionListener","hidden","textField","listenerId","undefined","update","validate","listenerType","getImplementationType","create","dataValueLabel","listenerValueLabel","listenerValue","html","template","isScript","timerEventDefinitionHandler","timerEventDefinition","createTimerEventDefinition","timerOptions","idPrefix","Symbol","objectProto","Object","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","getRawTag","isOwn","call","tag","unmasked","e","result","getBusinessObject","callable","flattenDeep","assign","getCallableType","boCalledElement","boCaseRef","callActivityType","DEFAULT_PROPS","calledElement","type","props","updateProperties","isPrototype","nativeKeys","baseKeys","object","key","THRESHOLD","MoveCanvas","eventBus","canvas","context","handleMove","start","position","delta","dragging","lastPosition","last","scroll","dx","x","dy","y","preventDefault","handleEnd","unbind","document","handleStart","target","button","ctrlKey","shiftKey","altKey","bind","on","originalEvent","point","Math","sqrt","pow","$inject","__init__","moveCanvas","__depends__","default","propertiesProvider","inputOutput","inputOutputEntry","insideConnector","concat","getSelectedParameter","InputOutputHelper","getServiceTaskLikeBusinessObject","getConnector","isConnector","connector","connectorId","isArguments","isArray","spreadableSymbol","isConcatSpreadable","isFlattenable","stubFalse","factory","elementHelper","extensionElementsHelper","utils","forEach","generatePropertyId","nextId","getPropertyValues","parent","properties","getPropertiesElement","isExtensionElements","getPropertiesElementInsideExtensionElements","extensionElements","elem","getParent","modelProperties","createParent","addLabel","getElements","addElement","commands","cmd","createElement","addAndRemoveElementsFromList","propertyProps","prop","indexOf","property","addElementsTolist","updateElement","idx","validationError","isIdValid","removeElement","propertyValues","currentProperty","removeElementsFromList","length","removeEntry","table","arrayPush","array","index","offset","isObject","isStrictComparable","strictIndexOf","fromIndex","createInputParameter","binding","parameterValue","parameterDefinition","scriptFormat","definition","createOutputParameter","source","createCamundaProperty","createCamundaIn","createCamundaInOutAttrs","createCamundaInWithBusinessKey","businessKey","createCamundaOut","createCamundaExecutionListenerScript","createCamundaFieldInjection","string","sourceExpression","variables","local","k","baseIsNative","getValue","getNative","freeExports","nodeType","freeModule","moduleExports","Buffer","root","nativeIsBuffer","isBuffer","identity","overRest","setToString","baseRest","func","isAny","eventDefinitionHelper","message","signal","error","escalation","timer","compensation","condition","elementRegistry","events","messageEventDefinition","getMessageEventDefinition","signalEventDefinition","getSignalEventDefinition","errorEvents","errorEventDefinition","getErrorEventDefinition","escalationEvents","showEscalationCodeVariable","escalationEventDefinition","getEscalationEventDefinition","timerEvents","compensationEvents","compensateEventDefinition","getCompensateEventDefinition","conditionalEvents","conditionalEventDefinition","getConditionalEventDefinition","realNames","getFuncName","data","otherFunc","ElementHelper","elementType","$parent","isConditionalForking","defaultFlow","outgoing","hasCondition","flow","conditionExpression","isDefaultFlow","check","reporter","missingCondition","report","baseCreate","createCtor","Ctor","args","arguments","thisBinding","apply","historyTimeToLive","businessObject","isKeyable","castFunction","isObjectLike","coreJsData","maskSrcKey","uid","exec","keys","IE_PROTO","isMasked","getTag","isArrayLike","isTypedArray","mapTag","setTag","isEmpty","splice","size","types","t","anyType","candidateStarterGroupsEntry","description","candidateStarterGroups","candidateStarterUsersEntry","candidateStarterUsers","hasModifier","metaKey","isCmd","isKey","isShift","baseIsEqual","hasIn","matchesStrictComparable","toKey","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","baseMatchesProperty","path","srcValue","objValue","escapeHTML","entryFieldDescription","link","showLink","handleClick","Error","resource","cssClasses","resultVariable","attributeInfo","bpmn","version","versionTag","tenantId","cmmn","dmn","mapDecisionResultOptions","delegateVariableMappingOptions","getCamundaInWithBusinessKey","camundaIn","camundaInParams","getExtensionElements","param","setBusinessKey","text","camundaInWithBusinessKey","deleteBusinessKey","camundaInExtensions","isSupportedCallableType","bindingOptions","getAttribute","getCallActivityBindingValue","attr","getDelegateVariableMappingType","boVariableMappingClass","boVariableMappingDelegateExpression","delegateVariableMappingType","callableElementRef","callableElementLabel","newCallableElementRef","elementRef","filter","bindingOption","callableBinding","attrVer","attrVerTag","callableVersion","checkbox","callableBusinessKey","hideResultVariable","mapDecisionResult","delegateVariableMapping","delegateVariableMappingLabel","memoizeCapped","rePropName","reEscapeChar","stringToPath","charCodeAt","replace","match","number","quote","subString","LOW_PRIORITY","KeyboardBindings","keyboard","self","this","editorActions","registerBindings","addListener","action","fn","isRegistered","keyEvent","trigger","NavigatedViewer","_navigationModules","_modules","request","config","instance","axios","baseURL","requestForChatbot","Uint8Array","eq","equalArrays","mapToArray","setToArray","boolTag","dateTag","errorTag","numberTag","regexpTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","valueOf","equalByTag","other","bitmask","customizer","equalFunc","stack","byteLength","byteOffset","buffer","convert","isPartial","stacked","Promise","CreateBusinessObjectListHandler","_elementRegistry","_bpmnFactory","ensureNotNull","ensureList","execute","currentObject","propertyName","newObjects","changed","childObjects","obj","childObject","previousChilds","revert","getTimerDefinitionType","timeDate","timeCycle","timeDuration","getTimerDefinition","timerOrFunction","createFormalExpression","body","TimerEventDefinition","prefix","timerDefinition","timerDefinitionType","newType","oldType","fails","wellKnownSymbol","V8_VERSION","SPECIES","METHOD_NAME","constructor","foo","Boolean","hashDelete","has","__data__","getMapData","mapCacheSet","isExternal","topicEntry","externalTopic","nativeMax","max","transform","Array","otherArgs","memoize","MAX_MEMOIZE_SIZE","cache","clear","inherits","getTemplate","PropertiesActivator","HIGHER_PRIORITY","CustomElementsPropertiesActivator","elementTemplates","isEntryVisible","entry","isPropertyEditable","isEntryEditable","CUSTOM_PROPERTIES_PATTERN","DEFAULT_ENTRIES_VISIBLE","_all","isCustomEntry","test","entryId","entriesVisible","defaultVisible","entryVisible","getProperty","editable","indexes","split","scopeName","parseInt","isNaN","scopes","baseFor","baseForOwn","iteratee","baseEach","baseAggregator","collection","setter","accumulator","mapCacheGet","nativeCreate","HASH_UNDEFINED","hashSet","baseGetTag","argsTag","baseIsArguments","fieldInjection","insideListener","fieldInjectionEntry","nameEntryFactory","createCategoryValue","initializeCategory","semantic","rootElement","getRootElement","definitions","categoryValue","categoryValueRef","setGroupName","newLabel","getGroupName","arrayMap","baseValues","createWrap","getHolder","replaceHolders","WRAP_BIND_FLAG","WRAP_PARTIAL_FLAG","thisArg","partials","holders","placeholder","baseHasIn","createFind","findIndex","metaMap","noop","getData","listCacheClear","nameEntry","textBox","render","_vm","_h","$createElement","_c","_self","staticStyle","attrs","loadTextFromFile","staticRenderFns","component","objectToString","LazyWrapper","LodashWrapper","baseLodash","wrapperClone","lodash","ElementTemplates","_templates","descriptors","templates","descriptor","getAll","testRule","categoryMap","0","1","2","Linter","resolver","cachedRules","cachedConfigs","prefixPackage","pkg","startsWith","unprefixPackage","substring","applyRule","moddleRoot","ruleDefinition","rule","category","reports","map","console","resolveRule","ruleName","parseRuleName","resolve","then","ruleFactory","resolveConfig","configName","parseConfigName","actualConfig","normalizeConfig","resolveRules","resolveConfiguredRules","rulesConfig","parsedRules","parseRuleValue","enabledRules","loaders","all","parents","extends","inheritedRules","overrideRules","rules","reduce","currentRules","lint","ruleDefinitions","allReports","toLowerCase","localPackage","_","ns","packageName","getSimplePackageName","validatedRules","normalizedRules","normalizedName","CmdHelper","newProperties","listPropertyName","objectsToAdd","referencePropertyName","objectsToRemove","setList","updatedObjectList","ExtensionElementsHelper","extensionValues","elements","addEntry","baseFindIndex","predicate","fromRight","freeGlobal","freeSelf","Function","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","LARGE_ARRAY_SIZE","baseUniq","comparator","includes","isCommon","seen","outer","computed","seenIndex","arrayFilter","resIndex","overArg","getPrototype","getPrototypeOf","baseUnary","baseDifference","valuesLength","valuesIndex","isIterateeCall","createAssigner","assigner","sources","guard","listenerEntry","KEYDOWN_EVENT","KEYUP_EVENT","DEFAULT_PRIORITY","Keyboard","_config","_eventBus","_keydownHandler","_keyupHandler","_fire","bindTo","isInput","contentEditable","_keyHandler","eventBusResult","fire","_node","getBinding","priority","removeListener","off","keyboardBindings","stackDelete","validationAwareTextField","setProperty","labelTarget","idValue","idError","domQuery","query","domClear","domify","Ids","SPACE_REGEX","QNAME_REGEX","ID_REGEX","HTML_ESCAPE_MAP","'","selectedOption","selectedIndex","selectedType","elementSyntax","inputNode","typeSelect","getRoot","filterElementsByType","objectList","list","findRootElementsByType","referencedType","rootElements","removeAllChildren","domElement","firstChild","removeChild","addEmptyParameter","refreshOptionsModel","model","referableObjects","updateOptionsDropDown","domSelector","entryNode","option","optionEntry","appendChild","assigned","$model","ids","idExists","validateId","containsSpace","nextPrefixed","triggerClickEvent","evt","createEvent","MouseEvent","view","window","bubbles","cancelable","initEvent","dispatchEvent","createEventObject","fireEvent","str","composeArgsRight","isCurried","argsIndex","argsLength","holdersIndex","holdersLength","rightIndex","rightLength","rangeLength","isUncurried","isFunction","isLength","baseAssignValue","assignValue","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","toSource","reRegExpChar","reIsHostCtor","funcProto","funcToString","reIsNative","RegExp","pattern","DROPDOWN_TYPE","VALID_TYPES","PROPERTY_TYPE","CAMUNDA_PROPERTY_TYPE","CAMUNDA_INPUT_PARAMETER_TYPE","CAMUNDA_OUTPUT_PARAMETER_TYPE","CAMUNDA_IN_TYPE","CAMUNDA_OUT_TYPE","CAMUNDA_IN_BUSINESS_KEY_TYPE","CAMUNDA_EXECUTION_LISTENER","CAMUNDA_FIELD","VALID_BINDING_TYPES","Validator","_templatesById","_validTemplates","_errors","addAll","add","_logError","err","_validateTemplate","appliesTo","_validateProperties","_validateScopes","scope","validProperties","_validateProperty","bindingType","join","choices","every","isDropdownChoiceValid","getErrors","getValidTemplates","c","nullTag","undefinedTag","inputOutputHelper","extensionElementsEntry","getInputOutput","getInputParameters","getOutputParameters","getInputParameter","getOutputParameter","createInputOutput","createParameter","ensureInputOutputSupported","isInputOutputSupported","ensureOutparameterSupported","areOutputParametersSupported","TYPE_LABEL","getSelected","selection","inputEntry","parameter","outputEntry","newElement","inputParameters","outputParameters","newElem","getter","otherProp","firstLength","secondLength","setOptionLabelValue","suffix","$type","resizable","createExtensionElement","removeExtensionElement","onSelectionChange","deselect","isLaziable","funcName","hasEndEvent","flowElements","some","WeakMap","defineProperty","getMatchData","historyTimeToLiveEntry","getStepSize","range","steps","minLinearRange","min","maxLinearRange","absoluteLinearRange","abs","cap","scale","sign","n","RANGE","NUM_STEPS","DELTA_THRESHOLD","DEFAULT_SCALE","ZoomScroll","_enabled","_canvas","_container","_handleWheel","_totalDelta","_scale","_init","enabled","reset","zoom","stepSize","_zoom","isZoom","isHorizontalScroll","factor","deltaMode","elementRect","getBoundingClientRect","clientX","left","clientY","top","deltaY","deltaX","stepZoom","direction","currentLinearZoomLevel","newLinearZoomLevel","round","newLogZoomLevel","toggle","newEnabled","handleWheel","oldEnabled","zoomScroll","now","Date","triggeredByEvent","flowElement","formats","arrayPrefixGenerators","brackets","indices","repeat","toISO","toISOString","defaults","delimiter","encode","encoder","encodeValuesOnly","serializeDate","date","skipNulls","strictNullHandling","stringify","generateArrayPrefix","sort","allowDots","formatter","keyValue","String","objKeys","i","opts","TypeError","format","formatters","arrayFormat","joined","addQueryPrefix","createAggregator","keyBy","baseXor","isArrayLikeObject","xor","arrays","arraySome","DataView","Map","Set","objectTag","promiseTag","weakMapTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","ctorString","parse","copyArray","implementationType","delegate","external","domClosest","closest","domClasses","classes","isDmnCapable","isExternalCapable","isServiceTaskLike","getTabNode","el","containerEl","hasDmnSupport","hasExternalSupport","hasServiceTaskLikeSupport","connectorTabEl","textContent","remove","innerHTML","getTemplateId","TEMPLATE_ATTR","applyTemplate","newTemplateId","oldTemplate","newTemplate","getTemplateOptions","currentTemplateId","emptyOption","allOptions","isDefault","defaultOption","isDefaultTemplate","currentOption","unknownTemplate","templateId","elementTemplate","disabled","createHybrid","createRecurry","createCurry","arity","wrapper","baseIsNaN","baseIndexOf","createBaseEach","hashClear","findExtension","findExtensions","CAMUNDA_SERVICE_TASK_LIKE","ChangeElementTemplateHandler","modeling","commandStack","getOrCreateExtensionElements","updateModelerTemplate","updateIoMappings","oldMappings","newMappings","createInputOutputMappings","updateCamundaField","createCamundaFieldInjections","field","updateCamundaProperties","oldProperties","createCamundaProperties","createBpmnPropertyUpdates","newPropertiesCount","updateInOut","oldInOut","newInOut","createCamundaInOut","inout","updateExecutionListener","oldExecutionsListeners","newExecutionListeners","createCamundaExecutionListeners","executionListener","updateScopeElements","scopeDefinition","scopeElement","oldScope","preExecute","propertyUpdates","p","propertyValue","bindingTarget","language","injections","inOuts","toFinite","toInteger","remainder","multiInstanceLoopCharacteristics","jobRetryTimeCycle","asyncContinuation","getLoopCharacteristics","loopCharacteristics","ensureMultiInstanceSupported","labelPrefix","defaultParameters","canBeShown","show","isShown","$","$filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","proto","forced","callbackfn","getWrapDetails","insertWrapDetails","updateWrapDetails","setWrapToString","reference","isAsyncBefore","isAsyncAfter","isExclusive","getFailedJobRetryTimeCycle","removeFailedJobRetryTimeCycle","retryTimeCycles","cycle","arrayAggregator","baseIteratee","initializer","arrayEach","isArr","isArrLike","baseTimes","eventDefinitionReference","elementReferenceProperty","elementName","referenceProperty","newElementIdPrefix","shouldValidate","UpdateBusinessObjectListHandler","previousList","listCopy","parentObject","ModelUtil","implementationTypeHelper","elems","getParameters","stackHas","showErrorCodeVariable","showErrorMessageVariable","modelPropertyValue","setValue","domAttr","updateSelection","TABLE_ROW_DIV_SNIPPET","DELETE_ROW_BUTTON_SNIPPET","createInputRowTemplate","canRemove","createInputTemplate","columns","createLabelRowTemplate","labels","createLabelTemplate","pick","diff","oldValues","valueEqual","oldValue","allKeys","o","getEntryNode","getContainer","getSelection","selectionStart","end","selectionEnd","setSelection","labelRow","canAdd","canUpdate","setControlValue","boElements","__invalidValues","invalidValues","__action","valuesToValidate","createListEntryTemplate","scopeNode","container","deleteElement","rowToDelete","delegateTarget","parentNode","rowNode","input","showTable","validateListItem","isReadOnly","activeElement","global","baseFlatten","depth","isStrict","findIndexFunc","iterable","containerElement","boResultVariable","scriptResultVariable","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","divider","labelText","showLabel","MAX_ARRAY_LENGTH","__wrapped__","__actions__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","webpackPolyfill","deprecate","paths","children","enumerable","l","toNumber","INFINITY","MAX_INTEGER","baseIsMatch","baseMatches","matchData","isConditionalSource","conditionType","conditionLanguage","conditionOrConditionExpression","conditionProps","validationResult","isExpression","canClear","CONDITIONAL_SOURCES","castPath","baseGet","originalArray","C","jobPriorityEntry","jobPriority","assocIndexOf","customElementsPropertiesActivator","elementTemplatesLoader","flowKey","sourceRef","targetRef","keyed","outgoingReported","incomingReported","sourceId","targetId","log","staticClass","ref","uploadSectionFile","fileList","slot","_v","submitUpload","arrayProto","lastIndex","pop","composeArgs","countHolders","reorder","WRAP_BIND_KEY_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_FLIP_FLAG","partialsRight","holdersRight","argPos","ary","isAry","isBind","isBindKey","isFlip","holdersCount","newHolders","reverse","traverse","$descriptor","isGeneric","containedProperties","isAttr","isReference","isMany","child","isIndex","arrayLikeKeys","inherited","isArg","isBuff","isType","skipIndexes","BaseModeler","BaseViewer","_collectIds","_createModdle","moddle","elementsById","claim","MIN_ZOOM","MAX_ZOOM","mouseEvents","service","injector","stopEvent","stopPropagation","stopImmediatePropagation","createTouchRecognizer","stopMouse","allowMouse","setTimeout","recognizer","Manager","inputClass","TouchInput","recognizers","tap","Tap","pan","Pan","threshold","press","Press","pinch","Pinch","doubleTap","taps","requireFailure","force","session","stopped","stop","r","state","curRecognizer","srcEvent","defaultPrevented","TouchInteractionEvents","interactionEvents","move","contextPad","palette","handler","getGfx","initEvents","svg","startGrabCanvas","lx","ly","startGrab","gfx","startZoom","mid","center","ratio","newZoom","elementFromPoint","hover","out","hoverGfx","pad","padRecognizer","TouchFix","addBBoxMarker","markerStyle","fill","rect1","width","height","rect2","touchInteractionEvents","touchFix","arr","sortTopOrMiddle","sortLeftOrCenter","ALIGNMENT_SORTING","right","middle","bottom","AlignElements","_modeling","_getOrientationDetails","vertical","axis","dimension","_isType","_alignmentPosition","sortedElements","centeredElements","firstElement","lastElement","orientation","alignment","centers","hasSharedCenters","getMiddleOrTop","first","filteredElements","waypoints","host","sortFn","alignElements","DEFAULT_HORIZONTAL_DISTANCE","MAX_HORIZONTAL_DISTANCE","PLACEMENT_DETECTION_PAD","getNewShapePosition","getTextAnnotationPosition","getDataElementPosition","getFlowNodePosition","getDefaultPosition","sourceTrbl","sourceMid","horizontalDistance","getFlowNodeDistance","rowSize","margin","getVerticalDistance","orient","escapeDirection","deconflictPosition","toTargetNode","weight","shape","distanceTo","shapeTrbl","toSourceNode","nodes","getTargets","getSources","distancesGrouped","currentDistance","currentDistanceCount","currentDistanceEntry","fav","count","getAutoPlaceClosure","allConnected","getConnected","attachers","shapes","attacher","getConnectedAtPosition","bounds","closure","escapeDelta","nextPosition","existingElement","newPosition","axisDelta","existingTarget","noneFilter","connectionFilter","incoming","AutoPlace","emit","payload","append","newShape","appendShape","AutoPlaceSelectionBehavior","select","autoPlace","autoPlaceSelectionBehavior","CommandInterceptor","unwrapEvent","that","command","hook","handlerFn","unwrap","fullEvent","hooks","AutoResize","_rules","postExecuted","hints","newParent","autoResize","_expand","topLevel","expandings","parentId","collapsed","boundsChanged","newBounds","oldBounds","getResizeDirections","directions","BpmnAutoResize","invoke","RuleProvider","init","AutoResizeProvider","addRule","canResize","BpmnAutoResizeProvider","_getOptimalBounds","getOffset","padding","getPadding","elementsTrbl","targetTrbl","newTrbl","allowed","resizeDirections","resize","resizeShape","resizeLane","actions","canExecute","bpmnAutoResize","bpmnAutoResizeProvider","DRAG_ACTIVE_CLS","isTouchEvent","TouchEvent","getLength","Dragging","defaultOptions","trapClick","toLocalPoint","globalPosition","viewbox","clientRect","dragContext","isTouch","restoreSelection","previousSelection","existingSelection","activate","displacement","globalStart","globalCurrent","globalDelta","localStart","localCurrent","localDelta","active","cancel","keepSelection","cursor","addMarker","previousContext","returnValue","cleanup","checkCancel","which","trapClickAndEnd","untrap","trapTouch","restore","wasActive","endDrag","removeMarker","relativeTo","manual","autoActivate","setOptions","HIGH_PRIORITY","HoverFix","ensureHover","_findTargetGfx","once","setDragHover","unsetHover","ensureOut","hoverFix","AutoScroll","_opts","scrollThresholdIn","scrollThresholdOut","scrollRepeatTimeout","scrollStep","_toBorderPoint","startScroll","stopScroll","between","val","_scrolling","clearTimeout","autoScroll","Rules","_commandStack","circlePath","linePath","points","segments","INTERSECTION_THRESHOLD","getBendpointIntersection","w","bendpoint","getPathIntersection","intersections","a","b","segment2","getApproxIntersection","BENDPOINT_CLS","SEGMENT_DRAGGER_CLS","toCanvasCoordinates","getConnectionIntersection","localPosition","intersection","addBendpoint","parentGfx","cls","groupGfx","visual","cx","cy","hit","createParallelDragger","segmentStart","segmentEnd","draggerGfx","hitWidth","calculateHitWidth","hitHeight","addSegmentDragger","calculateSegmentMoveRegion","segmentLength","segmentLengthXAxis","segmentLengthYAxis","Bendpoints","bendpointMove","connectionSegmentMove","isIntersectionMiddle","treshold","p0","p1","aligned","xDelta","yDelta","calculateIntersectionThreshold","connection","relevantSegment","activateBendpointMove","bindInteractionEvents","eventName","triggerMouseEvent","getBendpointsContainer","layer","getLayer","getSegmentDragger","createBendpoints","createSegmentDraggers","segmentDraggerGfx","clearBendpoints","clearSegmentDraggers","addHandles","updateHandles","updateFloatingBendpointPosition","floating","updateSegmentDraggerPosition","draggerVisual","relativePosition","getDraggerVisual","bendpointsGfx","marker","newSelection","primary","registerEvent","unregisterEvent","newId","bendpointContainer","RECONNECT_START","RECONNECT_END","UPDATE_WAYPOINTS","BendpointMove","_injector","bendpointIndex","insert","getGraphics","connectionGfx","newWaypoints","slice","docking","cropWaypoints","updateWaypoints","isReverse","reconnect","connectionDocking","getCroppedWaypoints","MARKER_OK","MARKER_NOT_OK","MARKER_CONNECT_HOVER","MARKER_CONNECT_UPDATING","MARKER_ELEMENT_HIDDEN","BendpointMovePreview","connectionPreview","connectionEnd","connectionStart","noCropping","noLayout","drawPreview","cleanUp","axisAdd","axisSet","axisFenced","maxValue","minValue","fencedValue","flipAxis","getDocking","referenceElement","moveAxis","referenceMid","inverseAxis","original","ConnectionSegmentMove","graphicsFactory","cropConnection","croppedWaypoints","oldWaypoints","redrawConnection","updateDragger","segmentOffset","segmentStartIndex","segmentEndIndex","draggerPosition","filterRedundantWaypoints","filteredWaypoints","dragPosition","originalWaypoints","sourceToSegmentOrientation","targetToSegmentOrientation","newSegmentStart","newSegmentEnd","waypointCount","shift","unshift","newSegmentStartIndex","filtered","segmentMove","tolerance","snapValue","topLeft","bottomRight","defaultValue","isSnapped","snapped","setSnapped","previousValue","getChildren","TOLERANCE","BendpointSnapping","snapTo","rem","getConnectionSegmentSnaps","snapPoints","referenceWaypoints","horizontal","getBendpointSnaps","sx","sy","hoverMid","bendpoints","bendpointMovePreview","bendpointSnapping","Connect","canConnect","canConnectReverse","connect","ConnectPreview","startPosition","connectPreview","MARKER_CONNECTION_PREVIEW","ConnectionPreview","elementFactory","_graphicsFactory","_elementFactory","_connectionDocking","_layouter","cacheReturnValues","returnValues","firstArgument","JSON","ensureConnectionAttrs","connectionPreviewGfx","getConnection","noNoop","createConnectionPreviewGfx","layoutConnection","drawConnection","drawNoopPreview","createNoopConnection","sourcePath","getShapePath","targetPath","connectionPath","getConnectionPath","createConnection","pointerEvents","getDefaultLayer","isTextNode","Node","TEXT_NODE","toArray","nodeList","TextBox","content","keyHandler","resizeHandler","handlePaste","DirectEditing","_providers","_textbox","_handleKey","_handleResize","style","parentStyle","maxWidth","maxHeight","minWidth","minHeight","backgroundColor","overflow","border","boxSizing","wordWrap","textAlign","outline","contentStyle","centerVertically","innerText","lastChild","clipboardData","insertText","hasResized","success","execCommand","_insertTextIE","startContainer","endContainer","startOffset","endOffset","commonAncestorContainer","childNodesArray","childNodes","containerTextContent","textNode","createTextNode","insertBefore","startContainerChildIndex","endContainerChildIndex","childNode","fontSize","scrollHeight","offsetHeight","resizeHandle","Infinity","startX","startY","startWidth","startHeight","onMouseDown","onMouseMove","onMouseUp","newWidth","newHeight","borderTop","borderRight","borderBottom","borderLeft","destroy","removeAttribute","trim","getRangeAt","createRange","selectNodeContents","setStart","setEnd","removeAllRanges","addRange","registerProvider","provider","isActive","_active","close","complete","containerBounds","previousBounds","$textbox","newText","previousText","keyCode","charCode","directEditing","entrySelector","ContextPad","overlays","_overlays","_overlaysConfig","_current","addClasses","classNames","actualClassNames","open","isOpen","current","providers","getEntries","_getProviders","entriesOrUpdater","getContextPadEntries","_updateAndOpen","getPad","grouping","control","className","title","imageUrl","overlaysConfig","_overlayId","MARKER_TYPES","NODES_CAN_HAVE_MARKER","PreviewSupport","styles","_styles","_clonedMarkers","clonedMarker","getMarker","markerType","referenceToId","idToReference","canHaveMarker","nodeName","addDragger","dragger","bbox","_cloneMarkers","addFrame","frame","_cloneMarker","markerId","clonedMarkerId","defs","_svg","previewSupport","MARKER_ATTACH","MARKER_NEW_PARENT","PREFIX","Create","canCreate","isLabel","isConnection","attach","isSingleShape","targetParent","targetAttach","setMarker","m","ensureConstraints","createElements","waypoint","createConstraints","CreatePreview","createDragGroup","dragGroup","childrenGfx","_createContainer","drawShape","defaultLayer","createPreview","DATA_REF","CLOSE_EVENTS","PopupMenu","setTransform","providerId","_getEntries","headerEntries","_getHeaderEntries","hasEntries","hasHeaderEntries","_emit","_createEntries","_attachContainer","_bindAutoClose","_unbindAutoClose","_getEntry","getPopupMenuEntries","getPopupMenuHeaderEntries","getHeaderEntries","visibility","_updateScale","_assureIsInbounds","minScale","maxScale","scaleConfig","containerX","offsetLeft","containerY","offsetTop","containerWidth","scrollWidth","containerHeight","overAxis","cursorPosition","entriesContainer","entryContainer","_createEntry","entryClasses","popupMenu","Clipboard","_data","clipboard","Mouse","setLastMoveEvent","mousemoveEvent","_lastMoveEvent","addEventListener","_lastMouseEvent","removeEventListener","createMoveEvent","screenX","screenY","initMouseEvent","getLastMoveEvent","mouse","CopyPaste","_create","_clipboard","_mouse","parentCopied","isAttacher","copyWaypoints","createElementsBehavior","copyWaypoint","copy","tree","createTree","paste","_createElements","_paste","branch","createLabel","createShape","hasRelations","elementsData","canCopy","addElementData","foundElementData","removeElementData","elementData","_index","addRelatedElements","copyPaste","copyProperties","removeProperties","BpmnCopyPaste","moddleCopy","references","resolveReferences","attachedToRef","oldBusinessObject","di","bpmnProcess","copyElement","newBusinessObject","DISALLOWED_PROPERTIES","ModdleCopy","_moddle","propertyNames","parentDescriptor","getPropertyNames","keepDefaultProperties","$instanceOf","sourceElement","targetElement","canCopyProperties","sourceProperty","copiedProperty","copyProperty","canSetProperty","propertyDescriptor","getPropertyDescriptor","isId","childProperties","childProperty","getElementDescriptor","bpmnCopyPaste","Replace","replaceElement","oldElement","newElementData","centerX","centerY","replaceShape","CUSTOM_PROPERTIES","toggeling","targetCollapsed","oldCollapsed","isExpanded","BpmnReplace","isSubProcess","toggleCollapse","elementProps","newElementProps","copyProps","hasEventDefinition","eventDefinitionType","moveChildren","processRef","_getDefaultSize","a1","a2","bpmnReplace","isDifferentType","eventDefinition","isTypeEqual","isEventDefinitionEqual","isTriggeredByEventEqual","isExpandedEqual","START_EVENT","actionName","INTERMEDIATE_EVENT","END_EVENT","GATEWAY","instantiate","eventGatewayType","SUBPROCESS_EXPANDED","TRANSACTION","EVENT_SUB_PROCESS","TASK","BOUNDARY_EVENT","cancelActivity","EVENT_SUB_PROCESS_START_EVENT","isInterrupting","SEQUENCE_FLOW","PARTICIPANT","ReplaceMenuProvider","_popupMenu","_bpmnReplace","_translate","register","differentType","isInterruptingEqual","isCancelActivityEqual","isTargetSubProcess","isTargetExpanded","_createSequenceFlowEntries","_getLoopEntries","_getAdHocEntry","replaceOptions","menuEntries","_createMenuEntry","replaceAction","menuEntry","toggleLoopEntry","isSequential","isLoop","isParallel","loopEntries","isAdHoc","adHocEntry","replaceMenuProvider","DEFAULT_CHILD_BOX_PADDING","substractTRBL","trblA","trblB","resizeBounds","resizeTRBL","applyConstraints","trbl","resizeConstraints","currentBounds","currentTrbl","getMinResizeBounds","minDimensions","childrenBounds","currentBox","minBox","childrenBox","combinedBox","asPadding","mayBePadding","addPadding","isBBoxChild","computeChildrenBBox","shapeOrChildren","getTRBLResize","LANE_PARENTS","LANE_INDENTATION","collectLanes","collectedShapes","s","getChildLanes","getLanesRoot","computeLanesResize","initialShapes","allLanes","shapeNewTrbl","trblResize","resizeNeeded","topResize","rightResize","bottomResize","leftResize","otherTrbl","ContextPadProvider","_contextPad","_connect","_autoPlace","click","isEventType","eventBo","isDefinition","def","startConnect","removeElements","getReplaceMenuPosition","Y_OFFSET","diagramContainer","diagramRect","padRect","pos","appendAction","appendStart","dragstart","splitLaneHandler","splitLane","childLanes","addLane","isForCompensation","deleteAllowed","contextPadProvider","AXIS_DIMENSIONS","DistributeElements","_filters","registerFilter","avgDimension","elementsSize","numOfShapes","filterFn","groups","distributableElements","_setOrientation","_filterElements","_createGroups","distributeElements","_axis","_dimension","filters","rangeGroups","elementRange","_findRange","previous","_hasIntersection","rangeA","rangeB","BpmnDistributeElements","cannotDistribute","bpmnDistributeElements","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","_actions","_registerDefaultActions","keyboardMove","keyboardMoveSelection","undo","redo","selectedElements","removableElements","moveSelection","accelerated","_registerAction","unregister","getActions","BpmnEditorActions","spaceTool","lassoTool","handTool","globalConnect","searchPad","currentSelection","aligneableElements","setColor","boundingBox","moveElements","BpmnGridSnapping","gridSnappingContext","snapLocation","SPACING","quantize","quantum","LOWER_PRIORITY","GridSnapping","setActive","snapOffset","getSnapOffset","snapConstraints","getSnapConstraints","snapEvent","isHorizontal","minResizeConstraints","maxResizeConstraints","isWest","isNorth","ResizeBehavior","gridSnapping","_gridSnapping","snapComplex","snapSimple","snappedValue","getGridSpacing","toggleActive","snapHorizontally","snapVertically","west","east","snappedNewBounds","north","south","SpaceToolBehavior","initialized","gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior","AutoPlaceBehavior","CreateParticipantBehavior","LayoutConnectionBehavior","hasMiddleSegments","snapMiddleSegments","horizontallyAligned","verticallyAligned","snapSegment","gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior","bpmnGridSnapping","LABEL_WIDTH","LABEL_HEIGHT","BpmnInteractionEvents","_interactionEvents","createParticipantHit","createDefaultHit","createSubProcessHit","removeHits","createBoxHit","bpmnInteractionEvents","BpmnKeyboardBindings","DEFAULT_CONFIG","moveSpeed","moveSpeedAccelerated","LEFT","UP","RIGHT","DOWN","KEY_TO_DIRECTION","ArrowLeft","Left","ArrowUp","Up","ArrowRight","Right","ArrowDown","Down","DIRECTIONS_DELTA","speed","up","down","KeyboardMoveSelection","canMove","ChangeSupport","updateContainments","changeSupport","DEFAULT_MIN_WIDTH","Resize","_dragging","minBounds","computeMinResizeBox","getReferencePoint","referencePoint","getCursor","ctx","contextOrDirection","childrenBoxPadding","MARKER_RESIZING","MARKER_RESIZE_NOT_OK","ResizePreview","updateFrame","removeFrame","HANDLE_OFFSET","HANDLE_SIZE","HANDLE_HIT_SIZE","CLS_RESIZER","ResizeHandles","_resize","removeResizers","addResizer","getHandleOffset","makeDraggable","startResize","_createResizer","resizersParent","_getResizersParent","createResizer","resizer","resizePreview","resizeHandles","LabelEditingProvider","textRenderer","activateDirectEdit","isCollapsedSubProcess","_textRenderer","isExpandedSubProcess","isCollapsedPool","isExpandedPool","isEmptyText","getEditingBBox","getAbsoluteBBox","defaultStyle","getDefaultStyle","externalStyle","getExternalStyle","externalFontSize","externalLineHeight","lineHeight","defaultFontSize","defaultLineHeight","fontFamily","fontWeight","paddingTop","paddingBottom","paddingLeft","paddingRight","externalLabelMid","absoluteBBox","activeContextText","updateLabel","MARKER_HIDDEN","MARKER_LABEL_HIDDEN","LabelEditingPreview","pathMap","absoluteElementBBox","activeProvider","textPathData","getScaledPath","xScaleFactor","yScaleFactor","mx","my","d","strokeWidth","stroke","getStrokeColor","newElementHeight","defaultColor","labelEditingProvider","labelEditingPreview","ALIGNMENTS","ELEMENT_LABEL_DISTANCE","AdaptiveLabelPositioningBehavior","checkLabelAdjustment","optimalPosition","getOptimalPosition","adjustLabelPosition","elementMid","labelMid","newLabelMid","elementTrbl","moveShape","getTakenHostAlignments","freeAlignments","hostElement","hostOrientation","takenAlignments","getTakenConnectionAlignments","getApproximateOrientation","labelOrientation","isAligned","takenHostAlignments","AppendBehavior","bpmnRules","AssociationBehavior","postExecute","associations","association","moveConnection","AttachEventBehavior","shouldReplace","newHost","getEventDefinition","BoundaryEventBehavior","getBoundaryEvents","boundaryEvents","oldSource","newSource","attachedboundaryEvents","boundaryEvent","RootElementReferenceBehavior","bpmnjs","canHaveRootElementReference","hasAnyEventDefinition","hasRootElement","getDefinitions","getRootElementReferencePropertyName","setRootElement","executed","addedRootElement","reverted","referencedRootElement","CreateBehavior","HIGHEST_PRIORITY","FixHoverBehavior","CreateDataObjectBehavior","dataObject","dataObjectRef","HORIZONTAL_PARTICIPANT_PADDING","VERTICAL_PARTICIPANT_PADDING","PARTICIPANT_BORDER_WIDTH","ensureCollaboration","collaboration","makeCollaboration","process","childrenBBox","participantBounds","getParticipantBounds","getParticipantCreateConstraints","rootElementGfx","ensureHoveringProcess","oldProcessRef","processChildren","participant","hasParticipants","findParticipant","TARGET_REF_PLACEHOLDER_NAME","DataInputAssociationBehavior","usesTargetRef","removedConnection","inputAssociations","getTargetRef","targetRefProp","cleanupTargetRef","fixTargetRef","connectionBo","targetBo","newTarget","newTargetBo","oldTarget","oldTargetBo","dataAssociation","ifDataInputAssociation","UpdateSemanticParentHandler","bpmnUpdater","_bpmnUpdater","DataStoreBehavior","getFirstParticipant","getDataStores","updateDataStoreParent","dataStore","newDataStoreParent","dataStoreBo","newDataStoreParentBo","newSemanticParent","newDiParent","registerHandler","dataStoreReferences","oldParent","getAncestor","isDescendant","oldRoot","newRoot","dataStores","descendant","ancestor","descendantBo","ancestorBo","oldSemanticParent","oldDiParent","updateSemanticParent","updateDiParent","DeleteLaneBehavior","compensateLaneDelete","topAdjustments","bottomAdjustments","siblings","topAffected","bottomAffected","calculateAdjustments","makeSpace","movingShapes","resizingShapes","nested","DetachEventBehavior","item","DropOnFlowBehavior","insertShape","targetFlow","positionOrBounds","waypointsBefore","waypointsAfter","dockingPoint","incomingConnection","outgoingConnection","oldOutgoing","oldIncoming","isPointInsideBBox","reconnectEnd","reconnectStart","duplicateConnections","shapeMid","newShapeMid","canInsert","EventBasedGatewayBehavior","preExecuted","existingIncomingConnections","sequenceFlow","removeConnection","newShapeTargets","newShapeTargetsIncomingSequenceFlows","sequenceFlows","incomingSequenceFlows","intermediateEvent","GroupBehavior","removeReferencedCategoryValue","removeCategory","getGroupElements","isReferenced","groupElements","lineIntersect","l1s","l1e","l2s","l2e","denominator","numerator","ImportDockingFix","adjustDocking","startPoint","nextPoint","centerIntersect","elementTop","elementLeft","verticalIntersect","horizontalIntersect","getDistance","fixDockings","p2","IsHorizontalFix","elementTypesToUpdate","vectorLength","v","getAngle","line","atan","rotateVector","vector","angle","cos","sin","solveLambaSystem","system","lambda","perpendicularFoot","bd","getDistancePointLine","pfPoint","connectionVector","getDistancePointPoint","point1","point2","sq","getAttachment","segmentStartDistance","segmentEndDistance","attachmentPosition","minDistance","attachment","attachmentDistance","closestAttachmentDistance","closestAttachment","pointsEqual","getCircleSegmentIntersections","segmentIndex","relativeLocation","s1","s2","cc","cr","baX","baY","caX","caY","bBy2","pBy2","q","disc","tmpSqrt","abScalingFactor1","abScalingFactor2","i1","i2","isPointInSegment","fenced","rangeStart","rangeEnd","EQUAL_THRESHOLD","findNewLabelLineStartIndex","oldSegmentStartIndex","newIndex","rel","relativePositionMidWaypoint","getLabelAdjustment","labelPosition","getLabelMid","oldLabelLineIndex","newLabelLineIndex","oldLabelLine","getLine","newLabelLine","oldFoot","relativeFootPosition","getRelativeFootPosition","angleDelta","getAngleDelta","oldBendpointIndex","oldBendpoint","newBendpoint","newFoot","newLabelVector","distanceSegment1","distanceSegment2","l1","l2","foot","lengthToFoot","getNewAttachPoint","oldCenter","newCenter","oldDelta","newDelta","getNewAttachShapeDelta","shapeCenter","shapeDelta","oldCenterDelta","newCenterDelta","newShapeCenter","DEFAULT_LABEL_DIMENSIONS","NAME_PROPERTY","TEXT_PROPERTY","LabelBehavior","getVisibleLabelAdjustment","startChanged","endChanged","getTextAnnotationBounds","labelCenter","labelDimensions","getExternalLabelBounds","unsetLabel","removeShape","labelBehavior","labelAdjustment","oldShape","edges","asEdges","getReferencePointDelta","newReferencePoint","lines","nearestLine","getNearestLine","distances","distance","sorted","COLLAB_ERR_MSG","PROCESS_ERR_MSG","ModelingFeedback","tooltips","showError","timeout","ReplaceConnectionBehavior","fixConnection","replacementType","canConnectSequenceFlow","canConnectMessageFlow","canConnectAssociation","replaceReconnectedConnection","replacement","cleanDraggingSelection","oldConnection","newConnection","allConnections","RemoveParticipantBehavior","collaborationRoot","participants","makeProcess","ReplaceElementBehaviour","_selection","topLevelElements","canReplace","replaceElements","replacements","unclaimId","newElements","newElementType","oldElementId","addToTrbl","choice","addMin","addMax","LANE_MIN_HEIGHT","LANE_MIN_WIDTH","LANE_RIGHT_PADDING","LANE_LEFT_PADDING","LANE_TOP_PADDING","LANE_BOTTOM_PADDING","getParticipantResizeConstraints","laneShape","resizeDirection","balanced","lanesRoot","isFirst","isLast","laneTrbl","maxTrbl","minTrbl","flowElementTrbl","PARTICIPANT_MIN_DIMENSIONS","SUB_PROCESS_MIN_DIMENSIONS","TEXT_ANNOTATION_MIN_DIMENSIONS","SLIGHTLY_HIGHER_PRIORITY","ResizeLaneBehavior","RemoveElementBehavior","inConnection","outConnection","getNewWaypoints","inWaypoints","outWaypoints","SubProcessStartEventBehavior","getStartEventPosition","ToggleElementCollapseBehaviour","hideEmptyLabels","expandedBounds","defaultSize","visibleElements","visibleBBox","filterVisible","collapsedBounds","UnclaimIdBehavior","shapeBo","unclaim","rootElementBo","UpdateFlowNodeRefsBehavior","initContext","UpdateContext","enter","getContext","releaseContext","triggerUpdate","leave","updateLaneRefs","flowNodes","lanes","laneRefUpdateEvents","updateContext","addFlowNode","counter","lane","flowNode","DeleteSequenceFlowBehavior","sourceBo","adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","modelingFeedback","replaceConnectionBehavior","removeParticipantBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","removeElementBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","getBoundaryAttachment","targetBounds","BpmnRules","canStartConnection","nonExistingOrLabel","isSame","getOrganizationalParent","isTextAnnotation","isGroup","isCompensationBoundary","isSameOrganization","parentA","parentB","isMessageFlowSource","hasEventDefinitionOrNone","isMessageFlowTarget","getScopeParent","isSameScope","scopeParentA","scopeParentB","isSequenceFlowSource","isSequenceFlowTarget","isEventBasedTarget","getParents","isParent","possibleParent","allParents","connectDataAssociation","canConnectDataAssociation","associationDirection","canDrop","isDroppableBoundaryEvent","hasNoEventDefinition","hasCommonBoundaryIntermediateEventDefinition","isBoundaryEvent","isLane","isBoundaryCandidate","hasOneOfEventDefinitions","isReceiveTaskAfterEventBasedGateway","isOneTextAnnotation","sourceTextAnnotation","targetTextAnnotation","areOutgoingEventBasedGatewayConnections","isOutgoingEventBasedGatewayConnection","connections","canAttach","OrderingProvider","ordering","getOrdering","parentIndex","newParentIndex","BpmnOrderingProvider","orders","order","level","containers","computeOrder","getOrder","findActualParent","actualParent","elementOrder","currentIndex","insertIndex","bpmnOrderingProvider","CommandStack","_handlerMap","_stack","_stackIdx","_currentExecution","dirty","_uid","_pushAction","_internalExecute","_popAction","_getHandler","next","_getUndoAction","_internalUndo","_getRedoAction","_setHandler","handlerCls","canUndo","canRedo","_atomicDo","_markDirty","_revertedAction","qualifier","names","cancelBubble","_createId","execution","atomic","_executedAction","baseAction","stackIdx","createRoot","setPosition","setVisible","visible","display","tooltipClass","tooltipSelector","Tooltips","_ids","_tooltipDefaults","minZoom","maxZoom","_tooltips","_tooltipRoot","tooltip","_addTooltip","removeTimer","htmlContainer","hide","_updateRoot","matrix","tooltipRoot","jquery","_updateTooltip","_updateTooltipVisibilty","updateViewbox","saveClear","removeFn","LabelSupport","movePreview","validatedShapes","removeLabels","enclosedElements","enclosedLabels","labelTargetIndex","labelSupport","AttachSupport","addAttached","removeAttached","getAttachers","updateAttachment","attachSupport","ToolManager","_tools","registerTool","tools","bindEvents","tool","eventsToRegister","reactivate","toolManager","getDirection","getWaypointsUpdatingConnections","waypointsUpdatingConnections","AXIS_TO_DIMENSION","CURSOR_CROSSHAIR","DIRECTION_TO_TRBL","DIRECTION_TO_OPPOSITE","PADDING","SpaceTool","_toolManager","activateMakeSpace","activateSelection","spaceToolConstraints","getSpaceToolConstraints","resizingShape","minOrMax","nonMovingResizingChildrenBBox","movingChildrenBBox","resizingShapeBBox","nonMovingResizingChildren","movingChildren","resizingShapeMinDimensions","createSpace","shapeStart","shapeEnd","MARKER_DRAGGING","SpaceToolPreview","addPreviewGfx","space","crosshairGroup","pathX","pathY","spaceLayer","movingConnections","sourceIsMoving","targetIsMoving","sourceIsResizing","targetIsResizing","frameGroup","frames","initialBounds","getBBox","opposite","spaceToolPreview","BpmnFactory","_model","_needsId","_ensureId","createDiLabel","createDiBounds","createDiShape","bpmnElement","createDiWaypoints","createDiWaypoint","createDiEdge","createDiPlane","BpmnUpdater","cropped","updateParent","reverseUpdateParent","updateRoot","updateBounds","updateConnection","updateConnectionWaypoints","ifBpmn","oldSourceBo","newSourceBo","oldConditionExpression","oldDefault","parentShape","parentBusinessObject","parentDi","updateFlowNodeRefs","_getLabel","newContainment","oldContainment","oldRefs","newRefs","updateDiConnection","planeElements","getLaneSet","laneSet","laneSets","childLaneSet","visualParent","containment","ioSpecification","diChildren","inverseSet","applyAttributes","attributeNames","applyAttribute","attributeName","AppendShapeHandler","existsConnection","CreateConnectionHandler","layouter","createBpmnElement","newEventDefinition","isFrame","isMarkerVisible","createParticipantShape","connectionParent","addConnection","CreateElementsHandler","createShapeHints","CreateShapeHandler","CreateLabelHandler","addShape","originalExecute","ensureValidDimensions","originalRevert","DeleteConnectionHandler","DeleteElementsHandler","DeleteShapeHandler","oldParentIndex","OFF_AXIS","LayoutConnectionHandler","MoveConnectionHandler","getResizedSourceAnchor","safeGetWaypoints","oldAnchor","getResizedTargetAnchor","getMovedSourceAnchor","moveDelta","substractPosition","getMovedTargetAnchor","MoveClosure","allShapes","enclosedConnections","MoveHelper","MoveElementsHandler","_helper","MoveShapeHandler","ReconnectConnectionHandler","ReplaceShapeHandler","ResizeShapeHandler","SpaceToolHandler","getAxisFromDirection","ToggleShapeCollapseHandler","getElementsVisibilityRecursive","setHiddenRecursive","newHidden","restoreVisibilityRecursive","lastState","UpdateAttachmentHandler","removeAttacher","addAttacher","UpdateWaypointsHandler","Modeling","registerHandlers","updateRange","lastIdx","rangeDiff","centerElement","refCenter","spaceInBetween","firstGroup","lastGroupIdx","lastGroup","groupsSize","refElem","groupIdx","prevGroup","isTopLevel","newClosure","moveRecursive","moveClosure","getClosure","primaryShape","keepParent","recurse","layout","sourceMoved","targetMoved","getNewParent","dockingOrPoints","layoutConnectionHints","newData","canReconnect","moveShapes","resizeShapes","isFirstWaypoint","isLastWaypoint","oldChildrenVisibility","oldHost","attacherIdx","getHandlers","DEFAULT_FLOW","ID","DI","NULL_DIMENSIONS","UpdatePropertiesHandler","isIdChange","getProperties","getDiProperties","setProperties","setDiProperties","unwrapBusinessObjects","updateId","newLabelBounds","referencePropertyNames","unwrappedProps","UpdateCanvasRootHandler","AddLaneHandler","_spaceTool","SplitLaneHandler","ResizeLaneHandler","newRootBusinessObject","oldRootBusinessObject","bpmnDefinitions","diPlane","location","isRoot","laneParent","existingChildLanes","allAffected","lanePosition","spacePos","adjustments","newLane","newLanesCount","existingLanesCount","laneY","laneHeight","laneBounds","newLaneAttrs","newLanesHeight","resizeBalanced","resizeSpace","change","trblDiff","FLOW_NODE_REFS_ATTR","LANES_ATTR","UpdateFlowNodeRefsHandler","IdClaimHandler","computeUpdates","flowNodeShapes","laneShapes","handledNodes","updates","participantCache","allFlowNodeShapes","isInLaneShape","addFlowNodeShape","flowNodeShape","getAllLaneShapes","getNewLanes","allLaneShapes","oldLane","claiming","DEFAULT_COLORS","SetColorHandler","colors","UpdateLabelHandler","setText","oldLabel","_bpmnRules","BaseLayouter","handlers","targetLaneShape","targetLane","collaborationElement","processElement","claimId","moddleElement","MIN_SEGMENT_LENGTH","POINT_ORIENTATION_PADDING","ORIENTATION_THRESHOLD","needsTurn","startDirection","h","canLayoutStraight","targetOrientation","getSegmentBendpoints","segmentDirections","xmid","ymid","layoutStraight","layoutHorizontal","layoutTurn","turnNextDirections","getBendpoints","getStartSegment","getEndSegment","invertedSegment","invertDirections","getMidSegment","startSegment","endSegment","endDirection","getSimpleBendpoints","isValidDirections","isExplicitDirections","midSegment","connectPoints","withoutRedundantPoints","connectRectangles","preferredLayouts","preferredLayout","getDirections","directionSplit","startDocking","getDockingPoint","invertOrientation","endDocking","repairConnection","repairedWaypoints","preferStraight","tryLayoutStraight","tryRepairConnectionEnd","tryRepairConnectionStart","inRange","isInRange","primaryAxis","preserveDocking","moved","newDocking","_tryRepairConnectionSide","needsRelayout","repairBendpoint","candidate","oldPeer","newPeer","removeOverlapping","slicedPoints","oldDocking","newPoints","defaultLayout","rectangle","dockingDirection","ATTACH_ORIENTATION_PADDING","BOUNDARY_TO_HOST_THRESHOLD","oppositeOrientationMapping","orientationDirectionMapping","BpmnLayouter","getAttachOrientation","attachedElement","getMessageFlowManhattanOptions","getMessageFlowPreserveDocking","getConnectionDocking","isCompensationAssociation","isAnyOrientation","orientations","getHorizontalOrientation","matches","getVerticalOrientation","isOppositeOrientation","isOppositeHorizontalOrientation","horizontalOrientation","oppositeHorizontalOrientation","isOppositeVerticalOrientation","verticalOrientation","oppositeVerticalOrientation","isHorizontalOrientation","getLoopPreferredLayout","getBoundaryEventPreferredLayouts","sourceLayout","targetLayout","targetMid","attachOrientation","attachedToSide","getBoundaryEventLoopLayout","getBoundaryEventSourceLayout","getBoundaryEventTargetLayout","shouldConnectToSameSide","areCloseOnAxis","dockingToPoint","actual","CroppingConnectionDocking","manhattanOptions","updatedWaypoints","sourceDocking","targetDocking","dockStart","dockingIdx","croppedPoint","_getIntersection","takeFirst","shapePath","_getShapePath","_getConnectionPath","_getGfx","MEDIUM_PRIORITY","MoveEvents","removeNested","isAttach","MovePreview","getVisualDragShapes","getAllDraggedElements","removeEdges","allDraggedElements","dragShapes","visuallyDraggedShapes","differentParents","haveDifferentParents","TOGGLE_SELECTOR","ENTRY_SELECTOR","ELEMENT_SELECTOR","PALETTE_OPEN_CLS","PALETTE_TWO_COLUMN_CLS","Palette","updateToolHighlight","_update","_diagramInitialized","_rebuild","addPaletteEntries","getPaletteEntries","parentContainer","_getParentContainer","HTML_MARKUP","_layoutChanged","_toggleState","twoColumn","_needsCollapse","clientHeight","_entries","separator","availableHeight","entriesHeight","isActiveTool","_activeTool","toolsContainer","_toolsContainer","toolClasses","contains","LASSO_TOOL_CURSOR","LassoTool","visuals","SVGElement","activateLasso","toBBox","HAND_CURSOR","HandTool","activateMove","deactivateMove","isSpace","activateHand","GlobalConnect","startTarget","canStartConnect","PaletteProvider","_palette","_lassoTool","_handTool","_globalConnect","createAction","createListener","shortType","createSubprocess","subProcess","startEvent","autoSelect","createParticipant","paletteProvider","BpmnReplacePreview","replaceVisual","visualReplacements","tempShape","restoreVisual","originalGfx","bpmnReplacePreview","TARGET_BOUNDS_PADDING","TASK_BOUNDS_PADDING","TARGET_CENTER_PADDING","AXES","BpmnConnectSnapping","initialConnectionStart","snapToShape","getTargetBoundsPadding","isAnyType","snapToPosition","snapToTargetMid","snapBoundaryEventLoop","dimensionForAxis","getDimensionForAxis","isMid","axes","newCoordinate","coordinate","SnapContext","_targets","_snapOrigins","_snapLocations","_defaultSnaps","SnapPoints","defaultSnaps","_snapValues","getSnapOrigin","setSnapOrigin","initialValue","addDefaultSnap","snapValues","getSnapLocations","setSnapLocations","snapLocations","pointsForTarget","initDefaults","snap","snappingValues","CreateMoveSnapping","snapping","initSnap","snapContext","addSnapTargetPoints","isHidden","shapeTopLeft","shapeBottomRight","snapTargets","getSnapTargets","snapTarget","BpmnCreateMoveSnapping","setSnappedIfConstrained","snapBoundaryEvent","targetTRBL","areAll","isContainer","getDockingSnapOrigin","isMove","ResizeSnapping","isVertical","snapOrigin","isAttached","SNAP_TOLERANCE","SNAP_LINE_HIDE_DELAY","Snapping","_asyncHide","snapCurrent","locationSnapping","originValue","showSnapLine","axisSnapping","_createLine","_createSnapLines","_snapLines","getSnapLine","snapLine","createMoveSnapping","resizeSnapping","connectSnapping","SearchPad","_open","_results","_eventMaps","BOX_HTML","_searchInput","INPUT_SELECTOR","_resultsContainer","RESULTS_CONTAINER_SELECTOR","constructOverlay","box","OVERLAY_CLASS","createInnerTextNode","tokens","createHtmlText","htmlText","matched","RESULT_HIGHLIGHT_CLASS","normal","_bindEvents","listen","selector","focus","RESULT_SELECTOR","_scrollToNode","_preselect","_select","selected","_getCurrentResult","_scrollToDirection","_search","_unbindEvents","_clearResults","searchResults","_searchProvider","_createResultNode","previousElementSibling","nextElementSibling","nodeOffset","containerScroll","scrollTop","bottomScroll","_resetOverlay","RESULT_SELECTED_SELECTOR","RESULT_HTML","primaryTokens","RESULT_PRIMARY_HTML","secondaryTokens","RESULT_SECONDARY_HTML","RESULT_ID_ATTRIBUTE","blur","selectedNode","RESULT_SELECTED_CLASS","_centerViewbox","newViewbox","overlay","CONTAINER_SELECTOR","BpmnSearchProvider","hasMatched","matchAndSplit","originalText","substr","bpmnSearch","initialDiagram","Modeler","Viewer","createDiagram","done","importXML","_interactionModules","_modelingModules","tasklist","createBaseFor","getLinkEventDefinition","linkEventDefinition","linkEvents","constant","ElementTemplatesLoader","loadTemplates","_loadTemplates","_elementTemplates","reload","templateErrors","setTemplates","validator","errors","validTemplates","templatesChanged","baseIsTypedArray","nodeUtil","nodeIsTypedArray","selectEntryFactory","comboBox","customValue","customName","isCustomValue","isCustom","comboOptions","showCustomInput","modifiedValues","comboBoxEntry","arrayTag","funcTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","externalTaskPriority","objectCreate","baseToString","getSelectBox","currentTab","generateElementId","CREATE_EXTENSION_ELEMENT_ACTION","REMOVE_EXTENSION_ELEMENT_ACTION","idGeneration","hideElements","hideExtensionElements","canBeHidden","selectionChanged","createOption","initSelectionSize","optionsLength","extensionElementValue","generatedId","disableRemove","selectElement","hashHas","getListeners","CAMUNDA_EXECUTION_LISTENER_ELEMENT","CAMUNDA_TASK_LISTENER_ELEMENT","executionListenerEntry","taskListenerEntry","listeners","initialEvent","getDefaultTemplate","applyDefaultTemplate","commandContext","mapCacheClear","mapCacheDelete","mapCacheHas","MapCache","Stack","equalObjects","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","Hash","calculateUpdate","currentValue","newValue","currentCursor","newCursor","currentTail","lastIndexOf","createDiff","newStart","newEnd","l_str","l_char","s_str","s_char","l_idx","s_idx","charAt","l_start","s_start","l_end","s_end","baseGetAllKeys","keysFunc","symbolsFunc","TRAP_PRIORITY","install","trap","stackClear","stackGet","stackSet","setCacheAdd","propertiesPanel","asyncCapableHelper","processProps","eventProps","linkProps","documentationProps","idProps","nameProps","executableProps","serviceTaskDelegateProps","userTaskProps","asynchronousContinuationProps","callActivityProps","multiInstanceProps","conditionalProps","scriptProps","errorProps","formProps","startEventInitiator","variableMapping","listenerProps","listenerDetails","listenerFields","elementTemplateChooserProps","elementTemplateCustomProps","inputOutputParameter","connectorDetails","connectorInputOutput","connectorInputOutputParameter","jobConfiguration","candidateStarter","externalTaskConfiguration","fieldInjections","isExternalTaskPriorityEnabled","externalBo","isExternalTask","isJobConfigEnabled","getInputOutputParameterLabel","getListenerLabel","PROCESS_KEY_HINT","TASK_KEY_HINT","createGeneralTabGroups","idOptions","processOptions","generalGroup","processIdDescription","customFieldsGroups","detailsGroup","multiInstanceGroup","asyncGroup","jobConfigurationGroup","externalTaskGroup","candidateStarterGroup","historyTimeToLiveGroup","tasklistGroup","documentationGroup","createVariablesTabGroups","variablesGroup","createFormsTabGroups","formGroup","createListenersTabGroups","listenersGroup","listenerDetailsGroup","listenerFieldsGroup","createInputOutputTabGroups","inputOutputGroup","inputOutputParameterGroup","createConnectorTabGroups","connectorDetailsGroup","connectorInputOutputGroup","connectorInputOutputParameterGroup","createFieldInjectionsTabGroups","fieldGroup","createExtensionElementsGroups","propertiesGroup","CamundaPropertiesProvider","getTabs","generalTab","variablesTab","formsTab","listenersTab","inputOutputTab","connectorTab","fieldInjectionsTab","extensionsTab","KeyboardMove","arrowsListener","actualSpeed","HANDLERS","CommandInitializer","escapeText","escaped","encodeURI","hasPath","getBody","getLoopCardinality","getLoopCardinalityValue","loopCardinality","getCompletionCondition","getCompletionConditionValue","completionCondition","getCollection","getElementVariable","updateFormalExpression","expressionProps","existingExpression","isValid","notification","elementVariable","createBind","canBeDisabled","res","isDisabled","copyObject","isNew","arg","baseFilter","collectionAdd","CategoryHelper","eachFunc","asyncTag","genTag","proxyTag","DEFAULT_DELEGATE_PROPS","DELEGATE_PROPS","DMN_CAPABLE_PROPS","EXTERNAL_CAPABLE_PROPS","DEFAULT_OPTIONS","DMN_OPTION","EXTERNAL_OPTION","CONNECTOR_OPTION","SCRIPT_OPTION","getType","hasScriptSupport","implType","connectors","participantHelper","idEntry","getProcessBusinessObject","processId","modifyProcessBusinessObject","processIdError","processNameEntry","noCustomizer","log10","FormHelper","getFormData","formData","getFormFields","fields","getFormField","formFields","getConstraints","formField","validation","constraints","getEnumValues","baseMap","freeProcess","require","findInputParameter","findOutputParameter","findCamundaProperty","findCamundaInOut","CAMUNDA_EXECUTION_LISTENER_TYPE","BASIC_MODDLE_TYPES","EXTENSION_BINDING_TYPES","IO_BINDING_TYPES","IN_OUT_BINDING_TYPES","propertyGetter","getPropertyValue","objectWithKey","propertySetter","setPropertyValue","propertyValidator","validateValue","camundaProperties","camundaProperty","ioParameter","ioElement","bindingName","unknownPropertyBinding","existingCamundaProperty","newCamundaProperty","existingIoParameter","newIoParameter","existingInOut","moddlePropertyDescriptor","propertiesByName","moddleType","existingFieldInjections","newFieldInjections","warn","notEmpty","maxLength","minLength","matchesPattern","propertyWithScope","regexp","renderCustomField","propertyType","entryOptions","customFieldsGroup","idScopeName","customScopeFieldsGroup","propertyId","scopedProperty","createExtensionElements","createFailedJobRetryTimeCycle","retryTimeCycleEntry","retryTimeCycle","newCycle","allowPrototypes","arrayLimit","decoder","decode","parameterLimit","plainObjects","parseValues","cleanStr","ignoreQueryPrefix","limit","parts","part","bracketEqualsPos","parseObject","chain","leaf","cleanRoot","parseArrays","parseKeys","givenKey","segment","isRegExp","tempObj","newObj","merge","compact","getScriptType","parentElement","scriptLanguagePropName","scriptValuePropName","isFormatRequired","boScriptResource","boScript","boScriptFormat","scriptResourceValue","scriptType","scriptValue","clearScriptFormat","btnNode","canClearScriptFormat","clearScriptResource","canClearScriptResource","clearScript","canClearScript","isScriptResource","Reporter","messages","arrLength","othLength","arrValue","othValue","compared","othIndex","baseSetToString","getContainedActivities","getFlowElements","getContainedBoundaryEvents","isCompensationEventAttachedToActivity","activity","activityId","canActivityBeCompensated","getActivitiesForCompensation","getActivitiesForActivityRef","activitiesForActivityRef","createActivityRefOptions","activities","waitForCompletion","activityRef","argument","method","DELEGATE_TYPES","PROPERTIES","isDelegate","getDelegationLabel","delegateEntry","delegationLabel","nativeMin","oldArray","validationErrors","getAllKeys","isList","isMap","typeInfo","nameValue","parameterType","createParameterTypeElem","items","newEntry","PLACEHOLDER","WRAP_CURRY_BOUND_FLAG","WRAP_REARG_FLAG","mergeData","srcBitmask","newBitmask","isCombo","resultVariableEntry","DESCRIPTORS","thrower","it","ACCESSORS","argument0","argument1","O","FUNC_ERROR_TEXT","debounce","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","flush","debounced","isInvoking","objProps","objLength","othProps","skipCtor","objCtor","othCtor","isCatchingErrorEvent","MAX_SAFE_INTEGER","percentTwenties","RFC1738","RFC3986","baseSetData","outgoingWithoutCondition","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","IndexedObject","toObject","toLength","arraySpeciesCreate","createMethod","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","specificCreate","boundFunction","versionTagEntry","processBo","propertiesEntry","reWrapDetails","reSplitDetails","hashGet","disallowNodeType","externalTaskPriorityEntry","taskPriority","defaultButtonAction","defaultButtonShow","buttonLabel","buttonAction","actionMethod","showName","buttonShow","showMethod","documentations","documentation","newObjectList","elementDocuEntry","processDocuEntry","isEventSubProcess","isConditionalStartEvent","reIsUint","callback","$$v","searchApi","CreateAndReferenceElementHandler","referencingObject","newObject","newObjectContainer","newObjectParent","referencedObject","previousReference","blankStartEvents","shortOut","Resolver","bundle","clone","__chain__","__index__","__values__","getCamundaInOutMappings","getVariableMappings","camundaMappings","mapping","getInOutType","inOutType","CAMUNDA_IN_EXTENSION_ELEMENT","CAMUNDA_OUT_EXTENSION_ELEMENT","WHITESPACE_REGEX","inOutTypeOptions","inEntry","outEntry","variableMappings","mappingValue","mappingType","variablesMappings","sourceLabel","selectedMapping","exportName","VENDOR_PREFIXES","TEST_ELEMENT","TYPE_FUNCTION","setTimeoutContext","bindFn","invokeArrayArg","each","iterator","deprecationMessage","output","nextKey","extend","dest","src","inherit","base","childP","baseP","_super","boolOrFn","ifUndefined","val1","val2","addEventListeners","splitStr","removeEventListeners","hasParent","inStr","inArray","findByKey","uniqueArray","results","prefixed","camelProp","toUpperCase","_uniqueId","uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","navigator","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","inputTarget","domHandler","ev","enable","createInputInstance","Type","PointerEventInput","TouchMouseInput","MouseInput","inputHandler","pointersLen","pointers","changedPointersLen","changedPointers","isFinal","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","computeDeltaXY","offsetDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","offsetDelta","prevDelta","velocity","velocityX","velocityY","lastInterval","atan2","PI","evEl","evTarget","evWin","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","pressed","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","touches","changedTouches","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","isSyntheticEvent","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","getTouchActionProps","TouchAction","cleanTouchActions","hasPanX","hasPanY","touchMap","cssSupports","CSS","supports","compute","touchAction","getTouchAction","preventDefaults","prevented","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","Recognizer","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","preset","recognizeWith","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","attrTest","optionPointers","isRecognized","directionTest","hasMoved","inOut","validPointers","validMovement","validTime","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","oldCssProps","toggleCssProps","triggerDomEvent","gestureEvent","gesture","existing","Swipe","Rotate","$indexOf","arrayMethodIsStrict","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","searchElement","isForking","leftIndex","leftLength","symbolToString","createPartial","pairs","domQueryAll","queryAll","domRemove","domDelegate","domMatches","scrollTabs","HIDE_CLASS","DEBOUNCE_DELAY","isToggle","isSelect","isContentEditable","getPropertyPlaceholders","placeholders","getFormControls","controls","getFormControlValuesInScope","controlNodes","controlNode","checked","getFormControlValues","listContainer","listNodes","listNode","valuesEqual","extractEntries","tabs","extractGroups","PropertiesPanel","_propertiesProvider","isImplicitRoot","tabBarNode","scroller","selectors","tabsContainer","tab","ignore","newActiveNode","oldActiveNode","linkNode","tabId","activateTab","detach","_bindListeners","attachTo","panelNode","panel","allTabNodes","allTabLinkNodes","tabNode","currentTabId","tabLinkNode","tabLink","needsCreate","newTabs","_entriesChanged","activeTabId","activeTabNode","_updateActivation","oldEntryIds","newEntryIds","handleChange","getEntry","onChangeAction","isEntryDirty","executeAction","applyChanges","updateState","handleInput","eventHandlerId","actionId","updateShow","updateDisable","showNodes","showNode","expr","shouldShow","currentNode","shouldDisable","commandToExecute","applyValidationErrors","valid","errorMessageNode","nextSibling","listEntryNodes","listValue","listEntryNode","setInputValue","setSelectValue","setToggleValue","nodeValue","setTextValue","getContentEditableSelection","focusNode","focusOffset","anchorOffset","setContentEditableSelection","domRange","domSelection","containerNode","_createPanel","_bindTemplate","inputNodes","isGroupVisible","groupNode","isTabVisible","toggleVisible","checkActiveTabVisibility","labelNode","tabVisible","groupVisible","listEntryContainer","existingElements","listItemNode","entriesToRemove","j","headerNode","tabLinksNode","tabContainerNode","tabIndex","querySelector","cssClass","hexTable","compactQueue","queue","compacted","arrayToObject","mergeTarget","acc","decodeURIComponent","refs","MultiCommandHandler","hasStartEvent","EventDefinitionHelper","setCacheHas","reWrapComment","details","ParticipantHelper","CURSOR_CLS_PATTERN","mode","removeMatching","unset","selectbox","inputName","UpdateBusinessObjectHandler","referenceType","extensionsElementHelper","isListener","decisionRef","hasFunc","canRemoveFailedJobRetryTimeCycle","asyncBeforeEntry","asyncBefore","asyncAfterEntry","asyncAfter","exclusiveEntry","exclusive","matcher","isInOut","parameters","memoized","Cache","basePropertyDeep","linting","toggleLinting","ErrorSvg","WarningSvg","SuccessSvg","OFFSET_TOP","OFFSET_RIGHT","emptyConfig","stateToIcon","warning","inactive","Linting","_bpmnjs","_issues","_linterConfig","_overlayIds","_clearIssues","_updateButton","linterConfig","bpmnlint","getLinterConfig","setLinterConfig","_createButton","_formatIssues","issues","ruleReports","newActive","_setActive","lintStart","_lintStart","random","newIssues","id1","id2","_clearOverlays","_createIssues","_fireComplete","_createElementIssues","elementId","elementIssues","menuPosition","issuesByType","elementIssue","warnings","$html","$icon","$dropdown","$dropdownContent","$issues","$issueList","_addErrors","_addWarnings","$ul","_addEntry","icon","$entry","_setButtonState","_button","classList","issue","linter","lintingEditorActions","setData","WRAP_PARTIAL_RIGHT_FLAG","wrapFunc","isCurry","newHoldersRight","newPartials","newPartialsRight","escape","cssEscape","codeUnit","firstCodeUnit","textInputField","checkboxField","selectBoxField","comboBoxField","textBoxField","validationAwareTextInputField","tableField","labelEntry","setDefaultParameters","defaultGet","defaultSet","defaultValidate","EntryFactory","classof","chainAll","baseProperty","formHelper","generateValueId","formFieldTextField","getSelectedFormField","selectedFormField","ensureFormKeyAndDataSupported","formKey","formFieldsEntry","formBusinessKeyFormFieldEntry","formDataExtension","storedValue","isStartEvent","existingFormField","f","enumValue","newConstraint","constraint","currentConstraint","isStartableInTasklistEntry","isStartableInTasklist","executableEntry","HOT_COUNT","HOT_SPAN","nativeNow","lastCalled","stamp","remaining","codeVariable","escalationCodeVariable","reIsDeepProp","reIsPlainProp","findElementById","selectedElement","optionTemplate","CAMUNDA_FIELD_EXTENSION_ELEMENT","getSelectedField","fieldEntry","getCamundaFields","getCamundaListenerFields","getFieldType","fieldType","expressionValue","stringValue","camundaFields","newFieldElem","selectedField","fieldName","fieldTypeOptions","fieldValue","__lastInvalidValue","wrapFlags","pair","mitt","scrollSymbolLeft","scrollSymbolRight","ScrollTabs","$el","_createScrollButtons","__scrollTabs","getActiveTabNode","getTabsContainerNode","getAllTabNodes","getVisibleTabs","allTabs","getAdjacentTab","referenceTabNode","visibleTabs","_bindWheelEvent","_bindTabClickEvents","_bindScrollButtonEvents","scrollToTabNode","oldActiveTab","newActiveTab","oldActiveTabNode","newActiveTabNode","tabsContainerNode","tabWidth","offsetWidth","tabOffsetLeft","tabOffsetRight","containerScrollLeft","scrollLeft","overflowClass"],"mappings":"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","file":"js/chunk-774e1bf4.f3398ae4.js","sourcesContent":["'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar find = require('min-dash').find;\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../helper/CmdHelper'),\n    ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper'),\n    scriptImplementation = require('./implementation/Script'),\n    timerImplementation = require('../../bpmn/parts/implementation/TimerEventDefinition');\n\nmodule.exports = function(group, element, bpmnFactory, options, translate) {\n\n  var LISTENER_TYPE_LABEL = {\n    class: translate('Java Class'),\n    expression: translate('Expression'),\n    delegateExpression: translate('Delegate Expression'),\n    script: translate('Script')\n  };\n\n  options = options || {};\n\n  var getSelectedListener = options.getSelectedListener;\n\n  var classProp = 'class',\n      expressionProp = 'expression',\n      delegateExpressionProp = 'delegateExpression',\n      scriptProp = 'script';\n\n  var executionListenerEventTypeOptions = ImplementationTypeHelper.isSequenceFlow(element) ? [\n    { name: translate('take'), value: 'take' }\n  ] : [\n    { name: translate('start'), value: 'start' },\n    { name: translate('end'), value: 'end' }\n  ];\n\n  var taskListenerEventTypeOptions = [\n    { name: translate('create'), value: 'create' },\n    { name: translate('assignment'), value: 'assignment' },\n    { name: translate('complete'), value: 'complete' },\n    { name: translate('delete'), value: 'delete' },\n    { name: translate('update'), value: 'update' },\n    { name: translate('timeout'), value: 'timeout' }\n  ];\n\n  var isSelected = function(element, node) {\n    return getSelectedListener(element, node);\n  };\n\n\n  // eventType ////////////////\n  group.entries.push(entryFactory.selectBox({\n    id: 'listener-event-type',\n    label: translate('Event Type'),\n    modelProperty: 'eventType',\n    emptyParameter: false,\n\n    get: function(element, node) {\n\n      var listener = getSelectedListener(element, node);\n\n      var eventType = listener && listener.get('event');\n\n      return {\n        eventType: eventType\n      };\n    },\n\n    set: function(element, values, node) {\n      var eventType = values.eventType,\n          listener = getSelectedListener(element, node),\n          eventDefinitions = listener && listener.eventDefinitions;\n\n      // ensure only timeout events can have timer event definitions\n      if (eventDefinitions && eventType !== 'timeout') {\n        eventDefinitions = [];\n      }\n\n      return cmdHelper.updateBusinessObject(element, listener,\n        {\n          event: eventType,\n          eventDefinitions: eventDefinitions\n        }\n      );\n    },\n\n    selectOptions: function(element, node) {\n      var eventTypeOptions;\n\n      var selectedListener = getSelectedListener(element, node);\n      if (ImplementationTypeHelper.isTaskListener(selectedListener)) {\n        eventTypeOptions = taskListenerEventTypeOptions;\n      } else if (ImplementationTypeHelper.isExecutionListener(selectedListener)) {\n        eventTypeOptions = executionListenerEventTypeOptions;\n      }\n\n      return eventTypeOptions;\n\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  // listenerId ///////////////\n  group.entries.push(entryFactory.textField({\n    id: 'listener-id',\n    label: translate('Listener Id'),\n    modelProperty: 'listenerId',\n\n    get: function(element, node) {\n      var value = {},\n          listener = getSelectedListener(element, node);\n\n      value.listenerId = (listener && listener.get('id')) || undefined;\n\n      return value;\n    },\n\n    set: function(element, values, node) {\n      var update = {},\n          listener = getSelectedListener(element, node);\n\n      update['id'] = values.listenerId || '';\n\n      return cmdHelper.updateBusinessObject(element, listener, update);\n    },\n\n    hidden: function(element, node) {\n      var listener = getSelectedListener(element, node);\n\n      return !ImplementationTypeHelper.isTaskListener(listener);\n    },\n\n    validate: function(element, values, node) {\n      var value = values.listenerId,\n          listener = getSelectedListener(element, node),\n          validate = {};\n\n      if (!value && isTimeoutTaskListener(listener)) {\n        validate.listenerId = translate('Must provide a value for timeout task listener');\n      }\n\n      return validate;\n    }\n\n  }));\n\n\n  // listenerType ///////////////\n  group.entries.push(entryFactory.selectBox({\n    id: 'listener-type',\n    label: translate('Listener Type'),\n    selectOptions: [\n      { value: classProp, name: translate('Java Class') },\n      { value: expressionProp, name: translate('Expression') },\n      { value: delegateExpressionProp, name: translate('Delegate Expression') },\n      { value: scriptProp, name: translate('Script') }\n    ],\n    modelProperty: 'listenerType',\n    emptyParameter: false,\n\n    get: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return {\n        listenerType: ImplementationTypeHelper.getImplementationType(listener)\n      };\n    },\n\n    set: function(element, values, node) {\n      var listener = getSelectedListener(element, node),\n          listenerType = values.listenerType || undefined,\n          update = {};\n\n      update[classProp] = listenerType === classProp ? '' : undefined;\n      update[expressionProp] = listenerType === expressionProp ? '' : undefined;\n      update[delegateExpressionProp] = listenerType === delegateExpressionProp ? '' : undefined;\n      update[scriptProp] = listenerType === scriptProp ? bpmnFactory.create('camunda:Script') : undefined;\n\n      return cmdHelper.updateBusinessObject(element, listener, update);\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  // listenerValue //////////////\n  group.entries.push(entryFactory.textField({\n    id: 'listener-value',\n    dataValueLabel: 'listenerValueLabel',\n    modelProperty: 'listenerValue',\n\n    get: function(element, node) {\n      var value = {},\n          listener = getSelectedListener(element, node),\n          listenerType = ImplementationTypeHelper.getImplementationType(listener);\n\n      value.listenerValueLabel = LISTENER_TYPE_LABEL[listenerType] || '';\n      value.listenerValue = (listener && listener.get(listenerType)) || undefined;\n\n      return value;\n    },\n\n    set: function(element, values, node) {\n      var update = {},\n          listener = getSelectedListener(element, node),\n          listenerType = ImplementationTypeHelper.getImplementationType(listener);\n\n      update[listenerType] = values.listenerValue || '';\n\n      return cmdHelper.updateBusinessObject(element, listener, update);\n    },\n\n    hidden: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return !listener || listener.script;\n    },\n\n    validate: function(element, values) {\n      var value = values.listenerValue,\n          validate = {};\n\n      if (!value) {\n        validate.listenerValue = translate('Must provide a value');\n      }\n\n      return validate;\n    }\n\n  }));\n\n\n  // script ////////////////////\n  var script = scriptImplementation('scriptFormat', 'value', true, translate);\n\n  group.entries.push({\n    id: 'listener-script-value',\n    html: '<div data-show=\"isScript\">' +\n            script.template +\n          '</div>',\n\n    get: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return listener && listener.script ? script.get(element, listener.script) : {};\n    },\n\n    set: function(element, values, node) {\n      var listener = getSelectedListener(element, node);\n      var update = script.set(element, values, listener);\n      return cmdHelper.updateBusinessObject(element, listener.script, update);\n    },\n\n    validate: function(element, values, node) {\n      var listener = getSelectedListener(element, node);\n      return listener && listener.script ? script.validate(element, values) : {};\n    },\n\n    isScript: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return listener && listener.script;\n    },\n\n    script: script\n\n  });\n\n\n  // timerEventDefinition //////\n  var timerEventDefinitionHandler = function(element, node) {\n    var listener = getSelectedListener(element, node);\n\n    if (!listener || !isTimeoutTaskListener(listener)) {\n      return;\n    }\n\n    var timerEventDefinition = getTimerEventDefinition(listener);\n\n    if (!timerEventDefinition) {\n      return false;\n    }\n\n    return timerEventDefinition;\n  };\n\n  function createTimerEventDefinition(element, node) {\n\n    var listener = getSelectedListener(element, node);\n\n    if (!listener || !isTimeoutTaskListener(listener)) {\n      return;\n    }\n\n    var eventDefinitions = listener.get('eventDefinitions') || [],\n        timerEventDefinition = bpmnFactory.create('bpmn:TimerEventDefinition');\n\n    eventDefinitions.push(timerEventDefinition);\n\n    listener.eventDefinitions = eventDefinitions;\n\n    return timerEventDefinition;\n  }\n\n  var timerOptions = {\n    idPrefix: 'listener-',\n    createTimerEventDefinition: createTimerEventDefinition\n  };\n\n  timerImplementation(group, element, bpmnFactory, timerEventDefinitionHandler, translate, timerOptions);\n\n};\n\n\n// helpers //////////////\n\nfunction isTimeoutTaskListener(listener) {\n  var eventType = listener && listener.event;\n  return eventType === 'timeout';\n}\n\nfunction getTimerEventDefinition(bo) {\n  var eventDefinitions = bo.eventDefinitions || [];\n\n  return find(eventDefinitions, function(event) {\n    return is(event, 'bpmn:TimerEventDefinition');\n  });\n\n}\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar callable = require('./implementation/Callable');\n\nvar cmdHelper = require('../../../helper/CmdHelper');\n\nvar flattenDeep = require('lodash/flattenDeep');\nvar assign = require('lodash/assign');\n\nfunction getCallableType(element) {\n  var bo = getBusinessObject(element);\n\n  var boCalledElement = bo.get('calledElement'),\n      boCaseRef = bo.get('camunda:caseRef');\n\n  var callActivityType = '';\n  if (typeof boCalledElement !== 'undefined') {\n    callActivityType = 'bpmn';\n  } else\n\n  if (typeof boCaseRef !== 'undefined') {\n    callActivityType = 'cmmn';\n  }\n\n  return callActivityType;\n}\n\nvar DEFAULT_PROPS = {\n  calledElement: undefined,\n  'camunda:calledElementBinding': 'latest',\n  'camunda:calledElementVersion': undefined,\n  'camunda:calledElementTenantId': undefined,\n  'camunda:variableMappingClass' : undefined,\n  'camunda:variableMappingDelegateExpression' : undefined,\n  'camunda:caseRef': undefined,\n  'camunda:caseBinding': 'latest',\n  'camunda:caseVersion': undefined,\n  'camunda:caseTenantId': undefined\n};\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!is(element, 'camunda:CallActivity')) {\n    return;\n  }\n\n  group.entries.push(entryFactory.selectBox({\n    id : 'callActivity',\n    label: translate('CallActivity Type'),\n    selectOptions: [\n      { name: 'BPMN', value: 'bpmn' },\n      { name: 'CMMN', value: 'cmmn' }\n    ],\n    emptyParameter: true,\n    modelProperty: 'callActivityType',\n\n    get: function(element, node) {\n      return {\n        callActivityType: getCallableType(element)\n      };\n    },\n\n    set: function(element, values, node) {\n      var type = values.callActivityType;\n\n      var props = assign({}, DEFAULT_PROPS);\n\n      if (type === 'bpmn') {\n        props.calledElement = '';\n      }\n      else if (type === 'cmmn') {\n        props['camunda:caseRef'] = '';\n      }\n\n      return cmdHelper.updateProperties(element, props);\n    }\n\n  }));\n\n  group.entries.push(callable(element, bpmnFactory, {\n    getCallableType: getCallableType\n  }, translate));\n\n  group.entries = flattenDeep(group.entries);\n};\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","import {\n  set as cursorSet,\n  unset as cursorUnset\n} from '../../util/Cursor';\n\nimport {\n  install as installClickTrap\n} from '../../util/ClickTrap';\n\nimport {\n  delta as deltaPos\n} from '../../util/PositionUtil';\n\nimport {\n  event as domEvent,\n  closest as domClosest\n} from 'min-dom';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\n\nvar THRESHOLD = 15;\n\n\n/**\n * Move the canvas via mouse.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function MoveCanvas(eventBus, canvas) {\n\n  var context;\n\n\n  // listen for move on element mouse down;\n  // allow others to hook into the event before us though\n  // (dragging / element moving will do this)\n  eventBus.on('element.mousedown', 500, function(e) {\n    return handleStart(e.originalEvent);\n  });\n\n\n  function handleMove(event) {\n\n    var start = context.start,\n        position = toPoint(event),\n        delta = deltaPos(position, start);\n\n    if (!context.dragging && length(delta) > THRESHOLD) {\n      context.dragging = true;\n\n      installClickTrap(eventBus);\n\n      cursorSet('grab');\n    }\n\n    if (context.dragging) {\n\n      var lastPosition = context.last || context.start;\n\n      delta = deltaPos(position, lastPosition);\n\n      canvas.scroll({\n        dx: delta.x,\n        dy: delta.y\n      });\n\n      context.last = position;\n    }\n\n    // prevent select\n    event.preventDefault();\n  }\n\n\n  function handleEnd(event) {\n    domEvent.unbind(document, 'mousemove', handleMove);\n    domEvent.unbind(document, 'mouseup', handleEnd);\n\n    context = null;\n\n    cursorUnset();\n  }\n\n  function handleStart(event) {\n\n    // event is already handled by '.djs-draggable'\n    if (domClosest(event.target, '.djs-draggable')) {\n      return;\n    }\n\n\n    // reject non-left left mouse button or modifier key\n    if (event.button || event.ctrlKey || event.shiftKey || event.altKey) {\n      return;\n    }\n\n    context = {\n      start: toPoint(event)\n    };\n\n    domEvent.bind(document, 'mousemove', handleMove);\n    domEvent.bind(document, 'mouseup', handleEnd);\n\n    // we've handled the event\n    return true;\n  }\n}\n\n\nMoveCanvas.$inject = [\n  'eventBus',\n  'canvas'\n];\n\n\n\n// helpers ///////\n\nfunction length(point) {\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\n","import MoveCanvas from './MoveCanvas';\n\nexport default {\n  __init__: [ 'moveCanvas' ],\n  moveCanvas: [ 'type', MoveCanvas ]\n};","module.exports = {\n  __depends__: [\n    require('./element-templates'),\n    require('diagram-js/lib/i18n/translate').default\n  ],\n  __init__: [ 'propertiesProvider' ],\n  propertiesProvider: [ 'type', require('./CamundaPropertiesProvider') ]\n};\n","'use strict';\n\nvar inputOutput = require('./implementation/InputOutput');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var inputOutputEntry = inputOutput(element, bpmnFactory, {\n    idPrefix: 'connector-',\n    insideConnector: true\n  }, translate);\n\n  group.entries = group.entries.concat(inputOutputEntry.entries);\n\n  return {\n    getSelectedParameter: inputOutputEntry.getSelectedParameter\n  };\n\n};\n","'use strict';\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper'),\n    InputOutputHelper = require('../../../helper/InputOutputHelper');\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nfunction getImplementationType(element) {\n  return ImplementationTypeHelper.getImplementationType(element);\n}\n\nfunction getBusinessObject(element) {\n  return ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n}\n\nfunction getConnector(bo) {\n  return InputOutputHelper.getConnector(bo);\n}\n\nfunction isConnector(element) {\n  return getImplementationType(element) === 'connector';\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  group.entries.push(entryFactory.textField({\n    id: 'connectorId',\n    label: translate('Connector Id'),\n    modelProperty: 'connectorId',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var connector = bo && getConnector(bo);\n      var value = connector && connector.get('connectorId');\n      return { connectorId: value };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      var connector = getConnector(bo);\n      return cmdHelper.updateBusinessObject(element, connector, {\n        connectorId: values.connectorId || undefined\n      });\n    },\n\n    validate: function(element, values, node) {\n      return isConnector(element) && !values.connectorId ? { connectorId: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isConnector(element);\n    }\n\n  }));\n\n};\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&lang=css&\"","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar factory = require('../../../../factory/EntryFactory');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils');\n\nvar assign = require('lodash/assign'),\n    forEach = require('lodash/forEach'),\n    find = require('lodash/find');\n\nfunction generatePropertyId() {\n  return utils.nextId('Property_');\n}\n\n/**\n * Get all camunda:property objects for a specific business object\n *\n * @param  {ModdleElement} parent\n *\n * @return {Array<ModdleElement>} a list of camunda:property objects\n */\nfunction getPropertyValues(parent) {\n  var properties = parent && getPropertiesElement(parent);\n  if (properties && properties.values) {\n    return properties.values;\n  }\n  return [];\n}\n\n/**\n * Get all camunda:Properties object for a specific business object\n *\n * @param  {ModdleElement} parent\n *\n * @return {ModdleElement} a camunda:Properties object\n */\nfunction getPropertiesElement(element) {\n  if (!isExtensionElements(element)) {\n    return element.properties;\n  } else {\n    return getPropertiesElementInsideExtensionElements(element);\n  }\n}\n\n/**\n * Get first camunda:Properties object for a specific bpmn:ExtensionElements\n * business object.\n *\n * @param {ModdleElement} extensionElements\n *\n * @return {ModdleElement} a camunda:Properties object\n */\nfunction getPropertiesElementInsideExtensionElements(extensionElements) {\n  return find(extensionElements.values, function(elem) {\n    return is(elem, 'camunda:Properties');\n  });\n}\n\n/**\n * Returns true, if the given business object is a bpmn:ExtensionElements.\n *\n * @param {ModdleElement} element\n *\n * @return {boolean} a boolean value\n */\nfunction isExtensionElements(element) {\n  return is(element, 'bpmn:ExtensionElements');\n}\n\n/**\n * Create a camunda:property entry using tableEntryFactory\n *\n * @param  {djs.model.Base} element\n * @param  {BpmnFactory} bpmnFactory\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {Array<string>} options.modelProperties\n * @param  {Array<string>} options.labels\n * @param  {function} options.getParent Gets the parent business object\n * @param  {function} options.show Indicate when the entry will be shown, should return boolean\n */\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getParent = options.getParent;\n\n  var modelProperties = options.modelProperties,\n      createParent = options.createParent;\n\n  var bo = getBusinessObject(element);\n  if (is(element, 'bpmn:Participant')) {\n    bo = bo.get('processRef');\n  }\n\n  // build properties group only when the participant have a processRef\n  if (!bo) {\n    return;\n  }\n\n  assign(options, {\n    addLabel: translate('Add Property'),\n    getElements: function(element, node) {\n      var parent = getParent(element, node, bo);\n      return getPropertyValues(parent);\n    },\n    addElement: function(element, node) {\n      var commands = [],\n          parent = getParent(element, node, bo);\n\n      if (!parent && typeof createParent === 'function') {\n        var result = createParent(element, bo);\n        parent = result.parent;\n        commands.push(result.cmd);\n      }\n\n      var properties = getPropertiesElement(parent);\n      if (!properties) {\n        properties = elementHelper.createElement('camunda:Properties', {}, parent, bpmnFactory);\n\n        if (!isExtensionElements(parent)) {\n          commands.push(cmdHelper.updateBusinessObject(element, parent, { 'properties': properties }));\n        } else {\n          commands.push(cmdHelper.addAndRemoveElementsFromList(\n            element,\n            parent,\n            'values',\n            'extensionElements',\n            [ properties ],\n            []\n          ));\n        }\n      }\n\n      var propertyProps = {};\n      forEach(modelProperties, function(prop) {\n        propertyProps[prop] = undefined;\n      });\n\n      // create id if necessary\n      if (modelProperties.indexOf('id') >= 0) {\n        propertyProps.id = generatePropertyId();\n      }\n\n      var property = elementHelper.createElement('camunda:Property', propertyProps, properties, bpmnFactory);\n      commands.push(cmdHelper.addElementsTolist(element, properties, 'values', [ property ]));\n\n      return commands;\n    },\n    updateElement: function(element, value, node, idx) {\n      var parent = getParent(element, node, bo),\n          property = getPropertyValues(parent)[idx];\n\n      forEach(modelProperties, function(prop) {\n        value[prop] = value[prop] || undefined;\n      });\n\n      return cmdHelper.updateBusinessObject(element, property, value);\n    },\n    validate: function(element, value, node, idx) {\n      // validate id if necessary\n      if (modelProperties.indexOf('id') >= 0) {\n\n        var parent = getParent(element, node, bo),\n            properties = getPropertyValues(parent),\n            property = properties[idx];\n\n        if (property) {\n          // check if id is valid\n          var validationError = utils.isIdValid(property, value.id, translate);\n\n          if (validationError) {\n            return { id: validationError };\n          }\n        }\n      }\n    },\n    removeElement: function(element, node, idx) {\n      var commands = [],\n          parent = getParent(element, node, bo),\n          properties = getPropertiesElement(parent),\n          propertyValues = getPropertyValues(parent),\n          currentProperty = propertyValues[idx];\n\n      commands.push(cmdHelper.removeElementsFromList(element, properties, 'values', null, [ currentProperty ]));\n\n      if (propertyValues.length === 1) {\n        // remove camunda:properties if the last existing property has been removed\n        if (!isExtensionElements(parent)) {\n          commands.push(cmdHelper.updateBusinessObject(element, parent, { properties: undefined }));\n        } else {\n          forEach(parent.values, function(value) {\n            if (is(value, 'camunda:Properties')) {\n              commands.push(extensionElementsHelper.removeEntry(bo, element, value));\n            }\n          });\n        }\n      }\n\n      return commands;\n    }\n  });\n\n  return factory.table(options);\n};\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","'use strict';\n\nvar assign = require('lodash/assign');\n\n/**\n * Create an input parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createInputParameter(binding, value, bpmnFactory) {\n  var scriptFormat = binding.scriptFormat,\n      parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat: scriptFormat,\n      value: value\n    });\n  } else {\n    parameterValue = value;\n  }\n\n  return bpmnFactory.create('camunda:InputParameter', {\n    name: binding.name,\n    value: parameterValue,\n    definition: parameterDefinition\n  });\n}\n\nmodule.exports.createInputParameter = createInputParameter;\n\n\n/**\n * Create an output parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createOutputParameter(binding, value, bpmnFactory) {\n  var scriptFormat = binding.scriptFormat,\n      parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat: scriptFormat,\n      value: binding.source\n    });\n  } else {\n    parameterValue = binding.source;\n  }\n\n  return bpmnFactory.create('camunda:OutputParameter', {\n    name: value,\n    value: parameterValue,\n    definition: parameterDefinition\n  });\n}\n\nmodule.exports.createOutputParameter = createOutputParameter;\n\n\n/**\n * Create camunda property from the given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaProperty(binding, value, bpmnFactory) {\n  return bpmnFactory.create('camunda:Property', {\n    name: binding.name,\n    value: value || ''\n  });\n}\n\nmodule.exports.createCamundaProperty = createCamundaProperty;\n\n\n/**\n * Create camunda:in element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaIn(binding, value, bpmnFactory) {\n\n  var properties = createCamundaInOutAttrs(binding, value);\n\n  return bpmnFactory.create('camunda:In', properties);\n}\n\nmodule.exports.createCamundaIn = createCamundaIn;\n\n\n/**\n * Create camunda:in with businessKey element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaInWithBusinessKey(binding, value, bpmnFactory) {\n  return bpmnFactory.create('camunda:In', {\n    businessKey: value\n  });\n}\n\nmodule.exports.createCamundaInWithBusinessKey = createCamundaInWithBusinessKey;\n\n\n/**\n * Create camunda:out element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaOut(binding, value, bpmnFactory) {\n  var properties = createCamundaInOutAttrs(binding, value);\n\n  return bpmnFactory.create('camunda:Out', properties);\n}\n\nmodule.exports.createCamundaOut = createCamundaOut;\n\n\n/**\n * Create camunda:executionListener element containing an inline script from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaExecutionListenerScript(binding, value, bpmnFactory) {\n  var scriptFormat = binding.scriptFormat,\n      parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat: scriptFormat,\n      value: value\n    });\n  } else {\n    parameterValue = value;\n  }\n\n  return bpmnFactory.create('camunda:ExecutionListener', {\n    event: binding.event,\n    value: parameterValue,\n    script: parameterDefinition\n  });\n}\n\nmodule.exports.createCamundaExecutionListenerScript = createCamundaExecutionListenerScript;\n\n/**\n * Create camunda:field element containing string or expression from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaFieldInjection(binding, value, bpmnFactory) {\n  var DEFAULT_PROPS = {\n    'string': undefined,\n    'expression': undefined,\n    'name': undefined\n  };\n\n  var props = assign({}, DEFAULT_PROPS);\n\n  if (!binding.expression) {\n    props.string = value;\n  } else {\n    props.expression = value;\n  }\n  props.name = binding.name;\n\n  return bpmnFactory.create('camunda:Field', props);\n}\nmodule.exports.createCamundaFieldInjection = createCamundaFieldInjection;\n\n\n// helpers ////////////////////////////\n\n/**\n * Create properties for camunda:in and camunda:out types.\n */\nfunction createCamundaInOutAttrs(binding, value) {\n\n  var properties = {};\n\n  // camunda:in source(Expression) target\n  if (binding.target) {\n\n    properties.target = binding.target;\n\n    if (binding.expression) {\n      properties.sourceExpression = value;\n    } else {\n      properties.source = value;\n    }\n  } else\n\n  // camunda:(in|out) variables local\n  if (binding.variables) {\n    properties.variables = 'all';\n\n    if (binding.variables === 'local') {\n      properties.local = true;\n    }\n  }\n\n  // camunda:out source(Expression) target\n  else {\n    properties.target = value;\n\n    [ 'source', 'sourceExpression' ].forEach(function(k) {\n      if (binding[k]) {\n        properties[k] = binding[k];\n      }\n    });\n  }\n\n  return properties;\n}\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper');\n\nvar forEach = require('lodash/forEach');\n\nvar message = require('./implementation/MessageEventDefinition'),\n    signal = require('./implementation/SignalEventDefinition'),\n    error = require('./implementation/ErrorEventDefinition'),\n    escalation = require('./implementation/EscalationEventDefinition'),\n    timer = require('./implementation/TimerEventDefinition'),\n    compensation = require('./implementation/CompensateEventDefinition'),\n    condition = require('./implementation/ConditionalEventDefinition');\n\n\nmodule.exports = function(group, element, bpmnFactory, elementRegistry, translate) {\n  var events = [\n    'bpmn:StartEvent',\n    'bpmn:EndEvent',\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateCatchEvent'\n  ];\n\n  // Message and Signal Event Definition\n  forEach(events, function(event) {\n    if (is(element, event)) {\n\n      var messageEventDefinition = eventDefinitionHelper.getMessageEventDefinition(element),\n          signalEventDefinition = eventDefinitionHelper.getSignalEventDefinition(element);\n\n      if (messageEventDefinition) {\n        message(group, element, bpmnFactory, messageEventDefinition, translate);\n      }\n\n      if (signalEventDefinition) {\n        signal(group, element, bpmnFactory, signalEventDefinition, translate);\n      }\n\n    }\n  });\n\n  // Special Case: Receive Task\n  if (is(element, 'bpmn:ReceiveTask')) {\n    message(group, element, bpmnFactory, getBusinessObject(element), translate);\n  }\n\n  // Error Event Definition\n  var errorEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:EndEvent'\n  ];\n\n  forEach(errorEvents, function(event) {\n    if (is(element, event)) {\n\n      var errorEventDefinition = eventDefinitionHelper.getErrorEventDefinition(element);\n\n      if (errorEventDefinition) {\n\n        error(group, element, bpmnFactory, errorEventDefinition, translate);\n      }\n    }\n  });\n\n  // Escalation Event Definition\n  var escalationEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:EndEvent'\n  ];\n\n  forEach(escalationEvents, function(event) {\n    if (is(element, event)) {\n\n      var showEscalationCodeVariable = is(element, 'bpmn:StartEvent') || is(element, 'bpmn:BoundaryEvent');\n\n      // get business object\n      var escalationEventDefinition = eventDefinitionHelper.getEscalationEventDefinition(element);\n\n      if (escalationEventDefinition) {\n        escalation(group, element, bpmnFactory, escalationEventDefinition, showEscalationCodeVariable,\n          translate);\n      }\n    }\n\n  });\n\n  // Timer Event Definition\n  var timerEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateCatchEvent'\n  ];\n\n  forEach(timerEvents, function(event) {\n    if (is(element, event)) {\n\n      // get business object\n      var timerEventDefinition = eventDefinitionHelper.getTimerEventDefinition(element);\n\n      if (timerEventDefinition) {\n        timer(group, element, bpmnFactory, timerEventDefinition, translate);\n      }\n    }\n  });\n\n  // Compensate Event Definition\n  var compensationEvents = [\n    'bpmn:EndEvent',\n    'bpmn:IntermediateThrowEvent'\n  ];\n\n  forEach(compensationEvents, function(event) {\n    if (is(element, event)) {\n\n      // get business object\n      var compensateEventDefinition = eventDefinitionHelper.getCompensateEventDefinition(element);\n\n      if (compensateEventDefinition) {\n        compensation(group, element, bpmnFactory, compensateEventDefinition, elementRegistry, translate);\n      }\n    }\n  });\n\n\n  // Conditional Event Definition\n  var conditionalEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:IntermediateCatchEvent'\n  ];\n\n  if (isAny(element, conditionalEvents)) {\n\n    // get business object\n    var conditionalEventDefinition = eventDefinitionHelper.getConditionalEventDefinition(element);\n\n    if (conditionalEventDefinition) {\n      condition(group, element, bpmnFactory, conditionalEventDefinition, elementRegistry, translate);\n    }\n  }\n\n};\n","var realNames = require('./_realNames');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = (func.name + ''),\n      array = realNames[result],\n      length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nmodule.exports = getFuncName;\n","'use strict';\n\nvar ElementHelper = {};\nmodule.exports = ElementHelper;\n\n/**\n * Creates a new element and set the parent to it\n *\n * @method ElementHelper#createElement\n *\n * @param {String} elementType of the new element\n * @param {Object} properties of the new element in key-value pairs\n * @param {moddle.object} parent of the new element\n * @param {BpmnFactory} factory which creates the new element\n *\n * @returns {djs.model.Base} element which is created\n */\nElementHelper.createElement = function(elementType, properties, parent, factory) {\n  var element = factory.create(elementType, properties);\n  element.$parent = parent;\n\n  return element;\n};\n","/**\n * A rule that checks that sequence flows outgoing from a\n * conditional forking gateway or activity are\n * either default flows _or_ have a condition attached\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!isConditionalForking(node)) {\n      return;\n    }\n\n    const outgoing = node.outgoing || [];\n\n    outgoing.forEach((flow) => {\n      const missingCondition = (\n        !hasCondition(flow) &&\n        !isDefaultFlow(node, flow)\n      );\n\n      if (missingCondition) {\n        reporter.report(flow.id, 'Sequence flow is missing condition');\n      }\n    });\n  }\n\n  return {\n    check\n  };\n\n};\n\n\n// helpers /////////////////////////////\n\nfunction isConditionalForking(node) {\n\n  const defaultFlow = node['default'];\n  const outgoing = node.outgoing || [];\n\n  return defaultFlow || outgoing.find(hasCondition);\n}\n\nfunction hasCondition(flow) {\n  return !!flow.conditionExpression;\n}\n\nfunction isDefaultFlow(node, flow) {\n  return node['default'] === flow;\n}","var baseCreate = require('./_baseCreate'),\n    isObject = require('./isObject');\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nmodule.exports = createCtor;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar historyTimeToLive = require('./implementation/HistoryTimeToLive');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'camunda:Process') ||\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n\n    group.entries = group.entries.concat(historyTimeToLive(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        var bo = getBusinessObject(element);\n\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n\n        return bo.get('processRef');\n      }\n    }, translate));\n\n  }\n};\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","import {\n  some\n} from 'min-dash';\n\nimport { is } from '../../../util/ModelUtil';\n\n\n/**\n * Return true if element has any of the given types.\n *\n * @param {djs.model.Base} element\n * @param {Array<String>} types\n *\n * @return {Boolean}\n */\nexport function isAny(element, types) {\n  return some(types, function(t) {\n    return is(element, t);\n  });\n}\n\n\n/**\n * Return the parent of the element with any of the given types.\n *\n * @param {djs.model.Base} element\n * @param {String|Array<String>} anyType\n *\n * @return {djs.model.Base}\n */\nexport function getParent(element, anyType) {\n\n  if (typeof anyType === 'string') {\n    anyType = [ anyType ];\n  }\n\n  while ((element = element.parent)) {\n    if (isAny(element, anyType)) {\n      return element;\n    }\n  }\n\n  return null;\n}","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var candidateStarterGroupsEntry = entryFactory.textField({\n    id: 'candidateStarterGroups',\n    label: translate('Candidate Starter Groups'),\n    modelProperty: 'candidateStarterGroups',\n    description: translate('Specify more than one group as a comma separated list.'),\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var candidateStarterGroups = bo.get('camunda:candidateStarterGroups');\n\n      return {\n        candidateStarterGroups: candidateStarterGroups ? candidateStarterGroups : ''\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:candidateStarterGroups': values.candidateStarterGroups || undefined\n      });\n    }\n\n  });\n\n  var candidateStarterUsersEntry = entryFactory.textField({\n    id: 'candidateStarterUsers',\n    label: translate('Candidate Starter Users'),\n    modelProperty: 'candidateStarterUsers',\n    description: translate('Specify more than one user as a comma separated list.'),\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var candidateStarterUsers = bo.get('camunda:candidateStarterUsers');\n\n      return {\n        candidateStarterUsers: candidateStarterUsers ? candidateStarterUsers : ''\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:candidateStarterUsers': values.candidateStarterUsers || undefined\n      });\n    }\n\n  });\n\n  return [\n    candidateStarterGroupsEntry,\n    candidateStarterUsersEntry\n  ];\n};\n","import { isArray } from 'min-dash';\r\n\r\n/**\r\n * Returns true if event was triggered with any modifier\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function hasModifier(event) {\r\n  return (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isCmd(event) {\r\n\r\n  // ensure we don't react to AltGr\r\n  // (mapped to CTRL + ALT)\r\n  if (event.altKey) {\r\n    return false;\r\n  }\r\n\r\n  return event.ctrlKey || event.metaKey;\r\n}\r\n\r\n/**\r\n * Checks if key pressed is one of provided keys.\r\n *\r\n * @param {String|String[]} keys\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isKey(keys, event) {\r\n  keys = isArray(keys) ? keys : [ keys ];\r\n\r\n  return keys.indexOf(event.key) > -1;\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isShift(event) {\r\n  return event.shiftKey;\r\n}","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\nvar bind = require('lodash/bind');\n\n/**\n * An entry that renders a clickable link.\n *\n * A passed {@link options#handleClick} handler is responsible\n * to process the click.\n *\n * The link may be conditionally shown or hidden. This can be\n * controlled via the {@link options.showLink}.\n *\n * @param {Object} options\n * @param {String} options.id\n * @param {String} [options.label]\n * @param {Function} options.handleClick\n * @param {Function} [options.showLink] returning false to hide link\n * @param {String} [options.description]\n *\n * @example\n *\n * var linkEntry = link({\n *   id: 'foo',\n *   description: 'Some Description',\n *   handleClick: function(element, node, event) { ... },\n *   showLink: function(element, node) { ... }\n * });\n *\n * @return {Entry} the newly created entry\n */\nfunction link(options) {\n\n  var id = options.id,\n      label = options.label || id,\n      showLink = options.showLink,\n      handleClick = options.handleClick,\n      description = options.description;\n\n  if (showLink && typeof showLink !== 'function') {\n    throw new Error('options.showLink must be a function');\n  }\n\n  if (typeof handleClick !== 'function') {\n    throw new Error('options.handleClick must be a function');\n  }\n\n  var resource = {\n    id: id\n  };\n\n  resource.html =\n    '<a data-action=\"handleClick\" ' +\n    (showLink ? 'data-show=\"showLink\" ' : '') +\n    'class=\"bpp-entry-link' + (options.cssClasses ? ' ' + escapeHTML(options.cssClasses) : '') +\n    '\">' + escapeHTML(label) + '</a>';\n\n  // add description below link entry field\n  if (description) {\n    resource.html += entryFieldDescription(description);\n  }\n\n  resource.handleClick = bind(handleClick, resource);\n\n  if (typeof showLink === 'function') {\n    resource.showLink = function() {\n      return showLink.apply(resource, arguments);\n    };\n  }\n\n  return resource;\n}\n\nmodule.exports = link;\n","'use strict';\n\nvar cmdHelper = require('../../../../helper/CmdHelper'),\n    entryFactory = require('../../../../factory/EntryFactory'),\n    elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper');\n\n\nvar resultVariable = require('./ResultVariable');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar forEach = require('lodash/forEach');\n\nvar attributeInfo = {\n  bpmn: {\n    element: 'calledElement',\n    binding: 'camunda:calledElementBinding',\n    version: 'camunda:calledElementVersion',\n    versionTag: 'camunda:calledElementVersionTag',\n    tenantId: 'camunda:calledElementTenantId'\n  },\n\n  cmmn: {\n    element: 'camunda:caseRef',\n    binding: 'camunda:caseBinding',\n    version: 'camunda:caseVersion',\n    tenantId: 'camunda:caseTenantId'\n  },\n\n  dmn: {\n    element: 'camunda:decisionRef',\n    binding: 'camunda:decisionRefBinding',\n    version: 'camunda:decisionRefVersion',\n    versionTag: 'camunda:decisionRefVersionTag',\n    tenantId: 'camunda:decisionRefTenantId'\n  }\n};\n\nvar mapDecisionResultOptions = [\n  {\n    name: 'singleEntry (TypedValue)',\n    value: 'singleEntry'\n  },\n  {\n    name:'singleResult (Map<String, Object>)',\n    value:'singleResult'\n  },\n  {\n    name:'collectEntries (List<Object>)',\n    value:'collectEntries'\n  },\n  {\n    name:'resultList (List<Map<String, Object>>)',\n    value:'resultList'\n  }\n];\n\nvar delegateVariableMappingOptions = [\n  {\n    name: 'variableMappingClass',\n    value: 'variableMappingClass'\n  },\n  {\n    name: 'variableMappingDelegateExpression',\n    value: 'variableMappingDelegateExpression'\n  }\n];\n\nfunction getCamundaInWithBusinessKey(element) {\n  var camundaIn = [],\n      bo = getBusinessObject(element);\n\n  var camundaInParams = extensionElementsHelper.getExtensionElements(bo, 'camunda:In');\n  if (camundaInParams) {\n    forEach(camundaInParams, function(param) {\n      if (param.businessKey !== undefined) {\n        camundaIn.push(param);\n      }\n    });\n  }\n  return camundaIn;\n}\n\nfunction setBusinessKey(element, text, bpmnFactory) {\n  var commands = [];\n\n  var camundaInWithBusinessKey = getCamundaInWithBusinessKey(element);\n\n  if (camundaInWithBusinessKey.length) {\n    commands.push(cmdHelper.updateBusinessObject(element, camundaInWithBusinessKey[0], {\n      businessKey: text\n    }));\n  } else {\n    var bo = getBusinessObject(element),\n        extensionElements = bo.extensionElements;\n\n    if (!extensionElements) {\n      extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n      commands.push(cmdHelper.updateProperties(element, { extensionElements: extensionElements }));\n    }\n\n    var camundaIn = elementHelper.createElement(\n      'camunda:In',\n      { 'businessKey': text },\n      extensionElements,\n      bpmnFactory\n    );\n\n    commands.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      extensionElements,\n      'values',\n      'extensionElements',\n      [ camundaIn ],[]\n    ));\n  }\n\n  return commands;\n}\n\nfunction deleteBusinessKey(element) {\n  var camundaInExtensions = getCamundaInWithBusinessKey(element);\n  var commands = [];\n  forEach(camundaInExtensions, function(elem) {\n    commands.push(extensionElementsHelper.removeEntry(getBusinessObject(element), element, elem));\n  });\n  return commands;\n}\n\nfunction isSupportedCallableType(type) {\n  return [ 'bpmn', 'cmmn', 'dmn' ].indexOf(type) !== -1;\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var bindingOptions = [\n    {\n      name: translate('latest'),\n      value: 'latest'\n    },\n    {\n      name: translate('deployment'),\n      value: 'deployment'\n    },\n    {\n      name: translate('version'),\n      value: 'version'\n    },\n    {\n      name: translate('versionTag'),\n      value: 'versionTag'\n    }\n  ];\n\n  var getCallableType = options.getCallableType;\n\n  var entries = [];\n\n  function getAttribute(element, prop) {\n    var type = getCallableType(element);\n    return (attributeInfo[type] || {})[prop];\n  }\n\n  function getCallActivityBindingValue(element) {\n    var type = getCallableType(element);\n    var bo = getBusinessObject(element);\n    var attr = (attributeInfo[type] || {}).binding;\n    return bo.get(attr);\n  }\n\n  function getDelegateVariableMappingType(element) {\n    var bo = getBusinessObject(element);\n\n    var boVariableMappingClass = bo.get('camunda:variableMappingClass'),\n        boVariableMappingDelegateExpression = bo.get('camunda:variableMappingDelegateExpression');\n\n    var delegateVariableMappingType = '';\n    if (typeof boVariableMappingClass !== 'undefined') {\n      delegateVariableMappingType = 'variableMappingClass';\n    } else\n\n    if (typeof boVariableMappingDelegateExpression !== 'undefined') {\n      delegateVariableMappingType = 'variableMappingDelegateExpression';\n    }\n\n    return delegateVariableMappingType;\n  }\n\n\n  entries.push(entryFactory.textField({\n    id: 'callable-element-ref',\n    dataValueLabel: 'callableElementLabel',\n    modelProperty: 'callableElementRef',\n\n    get: function(element, node) {\n      var callableElementRef;\n\n      var attr = getAttribute(element, 'element');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        callableElementRef = bo.get(attr);\n      }\n\n      var label = '';\n      var type = getCallableType(element);\n      if (type === 'bpmn') {\n        label = translate('Called Element');\n      }\n      else if (type === 'cmmn') {\n        label = translate('Case Ref');\n      }\n      else if (type === 'dmn') {\n        label = translate('Decision Ref');\n      }\n\n      return {\n        callableElementRef: callableElementRef,\n        callableElementLabel: label\n      };\n    },\n\n    set: function(element, values, node) {\n      var newCallableElementRef = values.callableElementRef;\n      var attr = getAttribute(element, 'element');\n\n      var props = {};\n      props[attr] = newCallableElementRef || '';\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var elementRef = values.callableElementRef;\n      var type = getCallableType(element);\n      return isSupportedCallableType(type) && !elementRef ? { callableElementRef: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isSupportedCallableType(getCallableType(element));\n    }\n\n  }));\n\n  entries.push(entryFactory.selectBox({\n    id: 'callable-binding',\n    label: translate('Binding'),\n    selectOptions: function(element) {\n      var type = getCallableType(element);\n      var options;\n\n      if (type === 'cmmn') {\n        options = bindingOptions.filter(function(bindingOption) {\n          return bindingOption.value !== 'versionTag';\n        });\n      } else {\n        options = bindingOptions;\n      }\n      return options;\n    },\n    modelProperty: 'callableBinding',\n\n    get: function(element, node) {\n      var callableBinding;\n\n      var attr = getAttribute(element, 'binding');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        callableBinding = bo.get(attr) || 'latest';\n      }\n\n      return {\n        callableBinding: callableBinding\n      };\n    },\n\n    set: function(element, values, node) {\n      var binding = values.callableBinding;\n      var attr = getAttribute(element, 'binding'),\n          attrVer = getAttribute(element, 'version'),\n          attrVerTag = getAttribute(element, 'versionTag');\n\n      var props = {};\n      props[attr] = binding;\n\n      // set version and versionTag values always to undefined to delete the existing value\n      props[attrVer] = undefined;\n      props[attrVerTag] = undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    hidden: function(element, node) {\n      return !isSupportedCallableType(getCallableType(element));\n    }\n\n  }));\n\n  entries.push(entryFactory.textField({\n    id: 'callable-version',\n    label: translate('Version'),\n    modelProperty: 'callableVersion',\n\n    get: function(element, node) {\n      var callableVersion;\n\n      var attr = getAttribute(element, 'version');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        callableVersion = bo.get(attr);\n      }\n\n      return {\n        callableVersion: callableVersion\n      };\n    },\n\n    set: function(element, values, node) {\n      var version = values.callableVersion;\n      var attr = getAttribute(element, 'version');\n\n      var props = {};\n      props[attr] = version || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var version = values.callableVersion;\n\n      var type = getCallableType(element);\n      return (\n        isSupportedCallableType(type) &&\n        getCallActivityBindingValue(element) === 'version' && (\n          !version ? { callableVersion: translate('Must provide a value') } : {}\n        )\n      );\n    },\n\n    hidden: function(element, node) {\n      var type = getCallableType(element);\n      return !isSupportedCallableType(type) || getCallActivityBindingValue(element) !== 'version';\n    }\n\n  }));\n\n  entries.push(entryFactory.textField({\n    id: 'callable-version-tag',\n    label: translate('Version Tag'),\n    modelProperty: 'versionTag',\n\n    get: function(element, node) {\n      var versionTag;\n\n      var attr = getAttribute(element, 'versionTag');\n\n      if (attr) {\n        var bo = getBusinessObject(element);\n\n        versionTag = bo.get(attr);\n      }\n\n      return {\n        versionTag: versionTag\n      };\n    },\n\n    set: function(element, values, node) {\n      var versionTag = values.versionTag;\n\n      var attr = getAttribute(element, 'versionTag');\n\n      var props = {};\n\n      props[attr] = versionTag || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var versionTag = values.versionTag;\n\n      var type = getCallableType(element);\n\n      return (\n        isSupportedCallableType(type) &&\n        getCallActivityBindingValue(element) === 'versionTag' && (\n          !versionTag ? { versionTag: translate('Must provide a value') } : {}\n        )\n      );\n    },\n\n    hidden: function(element, node) {\n      var type = getCallableType(element);\n\n      return !isSupportedCallableType(type) || getCallActivityBindingValue(element) !== 'versionTag';\n    }\n\n  }));\n\n  entries.push(entryFactory.textField({\n    id: 'tenant-id',\n    label: translate('Tenant Id'),\n    modelProperty: 'tenantId',\n\n    get: function(element, node) {\n      var tenantId;\n\n      var attr = getAttribute(element, 'tenantId');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        tenantId = bo.get(attr);\n      }\n\n      return {\n        tenantId: tenantId\n      };\n    },\n\n    set: function(element, values, node) {\n      var tenantId = values.tenantId;\n      var attr = getAttribute(element, 'tenantId');\n\n      var props = {};\n      props[attr] = tenantId || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    hidden: function(element, node) {\n      var type = getCallableType(element);\n      return !isSupportedCallableType(type);\n    }\n\n  }));\n\n  if (is(getBusinessObject(element), 'bpmn:CallActivity')) {\n    entries.push(entryFactory.checkbox({\n      id: 'callable-business-key',\n      label: translate('Business Key'),\n      modelProperty: 'callableBusinessKey',\n\n      get: function(element, node) {\n        var camundaIn = getCamundaInWithBusinessKey(element);\n\n        return {\n          callableBusinessKey: !!(camundaIn && camundaIn.length > 0)\n        };\n      },\n\n      set: function(element, values, node) {\n        if (values.callableBusinessKey) {\n          return setBusinessKey(element, '#{execution.processBusinessKey}', bpmnFactory);\n        } else {\n          return deleteBusinessKey(element);\n        }\n      }\n    }));\n  }\n\n  entries.push(entryFactory.textField({\n    id: 'business-key-expression',\n    label: translate('Business Key Expression'),\n    modelProperty: 'businessKey',\n\n    get: function(element, node) {\n      var camundaInWithBusinessKey = getCamundaInWithBusinessKey(element);\n\n      return {\n        businessKey: (\n          camundaInWithBusinessKey.length ?\n            camundaInWithBusinessKey[0].get('camunda:businessKey') :\n            undefined\n        )\n      };\n    },\n\n    set: function(element, values, node) {\n      var businessKey = values.businessKey;\n\n      return setBusinessKey(element, businessKey, bpmnFactory);\n    },\n\n    validate: function(element, values, node) {\n      var businessKey = values.businessKey;\n\n      return businessKey === '' ? { businessKey: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !getCamundaInWithBusinessKey(element).length;\n    }\n\n  }));\n\n  entries = entries.concat(resultVariable(element, bpmnFactory, {\n    id: 'dmn-resultVariable',\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getCallableType,\n    hideResultVariable: function(element, node) {\n      return getCallableType(element) !== 'dmn';\n    }\n  }, translate));\n\n  entries.push(entryFactory.selectBox({\n    id: 'dmn-map-decision-result',\n    label: translate('Map Decision Result'),\n    selectOptions: mapDecisionResultOptions,\n    modelProperty: 'mapDecisionResult',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        mapDecisionResult: bo.get('camunda:mapDecisionResult') || 'resultList'\n      };\n    },\n\n    set: function(element, values, node) {\n      return cmdHelper.updateProperties(element, {\n        'camunda:mapDecisionResult': values.mapDecisionResult || 'resultList'\n      });\n    },\n\n    hidden: function(element, node) {\n      var bo = getBusinessObject(element);\n      var resultVariable = bo.get('camunda:resultVariable');\n      return !(getCallableType(element) === 'dmn' && typeof resultVariable !== 'undefined');\n    }\n\n  }));\n\n\n  entries.push(entryFactory.selectBox({\n    id: 'delegateVariableMappingType',\n    label: translate('Delegate Variable Mapping'),\n    selectOptions: delegateVariableMappingOptions,\n    emptyParameter: true,\n    modelProperty: 'delegateVariableMappingType',\n\n    get: function(element, node) {\n      return {\n        delegateVariableMappingType : getDelegateVariableMappingType(element)\n      };\n    },\n\n    set: function(element, values, node) {\n      var delegateVariableMappingType = values.delegateVariableMappingType;\n\n      var props = {\n        'camunda:variableMappingClass' : undefined,\n        'camunda:variableMappingDelegateExpression' : undefined\n      };\n\n      if (delegateVariableMappingType === 'variableMappingClass') {\n        props['camunda:variableMappingClass'] = '';\n      }\n      else if (delegateVariableMappingType === 'variableMappingDelegateExpression') {\n        props['camunda:variableMappingDelegateExpression'] = '';\n      }\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    hidden: function(element, node) {\n      return (getCallableType(element) !== 'bpmn');\n    }\n\n  }));\n\n  entries.push(entryFactory.textField({\n    id: 'delegateVariableMapping',\n    dataValueLabel: 'delegateVariableMappingLabel',\n    modelProperty: 'delegateVariableMapping',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n\n      var label = '';\n      var delegateVariableMapping = undefined;\n      var type = getDelegateVariableMappingType(element);\n\n      if (type === 'variableMappingClass') {\n        label = translate('Class');\n        delegateVariableMapping = bo.get('camunda:variableMappingClass');\n      }\n      else if (type === 'variableMappingDelegateExpression') {\n        label = translate('Delegate Expression');\n        delegateVariableMapping = bo.get('camunda:variableMappingDelegateExpression');\n      }\n\n      return {\n        delegateVariableMapping: delegateVariableMapping,\n        delegateVariableMappingLabel: label\n      };\n    },\n\n    set: function(element, values, node) {\n      var delegateVariableMapping = values.delegateVariableMapping;\n\n      var attr = 'camunda:' + getDelegateVariableMappingType(element);\n\n      var props = {};\n      props[attr] = delegateVariableMapping || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var delegateVariableMapping = values.delegateVariableMapping;\n      return (\n        getCallableType(element) === 'bpmn' && (\n          !delegateVariableMapping ? { delegateVariableMapping: translate('Must provide a value') } : {}\n        )\n      );\n    },\n\n    hidden: function(element, node) {\n      return !(getCallableType(element) === 'bpmn' && getDelegateVariableMappingType(element) !== '');\n    }\n\n  }));\n\n  return entries;\n};\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","import {\n  isCmd,\n  isKey,\n  isShift\n} from './KeyboardUtil';\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Adds default keyboard bindings.\n *\n * This does not pull in any features will bind only actions that\n * have previously been registered against the editorActions component.\n *\n * @param {EventBus} eventBus\n * @param {Keyboard} keyboard\n */\nexport default function KeyboardBindings(eventBus, keyboard) {\n\n  var self = this;\n\n  eventBus.on('editorActions.init', LOW_PRIORITY, function(event) {\n\n    var editorActions = event.editorActions;\n\n    self.registerBindings(keyboard, editorActions);\n  });\n}\n\nKeyboardBindings.$inject = [\n  'eventBus',\n  'keyboard'\n];\n\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nKeyboardBindings.prototype.registerBindings = function(keyboard, editorActions) {\n\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {String} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n\n  // undo\n  // (CTRL|CMD) + Z\n  addListener('undo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCmd(event) && !isShift(event) && isKey(['z', 'Z'], event)) {\n      editorActions.trigger('undo');\n\n      return true;\n    }\n  });\n\n  // redo\n  // CTRL + Y\n  // CMD + SHIFT + Z\n  addListener('redo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCmd(event) && (isKey(['y', 'Y'], event) || (isKey(['z', 'Z'], event) && isShift(event)))) {\n      editorActions.trigger('redo');\n\n      return true;\n    }\n  });\n\n  // copy\n  // CTRL/CMD + C\n  addListener('copy', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCmd(event) && isKey(['c', 'C'], event)) {\n      editorActions.trigger('copy');\n\n      return true;\n    }\n  });\n\n  // paste\n  // CTRL/CMD + V\n  addListener('paste', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCmd(event) && isKey(['v', 'V'], event)) {\n      editorActions.trigger('paste');\n\n      return true;\n    }\n  });\n\n  // zoom in one step\n  // CTRL/CMD + +\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ '+', 'Add' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // zoom out one step\n  // CTRL + -\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ '-', 'Subtract' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: -1 });\n\n      return true;\n    }\n  });\n\n  // zoom to the default level\n  // CTRL + 0\n  addListener('zoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey('0', event) && isCmd(event)) {\n      editorActions.trigger('zoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // delete selected element\n  // DEL\n  addListener('removeSelection', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ 'Delete', 'Del' ], event)) {\n      editorActions.trigger('removeSelection');\n\n      return true;\n    }\n  });\n};","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","import inherits from 'inherits';\n\nimport Viewer from './Viewer';\n\nimport KeyboardMoveModule from 'diagram-js/lib/navigation/keyboard-move';\nimport MoveCanvasModule from 'diagram-js/lib/navigation/movecanvas';\nimport ZoomScrollModule from 'diagram-js/lib/navigation/zoomscroll';\n\n\n/**\n * A viewer that includes mouse navigation facilities\n *\n * @param {Object} options\n */\nexport default function NavigatedViewer(options) {\n  Viewer.call(this, options);\n}\n\ninherits(NavigatedViewer, Viewer);\n\n\nNavigatedViewer.prototype._navigationModules = [\n  KeyboardMoveModule,\n  MoveCanvasModule,\n  ZoomScrollModule\n];\n\nNavigatedViewer.prototype._modules = [].concat(\n  Viewer.prototype._modules,\n  NavigatedViewer.prototype._navigationModules\n);","import axios from 'axios'\r\n\r\nexport function request(config) {\r\n  //1.创建实例\r\n  const instance = axios.create({\r\n    baseURL: \"http://localhost:5000\" ,\r\n    //http://backend-py:8000/\r\n    //baseURL: \"http://backend-java:8090\",\r\n    //baseURL: \"http://lxc-backend-java.ingress.isa.buaanlsde.cn\",\r\n    //timeout: 5000\r\n  })\r\n\r\n  //2.发送真正的网络请求\r\n  return instance(config)\r\n\r\n}\r\n\r\nexport function requestForChatbot(config){\r\n  const instance = axios.create({\r\n    baseURL: \"http://localhost:5001\" ,\r\n    //http://backend-py:8000/\r\n    //baseURL: \"http://backend-java:8090\",\r\n    //baseURL: \"http://lxc-backend-java.ingress.isa.buaanlsde.cn\",\r\n    //timeout: 5000\r\n  })\r\n\r\n  //2.发送真正的网络请求\r\n  return instance(config)\r\n}\r\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","module.exports = require('./lib');\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","'use strict';\n\nvar forEach = require('lodash/forEach');\n\nvar elementHelper = require('../helper/ElementHelper');\n\n/**\n * A handler that implements a BPMN 2.0 property update\n * for business objects which are not represented in the\n * diagram.\n *\n * This is useful in the context of the properties panel in\n * order to update child elements of elements visible in\n * the diagram.\n *\n * Example: perform an update of a specific event definition\n * of an intermediate event.\n *\n * @class\n * @constructor\n */\nfunction CreateBusinessObjectListHandler(elementRegistry, bpmnFactory) {\n  this._elementRegistry = elementRegistry;\n  this._bpmnFactory = bpmnFactory;\n}\n\nCreateBusinessObjectListHandler.$inject = [ 'elementRegistry', 'bpmnFactory' ];\n\nmodule.exports = CreateBusinessObjectListHandler;\n\nfunction ensureNotNull(prop, name) {\n  if (!prop) {\n    throw new Error(name + ' required');\n  }\n  return prop;\n\n}\nfunction ensureList(prop, name) {\n  if (!prop || Object.prototype.toString.call(prop) !== '[object Array]') {\n    throw new Error(name + ' needs to be a list');\n  }\n  return prop;\n}\n\n// api /////////////////////////////////////////////\n\n/**\n * Creates a new element under a provided parent and updates / creates a reference to it in\n * one atomic action.\n *\n * @method  CreateBusinessObjectListHandler#execute\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element which is the context for the reference\n * @param {moddle.referencingObject} context.referencingObject the object which creates the reference\n * @param {String} context.referenceProperty the property of the referencingObject which makes the reference\n * @param {moddle.newObject} context.newObject the new object to add\n * @param {moddle.newObjectContainer} context.newObjectContainer the container for the new object\n *\n * @return {Array<djs.mode.Base>} the updated element\n */\nCreateBusinessObjectListHandler.prototype.execute = function(context) {\n\n  var currentObject = ensureNotNull(context.currentObject, 'currentObject'),\n      propertyName = ensureNotNull(context.propertyName, 'propertyName'),\n      newObjects = ensureList(context.newObjects, 'newObjects'),\n      changed = [ context.element ]; // this will not change any diagram-js elements\n\n\n  var childObjects = [];\n  var self = this;\n\n  // create new array of business objects\n  forEach(newObjects, function(obj) {\n    var element = elementHelper.createElement(obj.type, obj.properties, currentObject, self._bpmnFactory);\n\n    childObjects.push(element);\n  });\n  context.childObject = childObjects;\n\n  // adjust array reference in the parent business object\n  context.previousChilds = currentObject[propertyName];\n  currentObject[propertyName] = childObjects;\n\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  CreateBusinessObjectListHandler#revert\n *\n * @param {Object} context\n *\n * @return {djs.mode.Base} the updated element\n */\nCreateBusinessObjectListHandler.prototype.revert = function(context) {\n\n  var currentObject = context.currentObject,\n      propertyName = context.propertyName,\n      previousChilds = context.previousChilds;\n\n  // remove new element\n  currentObject.set(propertyName, previousChilds);\n\n  return context.changed;\n};\n","'use strict';\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\n/**\n * Get the timer definition type for a given timer event definition.\n *\n * @param {ModdleElement<bpmn:TimerEventDefinition>} timer\n *\n * @return {string|undefined} the timer definition type\n */\nfunction getTimerDefinitionType(timer) {\n\n  if (!timer) {\n    return;\n  }\n\n  var timeDate = timer.get('timeDate');\n  if (typeof timeDate !== 'undefined') {\n    return 'timeDate';\n  }\n\n  var timeCycle = timer.get('timeCycle');\n  if (typeof timeCycle !== 'undefined') {\n    return 'timeCycle';\n  }\n\n  var timeDuration = timer.get('timeDuration');\n  if (typeof timeDuration !== 'undefined') {\n    return 'timeDuration';\n  }\n}\n\n/**\n * Get the actual timer event definition based on option, whether it's a getter\n * to fetch the timer event definition or the exact event definition itself\n *\n * @param {ModdleElement<bpmn:TimerEventDefinition>|Function} timerOrFunction\n * @param {Shape} element\n * @param {HTMLElement} node\n *\n * @return ModdleElement<bpmn:TimerEventDefinition>\n */\nfunction getTimerDefinition(timerOrFunction, element, node) {\n  if (typeof timerOrFunction === 'function') {\n    return timerOrFunction(element, node);\n  }\n\n  return timerOrFunction;\n}\n\n/**\n * Creates 'bpmn:FormalExpression' element.\n *\n * @param {ModdleElement} parent\n * @param {string} body\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement<bpmn:FormalExpression>} a formal expression\n */\nfunction createFormalExpression(parent, body, bpmnFactory) {\n  body = body || undefined;\n  return elementHelper.createElement('bpmn:FormalExpression', { body: body }, parent, bpmnFactory);\n}\n\nfunction TimerEventDefinition(group, element, bpmnFactory, timerEventDefinition, translate, options) {\n\n  var selectOptions = [\n    { value: 'timeDate', name: translate('Date') },\n    { value: 'timeDuration', name: translate('Duration') },\n    { value: 'timeCycle', name: translate('Cycle') }\n  ];\n\n  var prefix = options && options.idPrefix,\n      createTimerEventDefinition = options && options.createTimerEventDefinition;\n\n\n  group.entries.push(entryFactory.selectBox({\n    id: prefix + 'timer-event-definition-type',\n    label: translate('Timer Definition Type'),\n    selectOptions: selectOptions,\n    emptyParameter: true,\n    modelProperty: 'timerDefinitionType',\n\n    get: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node);\n\n      return {\n        timerDefinitionType: getTimerDefinitionType(timerDefinition) || ''\n      };\n    },\n\n    set: function(element, values, node) {\n      var props = {\n        timeDuration: undefined,\n        timeDate: undefined,\n        timeCycle: undefined\n      };\n\n\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          newType = values.timerDefinitionType;\n\n      if (!timerDefinition && typeof createTimerEventDefinition === 'function') {\n        timerDefinition = createTimerEventDefinition(element, node);\n      }\n\n      if (values.timerDefinitionType) {\n        var oldType = getTimerDefinitionType(timerDefinition);\n\n        var value;\n        if (oldType) {\n          var definition = timerDefinition.get(oldType);\n          value = definition.get('body');\n        }\n\n        props[newType] = createFormalExpression(timerDefinition, value, bpmnFactory);\n      }\n\n      return cmdHelper.updateBusinessObject(element, timerDefinition, props);\n    },\n\n    hidden: function(element, node) {\n      return getTimerDefinition(timerEventDefinition, element, node) === undefined;\n    }\n\n  }));\n\n\n  group.entries.push(entryFactory.textField({\n    id: prefix + 'timer-event-definition',\n    label: translate('Timer Definition'),\n    modelProperty: 'timerDefinition',\n\n    get: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          type = getTimerDefinitionType(timerDefinition),\n          definition = type && timerDefinition.get(type),\n          value = definition && definition.get('body');\n\n      return {\n        timerDefinition: value\n      };\n    },\n\n    set: function(element, values, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          type = getTimerDefinitionType(timerDefinition),\n          definition = type && timerDefinition.get(type);\n\n      if (definition) {\n        return cmdHelper.updateBusinessObject(element, definition, {\n          body: values.timerDefinition || undefined\n        });\n      }\n    },\n\n    validate: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          type = getTimerDefinitionType(timerDefinition),\n          definition = type && timerDefinition.get(type);\n\n      if (definition) {\n        var value = definition.get('body');\n        if (!value) {\n          return {\n            timerDefinition: translate('Must provide a value')\n          };\n        }\n      }\n    },\n\n    hidden: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node);\n\n      return !getTimerDefinitionType(timerDefinition);\n    }\n\n  }));\n\n}\n\nmodule.exports = TimerEventDefinition;\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getImplementationType = options.getImplementationType,\n      getBusinessObject = options.getBusinessObject;\n\n  function isExternal(element) {\n    return getImplementationType(element) === 'external';\n  }\n\n  var topicEntry = entryFactory.textField({\n    id: 'externalTopic',\n    label: translate('Topic'),\n    modelProperty: 'externalTopic',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return { externalTopic: bo.get('camunda:topic') };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:topic': values.externalTopic\n      });\n    },\n\n    validate: function(element, values, node) {\n      return isExternal(element) && !values.externalTopic ? { externalTopic: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isExternal(element);\n    }\n\n  });\n\n  return [ topicEntry ];\n\n};\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","'use strict';\n\nvar inherits = require('inherits');\n\nvar getTemplate = require('./Helper').getTemplate;\n\nvar PropertiesActivator = require('../../../PropertiesActivator');\n\nvar HIGHER_PRIORITY = 1100;\n\n/**\n * Applies template visibility settings.\n *\n * Controlled using `entriesVisible` on template config object:\n *\n * ```json\n *     \"entriesVisible\": {\n *       \"_all\": true|false,\n *       \"entryName\": true|false,\n *       ...\n *     }\n * ```\n *\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n */\nfunction CustomElementsPropertiesActivator(eventBus, elementTemplates) {\n  PropertiesActivator.call(this, eventBus, HIGHER_PRIORITY);\n\n  this.isEntryVisible = function(entry, element) {\n\n    var template = getTemplate(element, elementTemplates);\n\n    if (template && !isEntryVisible(entry, template)) {\n      return false;\n    }\n  };\n\n  this.isPropertyEditable = function(entry, propertyName, element) {\n\n    var template = getTemplate(element, elementTemplates);\n\n    if (template && !isEntryEditable(entry, template)) {\n      return false;\n    }\n  };\n}\n\nCustomElementsPropertiesActivator.$inject = [ 'eventBus', 'elementTemplates' ];\n\ninherits(CustomElementsPropertiesActivator, PropertiesActivator);\n\nmodule.exports = CustomElementsPropertiesActivator;\n\n\n\n// helpers ////////////////////////////////////\n\n\nvar CUSTOM_PROPERTIES_PATTERN = /^custom-/;\n\nvar DEFAULT_ENTRIES_VISIBLE = {\n  _all: false,\n  id: true,\n  name: true\n};\n\nfunction isCustomEntry(entry) {\n  return CUSTOM_PROPERTIES_PATTERN.test(entry.id);\n}\n\nfunction isEntryVisible(entry, template) {\n\n  var entryId = entry.id;\n\n  if (entryId === 'elementTemplate-chooser' || isCustomEntry(entry)) {\n    return true;\n  }\n\n  var entriesVisible = template.entriesVisible || DEFAULT_ENTRIES_VISIBLE;\n\n  if (typeof entriesVisible === 'boolean') {\n    return entriesVisible;\n  }\n\n  var defaultVisible = entriesVisible._all || false,\n      entryVisible = entriesVisible[entryId];\n\n  // d = true, e = false => false\n  // d = false, e = true => true\n  // d = false, e = false\n  return (\n    (defaultVisible === true && entryVisible !== false) ||\n    (defaultVisible === false && entryVisible === true)\n  );\n}\n\nfunction isEntryEditable(entry, template) {\n\n  var property;\n\n  if (isCustomEntry(entry)) {\n    property = getProperty(template, entry);\n\n    return property && property.editable !== false;\n  }\n\n  return true;\n}\n\nfunction getProperty(template, entry) {\n\n  var index;\n  var idx = entry.id.replace('custom-' + template.id + '-', '');\n  if (idx.indexOf('-') !== -1) {\n    var indexes = idx.split('-');\n    if (indexes.length == 2) {\n      var scopeName = indexes[0].replace(/_/g, ':');\n      index = parseInt(indexes[1], 10);\n      if (scopeName && !isNaN(index)) {\n        return template.scopes[scopeName].properties[index];\n      }\n    }\n  } else {\n    index = parseInt(idx, 10);\n    if (!isNaN(index)) {\n      return template.properties[index];\n    }\n  }\n\n  throw new Error('cannot extract property index for entry <' + entry.id + '>');\n}\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar fieldInjection = require('./implementation/FieldInjection');\n\nmodule.exports = function(group, element, bpmnFactory, options, translate) {\n\n  options = assign({\n    idPrefix: 'listener-',\n    insideListener: true\n  }, options);\n\n  var fieldInjectionEntry = fieldInjection(element, bpmnFactory, translate, options);\n\n  if (fieldInjectionEntry && fieldInjectionEntry.length > 0) {\n    group.entries = group.entries.concat(fieldInjectionEntry);\n  }\n\n};\n","/** Used to lookup unminified function names. */\nvar realNames = {};\n\nmodule.exports = realNames;\n","'use strict';\n\nvar nameEntryFactory = require('./implementation/Name'),\n    createCategoryValue = require('../../../helper/CategoryHelper').createCategoryValue,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nmodule.exports = function(group, element, bpmnFactory, canvas, translate) {\n\n  function initializeCategory(semantic) {\n    var rootElement = canvas.getRootElement(),\n        definitions = getBusinessObject(rootElement).$parent,\n        categoryValue = createCategoryValue(definitions, bpmnFactory);\n\n    semantic.categoryValueRef = categoryValue;\n\n  }\n\n  function setGroupName(element, values) {\n    var bo = getBusinessObject(element),\n        categoryValueRef = bo.categoryValueRef;\n\n    if (!categoryValueRef) {\n      initializeCategory(bo);\n    }\n\n    // needs direct call to update categoryValue properly\n    return {\n      cmd: 'element.updateLabel',\n      context: {\n        element: element,\n        newLabel: values.categoryValue\n      }\n    };\n  }\n\n  function getGroupName(element) {\n    var bo = getBusinessObject(element),\n        value = (bo.categoryValueRef || {}).value;\n\n    return { categoryValue: value };\n  }\n\n  if (!is(element, 'bpmn:Collaboration')) {\n\n    var options;\n    if (is(element, 'bpmn:TextAnnotation')) {\n      options = { modelProperty: 'text', label: translate('Text') };\n    } else if (is(element, 'bpmn:Group')) {\n      options = {\n        modelProperty: 'categoryValue',\n        label: translate('Category Value'),\n        get: getGroupName,\n        set: setGroupName\n      };\n    }\n\n    // name\n    group.entries = group.entries.concat(nameEntryFactory(element, options, translate));\n\n  }\n\n};\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and `partials` prepended to the arguments it receives.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * function greet(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * }\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = baseRest(function(func, thisArg, partials) {\n  var bitmask = WRAP_BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getHolder(bind));\n    bitmask |= WRAP_PARTIAL_FLAG;\n  }\n  return createWrap(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nmodule.exports = bind;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","var metaMap = require('./_metaMap'),\n    noop = require('./noop');\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nmodule.exports = getData;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\n/**\n * Create an entry to modify the name of an an element.\n *\n * @param  {djs.model.Base} element\n * @param  {Object} options\n * @param  {string} options.id the id of the entry\n * @param  {string} options.label the label of the entry\n *\n * @return {Array<Object>} return an array containing\n *                         the entry to modify the name\n */\nmodule.exports = function(element, options, translate) {\n\n  options = options || {};\n  var id = options.id || 'name',\n      label = options.label || translate('Name'),\n      modelProperty = options.modelProperty || 'name';\n\n  var nameEntry = entryFactory.textBox({\n    id: id,\n    label: label,\n    modelProperty: modelProperty,\n    get: options.get,\n    set: options.set\n  });\n\n  return [ nameEntry ];\n\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{staticStyle:{\"visibility\":\"hidden\",\"position\":\"absolute\"},attrs:{\"type\":\"file\",\"id\":\"fileLoader\"},on:{\"change\":_vm.loadTextFromFile}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<input type=\"file\" @change=\"loadTextFromFile\"  id=\"fileLoader\" style=\"visibility: hidden; position: absolute;\">\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata: function() {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tloadTextFromFile: function(e) {\r\n\t\t\t\tconst ele = document.querySelector('#fileLoader')\r\n\t\t\t\tif (ele.value != \"\") {\r\n\t\t\t\t\tconst reader = new FileReader\r\n\t\t\t\t\treader.onload = (e) => {\r\n\t\t\t\t\t\tthis.$emit('loadFile', e.target.result)\r\n\t\t\t\t\t\tele.value = \"\"//每次使用后，将组件值恢复为空，这样能解决第二次导入无法打开的问题\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst file = e.target.files[0]\r\n\t\t\t\t\treader.readAsText(file)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fileLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fileLoader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fileLoader.vue?vue&type=template&id=3e4a7882&\"\nimport script from \"./fileLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./fileLoader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    baseLodash = require('./_baseLodash'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike'),\n    wrapperClone = require('./_wrapperClone');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit method\n * chain sequences. Methods that operate on and return arrays, collections,\n * and functions can be chained together. Methods that retrieve a single value\n * or may return a primitive value will automatically end the chain sequence\n * and return the unwrapped value. Otherwise, the value must be unwrapped\n * with `_#value`.\n *\n * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n * enabled using `_.chain`.\n *\n * The execution of chained methods is lazy, that is, it's deferred until\n * `_#value` is implicitly or explicitly called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion.\n * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n * the creation of intermediate arrays and can greatly reduce the number of\n * iteratee executions. Sections of a chain sequence qualify for shortcut\n * fusion if the section is applied to an array and iteratees accept only\n * one argument. The heuristic for whether a section qualifies for shortcut\n * fusion is subject to change.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n * `zipObject`, `zipObjectDeep`, and `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n * `upperFirst`, `value`, and `words`\n *\n * @name _\n * @constructor\n * @category Seq\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // Returns an unwrapped value.\n * wrapped.reduce(_.add);\n * // => 6\n *\n * // Returns a wrapped value.\n * var squares = wrapped.map(square);\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\nlodash.prototype.constructor = lodash;\n\nmodule.exports = lodash;\n","'use strict';\n\nvar values = require('lodash/values');\n\n/**\n * The guy knowing all configured element templates.\n *\n * This registry won't validate. Use the {@link Validator}\n * to verify a template is valid prior to adding it to\n * this registry.\n */\nfunction ElementTemplates() {\n\n  this._templates = {};\n\n  /**\n   * Sets the known element templates.\n   *\n   * @param {Array<TemplateDescriptor>} descriptors\n   *\n   * @return {ElementTemplates}\n   */\n  this.set = function(descriptors) {\n\n    var templates = this._templates = {};\n\n    descriptors.forEach(function(descriptor) {\n      templates[descriptor.id] = descriptor;\n    });\n\n    return this;\n  };\n\n  /**\n   * Get template descriptor with given id.\n   *\n   * @param {String} id\n   *\n   * @return {TemplateDescriptor}\n   */\n  this.get = function(id) {\n    return this._templates[id];\n  };\n\n  /**\n   * Return all known template descriptors.\n   *\n   * @return {Array<TemplateDescriptor>}\n   */\n  this.getAll = function() {\n    return values(this._templates);\n  };\n\n}\n\nmodule.exports = ElementTemplates;","const testRule = require('./test-rule');\n\nconst categoryMap = {\n  0: 'off',\n  1: 'warn',\n  2: 'error'\n};\n\n\nfunction Linter(options = {}) {\n\n  const {\n    config,\n    resolver\n  } = options;\n\n  if (typeof resolver === 'undefined') {\n    throw new Error('must provide <options.resolver>');\n  }\n\n  this.config = config;\n  this.resolver = resolver;\n\n  this.cachedRules = {};\n  this.cachedConfigs = {};\n}\n\n\nmodule.exports = Linter;\n\n/**\n * Applies a rule on the moddleRoot and adds reports to the finalReport\n *\n * @param {ModdleElement} moddleRoot\n *\n * @param {Object} ruleDefinition.name\n * @param {Object} ruleDefinition.config\n * @param {Object} ruleDefinition.category\n * @param {Rule} ruleDefinition.rule\n *\n * @return {Array<ValidationErrors>} rule reports\n */\nLinter.prototype.applyRule = function applyRule(moddleRoot, ruleDefinition) {\n\n  const {\n    config,\n    rule,\n    category,\n    name\n  } = ruleDefinition;\n\n  try {\n\n    const reports = testRule({\n      moddleRoot,\n      rule,\n      config\n    });\n\n    return reports.map(function(report) {\n      return {\n        ...report,\n        category\n      };\n    });\n  } catch (e) {\n    console.error('rule <' + name + '> failed with error: ', e);\n\n    return [\n      {\n        message: 'Rule error: ' + e.message,\n        category: 'error'\n      }\n    ];\n  }\n\n};\n\n\nLinter.prototype.resolveRule = function(name) {\n\n  const {\n    pkg,\n    ruleName\n  } = this.parseRuleName(name);\n\n  const id = `${pkg}-${ruleName}`;\n\n  const rule = this.cachedRules[id];\n\n  if (rule) {\n    return Promise.resolve(rule);\n  }\n\n  return Promise.resolve(this.resolver.resolveRule(pkg, ruleName)).then((ruleFactory) => {\n\n    if (!ruleFactory) {\n      throw new Error(`unknown rule <${name}>`);\n    }\n\n    const rule = this.cachedRules[id] = ruleFactory();\n\n    return rule;\n  });\n};\n\nLinter.prototype.resolveConfig = function(name) {\n\n  const {\n    pkg,\n    configName\n  } = this.parseConfigName(name);\n\n  const id = `${pkg}-${configName}`;\n\n  const config = this.cachedConfigs[id];\n\n  if (config) {\n    return Promise.resolve(config);\n  }\n\n  return Promise.resolve(this.resolver.resolveConfig(pkg, configName)).then((config) => {\n\n    if (!config) {\n      throw new Error(`unknown config <${name}>`);\n    }\n\n    const actualConfig = this.cachedConfigs[id] = this.normalizeConfig(config, pkg);\n\n    return actualConfig;\n  });\n};\n\n/**\n * Take a linter config and return list of resolved rules.\n *\n * @param {Object} config\n *\n * @return {Array<RuleDefinition>}\n */\nLinter.prototype.resolveRules = function(config) {\n\n  return this.resolveConfiguredRules(config).then((rulesConfig) => {\n\n    // parse rule values\n    const parsedRules = Object.entries(rulesConfig).map(([ name, value ]) => {\n      const {\n        category,\n        config\n      } = this.parseRuleValue(value);\n\n      return {\n        name,\n        category,\n        config\n      };\n    });\n\n    // filter only for enabled rules\n    const enabledRules = parsedRules.filter(definition => definition.category !== 'off');\n\n    // load enabled rules\n    const loaders = enabledRules.map((definition) => {\n\n      const {\n        name\n      } = definition;\n\n      return this.resolveRule(name).then(function(rule) {\n        return {\n          ...definition,\n          rule\n        };\n      });\n    });\n\n    return Promise.all(loaders);\n  });\n};\n\n\nLinter.prototype.resolveConfiguredRules = function(config) {\n\n  let parents = config.extends;\n\n  if (typeof parents === 'string') {\n    parents = [ parents ];\n  }\n\n  if (typeof parents === 'undefined') {\n    parents = [];\n  }\n\n  return Promise.all(\n    parents.map((configName) => {\n      return this.resolveConfig(configName).then((config) => {\n        return this.resolveConfiguredRules(config);\n      });\n    })\n  ).then((inheritedRules) => {\n\n    const overrideRules = this.normalizeConfig(config, 'bpmnlint').rules;\n\n    const rules = [ ...inheritedRules, overrideRules ].reduce((rules, currentRules) => {\n      return {\n        ...rules,\n        ...currentRules\n      };\n    }, {});\n\n    return rules;\n  });\n};\n\n\n/**\n * Lint the given model root, using the specified linter config.\n *\n * @param {ModdleElement} moddleRoot\n * @param {Object} [config] the bpmnlint configuration to use\n *\n * @return {Object} lint results, keyed by category names\n */\nLinter.prototype.lint = function(moddleRoot, config) {\n\n  config = config || this.config;\n\n  // load rules\n  return this.resolveRules(config).then((ruleDefinitions) => {\n\n    const allReports = {};\n\n    ruleDefinitions.forEach((ruleDefinition) => {\n\n      const {\n        name\n      } = ruleDefinition;\n\n      const reports = this.applyRule(moddleRoot, ruleDefinition);\n\n      if (reports.length) {\n        allReports[name] = reports;\n      }\n    });\n\n    return allReports;\n  });\n};\n\n\nLinter.prototype.parseRuleValue = function(value) {\n\n  let category;\n  let config;\n\n  if (Array.isArray(value)) {\n    category = value[0];\n    config = value[1];\n  } else {\n    category = value;\n    config = {};\n  }\n\n  // normalize rule flag to <error> and <warn> which\n  // may be upper case or a number at this point\n  if (typeof category === 'string') {\n    category = category.toLowerCase();\n  }\n\n  category = categoryMap[category] || category;\n\n  return {\n    config,\n    category\n  };\n};\n\nLinter.prototype.parseRuleName = function(name, localPackage = 'bpmnlint') {\n\n  /**\n   * We recognize the following rule name patterns:\n   *\n   * {RULE_NAME} => PKG = 'bpmnlint'\n   * bpmnlint/{RULE_NAME} => PKG = 'bpmnlint'\n   * {PACKAGE_SHORTCUT}/{RULE_NAME} => PKG = 'bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   * bpmnlint-plugin-{PACKAGE_SHORTCUT}/{RULE_NAME} => PKG = 'bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   * @scope/{PACKAGE_SHORTCUT}/{RULE_NAME} => PKG = '@scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   * @scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}/{RULE_NAME} => PKG = '@scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   */\n\n  const match = /^(?:(?:(@[^/]+)\\/)?([^@]{1}[^/]*)\\/)?([^/]+)$/.exec(name);\n\n  if (!match) {\n    throw new Error(`unparseable rule name <${name}>`);\n  }\n\n  const [\n    _,\n    ns,\n    packageName,\n    ruleName\n  ] = match;\n\n  if (!packageName) {\n    return {\n      pkg: localPackage,\n      ruleName\n    };\n  }\n\n  const pkg = `${ns ? ns + '/' : '' }${prefixPackage(packageName)}`;\n\n  return {\n    pkg,\n    ruleName\n  };\n};\n\n\nLinter.prototype.parseConfigName = function(name) {\n\n  /**\n   * We recognize the following config name patterns:\n   *\n   * bpmnlint:{CONFIG_NAME} => PKG = 'bpmnlint'\n   * plugin:{PACKAGE_SHORTCUT}/{CONFIG_NAME} => PKG = 'bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   * plugin:bpmnlint-plugin-{PACKAGE_SHORTCUT}/{CONFIG_NAME} => PKG = 'bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   * plugin:@scope/{PACKAGE_SHORTCUT}/{CONFIG_NAME} => PKG = '@scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   * plugin:@scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}/{CONFIG_NAME} => PKG = '@scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}'\n   */\n\n  const match = /^(?:(?:plugin:(?:(@[^/]+)\\/)?([^@]{1}[^/]*)\\/)|bpmnlint:)([^/]+)$/.exec(name);\n\n  if (!match) {\n    throw new Error(`unparseable config name <${name}>`);\n  }\n\n  const [\n    _,\n    ns,\n    packageName,\n    configName\n  ] = match;\n\n  if (!packageName) {\n    return {\n      pkg: 'bpmnlint',\n      configName\n    };\n  }\n\n  const pkg = `${ns ? ns + '/' : '' }${prefixPackage(packageName)}`;\n\n  return {\n    pkg,\n    configName\n  };\n};\n\n\nLinter.prototype.getSimplePackageName = function(name) {\n\n  /**\n   * We recognize the following package name patterns:\n   *\n   * bpmnlint => PKG = 'bpmnlint'\n   * {PACKAGE_SHORTCUT} => PKG = PACKAGE_SHORTCUT\n   * bpmnlint-plugin-{PACKAGE_SHORTCUT}' => PKG = PACKAGE_SHORTCUT\n   * @scope/{PACKAGE_SHORTCUT} => PKG = '@scope/{PACKAGE_SHORTCUT}'\n   * @scope/bpmnlint-plugin-{PACKAGE_SHORTCUT}' => PKG = '@scope/PACKAGE_SHORTCUT'\n   */\n\n  const match = /^(?:(@[^/]+)\\/)?([^/]+)$/.exec(name);\n\n  if (!match) {\n    throw new Error(`unparseable package name <${name}>`);\n  }\n\n  const [\n    _,\n    ns,\n    packageName\n  ] = match;\n\n  return `${ns ? ns + '/' : '' }${unprefixPackage(packageName)}`;\n};\n\n\n/**\n * Validate and return validated config.\n *\n * @param  {Object} config\n * @param  {String} localPackage\n *\n * @return {Object} validated config\n */\nLinter.prototype.normalizeConfig = function(config, localPackage) {\n\n  const rules = config.rules || {};\n\n  const validatedRules = Object.keys(rules).reduce((normalizedRules, name) => {\n\n    const value = rules[name];\n\n    const {\n      pkg,\n      ruleName\n    } = this.parseRuleName(name, localPackage);\n\n    const normalizedName = (\n      pkg === 'bpmnlint'\n        ? ruleName\n        : `${this.getSimplePackageName(pkg)}/${ruleName}`\n    );\n\n    normalizedRules[normalizedName] = value;\n\n    return normalizedRules;\n  }, {});\n\n  return {\n    ...config,\n    rules: validatedRules\n  };\n};\n\n\n// helpers ///////////////////////////\n\nfunction prefixPackage(pkg) {\n\n  if (pkg === 'bpmnlint') {\n    return 'bpmnlint';\n  }\n\n  if (pkg.startsWith('bpmnlint-plugin-')) {\n    return pkg;\n  }\n\n  return `bpmnlint-plugin-${pkg}`;\n}\n\n\nfunction unprefixPackage(pkg) {\n\n  if (pkg.startsWith('bpmnlint-plugin-')) {\n    return pkg.substring('bpmnlint-plugin-'.length);\n  }\n\n  return pkg;\n}","'use strict';\n\nvar CmdHelper = {};\nmodule.exports = CmdHelper;\n\nCmdHelper.updateProperties = function(element, properties) {\n  return {\n    cmd: 'element.updateProperties',\n    context: { element: element, properties: properties }\n  };\n};\n\nCmdHelper.updateBusinessObject = function(element, businessObject, newProperties) {\n  return {\n    cmd: 'properties-panel.update-businessobject',\n    context: {\n      element: element,\n      businessObject: businessObject,\n      properties: newProperties\n    }\n  };\n};\n\nCmdHelper.addElementsTolist = function(element, businessObject, listPropertyName, objectsToAdd) {\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      objectsToAdd: objectsToAdd\n    }\n  };\n};\n\nCmdHelper.removeElementsFromList = function(element, businessObject, listPropertyName, referencePropertyName, objectsToRemove) {\n\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      referencePropertyName: referencePropertyName,\n      objectsToRemove: objectsToRemove\n    }\n  };\n};\n\n\nCmdHelper.addAndRemoveElementsFromList = function(element, businessObject, listPropertyName, referencePropertyName, objectsToAdd, objectsToRemove) {\n\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      referencePropertyName: referencePropertyName,\n      objectsToAdd: objectsToAdd,\n      objectsToRemove: objectsToRemove\n    }\n  };\n};\n\n\nCmdHelper.setList = function(element, businessObject, listPropertyName, updatedObjectList) {\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      updatedObjectList: updatedObjectList\n    }\n  };\n};\n","'use strict';\n\nvar cmdHelper = require('./CmdHelper'),\n    elementHelper = require('./ElementHelper');\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar ExtensionElementsHelper = {};\n\nvar getExtensionElements = function(bo) {\n  return bo.get('extensionElements');\n};\n\nExtensionElementsHelper.getExtensionElements = function(bo, type) {\n  var extensionElements = getExtensionElements(bo);\n  if (typeof extensionElements !== 'undefined') {\n    var extensionValues = extensionElements.get('values');\n    if (typeof extensionValues !== 'undefined') {\n      var elements = extensionValues.filter(function(value) {\n        return is(value, type);\n      });\n      if (elements.length) {\n        return elements;\n      }\n    }\n  }\n};\n\nExtensionElementsHelper.addEntry = function(bo, element, entry, bpmnFactory) {\n  var extensionElements = bo.get('extensionElements');\n\n  // if there is no extensionElements list, create one\n  if (!extensionElements) {\n    // TODO: Ask Daniel which operation costs more\n    extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [entry] }, bo, bpmnFactory);\n    return { extensionElements : extensionElements };\n  } else {\n    // add new failedJobRetryExtensionElement to existing extensionElements list\n    return cmdHelper.addElementsTolist(element, extensionElements, 'values', [entry]);\n  }\n};\n\nExtensionElementsHelper.removeEntry = function(bo, element, entry) {\n  var extensionElements = bo.get('extensionElements');\n\n  if (!extensionElements) {\n\n    // return an empty command when there is no extensionElements list\n    return {};\n  }\n\n  return cmdHelper.removeElementsFromList(element, extensionElements, 'values', 'extensionElements', [entry]);\n};\n\nmodule.exports = ExtensionElementsHelper;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    entryFactory = require('../../../factory/EntryFactory');\n\n\nmodule.exports = function(group, element, translate) {\n  if (is(element, 'camunda:Assignable')) {\n\n    // Assignee\n    group.entries.push(entryFactory.textField({\n      id : 'assignee',\n      label : translate('Assignee'),\n      modelProperty : 'assignee'\n    }));\n\n    // Candidate Users\n    group.entries.push(entryFactory.textField({\n      id : 'candidateUsers',\n      label : translate('Candidate Users'),\n      modelProperty : 'candidateUsers'\n    }));\n\n    // Candidate Groups\n    group.entries.push(entryFactory.textField({\n      id : 'candidateGroups',\n      label : translate('Candidate Groups'),\n      modelProperty : 'candidateGroups'\n    }));\n\n    // Due Date\n    group.entries.push(entryFactory.textField({\n      id : 'dueDate',\n      description : translate('The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)'),\n      label : translate('Due Date'),\n      modelProperty : 'dueDate'\n    }));\n\n    // FollowUp Date\n    group.entries.push(entryFactory.textField({\n      id : 'followUpDate',\n      description : translate('The follow up date as an EL expression (e.g. ${someDate} or an ' +\n                    'ISO date (e.g. 2015-06-26T09:54:00)'),\n      label : translate('Follow Up Date'),\n      modelProperty : 'followUpDate'\n    }));\n\n    // priority\n    group.entries.push(entryFactory.textField({\n      id : 'priority',\n      label : translate('Priority'),\n      modelProperty : 'priority'\n    }));\n  }\n};\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","'use strict';\n\nvar listener = require('./implementation/Listener');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var listenerEntry = listener(element, bpmnFactory, {}, translate);\n\n  group.entries = group.entries.concat(listenerEntry.entries);\n\n  return {\n    getSelectedListener: listenerEntry.getSelectedListener\n  };\n\n};\n","import {\n  isFunction\n} from 'min-dash';\n\nimport {\n  event as domEvent,\n  matches as domMatches\n} from 'min-dom';\n\nimport {\n  hasModifier,\n  isCmd,\n  isKey,\n  isShift\n} from './KeyboardUtil';\n\nvar KEYDOWN_EVENT = 'keyboard.keydown',\n    KEYUP_EVENT = 'keyboard.keyup';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A keyboard abstraction that may be activated and\n * deactivated by users at will, consuming key events\n * and triggering diagram actions.\n *\n * For keys pressed down, keyboard fires `keyboard.keydown` event.\n * The event context contains one field which is `KeyboardEvent` event.\n *\n * The implementation fires the following key events that allow\n * other components to hook into key handling:\n *\n *  - keyboard.bind\n *  - keyboard.unbind\n *  - keyboard.init\n *  - keyboard.destroy\n *\n * All events contain one field which is node.\n *\n * A default binding for the keyboard may be specified via the\n * `keyboard.bindTo` configuration option.\n *\n * @param {Config} config\n * @param {EventBus} eventBus\n */\nexport default function Keyboard(config, eventBus) {\n  var self = this;\n\n  this._config = config || {};\n  this._eventBus = eventBus;\n\n  this._keydownHandler = this._keydownHandler.bind(this);\n  this._keyupHandler = this._keyupHandler.bind(this);\n\n  // properly clean dom registrations\n  eventBus.on('diagram.destroy', function() {\n    self._fire('destroy');\n\n    self.unbind();\n  });\n\n  eventBus.on('diagram.init', function() {\n    self._fire('init');\n  });\n\n  eventBus.on('attach', function() {\n    if (config && config.bindTo) {\n      self.bind(config.bindTo);\n    }\n  });\n\n  eventBus.on('detach', function() {\n    self.unbind();\n  });\n}\n\nKeyboard.$inject = [\n  'config.keyboard',\n  'eventBus'\n];\n\nKeyboard.prototype._keydownHandler = function(event) {\n  this._keyHandler(event, KEYDOWN_EVENT);\n};\n\nKeyboard.prototype._keyupHandler = function(event) {\n  this._keyHandler(event, KEYUP_EVENT);\n};\n\nKeyboard.prototype._keyHandler = function(event, type) {\n  var target = event.target,\n      eventBusResult;\n\n  if (isInput(target)) {\n    return;\n  }\n\n  var context = {\n    keyEvent: event\n  };\n\n  eventBusResult = this._eventBus.fire(type || KEYDOWN_EVENT, context);\n\n  if (eventBusResult) {\n    event.preventDefault();\n  }\n};\n\nKeyboard.prototype.bind = function(node) {\n\n  // make sure that the keyboard is only bound once to the DOM\n  this.unbind();\n\n  this._node = node;\n\n  // bind key events\n  domEvent.bind(node, 'keydown', this._keydownHandler, true);\n  domEvent.bind(node, 'keyup', this._keyupHandler, true);\n\n  this._fire('bind');\n};\n\nKeyboard.prototype.getBinding = function() {\n  return this._node;\n};\n\nKeyboard.prototype.unbind = function() {\n  var node = this._node;\n\n  if (node) {\n    this._fire('unbind');\n\n    // unbind key events\n    domEvent.unbind(node, 'keydown', this._keydownHandler, true);\n    domEvent.unbind(node, 'keyup', this._keyupHandler, true);\n  }\n\n  this._node = null;\n};\n\nKeyboard.prototype._fire = function(event) {\n  this._eventBus.fire('keyboard.' + event, { node: this._node });\n};\n\n/**\n * Add a listener function that is notified with `KeyboardEvent` whenever\n * the keyboard is bound and the user presses a key. If no priority is\n * provided, the default value of 1000 is used.\n *\n * @param {Number} [priority]\n * @param {Function} listener\n * @param {string} type\n */\nKeyboard.prototype.addListener = function(priority, listener, type) {\n  if (isFunction(priority)) {\n    type = listener;\n    listener = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on(type || KEYDOWN_EVENT, priority, listener);\n};\n\nKeyboard.prototype.removeListener = function(listener, type) {\n  this._eventBus.off(type || KEYDOWN_EVENT, listener);\n};\n\nKeyboard.prototype.hasModifier = hasModifier;\nKeyboard.prototype.isCmd = isCmd;\nKeyboard.prototype.isShift = isShift;\nKeyboard.prototype.isKey = isKey;\n\n\n\n// helpers ///////\n\nfunction isInput(target) {\n  return target && (domMatches(target, 'input, textarea') || target.contentEditable === 'true');\n}\n","import Keyboard from './Keyboard';\nimport KeyboardBindings from './KeyboardBindings';\n\nexport default {\n  __init__: [ 'keyboard', 'keyboardBindings' ],\n  keyboard: [ 'type', Keyboard ],\n  keyboardBindings: [ 'type', KeyboardBindings ]\n};\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    utils = require('../../../Utils'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nmodule.exports = function(group, element, translate, options) {\n\n  var description = options && options.description;\n\n  // Id\n  group.entries.push(entryFactory.validationAwareTextField({\n    id: 'id',\n    label: translate('Id'),\n    description: description && translate(description),\n    modelProperty: 'id',\n    getProperty: function(element) {\n      return getBusinessObject(element).id;\n    },\n    setProperty: function(element, properties) {\n\n      element = element.labelTarget || element;\n\n      return cmdHelper.updateProperties(element, properties);\n    },\n    validate: function(element, values) {\n      var idValue = values.id;\n\n      var bo = getBusinessObject(element);\n\n      var idError = utils.isIdValid(bo, idValue, translate);\n\n      return idError ? { id: idError } : {};\n    }\n  }));\n\n};\n","'use strict';\n\nvar domQuery = require('min-dom').query,\n    domClear = require('min-dom').clear,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    forEach = require('lodash/forEach'),\n    domify = require('min-dom').domify,\n    Ids = require('ids').default;\n\nvar SPACE_REGEX = /\\s/;\n\n// for QName validation as per http://www.w3.org/TR/REC-xml/#NT-NameChar\nvar QNAME_REGEX = /^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i;\n\n// for ID validation as per BPMN Schema (QName - Namespace)\nvar ID_REGEX = /^[a-z_][\\w-.]*$/i;\n\nvar HTML_ESCAPE_MAP = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nfunction selectedOption(selectBox) {\n  if (selectBox.selectedIndex >= 0) {\n    return selectBox.options[selectBox.selectedIndex].value;\n  }\n}\n\nmodule.exports.selectedOption = selectedOption;\n\n\nfunction selectedType(elementSyntax, inputNode) {\n  var typeSelect = domQuery(elementSyntax, inputNode);\n  return selectedOption(typeSelect);\n}\n\nmodule.exports.selectedType = selectedType;\n\n\n/**\n * Retrieve the root element the document this\n * business object is contained in.\n *\n * @return {ModdleElement}\n */\nfunction getRoot(businessObject) {\n  var parent = businessObject;\n  while (parent.$parent) {\n    parent = parent.$parent;\n  }\n  return parent;\n}\n\nmodule.exports.getRoot = getRoot;\n\n\n/**\n * filters all elements in the list which have a given type.\n * removes a new list\n */\nfunction filterElementsByType(objectList, type) {\n  var list = objectList || [];\n  var result = [];\n  forEach(list, function(obj) {\n    if (is(obj, type)) {\n      result.push(obj);\n    }\n  });\n  return result;\n}\n\nmodule.exports.filterElementsByType = filterElementsByType;\n\n\nfunction findRootElementsByType(businessObject, referencedType) {\n  var root = getRoot(businessObject);\n\n  return filterElementsByType(root.rootElements, referencedType);\n}\n\nmodule.exports.findRootElementsByType = findRootElementsByType;\n\n\nfunction removeAllChildren(domElement) {\n  while (domElement.firstChild) {\n    domElement.removeChild(domElement.firstChild);\n  }\n}\n\nmodule.exports.removeAllChildren = removeAllChildren;\n\n\n/**\n * adds an empty option to the list\n */\nfunction addEmptyParameter(list) {\n  return list.push({ 'label': '', 'value': '', 'name': '' });\n}\n\nmodule.exports.addEmptyParameter = addEmptyParameter;\n\n\n/**\n * returns a list with all root elements for the given parameter 'referencedType'\n */\nfunction refreshOptionsModel(businessObject, referencedType) {\n  var model = [];\n  var referableObjects = findRootElementsByType(businessObject, referencedType);\n  forEach(referableObjects, function(obj) {\n    model.push({\n      label: (obj.name || '') + ' (id='+obj.id+')',\n      value: obj.id,\n      name: obj.name\n    });\n  });\n  return model;\n}\n\nmodule.exports.refreshOptionsModel = refreshOptionsModel;\n\n\n/**\n * fills the drop down with options\n */\nfunction updateOptionsDropDown(domSelector, businessObject, referencedType, entryNode) {\n  var options = refreshOptionsModel(businessObject, referencedType);\n  addEmptyParameter(options);\n  var selectBox = domQuery(domSelector, entryNode);\n  domClear(selectBox);\n\n  forEach(options, function(option) {\n    var optionEntry = domify('<option value=\"' + escapeHTML(option.value) + '\">' + escapeHTML(option.label) + '</option>');\n    selectBox.appendChild(optionEntry);\n  });\n  return options;\n}\n\nmodule.exports.updateOptionsDropDown = updateOptionsDropDown;\n\n\n/**\n * checks whether the id value is valid\n *\n * @param {ModdleElement} bo\n * @param {String} idValue\n * @param {Function} translate\n *\n * @return {String} error message\n */\nfunction isIdValid(bo, idValue, translate) {\n  var assigned = bo.$model.ids.assigned(idValue);\n\n  var idExists = assigned && assigned !== bo;\n\n  if (!idValue || idExists) {\n    return translate('Element must have an unique id.');\n  }\n\n  return validateId(idValue, translate);\n}\n\nmodule.exports.isIdValid = isIdValid;\n\n\nfunction validateId(idValue, translate) {\n\n  if (containsSpace(idValue)) {\n    return translate('Id must not contain spaces.');\n  }\n\n  if (!ID_REGEX.test(idValue)) {\n\n    if (QNAME_REGEX.test(idValue)) {\n      return translate('Id must not contain prefix.');\n    }\n\n    return translate('Id must be a valid QName.');\n  }\n}\n\nmodule.exports.validateId = validateId;\n\n\nfunction containsSpace(value) {\n  return SPACE_REGEX.test(value);\n}\n\nmodule.exports.containsSpace = containsSpace;\n\n/**\n * generate a semantic id with given prefix\n */\nfunction nextId(prefix) {\n  var ids = new Ids([32,32,1]);\n\n  return ids.nextPrefixed(prefix);\n}\n\nmodule.exports.nextId = nextId;\n\n\nfunction triggerClickEvent(element) {\n  var evt;\n  var eventType = 'click';\n\n  if (document.createEvent) {\n    try {\n      // Chrome, Safari, Firefox\n      evt = new MouseEvent((eventType), { view: window, bubbles: true, cancelable: true });\n    } catch (e) {\n      // IE 11, PhantomJS (wat!)\n      evt = document.createEvent('MouseEvent');\n\n      evt.initEvent((eventType), true, true);\n    }\n    return element.dispatchEvent(evt);\n  } else {\n    // Welcome IE\n    evt = document.createEventObject();\n\n    return element.fireEvent('on' + eventType, evt);\n  }\n}\n\nmodule.exports.triggerClickEvent = triggerClickEvent;\n\n\nfunction escapeHTML(str) {\n  str = '' + str;\n\n  return str && str.replace(/[&<>\"']/g, function(match) {\n    return HTML_ESCAPE_MAP[match];\n  });\n}\n\nmodule.exports.escapeHTML = escapeHTML;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\nmodule.exports = composeArgsRight;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","const {\n  is\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that verifies that an event contains maximum one event definition.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!is(node, 'bpmn:Event')) {\n      return;\n    }\n\n    const eventDefinitions = node.eventDefinitions || [];\n\n    if (eventDefinitions.length > 1) {\n      reporter.report(node.id, 'Event has multiple event definitions');\n    }\n  }\n\n  return {\n    check\n  };\n\n};","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","'use strict';\n\nvar isArray = require('lodash/isArray');\nvar isObject = require('lodash/isObject');\n\nvar DROPDOWN_TYPE = 'Dropdown';\n\nvar VALID_TYPES = [ 'String', 'Text', 'Boolean', 'Hidden', DROPDOWN_TYPE ];\n\nvar PROPERTY_TYPE = 'property',\n    CAMUNDA_PROPERTY_TYPE = 'camunda:property',\n    CAMUNDA_INPUT_PARAMETER_TYPE = 'camunda:inputParameter',\n    CAMUNDA_OUTPUT_PARAMETER_TYPE = 'camunda:outputParameter',\n    CAMUNDA_IN_TYPE = 'camunda:in',\n    CAMUNDA_OUT_TYPE = 'camunda:out',\n    CAMUNDA_IN_BUSINESS_KEY_TYPE = 'camunda:in:businessKey',\n    CAMUNDA_EXECUTION_LISTENER = 'camunda:executionListener',\n    CAMUNDA_FIELD = 'camunda:field';\n\nvar VALID_BINDING_TYPES = [\n  PROPERTY_TYPE,\n  CAMUNDA_PROPERTY_TYPE,\n  CAMUNDA_INPUT_PARAMETER_TYPE,\n  CAMUNDA_OUTPUT_PARAMETER_TYPE,\n  CAMUNDA_IN_TYPE,\n  CAMUNDA_OUT_TYPE,\n  CAMUNDA_IN_BUSINESS_KEY_TYPE,\n  CAMUNDA_EXECUTION_LISTENER,\n  CAMUNDA_FIELD\n];\n\n\n/**\n * A element template validator.\n */\nfunction Validator() {\n\n  this._templatesById = {};\n\n  this._validTemplates = [];\n  this._errors = [];\n\n\n  /**\n   * Adds the templates.\n   *\n   * @param {Array<TemplateDescriptor>} templates\n   *\n   * @return {Validator} self\n   */\n  this.addAll = function(templates) {\n\n    if (!isArray(templates)) {\n      this._logError('templates must be []');\n    } else {\n      templates.forEach(this.add, this);\n    }\n\n    return this;\n  };\n\n  /**\n   * Add the given element template, if it is valid.\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Validator} self\n   */\n  this.add = function(template) {\n\n    var err = this._validateTemplate(template);\n\n    if (!err) {\n      this._templatesById[template.id] = template;\n\n      this._validTemplates.push(template);\n    }\n\n    return this;\n  };\n\n  /**\n   * Validate given template and return error (if any).\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Error} validation error, if any\n   */\n  this._validateTemplate = function(template) {\n\n    var err,\n        id = template.id,\n        appliesTo = template.appliesTo,\n        properties = template.properties,\n        scopes = template.scopes;\n\n    if (!id) {\n      return this._logError('missing template id');\n    }\n\n    if (id in this._templatesById) {\n      return this._logError('template id <' + id + '> already used');\n    }\n\n    if (!isArray(appliesTo)) {\n      err = this._logError('missing appliesTo=[]', template);\n    }\n\n    if (!isArray(properties)) {\n      err = this._logError('missing properties=[]', template);\n    } else {\n      if (!this._validateProperties(properties)) {\n        err = new Error('invalid properties');\n      }\n    }\n\n    if (scopes) {\n      err = this._validateScopes(template, scopes);\n    }\n\n    return err;\n  };\n\n  this._validateScopes = function(template, scopes) {\n\n    var err,\n        scope,\n        scopeName;\n\n    if (!isObject(scopes) || isArray(scopes)) {\n      return this._logError('invalid scopes, should be scopes={}', template);\n    }\n\n    for (scopeName in scopes) {\n      scope = scopes[scopeName];\n\n      if (!isObject(scope) || isArray(scope)) {\n        err = this._logError('invalid scope, should be scope={}', template);\n      }\n\n      if (!isArray(scope.properties)) {\n        err = this._logError(\n          'missing properties=[] in scope <' + scopeName + '>', template\n        );\n      } else {\n        if (!this._validateProperties(scope.properties)) {\n          err = new Error('invalid properties in scope <' + scopeName + '>');\n        }\n      }\n    }\n\n    return err;\n  };\n\n  /**\n   * Validate properties and return false if any is invalid.\n   *\n   * @param {Array<PropertyDescriptor>} properties\n   *\n   * @return {Boolean} true if all properties are valid\n   */\n  this._validateProperties = function(properties) {\n    var validProperties = properties.filter(this._validateProperty, this);\n\n    return properties.length === validProperties.length;\n  };\n\n  /**\n   * Validate property and return false, if there was\n   * a validation error.\n   *\n   * @param {PropertyDescriptor} property\n   *\n   * @return {Boolean} true if property is valid\n   */\n  this._validateProperty = function(property) {\n\n    var type = property.type,\n        binding = property.binding;\n\n    var err;\n\n    var bindingType = binding.type;\n\n    if (VALID_TYPES.indexOf(type) === -1) {\n      err = this._logError(\n        'invalid property type <' + type + '>; ' +\n        'must be any of { ' + VALID_TYPES.join(', ') + ' }'\n      );\n    }\n\n    if (type === DROPDOWN_TYPE && bindingType !== CAMUNDA_EXECUTION_LISTENER) {\n      if (!isArray(property.choices)) {\n        err = this._logError(\n          'must provide choices=[] with ' + DROPDOWN_TYPE + ' type'\n        );\n      } else\n\n      if (!property.choices.every(isDropdownChoiceValid)) {\n        err = this._logError(\n          '{ name, value } must be specified for ' +\n          DROPDOWN_TYPE + ' choices'\n        );\n      }\n    }\n\n    if (!binding) {\n      return this._logError('property missing binding');\n    }\n\n    if (VALID_BINDING_TYPES.indexOf(bindingType) === -1) {\n      err = this._logError(\n        'invalid property.binding type <' + bindingType + '>; ' +\n        'must be any of { ' + VALID_BINDING_TYPES.join(', ') + ' }'\n      );\n    }\n\n    if (bindingType === PROPERTY_TYPE ||\n        bindingType === CAMUNDA_PROPERTY_TYPE ||\n        bindingType === CAMUNDA_INPUT_PARAMETER_TYPE ||\n        bindingType === CAMUNDA_FIELD) {\n\n      if (!binding.name) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires name'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_OUTPUT_PARAMETER_TYPE) {\n      if (!binding.source) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires source'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_IN_TYPE) {\n\n      if (!binding.variables && !binding.target) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires ' +\n          'variables or target'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_OUT_TYPE) {\n\n      if (!binding.variables && !binding.source && !binding.sourceExpression) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires ' +\n          'variables, sourceExpression or source'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_EXECUTION_LISTENER) {\n\n      if (type !== 'Hidden') {\n        err = this._logError(\n          'invalid property type <' + type + '> for ' + CAMUNDA_EXECUTION_LISTENER + '; ' +\n          'must be <Hidden>'\n        );\n      }\n    }\n\n    return !err;\n  };\n\n\n  this._logError = function(err, template) {\n\n    if (typeof err === 'string') {\n      if (template) {\n        err = 'template(id: ' + template.id + ') ' + err;\n      }\n\n      err = new Error(err);\n    }\n\n    this._errors.push(err);\n\n    return err;\n  };\n\n  this.getErrors = function() {\n    return this._errors;\n  };\n\n  this.getValidTemplates = function() {\n    return this._validTemplates;\n  };\n}\n\nmodule.exports = Validator;\n\n\n// helpers ///////////////////////////////////\n\nfunction isDropdownChoiceValid(c) {\n  return 'name' in c && 'value' in c;\n}\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    inputOutputHelper = require('../../../../helper/InputOutputHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar extensionElementsEntry = require('./ExtensionElements');\n\n\nfunction getInputOutput(element, insideConnector) {\n  return inputOutputHelper.getInputOutput(element, insideConnector);\n}\n\nfunction getConnector(element) {\n  return inputOutputHelper.getConnector(element);\n}\n\nfunction getInputParameters(element, insideConnector) {\n  return inputOutputHelper.getInputParameters(element, insideConnector);\n}\n\nfunction getOutputParameters(element, insideConnector) {\n  return inputOutputHelper.getOutputParameters(element, insideConnector);\n}\n\nfunction getInputParameter(element, insideConnector, idx) {\n  return inputOutputHelper.getInputParameter(element, insideConnector, idx);\n}\n\nfunction getOutputParameter(element, insideConnector, idx) {\n  return inputOutputHelper.getOutputParameter(element, insideConnector, idx);\n}\n\n\nfunction createElement(type, parent, factory, properties) {\n  return elementHelper.createElement(type, properties, parent, factory);\n}\n\nfunction createInputOutput(parent, bpmnFactory, properties) {\n  return createElement('camunda:InputOutput', parent, bpmnFactory, properties);\n}\n\nfunction createParameter(type, parent, bpmnFactory, properties) {\n  return createElement(type, parent, bpmnFactory, properties);\n}\n\n\nfunction ensureInputOutputSupported(element, insideConnector) {\n  return inputOutputHelper.isInputOutputSupported(element, insideConnector);\n}\n\nfunction ensureOutparameterSupported(element, insideConnector) {\n  return inputOutputHelper.areOutputParametersSupported(element, insideConnector);\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var TYPE_LABEL = {\n    'camunda:Map': translate('Map'),\n    'camunda:List': translate('List'),\n    'camunda:Script': translate('Script')\n  };\n\n  options = options || {};\n\n  var insideConnector = !!options.insideConnector,\n      idPrefix = options.idPrefix || '';\n\n  var getSelected = function(element, node) {\n    var selection = (inputEntry && inputEntry.getSelected(element, node)) || { idx: -1 };\n\n    var parameter = getInputParameter(element, insideConnector, selection.idx);\n    if (!parameter && outputEntry) {\n      selection = outputEntry.getSelected(element, node);\n      parameter = getOutputParameter(element, insideConnector, selection.idx);\n    }\n    return parameter;\n  };\n\n  var result = {\n    getSelectedParameter: getSelected\n  };\n\n  var entries = result.entries = [];\n\n  if (!ensureInputOutputSupported(element)) {\n    return result;\n  }\n\n  var newElement = function(type, prop, factory) {\n\n    return function(element, extensionElements, value) {\n      var commands = [];\n\n      var inputOutput = getInputOutput(element, insideConnector);\n      if (!inputOutput) {\n        var parent = !insideConnector ? extensionElements : getConnector(element);\n        inputOutput = createInputOutput(parent, bpmnFactory, {\n          inputParameters: [],\n          outputParameters: []\n        });\n\n        if (!insideConnector) {\n          commands.push(cmdHelper.addAndRemoveElementsFromList(\n            element,\n            extensionElements,\n            'values',\n            'extensionElements',\n            [ inputOutput ],\n            []\n          ));\n        } else {\n          commands.push(cmdHelper.updateBusinessObject(element, parent, { inputOutput: inputOutput }));\n        }\n      }\n\n      var newElem = createParameter(type, inputOutput, bpmnFactory, { name: value });\n      commands.push(cmdHelper.addElementsTolist(element, inputOutput, prop, [ newElem ]));\n\n      return commands;\n    };\n  };\n\n  var removeElement = function(getter, prop, otherProp) {\n    return function(element, extensionElements, value, idx) {\n      var inputOutput = getInputOutput(element, insideConnector);\n      var parameter = getter(element, insideConnector, idx);\n\n      var commands = [];\n      commands.push(cmdHelper.removeElementsFromList(element, inputOutput, prop, null, [ parameter ]));\n\n      var firstLength = inputOutput.get(prop).length-1;\n      var secondLength = (inputOutput.get(otherProp) || []).length;\n\n      if (!firstLength && !secondLength) {\n\n        if (!insideConnector) {\n          commands.push(extensionElementsHelper.removeEntry(getBusinessObject(element), element, inputOutput));\n        } else {\n          var connector = getConnector(element);\n          commands.push(cmdHelper.updateBusinessObject(element, connector, { inputOutput: undefined }));\n        }\n\n      }\n\n      return commands;\n    };\n  };\n\n  var setOptionLabelValue = function(getter) {\n    return function(element, node, option, property, value, idx) {\n      var parameter = getter(element, insideConnector, idx);\n\n      var suffix = 'Text';\n\n      var definition = parameter.get('definition');\n      if (typeof definition !== 'undefined') {\n        var type = definition.$type;\n        suffix = TYPE_LABEL[type];\n      }\n\n      option.text = (value || '') + ' : ' + suffix;\n    };\n  };\n\n\n  // input parameters ///////////////////////////////////////////////////////////////\n\n  var inputEntry = extensionElementsEntry(element, bpmnFactory, {\n    id: idPrefix + 'inputs',\n    label: translate('Input Parameters'),\n    modelProperty: 'name',\n    prefix: 'Input',\n    resizable: true,\n\n    createExtensionElement: newElement('camunda:InputParameter', 'inputParameters'),\n    removeExtensionElement: removeElement(getInputParameter, 'inputParameters', 'outputParameters'),\n\n    getExtensionElements: function(element) {\n      return getInputParameters(element, insideConnector);\n    },\n\n    onSelectionChange: function(element, node, event, scope) {\n      outputEntry && outputEntry.deselect(element, node);\n    },\n\n    setOptionLabelValue: setOptionLabelValue(getInputParameter)\n\n  });\n  entries.push(inputEntry);\n\n\n  // output parameters ///////////////////////////////////////////////////////\n\n  if (ensureOutparameterSupported(element, insideConnector)) {\n    var outputEntry = extensionElementsEntry(element, bpmnFactory, {\n      id: idPrefix + 'outputs',\n      label: translate('Output Parameters'),\n      modelProperty: 'name',\n      prefix: 'Output',\n      resizable: true,\n\n      createExtensionElement: newElement('camunda:OutputParameter', 'outputParameters'),\n      removeExtensionElement: removeElement(getOutputParameter, 'outputParameters', 'inputParameters'),\n\n      getExtensionElements: function(element) {\n        return getOutputParameters(element, insideConnector);\n      },\n\n      onSelectionChange: function(element, node, event, scope) {\n        inputEntry.deselect(element, node);\n      },\n\n      setOptionLabelValue: setOptionLabelValue(getOutputParameter)\n\n    });\n    entries.push(outputEntry);\n  }\n\n  return result;\n\n};\n","var LazyWrapper = require('./_LazyWrapper'),\n    getData = require('./_getData'),\n    getFuncName = require('./_getFuncName'),\n    lodash = require('./wrapperLodash');\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n *  else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func),\n      other = lodash[funcName];\n\n  if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nmodule.exports = isLaziable;\n","const {\n  is,\n  isAny\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that checks the presence of an end event per scope.\n */\nmodule.exports = function() {\n\n  function hasEndEvent(node) {\n    const flowElements = node.flowElements || [];\n\n    return (\n      flowElements.some(node => is(node, 'bpmn:EndEvent'))\n    );\n  }\n\n  function check(node, reporter) {\n\n    if (!isAny(node, [\n      'bpmn:Process',\n      'bpmn:SubProcess'\n    ])) {\n      return;\n    }\n\n    if (!hasEndEvent(node)) {\n      const type = is(node, 'bpmn:SubProcess') ? 'Sub process' : 'Process';\n\n      reporter.report(node.id, type + ' is missing end event');\n    }\n  }\n\n  return { check };\n};\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var historyTimeToLiveEntry = entryFactory.textField({\n    id: 'historyTimeToLive',\n    label: translate('History Time To Live'),\n    modelProperty: 'historyTimeToLive',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var historyTimeToLive = bo.get('camunda:historyTimeToLive');\n\n      return {\n        historyTimeToLive: historyTimeToLive ? historyTimeToLive : ''\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:historyTimeToLive': values.historyTimeToLive || undefined\n      });\n    }\n\n  });\n\n  return [ historyTimeToLiveEntry ];\n};\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","import {\n  log10\n} from '../../util/Math';\n\n/**\n * Get step size for given range and number of steps.\n *\n * @param {Object} range\n * @param {number} range.min\n * @param {number} range.max\n */\nexport function getStepSize(range, steps) {\n\n  var minLinearRange = log10(range.min),\n      maxLinearRange = log10(range.max);\n\n  var absoluteLinearRange = Math.abs(minLinearRange) + Math.abs(maxLinearRange);\n\n  return absoluteLinearRange / steps;\n}\n\nexport function cap(range, scale) {\n  return Math.max(range.min, Math.min(range.max, scale));\n}\n","import {\n  event as domEvent,\n  closest as domClosest\n} from 'min-dom';\n\nimport {\n  getStepSize,\n  cap\n} from './ZoomUtil';\n\nimport {\n  log10\n} from '../../util/Math';\n\nimport {\n  bind\n} from 'min-dash';\n\nvar sign = Math.sign || function(n) {\n  return n >= 0 ? 1 : -1;\n};\n\nvar RANGE = { min: 0.2, max: 4 },\n    NUM_STEPS = 10;\n\nvar DELTA_THRESHOLD = 0.1;\n\nvar DEFAULT_SCALE = 0.75;\n\n/**\n * An implementation of zooming and scrolling within the\n * {@link Canvas} via the mouse wheel.\n *\n * Mouse wheel zooming / scrolling may be disabled using\n * the {@link toggle(enabled)} method.\n *\n * @param {Object} [config]\n * @param {Boolean} [config.enabled=true] default enabled state\n * @param {Number} [config.scale=.75] scroll sensivity\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function ZoomScroll(config, eventBus, canvas) {\n\n  config = config || {};\n\n  this._enabled = false;\n\n  this._canvas = canvas;\n  this._container = canvas._container;\n\n  this._handleWheel = bind(this._handleWheel, this);\n\n  this._totalDelta = 0;\n  this._scale = config.scale || DEFAULT_SCALE;\n\n  var self = this;\n\n  eventBus.on('canvas.init', function(e) {\n    self._init(config.enabled !== false);\n  });\n}\n\nZoomScroll.$inject = [\n  'config.zoomScroll',\n  'eventBus',\n  'canvas'\n];\n\nZoomScroll.prototype.scroll = function scroll(delta) {\n  this._canvas.scroll(delta);\n};\n\n\nZoomScroll.prototype.reset = function reset() {\n  this._canvas.zoom('fit-viewport');\n};\n\n/**\n * Zoom depending on delta.\n *\n * @param {number} delta\n * @param {Object} position\n */\nZoomScroll.prototype.zoom = function zoom(delta, position) {\n\n  // zoom with half the step size of stepZoom\n  var stepSize = getStepSize(RANGE, NUM_STEPS * 2);\n\n  // add until threshold reached\n  this._totalDelta += delta;\n\n  if (Math.abs(this._totalDelta) > DELTA_THRESHOLD) {\n    this._zoom(delta, position, stepSize);\n\n    // reset\n    this._totalDelta = 0;\n  }\n};\n\n\nZoomScroll.prototype._handleWheel = function handleWheel(event) {\n\n  // event is already handled by '.djs-scrollable'\n  if (domClosest(event.target, '.djs-scrollable', true)) {\n    return;\n  }\n\n  var element = this._container;\n\n  event.preventDefault();\n\n  // pinch to zoom is mapped to wheel + ctrlKey = true\n  // in modern browsers (!)\n\n  var isZoom = event.ctrlKey;\n\n  var isHorizontalScroll = event.shiftKey;\n\n  var factor = -1 * this._scale,\n      delta;\n\n  if (isZoom) {\n    factor *= event.deltaMode === 0 ? 0.020 : 0.32;\n  } else {\n    factor *= event.deltaMode === 0 ? 1.0 : 16.0;\n  }\n\n  if (isZoom) {\n    var elementRect = element.getBoundingClientRect();\n\n    var offset = {\n      x: event.clientX - elementRect.left,\n      y: event.clientY - elementRect.top\n    };\n\n    delta = (\n      Math.sqrt(\n        Math.pow(event.deltaY, 2) +\n        Math.pow(event.deltaX, 2)\n      ) * sign(event.deltaY) * factor\n    );\n\n    // zoom in relative to diagram {x,y} coordinates\n    this.zoom(delta, offset);\n  } else {\n\n    if (isHorizontalScroll) {\n      delta = {\n        dx: factor * event.deltaY,\n        dy: 0\n      };\n    } else {\n      delta = {\n        dx: factor * event.deltaX,\n        dy: factor * event.deltaY\n      };\n    }\n\n    this.scroll(delta);\n  }\n};\n\n/**\n * Zoom with fixed step size.\n *\n * @param {number} delta - Zoom delta (1 for zooming in, -1 for out).\n * @param {Object} position\n */\nZoomScroll.prototype.stepZoom = function stepZoom(delta, position) {\n\n  var stepSize = getStepSize(RANGE, NUM_STEPS);\n\n  this._zoom(delta, position, stepSize);\n};\n\n\n/**\n * Zoom in/out given a step size.\n *\n * @param {number} delta\n * @param {Object} position\n * @param {number} stepSize\n */\nZoomScroll.prototype._zoom = function(delta, position, stepSize) {\n  var canvas = this._canvas;\n\n  var direction = delta > 0 ? 1 : -1;\n\n  var currentLinearZoomLevel = log10(canvas.zoom());\n\n  // snap to a proximate zoom step\n  var newLinearZoomLevel = Math.round(currentLinearZoomLevel / stepSize) * stepSize;\n\n  // increase or decrease one zoom step in the given direction\n  newLinearZoomLevel += stepSize * direction;\n\n  // calculate the absolute logarithmic zoom level based on the linear zoom level\n  // (e.g. 2 for an absolute x2 zoom)\n  var newLogZoomLevel = Math.pow(10, newLinearZoomLevel);\n\n  canvas.zoom(cap(RANGE, newLogZoomLevel), position);\n};\n\n\n/**\n * Toggle the zoom scroll ability via mouse wheel.\n *\n * @param  {Boolean} [newEnabled] new enabled state\n */\nZoomScroll.prototype.toggle = function toggle(newEnabled) {\n\n  var element = this._container;\n  var handleWheel = this._handleWheel;\n\n  var oldEnabled = this._enabled;\n\n  if (typeof newEnabled === 'undefined') {\n    newEnabled = !oldEnabled;\n  }\n\n  // only react on actual changes\n  if (oldEnabled !== newEnabled) {\n\n    // add or remove wheel listener based on\n    // changed enabled state\n    domEvent[newEnabled ? 'bind' : 'unbind'](element, 'wheel', handleWheel, false);\n  }\n\n  this._enabled = newEnabled;\n\n  return newEnabled;\n};\n\n\nZoomScroll.prototype._init = function(newEnabled) {\n  this.toggle(newEnabled);\n};\n","import ZoomScroll from './ZoomScroll';\n\nexport default {\n  __init__: [ 'zoomScroll' ],\n  zoomScroll: [ 'type', ZoomScroll ]\n};","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","const {\n  is\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that checks that start events inside a normal sub-processes\n * are blank (do not have an event definition).\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!is(node, 'bpmn:SubProcess') || node.triggeredByEvent) {\n      return;\n    }\n\n    const flowElements = node.flowElements || [];\n\n    flowElements.forEach(function(flowElement) {\n\n      if (!is(flowElement, 'bpmn:StartEvent')) {\n        return false;\n      }\n\n      const eventDefinitions = flowElement.eventDefinitions || [];\n\n      if (eventDefinitions.length > 0) {\n        reporter.report(flowElement.id, 'Start event must be blank');\n      }\n    });\n  }\n\n  return {\n    check\n  };\n\n};","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(stringify(\n                obj[key],\n                generateArrayPrefix(prefix, key),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        } else {\n            values = values.concat(stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;\n    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;\n    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (typeof options.format === 'undefined') {\n        options.format = formats['default'];\n    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {\n        throw new TypeError('Unknown format option provided.');\n    }\n    var formatter = formats.formatters[options.format];\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encode ? encoder : null,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly\n        ));\n    }\n\n    var joined = keys.join(delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","var arrayFilter = require('./_arrayFilter'),\n    baseRest = require('./_baseRest'),\n    baseXor = require('./_baseXor'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values that is the\n * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n * of the given arrays. The order of result values is determined by the order\n * they occur in the arrays.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.without\n * @example\n *\n * _.xor([2, 1], [2, 3]);\n * // => [1, 3]\n */\nvar xor = baseRest(function(arrays) {\n  return baseXor(arrayFilter(arrays, isArrayLikeObject));\n});\n\nmodule.exports = xor;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","'use strict';\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper'),\n    InputOutputHelper = require('../../../helper/InputOutputHelper');\n\nvar utils = require('../../../Utils'),\n    escapeHTML = utils.escapeHTML,\n    triggerClickEvent = utils.triggerClickEvent;\n\nvar implementationType = require('./implementation/ImplementationType'),\n    delegate = require('./implementation/Delegate'),\n    external = require('./implementation/External'),\n    callable = require('./implementation/Callable'),\n    resultVariable = require('./implementation/ResultVariable');\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar domQuery = require('min-dom').query,\n    domClosest = require('min-dom').closest,\n    domClasses = require('min-dom').classes;\n\nfunction getImplementationType(element) {\n  return ImplementationTypeHelper.getImplementationType(element);\n}\n\nfunction getBusinessObject(element) {\n  return ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n}\n\nfunction isDmnCapable(element) {\n  return ImplementationTypeHelper.isDmnCapable(element);\n}\n\nfunction isExternalCapable(element) {\n  return ImplementationTypeHelper.isExternalCapable(element);\n}\n\nfunction isServiceTaskLike(element) {\n  return ImplementationTypeHelper.isServiceTaskLike(element);\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!isServiceTaskLike(getBusinessObject(element))) {\n    return;\n  }\n\n  var hasDmnSupport = isDmnCapable(element);\n  var hasExternalSupport = isExternalCapable(getBusinessObject(element));\n\n  // implementation type ////////////////////////////////////\n\n  group.entries = group.entries.concat(implementationType(element, bpmnFactory, {\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getImplementationType,\n    hasDmnSupport: hasDmnSupport,\n    hasExternalSupport: hasExternalSupport,\n    hasServiceTaskLikeSupport: true\n  }, translate));\n\n\n  // delegate (class, expression, delegateExpression) //////////\n\n  group.entries = group.entries.concat(delegate(element, bpmnFactory, {\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getImplementationType\n  }, translate));\n\n\n  // result variable /////////////////////////////////////////\n\n  group.entries = group.entries.concat(resultVariable(element, bpmnFactory, {\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getImplementationType,\n    hideResultVariable: function(element, node) {\n      return getImplementationType(element) !== 'expression';\n    }\n  }, translate));\n\n  // external //////////////////////////////////////////////////\n\n  if (hasExternalSupport) {\n    group.entries = group.entries.concat(external(element, bpmnFactory, {\n      getBusinessObject: getBusinessObject,\n      getImplementationType: getImplementationType\n    }, translate));\n  }\n\n\n  // dmn ////////////////////////////////////////////////////////\n\n  if (hasDmnSupport) {\n    group.entries = group.entries.concat(callable(element, bpmnFactory, {\n      getCallableType: getImplementationType\n    }, translate));\n  }\n\n\n  // connector ////////////////////////////////////////////////\n\n  var isConnector = function(element) {\n    return getImplementationType(element) === 'connector';\n  };\n\n  group.entries.push(entryFactory.link({\n    id: 'configureConnectorLink',\n    label: translate('Configure Connector'),\n    handleClick: function(element, node, event) {\n\n      var connectorTabEl = getTabNode(node, 'connector');\n\n      if (connectorTabEl) {\n        triggerClickEvent(connectorTabEl);\n      }\n\n      // suppress actual link click\n      return false;\n    },\n    showLink: function(element, node) {\n      var link = domQuery('a', node);\n      link.textContent = '';\n\n      domClasses(link).remove('bpp-error-message');\n\n      if (isConnector(element)) {\n        var connectorId = InputOutputHelper.getConnector(element).get('connectorId');\n        if (connectorId) {\n          link.textContent = translate('Configure Connector');\n        } else {\n          link.innerHTML = '<span class=\"bpp-icon-warning\"></span> ' + escapeHTML(translate('Must configure Connector'));\n          domClasses(link).add('bpp-error-message');\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  }));\n\n};\n\n\n\n// helpers ///////////////////////////\n\nfunction getTabNode(el, id) {\n  var containerEl = domClosest(el, '.bpp-properties-panel');\n\n  return domQuery('a[data-tab-target=\"' + id + '\"]', containerEl);\n}","/**\n * The function whose prototype chain sequence wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nmodule.exports = baseLodash;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getTemplate = require('../Helper').getTemplate,\n    getTemplateId = require('../Helper').getTemplateId;\n\nvar find = require('lodash/find');\n\nvar TEMPLATE_ATTR = require('../Helper').TEMPLATE_ATTR;\n\nfunction isAny(element, types) {\n  return types.reduce(function(result, type) {\n    return result || is(element, type);\n  }, false);\n}\n\n\nmodule.exports = function(group, element, elementTemplates, translate) {\n\n  var options = getTemplateOptions(element, elementTemplates, translate);\n\n  if (options.length === 1 && !options[0].isDefault) {\n    return;\n  }\n\n  // select element template (via dropdown)\n  group.entries.push(entryFactory.selectBox({\n    id: 'elementTemplate-chooser',\n    label: translate('Element Template'),\n    modelProperty: 'camunda:modelerTemplate',\n    selectOptions: options,\n    set: function(element, properties) {\n      return applyTemplate(element, properties[TEMPLATE_ATTR], elementTemplates);\n    },\n    disabled: function() {\n      var template = getTemplate(element, elementTemplates);\n\n      return template && isDefaultTemplate(template);\n    }\n  }));\n\n};\n\n\n// helpers //////////////////////////////////////\n\nfunction applyTemplate(element, newTemplateId, elementTemplates) {\n\n  // cleanup\n  // clear input output mappings\n  // undo changes to properties defined in template\n\n  // re-establish\n  // set input output mappings\n  // apply changes to properties as defined in new template\n\n  var oldTemplate = getTemplate(element, elementTemplates),\n      newTemplate = elementTemplates.get(newTemplateId);\n\n  if (oldTemplate === newTemplate) {\n    return;\n  }\n\n  return {\n    cmd: 'propertiesPanel.camunda.changeTemplate',\n    context: {\n      element: element,\n      oldTemplate: oldTemplate,\n      newTemplate: newTemplate\n    }\n  };\n}\n\nfunction getTemplateOptions(element, elementTemplates, translate) {\n\n  var currentTemplateId = getTemplateId(element);\n\n  var emptyOption = {\n    name: '',\n    value: ''\n  };\n\n  var allOptions = elementTemplates.getAll().reduce(function(templates, t) {\n    if (!isAny(element, t.appliesTo)) {\n      return templates;\n    }\n\n    return templates.concat({\n      name: translate(t.name),\n      value: t.id,\n      isDefault: t.isDefault\n    });\n  }, [ emptyOption ]);\n\n\n  var defaultOption = find(allOptions, function(option) {\n    return isDefaultTemplate(option);\n  });\n\n  var currentOption = find(allOptions, function(option) {\n    return option.value === currentTemplateId;\n  });\n\n  if (currentTemplateId && !currentOption) {\n    currentOption = unknownTemplate(currentTemplateId, translate);\n\n    allOptions.push(currentOption);\n  }\n\n  if (!defaultOption) {\n\n    // return all options, including empty\n    // and optionally unknownTemplate option\n    return allOptions;\n  }\n\n  // special limited handling for\n  // default options\n\n  var options = [];\n\n  // current template not set\n  if (!currentTemplateId) {\n    options.push({\n      name: '',\n      value: ''\n    });\n  }\n\n  // current template not default\n  if (currentOption && currentOption !== defaultOption) {\n    options.push(currentOption);\n  }\n\n  options.push(defaultOption);\n\n  // [ (empty), (current), defaultOption ]\n  return options;\n}\n\nfunction unknownTemplate(templateId, translate) {\n  return {\n    name: translate('[unknown template: {templateId}]', { templateId: templateId }),\n    value: templateId\n  };\n}\n\nfunction isDefaultTemplate(elementTemplate) {\n  return elementTemplate.isDefault;\n}","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    createHybrid = require('./_createHybrid'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createCurry;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","'use strict';\n\nvar findExtension = require('../Helper').findExtension,\n    findExtensions = require('../Helper').findExtensions;\n\nvar createCamundaProperty = require('../CreateHelper').createCamundaProperty,\n    createInputParameter = require('../CreateHelper').createInputParameter,\n    createOutputParameter = require('../CreateHelper').createOutputParameter,\n    createCamundaIn = require('../CreateHelper').createCamundaIn,\n    createCamundaOut = require('../CreateHelper').createCamundaOut,\n    createCamundaInWithBusinessKey = require('../CreateHelper').createCamundaInWithBusinessKey,\n    createCamundaExecutionListenerScript = require('../CreateHelper').createCamundaExecutionListenerScript,\n    createCamundaFieldInjection = require('../CreateHelper').createCamundaFieldInjection;\n\nvar forEach = require('lodash/forEach');\n\nvar CAMUNDA_SERVICE_TASK_LIKE = [\n  'camunda:class',\n  'camunda:delegateExpression',\n  'camunda:expression'\n];\n\n/**\n * A handler that changes the modeling template of a BPMN element.\n */\nfunction ChangeElementTemplateHandler(modeling, commandStack, bpmnFactory) {\n\n  function getOrCreateExtensionElements(element) {\n\n    var bo = element.businessObject;\n\n    var extensionElements = bo.extensionElements;\n\n    // add extension elements\n    if (!extensionElements) {\n      extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n        values: []\n      });\n\n      modeling.updateProperties(element, {\n        extensionElements: extensionElements\n      });\n    }\n\n    return extensionElements;\n  }\n\n  function updateModelerTemplate(element, newTemplate) {\n    modeling.updateProperties(element, {\n      'camunda:modelerTemplate': newTemplate && newTemplate.id\n    });\n  }\n\n  function updateIoMappings(element, newTemplate, context) {\n\n    var newMappings = createInputOutputMappings(newTemplate, bpmnFactory),\n        oldMappings;\n\n    if (!newMappings) {\n      return;\n    }\n\n    if (context) {\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: context,\n        properties: { inputOutput: newMappings }\n      });\n    } else {\n      context = getOrCreateExtensionElements(element);\n      oldMappings = findExtension(element, 'camunda:InputOutput');\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: context,\n        propertyName: 'values',\n        objectsToAdd: [ newMappings ],\n        objectsToRemove: oldMappings ? [ oldMappings ] : []\n      });\n    }\n  }\n\n  function updateCamundaField(element, newTemplate, context) {\n\n    var newMappings = createCamundaFieldInjections(newTemplate, bpmnFactory),\n        oldMappings;\n\n    if (!newMappings) {\n      return;\n    }\n    if (context) {\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: context,\n        properties: { field: newMappings }\n      });\n    } else {\n      context = getOrCreateExtensionElements(element);\n      oldMappings = findExtensions(element, ['camunda:Field']);\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: context,\n        propertyName: 'values',\n        objectsToAdd: newMappings,\n        objectsToRemove: oldMappings ? oldMappings : []\n      });\n    }\n  }\n\n\n  function updateCamundaProperties(element, newTemplate, context) {\n\n    var newProperties = createCamundaProperties(newTemplate, bpmnFactory),\n        oldProperties;\n\n    if (!newProperties) {\n      return;\n    }\n\n    if (context) {\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: context,\n        properties: { properties: newProperties }\n      });\n    } else {\n      context = getOrCreateExtensionElements(element);\n      oldProperties = findExtension(element, 'camunda:Properties');\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: context,\n        propertyName: 'values',\n        objectsToAdd: [ newProperties ],\n        objectsToRemove: oldProperties ? [ oldProperties ] : []\n      });\n    }\n  }\n\n  function updateProperties(element, newTemplate, context) {\n\n    var newProperties = createBpmnPropertyUpdates(newTemplate, bpmnFactory);\n\n    var newPropertiesCount = Object.keys(newProperties).length;\n\n    if (!newPropertiesCount) {\n      return;\n    }\n\n    if (context) {\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: context,\n        properties: newProperties\n      });\n    } else {\n      modeling.updateProperties(element, newProperties);\n    }\n  }\n\n  function updateInOut(element, newTemplate, context) {\n\n    var newInOut = createCamundaInOut(newTemplate, bpmnFactory),\n        oldInOut;\n\n    if (!newInOut) {\n      return;\n    }\n\n    if (context) {\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: context,\n        properties: { inout: newInOut }\n      });\n    } else {\n      context = getOrCreateExtensionElements(element);\n      oldInOut = findExtensions(context, [ 'camunda:In', 'camunda:Out' ]);\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: context,\n        propertyName: 'values',\n        objectsToAdd: newInOut,\n        objectsToRemove: oldInOut\n      });\n    }\n  }\n\n  function updateExecutionListener(element, newTemplate, context) {\n\n    var newExecutionListeners = createCamundaExecutionListeners(newTemplate, bpmnFactory),\n        oldExecutionsListeners;\n\n    if (!newExecutionListeners.length) {\n      return;\n    }\n\n    if (context) {\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: context,\n        properties: { executionListener: newExecutionListeners }\n      });\n    } else {\n      context = getOrCreateExtensionElements(element);\n      oldExecutionsListeners = findExtensions(context, [ 'camunda:ExecutionListener' ]);\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: context,\n        propertyName: 'values',\n        objectsToAdd: newExecutionListeners,\n        objectsToRemove: oldExecutionsListeners\n      });\n    }\n  }\n\n  /**\n   * Update / recreate a scoped element.\n   *\n   * @param {djs.model.Base} element the diagram parent element\n   * @param {String} scopeName name of the scope, i.e. camunda:Connector\n   * @param {Object} scopeDefinition\n   */\n  function updateScopeElements(element, scopeName, scopeDefinition) {\n\n    var scopeElement = bpmnFactory.create(scopeName);\n\n    // update camunda:inputOutput\n    updateIoMappings(element, scopeDefinition, scopeElement);\n\n    // update camunda:field\n    updateCamundaField(element, scopeDefinition, scopeElement);\n\n    // update camunda:properties\n    updateCamundaProperties(element, scopeDefinition, scopeElement);\n\n    // update other properties (bpmn:condition, camunda:async, ...)\n    updateProperties(element, scopeDefinition, scopeElement);\n\n    // update camunda:in and camunda:out\n    updateInOut(element, scopeDefinition, scopeElement);\n\n    // update camunda:executionListener\n    updateExecutionListener(element, scopeDefinition, scopeElement);\n\n    var extensionElements = getOrCreateExtensionElements(element);\n    var oldScope = findExtension(extensionElements, scopeName);\n\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: extensionElements,\n      propertyName: 'values',\n      objectsToAdd: [ scopeElement ],\n      objectsToRemove: oldScope ? [ oldScope ] : []\n    });\n  }\n\n  /**\n   * Compose an element template change action, updating all\n   * necessary underlying properties.\n   *\n   * @param {Object} context\n   * @param {Object} context.element\n   * @param {Object} context.oldTemplate\n   * @param {Object} context.newTemplate\n   */\n  this.preExecute = function(context) {\n\n    var element = context.element,\n        newTemplate = context.newTemplate;\n\n    // update camunda:modelerTemplate attribute\n    updateModelerTemplate(element, newTemplate);\n\n    if (newTemplate) {\n\n      // update camunda:inputOutput\n      updateIoMappings(element, newTemplate);\n\n      // update camunda:field\n      updateCamundaField(element, newTemplate);\n\n      // update camunda:properties\n      updateCamundaProperties(element, newTemplate);\n\n      // update other properties (bpmn:condition, camunda:async, ...)\n      updateProperties(element, newTemplate);\n\n      // update camunda:in and camunda:out\n      updateInOut(element, newTemplate);\n\n      // update camunda:executionListener\n      updateExecutionListener(element, newTemplate);\n\n      // loop on scopes properties\n      forEach(newTemplate.scopes, function(scopeDefinition, scopeName) {\n        updateScopeElements(element, scopeName, scopeDefinition);\n      });\n\n    }\n  };\n}\n\nChangeElementTemplateHandler.$inject = [ 'modeling', 'commandStack', 'bpmnFactory' ];\n\nmodule.exports = ChangeElementTemplateHandler;\n\n\n\n// helpers /////////////////////////////\n\nfunction createBpmnPropertyUpdates(template, bpmnFactory) {\n\n  var propertyUpdates = {};\n\n  template.properties.forEach(function(p) {\n\n    var binding = p.binding,\n        bindingTarget = binding.name,\n        propertyValue;\n\n    if (binding.type === 'property') {\n\n      if (bindingTarget === 'conditionExpression') {\n        propertyValue = bpmnFactory.create('bpmn:FormalExpression', {\n          body: p.value,\n          language: binding.scriptFormat\n        });\n      } else {\n        propertyValue = p.value;\n      }\n\n      // assigning camunda:async to true|false\n      // assigning bpmn:conditionExpression to { $type: 'bpmn:FormalExpression', ... }\n      propertyUpdates[bindingTarget] = propertyValue;\n\n      // make sure we unset other \"implementation types\"\n      // when applying a camunda:class template onto a preconfigured\n      // camunda:delegateExpression element\n      if (CAMUNDA_SERVICE_TASK_LIKE.indexOf(bindingTarget) !== -1) {\n        CAMUNDA_SERVICE_TASK_LIKE.forEach(function(prop) {\n          if (prop !== bindingTarget) {\n            propertyUpdates[prop] = undefined;\n          }\n        });\n      }\n    }\n  });\n\n  return propertyUpdates;\n}\n\nfunction createCamundaFieldInjections(template, bpmnFactory) {\n  var injections = [];\n\n  template.properties.forEach(function(p) {\n    var binding = p.binding,\n        bindingType = binding.type;\n    if (bindingType === 'camunda:field') {\n      injections.push(createCamundaFieldInjection(\n        binding, p.value, bpmnFactory\n      ));\n    }\n  });\n\n  if (injections.length) {\n    return injections;\n  }\n}\n\nfunction createCamundaProperties(template, bpmnFactory) {\n\n  var properties = [];\n\n  template.properties.forEach(function(p) {\n    var binding = p.binding,\n        bindingType = binding.type;\n\n    if (bindingType === 'camunda:property') {\n      properties.push(createCamundaProperty(\n        binding, p.value, bpmnFactory\n      ));\n    }\n  });\n\n  if (properties.length) {\n    return bpmnFactory.create('camunda:Properties', {\n      values: properties\n    });\n  }\n}\n\nfunction createInputOutputMappings(template, bpmnFactory) {\n\n  var inputParameters = [],\n      outputParameters = [];\n\n  template.properties.forEach(function(p) {\n    var binding = p.binding,\n        bindingType = binding.type;\n\n    if (bindingType === 'camunda:inputParameter') {\n      inputParameters.push(createInputParameter(\n        binding, p.value, bpmnFactory\n      ));\n    }\n\n    if (bindingType === 'camunda:outputParameter') {\n      outputParameters.push(createOutputParameter(\n        binding, p.value, bpmnFactory\n      ));\n    }\n  });\n\n  // do we need to create new ioMappings (?)\n  if (outputParameters.length || inputParameters.length) {\n    return bpmnFactory.create('camunda:InputOutput', {\n      inputParameters: inputParameters,\n      outputParameters: outputParameters\n    });\n  }\n}\n\nfunction createCamundaInOut(template, bpmnFactory) {\n\n  var inOuts = [];\n\n  template.properties.forEach(function(p) {\n    var binding = p.binding,\n        bindingType = binding.type;\n\n    if (bindingType === 'camunda:in') {\n      inOuts.push(createCamundaIn(\n        binding, p.value, bpmnFactory\n      ));\n    } else\n    if (bindingType === 'camunda:out') {\n      inOuts.push(createCamundaOut(\n        binding, p.value, bpmnFactory\n      ));\n    } else\n    if (bindingType === 'camunda:in:businessKey') {\n      inOuts.push(createCamundaInWithBusinessKey(\n        binding, p.value, bpmnFactory\n      ));\n    }\n  });\n\n  return inOuts;\n}\n\n\nfunction createCamundaExecutionListeners(template, bpmnFactory) {\n\n  var executionListener = [];\n\n  template.properties.forEach(function(p) {\n    var binding = p.binding,\n        bindingType = binding.type;\n\n    if (bindingType === 'camunda:executionListener') {\n      executionListener.push(createCamundaExecutionListenerScript(\n        binding, p.value, bpmnFactory\n      ));\n    }\n  });\n\n  return executionListener;\n}\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar multiInstanceLoopCharacteristics = require('./implementation/MultiInstanceLoopCharacteristics');\n\nvar jobRetryTimeCycle = require('./implementation/JobRetryTimeCycle'),\n    asyncContinuation = require('./implementation/AsyncContinuation');\n\n\nfunction getLoopCharacteristics(element) {\n  var bo = getBusinessObject(element);\n  return bo.loopCharacteristics;\n}\n\n\nfunction ensureMultiInstanceSupported(element) {\n  var loopCharacteristics = getLoopCharacteristics(element);\n  return !!loopCharacteristics && is(loopCharacteristics, 'camunda:Collectable');\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!ensureMultiInstanceSupported(element)) {\n    return;\n  }\n\n  // multi instance properties\n  group.entries = group.entries.concat(multiInstanceLoopCharacteristics(element, bpmnFactory, translate));\n\n  // async continuation ///////////////////////////////////////////////////////\n  group.entries = group.entries.concat(asyncContinuation(element, bpmnFactory, {\n    getBusinessObject: getLoopCharacteristics,\n    idPrefix: 'multiInstance-',\n    labelPrefix: translate('Multi Instance ')\n  }, translate));\n\n\n  // retry time cycle //////////////////////////////////////////////////////////\n  group.entries = group.entries.concat(jobRetryTimeCycle(element, bpmnFactory, {\n    getBusinessObject: getLoopCharacteristics,\n    idPrefix: 'multiInstance-',\n    labelPrefix: translate('Multi Instance ')\n  }, translate));\n};\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar textBox = function(options, defaultParameters) {\n\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      canBeShown = !!options.show && typeof options.show === 'function',\n      description = options.description;\n\n  resource.html =\n    '<label for=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n    (canBeShown ? 'data-show=\"isShown\"' : '') +\n    '>' + label + '</label>' +\n    '<div class=\"bpp-field-wrapper\" ' +\n    (canBeShown ? 'data-show=\"isShown\"' : '') +\n    '>' +\n      '<div contenteditable=\"true\" id=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n            'name=\"' + escapeHTML(options.modelProperty) + '\" />' +\n    '</div>';\n\n  // add description below text box entry field\n  if (description) {\n    resource.html += entryFieldDescription(description);\n  }\n\n  if (canBeShown) {\n    resource.isShown = function() {\n      return options.show.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-textbox'];\n\n  return resource;\n};\n\nmodule.exports = textBox;\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var getWrapDetails = require('./_getWrapDetails'),\n    insertWrapDetails = require('./_insertWrapDetails'),\n    setToString = require('./_setToString'),\n    updateWrapDetails = require('./_updateWrapDetails');\n\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\nfunction setWrapToString(wrapper, reference, bitmask) {\n  var source = (reference + '');\n  return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n}\n\nmodule.exports = setWrapToString;\n","'use strict';\n\nvar map = require('lodash/map');\n\nvar extensionElementsHelper = require('./ExtensionElementsHelper');\n\n/**\n * Returns true if the attribute 'camunda:asyncBefore' is set\n * to true.\n *\n * @param  {ModdleElement} bo\n *\n * @return {boolean} a boolean value\n */\nfunction isAsyncBefore(bo) {\n  return !!(bo.get('camunda:asyncBefore') || bo.get('camunda:async'));\n}\n\nmodule.exports.isAsyncBefore = isAsyncBefore;\n\n/**\n * Returns true if the attribute 'camunda:asyncAfter' is set\n * to true.\n *\n * @param  {ModdleElement} bo\n *\n * @return {boolean} a boolean value\n */\nfunction isAsyncAfter(bo) {\n  return !!bo.get('camunda:asyncAfter');\n}\n\nmodule.exports.isAsyncAfter = isAsyncAfter;\n\n/**\n * Returns true if the attribute 'camunda:exclusive' is set\n * to true.\n *\n * @param  {ModdleElement} bo\n *\n * @return {boolean} a boolean value\n */\nfunction isExclusive(bo) {\n  return !!bo.get('camunda:exclusive');\n}\n\nmodule.exports.isExclusive = isExclusive;\n\n/**\n * Get first 'camunda:FailedJobRetryTimeCycle' from the business object.\n *\n * @param  {ModdleElement} bo\n *\n * @return {Array<ModdleElement>} a list of 'camunda:FailedJobRetryTimeCycle'\n */\nfunction getFailedJobRetryTimeCycle(bo) {\n  return (extensionElementsHelper.getExtensionElements(bo, 'camunda:FailedJobRetryTimeCycle') || [])[0];\n}\n\nmodule.exports.getFailedJobRetryTimeCycle = getFailedJobRetryTimeCycle;\n\n/**\n * Removes all existing 'camunda:FailedJobRetryTimeCycle' from the business object\n *\n * @param  {ModdleElement} bo\n *\n * @return {Array<ModdleElement>} a list of 'camunda:FailedJobRetryTimeCycle'\n */\nfunction removeFailedJobRetryTimeCycle(bo, element) {\n  var retryTimeCycles = extensionElementsHelper.getExtensionElements(bo, 'camunda:FailedJobRetryTimeCycle');\n  return map(retryTimeCycles, function(cycle) {\n    return extensionElementsHelper.removeEntry(bo, element, cycle);\n  });\n}\n\nmodule.exports.removeFailedJobRetryTimeCycle = removeFailedJobRetryTimeCycle;","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","var arrayEach = require('./_arrayEach'),\n    baseCreate = require('./_baseCreate'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee'),\n    getPrototype = require('./_getPrototype'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray');\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = transform;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","'use strict';\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, signalEventDefinition, translate) {\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, signalEventDefinition, bpmnFactory, {\n    label: translate('Signal'),\n    elementName: 'signal',\n    elementType: 'bpmn:Signal',\n    referenceProperty: 'signalRef',\n    newElementIdPrefix: 'Signal_'\n  }));\n\n\n  group.entries = group.entries.concat(elementReferenceProperty(element, signalEventDefinition, bpmnFactory, {\n    id: 'signal-element-name',\n    label: translate('Signal Name'),\n    referenceProperty: 'signalRef',\n    modelProperty: 'name',\n    shouldValidate: true\n  }));\n\n};\n","'use strict';\n\nvar forEach = require('lodash/forEach');\n\n/**\n * A handler that implements a BPMN 2.0 property update\n * for business object lists which are not represented in the\n * diagram.\n *\n * This is useful in the context of the properties panel in\n * order to update child elements of elements visible in\n * the diagram.\n *\n * Example: perform an update of a specific event definition\n * of an intermediate event.\n *\n * @class\n * @constructor\n */\nfunction UpdateBusinessObjectListHandler(elementRegistry, bpmnFactory) {\n  this._elementRegistry = elementRegistry;\n  this._bpmnFactory = bpmnFactory;\n}\n\nUpdateBusinessObjectListHandler.$inject = [ 'elementRegistry', 'bpmnFactory' ];\n\nmodule.exports = UpdateBusinessObjectListHandler;\n\nfunction ensureNotNull(prop, name) {\n  if (!prop) {\n    throw new Error(name + 'required');\n  }\n  return prop;\n}\n\n// api /////////////////////////////////////////////\n\n/**\n * Updates a element under a provided parent.\n */\nUpdateBusinessObjectListHandler.prototype.execute = function(context) {\n\n  var currentObject = ensureNotNull(context.currentObject, 'currentObject'),\n      propertyName = ensureNotNull(context.propertyName, 'propertyName'),\n      updatedObjectList = context.updatedObjectList,\n      objectsToRemove = context.objectsToRemove || [],\n      objectsToAdd = context.objectsToAdd || [],\n      changed = [ context.element], // this will not change any diagram-js elements\n      referencePropertyName;\n\n  if (context.referencePropertyName) {\n    referencePropertyName = context.referencePropertyName;\n  }\n\n  var objectList = currentObject[propertyName];\n  // adjust array reference in the parent business object\n  context.previousList = currentObject[propertyName];\n\n  if (updatedObjectList) {\n    currentObject[propertyName] = updatedObjectList;\n  } else {\n    var listCopy = [];\n    // remove all objects which should be removed\n    forEach(objectList, function(object) {\n      if (objectsToRemove.indexOf(object) == -1) {\n        listCopy.push(object);\n      }\n    });\n    // add all objects which should be added\n    listCopy = listCopy.concat(objectsToAdd);\n\n    // set property to new list\n    if (listCopy.length > 0 || !referencePropertyName) {\n\n      // as long as there are elements in the list update the list\n      currentObject[propertyName] = listCopy;\n    } else if (referencePropertyName) {\n\n      // remove the list when it is empty\n      var parentObject = currentObject.$parent;\n      parentObject.set(referencePropertyName, undefined);\n    }\n  }\n\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  CreateBusinessObjectListHandler#revert\n *\n * @param {Object} context\n *\n * @return {djs.mode.Base} the updated element\n */\nUpdateBusinessObjectListHandler.prototype.revert = function(context) {\n\n  var currentObject = context.currentObject,\n      propertyName = context.propertyName,\n      previousList = context.previousList,\n      parentObject = currentObject.$parent;\n\n  if (context.referencePropertyName) {\n    parentObject.set(context.referencePropertyName, currentObject);\n  }\n\n  // remove new element\n  currentObject.set(propertyName, previousList);\n\n  return context.changed;\n};\n","'use strict';\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    is = ModelUtil.is,\n    getBusinessObject = ModelUtil.getBusinessObject;\n\nvar extensionElementsHelper = require('./ExtensionElementsHelper'),\n    implementationTypeHelper = require('./ImplementationTypeHelper');\n\nvar InputOutputHelper = {};\n\nmodule.exports = InputOutputHelper;\n\nfunction getElements(bo, type, prop) {\n  var elems = extensionElementsHelper.getExtensionElements(bo, type) || [];\n  return !prop ? elems : (elems[0] || {})[prop] || [];\n}\n\nfunction getParameters(element, prop, insideConnector) {\n  var inputOutput = InputOutputHelper.getInputOutput(element, insideConnector);\n  return (inputOutput && inputOutput.get(prop)) || [];\n}\n\n/**\n * Get a inputOutput from the business object\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {ModdleElement} the inputOutput object\n */\nInputOutputHelper.getInputOutput = function(element, insideConnector) {\n  if (!insideConnector) {\n    var bo = getBusinessObject(element);\n    return (getElements(bo, 'camunda:InputOutput') || [])[0];\n  }\n  var connector = this.getConnector(element);\n  return connector && connector.get('inputOutput');\n};\n\n/**\n * Get a connector from the business object\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement} the connector object\n */\nInputOutputHelper.getConnector = function(element) {\n  var bo = implementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n  return bo && (getElements(bo, 'camunda:Connector') || [])[0];\n};\n\n/**\n * Return all input parameters existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {Array} a list of input parameter objects\n */\nInputOutputHelper.getInputParameters = function(element, insideConnector) {\n  return getParameters.apply(this, [ element, 'inputParameters', insideConnector ]);\n};\n\n/**\n * Return all output parameters existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {Array} a list of output parameter objects\n */\nInputOutputHelper.getOutputParameters = function(element, insideConnector) {\n  return getParameters.apply(this, [ element, 'outputParameters', insideConnector ]);\n};\n\n/**\n * Get a input parameter from the business object at given index\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n * @param {number} idx\n *\n * @return {ModdleElement} input parameter\n */\nInputOutputHelper.getInputParameter = function(element, insideConnector, idx) {\n  return this.getInputParameters(element, insideConnector)[idx];\n};\n\n/**\n * Get a output parameter from the business object at given index\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n * @param {number} idx\n *\n * @return {ModdleElement} output parameter\n */\nInputOutputHelper.getOutputParameter = function(element, insideConnector, idx) {\n  return this.getOutputParameters(element, insideConnector)[idx];\n};\n\n/**\n * Returns 'true' if the given element supports inputOutput\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {boolean} a boolean value\n */\nInputOutputHelper.isInputOutputSupported = function(element, insideConnector) {\n\n  if (insideConnector) {\n    return true;\n  }\n\n  var bo = getBusinessObject(element);\n\n  return (\n    is(bo, 'bpmn:FlowNode') && !(\n      is(bo, 'bpmn:StartEvent') ||\n      is(bo, 'bpmn:Gateway') ||\n      is(bo, 'bpmn:BoundaryEvent') ||\n      (\n        is(bo, 'bpmn:SubProcess') && bo.get('triggeredByEvent')\n      )\n    )\n  );\n};\n\n/**\n * Returns 'true' if the given element supports output parameters\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {boolean} a boolean value\n */\nInputOutputHelper.areOutputParametersSupported = function(element, insideConnector) {\n  var bo = getBusinessObject(element);\n  return insideConnector || (!is(bo, 'bpmn:EndEvent') && !bo.loopCharacteristics);\n};\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementReferenceProperty = require('../../../bpmn/parts/implementation/ElementReferenceProperty');\n\nmodule.exports = function(\n    group, element, bpmnFactory, errorEventDefinition,\n    showErrorCodeVariable, showErrorMessageVariable, translate\n) {\n\n\n  var getValue = function(modelProperty) {\n    return function(element) {\n      var modelPropertyValue = errorEventDefinition.get('camunda:' + modelProperty);\n      var value = {};\n\n      value[modelProperty] = modelPropertyValue;\n      return value;\n    };\n  };\n\n  var setValue = function(modelProperty) {\n    return function(element, values) {\n      var props = {};\n\n      props['camunda:' + modelProperty] = values[modelProperty] || undefined;\n\n      return cmdHelper.updateBusinessObject(element, errorEventDefinition, props);\n    };\n  };\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, errorEventDefinition, bpmnFactory, {\n      id: 'error-element-message',\n      label: translate('Error Message'),\n      referenceProperty: 'errorRef',\n      modelProperty: 'errorMessage'\n    })\n  );\n\n  if (showErrorCodeVariable) {\n    group.entries.push(entryFactory.textField({\n      id: 'errorCodeVariable',\n      label: translate('Error Code Variable'),\n      modelProperty : 'errorCodeVariable',\n\n      get: getValue('errorCodeVariable'),\n      set: setValue('errorCodeVariable')\n    }));\n  }\n\n  if (showErrorMessageVariable) {\n    group.entries.push(entryFactory.textField({\n      id: 'errorMessageVariable',\n      label: translate('Error Message Variable'),\n      modelProperty: 'errorMessageVariable',\n\n      get: getValue('errorMessageVariable'),\n      set: setValue('errorMessageVariable')\n    }));\n  }\n\n};\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar cmdHelper = require('../helper/CmdHelper');\n\nvar domQuery = require('min-dom').query,\n    domAttr = require('min-dom').attr,\n    domClosest = require('min-dom').closest;\n\nvar filter = require('lodash/filter'),\n    forEach = require('lodash/forEach'),\n    keys = require('lodash/keys');\n\nvar domify = require('min-dom').domify;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\nvar updateSelection = require('selection-update');\n\nvar TABLE_ROW_DIV_SNIPPET = '<div class=\"bpp-field-wrapper bpp-table-row\">';\nvar DELETE_ROW_BUTTON_SNIPPET = '<button class=\"clear\" data-action=\"deleteElement\">' +\n                                  '<span>X</span>' +\n                                '</button>';\n\nfunction createInputRowTemplate(properties, canRemove) {\n  var template = TABLE_ROW_DIV_SNIPPET;\n  template += createInputTemplate(properties, canRemove);\n  template += canRemove ? DELETE_ROW_BUTTON_SNIPPET : '';\n  template += '</div>';\n\n  return template;\n}\n\nfunction createInputTemplate(properties, canRemove) {\n  var columns = properties.length;\n  var template = '';\n  forEach(properties, function(prop) {\n    template += '<input class=\"bpp-table-row-columns-' + columns + ' ' +\n                               (canRemove ? 'bpp-table-row-removable' : '') + '\" ' +\n                       'id=\"camunda-table-row-cell-input-value\" ' +\n                       'type=\"text\" ' +\n                       'name=\"' + escapeHTML(prop) + '\" />';\n  });\n  return template;\n}\n\nfunction createLabelRowTemplate(labels) {\n  var template = TABLE_ROW_DIV_SNIPPET;\n  template += createLabelTemplate(labels);\n  template += '</div>';\n\n  return template;\n}\n\nfunction createLabelTemplate(labels) {\n  var columns = labels.length;\n  var template = '';\n  forEach(labels, function(label) {\n    template += '<label class=\"bpp-table-row-columns-' + columns + '\">' + escapeHTML(label) + '</label>';\n  });\n  return template;\n}\n\nfunction pick(elements, properties) {\n  return (elements || []).map(function(elem) {\n    var newElement = {};\n    forEach(properties, function(prop) {\n      newElement[prop] = elem[prop] || '';\n    });\n    return newElement;\n  });\n}\n\nfunction diff(element, node, values, oldValues, editable) {\n  return filter(values, function(value, idx) {\n    return !valueEqual(element, node, value, oldValues[idx], editable, idx);\n  });\n}\n\nfunction valueEqual(element, node, value, oldValue, editable, idx) {\n  if (value && !oldValue) {\n    return false;\n  }\n  var allKeys = keys(value).concat(keys(oldValue));\n\n  return allKeys.every(function(key) {\n    var n = value[key] || undefined;\n    var o = oldValue[key] || undefined;\n    return !editable(element, node, key, idx) || n === o;\n  });\n}\n\nfunction getEntryNode(node) {\n  return domClosest(node, '[data-entry]', true);\n}\n\nfunction getContainer(node) {\n  return domQuery('div[data-list-entry-container]', node);\n}\n\nfunction getSelection(node) {\n  return {\n    start: node.selectionStart,\n    end: node.selectionEnd\n  };\n}\n\nfunction setSelection(node, selection) {\n  node.selectionStart = selection.start;\n  node.selectionEnd = selection.end;\n}\n\n/**\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} options.description\n * @param  {Array<string>} options.modelProperties\n * @param  {Array<string>} options.labels\n * @param  {Function} options.getElements - this callback function must return a list of business object items\n * @param  {Function} options.removeElement\n * @param  {Function} options.addElement\n * @param  {Function} options.updateElement\n * @param  {Function} options.editable\n * @param  {Function} options.setControlValue\n * @param  {Function} options.show\n *\n * @return {Object}\n */\nmodule.exports = function(options) {\n\n  var id = options.id,\n      modelProperties = options.modelProperties,\n      labels = options.labels,\n      description = options.description;\n\n  var labelRow = createLabelRowTemplate(labels);\n\n  var getElements = options.getElements;\n\n  var removeElement = options.removeElement,\n      canRemove = typeof removeElement === 'function';\n\n  var addElement = options.addElement,\n      canAdd = typeof addElement === 'function',\n      addLabel = options.addLabel || 'Add Value';\n\n  var updateElement = options.updateElement,\n      canUpdate = typeof updateElement === 'function';\n\n  var editable = options.editable || function() { return true; },\n      setControlValue = options.setControlValue;\n\n  var show = options.show,\n      canBeShown = typeof show === 'function';\n\n  var elements = function(element, node) {\n    return pick(getElements(element, node), modelProperties);\n  };\n\n  var factory = {\n    id: id,\n    html: (canAdd ?\n      '<div class=\"bpp-table-add-row\" ' + (canBeShown ? 'data-show=\"show\"' : '') + '>' +\n            '<label>' + escapeHTML(addLabel) + '</label>' +\n            '<button class=\"add\" data-action=\"addElement\"><span>+</span></button>' +\n          '</div>' : '') +\n          '<div class=\"bpp-table\" data-show=\"showTable\">' +\n            '<div class=\"bpp-field-wrapper bpp-table-row\">' +\n               labelRow +\n            '</div>' +\n            '<div data-list-entry-container>' +\n            '</div>' +\n          '</div>' +\n\n          // add description below table entry field\n          (description ? entryFieldDescription(description) : ''),\n\n    get: function(element, node) {\n      var boElements = elements(element, node, this.__invalidValues);\n\n      var invalidValues = this.__invalidValues;\n\n      delete this.__invalidValues;\n\n      forEach(invalidValues, function(value, idx) {\n        var element = boElements[idx];\n\n        forEach(modelProperties, function(prop) {\n          element[prop] = value[prop];\n        });\n      });\n\n      return boElements;\n    },\n\n    set: function(element, values, node) {\n      var action = this.__action || {};\n      delete this.__action;\n\n      if (action.id === 'delete-element') {\n        return removeElement(element, node, action.idx);\n      }\n      else if (action.id === 'add-element') {\n        return addElement(element, node);\n      }\n      else if (canUpdate) {\n        var commands = [],\n            valuesToValidate = values;\n\n        if (typeof options.validate !== 'function') {\n          valuesToValidate = diff(element, node, values, elements(element, node), editable);\n        }\n\n        var self = this;\n\n        forEach(valuesToValidate, function(value) {\n          var validationError,\n              idx = values.indexOf(value);\n\n          if (typeof options.validate === 'function') {\n            validationError = options.validate(element, value, node, idx);\n          }\n\n          if (!validationError) {\n            var cmd = updateElement(element, value, node, idx);\n\n            if (cmd) {\n              commands.push(cmd);\n            }\n          } else {\n            // cache invalid value in an object by index as key\n            self.__invalidValues = self.__invalidValues || {};\n            self.__invalidValues[idx] = value;\n\n            // execute a command, which does not do anything\n            commands.push(cmdHelper.updateProperties(element, {}));\n          }\n        });\n\n        return commands;\n      }\n    },\n    createListEntryTemplate: function(value, index, selectBox) {\n      return createInputRowTemplate(modelProperties, canRemove);\n    },\n\n    addElement: function(element, node, event, scopeNode) {\n      var template = domify(createInputRowTemplate(modelProperties, canRemove));\n\n      var container = getContainer(node);\n      container.appendChild(template);\n\n      this.__action = {\n        id: 'add-element'\n      };\n\n      return true;\n    },\n\n    deleteElement: function(element, node, event, scopeNode) {\n      var container = getContainer(node);\n      var rowToDelete = event.delegateTarget.parentNode;\n      var idx = parseInt(domAttr(rowToDelete, 'data-index'), 10);\n\n      container.removeChild(rowToDelete);\n\n      this.__action = {\n        id: 'delete-element',\n        idx: idx\n      };\n\n      return true;\n    },\n\n    editable: function(element, rowNode, input, prop, value, idx) {\n      var entryNode = domClosest(rowNode, '[data-entry]');\n      return editable(element, entryNode, prop, idx);\n    },\n\n    show: function(element, entryNode, node, scopeNode) {\n      entryNode = getEntryNode(entryNode);\n      return show(element, entryNode, node, scopeNode);\n    },\n\n    showTable: function(element, entryNode, node, scopeNode) {\n      entryNode = getEntryNode(entryNode);\n      var elems = elements(element, entryNode);\n      return elems && elems.length && (!canBeShown || show(element, entryNode, node, scopeNode));\n    },\n\n    validateListItem: function(element, value, node, idx) {\n      if (typeof options.validate === 'function') {\n        return options.validate(element, value, node, idx);\n      }\n    }\n\n  };\n\n  // Update/set the selection on the correct position.\n  // It's the same code like for an input value in the PropertiesPanel.js.\n  if (setControlValue) {\n    factory.setControlValue = function(element, rowNode, input, prop, value, idx) {\n      var entryNode = getEntryNode(rowNode);\n\n      var isReadOnly = domAttr(input, 'readonly');\n      var oldValue = input.value;\n\n      var selection;\n\n      // prevents input fields from having the value 'undefined'\n      if (value === undefined) {\n        value = '';\n      }\n\n      // when the attribute 'readonly' exists, ignore the comparison\n      // with 'oldValue' and 'value'\n      if (!!isReadOnly && oldValue === value) {\n        return;\n      }\n\n      // update selection on undo/redo\n      if (document.activeElement === input) {\n        selection = updateSelection(getSelection(input), oldValue, value);\n      }\n\n      setControlValue(element, entryNode, input, prop, value, idx);\n\n      if (selection) {\n        setSelection(input, selection);\n      }\n\n    };\n  }\n\n  return factory;\n\n};\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\nmodule.exports = getHolder;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","'use strict';\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper');\n\nvar fieldInjection = require('./implementation/FieldInjection');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var bo = ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  var fieldInjectionEntry = fieldInjection(element, bpmnFactory, translate, { businessObject: bo });\n\n  if (fieldInjectionEntry && fieldInjectionEntry.length > 0) {\n    group.entries = group.entries.concat(fieldInjectionEntry);\n  }\n\n};\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    scriptImplementation = require('./implementation/Script');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var bo;\n\n  if (is(element, 'bpmn:ScriptTask')) {\n    bo = getBusinessObject(element);\n  }\n\n  if (!bo) {\n    return;\n  }\n\n  var script = scriptImplementation('scriptFormat', 'script', false, translate);\n  group.entries.push({\n    id: 'script-implementation',\n    label: translate('Script'),\n    html: script.template,\n\n    get: function(element) {\n      return script.get(element, bo);\n    },\n\n    set: function(element, values, containerElement) {\n      var properties = script.set(element, values, containerElement);\n\n      return cmdHelper.updateProperties(element, properties);\n    },\n\n    validate: function(element, values) {\n      return script.validate(element, values);\n    },\n\n    script : script,\n\n    cssClasses: ['bpp-textfield']\n\n  });\n\n  group.entries.push(entryFactory.textField({\n    id : 'scriptResultVariable',\n    label : translate('Result Variable'),\n    modelProperty : 'scriptResultVariable',\n\n    get: function(element, propertyName) {\n      var boResultVariable = bo.get('camunda:resultVariable');\n\n      return { scriptResultVariable : boResultVariable };\n    },\n\n    set: function(element, values, containerElement) {\n      return cmdHelper.updateProperties(element, {\n        'camunda:resultVariable': values.scriptResultVariable.length\n          ? values.scriptResultVariable\n          : undefined\n      });\n    }\n\n  }));\n\n};\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","'use strict';\n\n/**\n * The label factory provides a label entry. For the label text\n * it expects either a string provided by the options.labelText\n * parameter or it could be generated programmatically using a\n * function passed as the options.get parameter.\n *\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} [options.labelText]\n * @param  {Function} [options.get]\n * @param  {Function} [options.showLabel]\n * @param  {Boolean} [options.divider] adds a divider at the top of the label if true; default: false\n */\nvar label = function(options) {\n  return {\n    id: options.id,\n    html: '<label data-value=\"label\" ' +\n            'data-show=\"showLabel\" ' +\n            'class=\"entry-label' + (options.divider ? ' divider' : '') + '\">' +\n          '</label>',\n    get: function(element, node) {\n      if (typeof options.get === 'function') {\n        return options.get(element, node);\n      }\n      return { label: options.labelText };\n    },\n    showLabel: function(element, node) {\n      if (typeof options.showLabel === 'function') {\n        return options.showLabel(element, node);\n      }\n      return true;\n    }\n  };\n};\n\nmodule.exports = label;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @constructor\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__dir__ = 1;\n  this.__filtered__ = false;\n  this.__iteratees__ = [];\n  this.__takeCount__ = MAX_ARRAY_LENGTH;\n  this.__views__ = [];\n}\n\n// Ensure `LazyWrapper` is an instance of `baseLodash`.\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nmodule.exports = LazyWrapper;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    escapeHTML = require('../../../Utils').escapeHTML,\n    domQuery = require('min-dom').query,\n    cmdHelper = require('../../../helper/CmdHelper'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper'),\n    scriptImplementation = require('./implementation/Script');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  var conditionalEventDefinition = eventDefinitionHelper.getConditionalEventDefinition(element);\n\n  if (!(is(element, 'bpmn:SequenceFlow') && isConditionalSource(element.source))\n    && !conditionalEventDefinition) {\n    return;\n  }\n\n  var script = scriptImplementation('language', 'body', true, translate);\n  group.entries.push({\n    id: 'condition',\n    label: translate('Condition'),\n    html: '<div class=\"bpp-row\">' +\n              '<label for=\"cam-condition-type\">'+ escapeHTML(translate('Condition Type')) + '</label>' +\n              '<div class=\"bpp-field-wrapper\">' +\n                '<select id=\"cam-condition-type\" name=\"conditionType\" data-value>' +\n                  '<option value=\"expression\">'+ escapeHTML(translate('Expression')) + '</option>' +\n                  '<option value=\"script\">'+ escapeHTML(translate('Script')) + '</option>' +\n                  '<option value=\"\" selected></option>' +\n                '</select>' +\n              '</div>' +\n            '</div>' +\n\n            // expression\n            '<div class=\"bpp-row\">' +\n              '<label for=\"cam-condition\" data-show=\"isExpression\">' + escapeHTML(translate('Expression')) + '</label>' +\n              '<div class=\"bpp-field-wrapper\" data-show=\"isExpression\">' +\n                '<input id=\"cam-condition\" type=\"text\" name=\"condition\" />' +\n                '<button class=\"clear\" data-action=\"clear\" data-show=\"canClear\">' +\n                  '<span>X</span>' +\n                '</button>' +\n              '</div>' +\n              '<div data-show=\"isScript\">' +\n                script.template +\n              '</div>' +\n            '</div>',\n\n    get: function(element, propertyName) {\n      var conditionalEventDefinition = eventDefinitionHelper.getConditionalEventDefinition(element);\n\n      var conditionExpression = conditionalEventDefinition\n        ? conditionalEventDefinition.condition\n        : bo.conditionExpression;\n\n      var values = {},\n          conditionType = '';\n\n      if (conditionExpression) {\n        var conditionLanguage = conditionExpression.language;\n        if (typeof conditionLanguage !== 'undefined') {\n          conditionType = 'script';\n          values = script.get(element, conditionExpression);\n        } else {\n          conditionType = 'expression';\n          values.condition = conditionExpression.get('body');\n        }\n      }\n\n      values.conditionType = conditionType;\n\n      return values;\n\n    },\n\n    set: function(element, values, containerElement) {\n      var conditionType = values.conditionType;\n      var commands = [];\n\n      var conditionProps = {\n        body: undefined\n      };\n\n      if (conditionType === 'script') {\n        conditionProps = script.set(element, values, containerElement);\n      } else {\n        var condition = values.condition;\n\n        conditionProps.body = condition;\n      }\n\n      var conditionOrConditionExpression;\n\n      if (conditionType) {\n        conditionOrConditionExpression = elementHelper.createElement(\n          'bpmn:FormalExpression',\n          conditionProps,\n          conditionalEventDefinition || bo,\n          bpmnFactory\n        );\n\n        var source = element.source;\n\n        // if default-flow, remove default-property from source\n        if (source && source.businessObject.default === bo) {\n          commands.push(cmdHelper.updateProperties(source, { 'default': undefined }));\n        }\n      }\n\n      var update = conditionalEventDefinition\n        ? { condition: conditionOrConditionExpression }\n        : { conditionExpression: conditionOrConditionExpression };\n\n      commands.push(cmdHelper.updateBusinessObject(element, conditionalEventDefinition || bo, update));\n\n      return commands;\n    },\n\n    validate: function(element, values) {\n      var validationResult = {};\n\n      if (!values.condition && values.conditionType === 'expression') {\n        validationResult.condition = translate('Must provide a value');\n      }\n      else if (values.conditionType === 'script') {\n        validationResult = script.validate(element, values);\n      }\n\n      return validationResult;\n    },\n\n    isExpression: function(element, inputNode) {\n      var conditionType = domQuery('select[name=conditionType]', inputNode);\n      if (conditionType.selectedIndex >= 0) {\n        return conditionType.options[conditionType.selectedIndex].value === 'expression';\n      }\n    },\n\n    isScript: function(element, inputNode) {\n      var conditionType = domQuery('select[name=conditionType]', inputNode);\n      if (conditionType.selectedIndex >= 0) {\n        return conditionType.options[conditionType.selectedIndex].value === 'script';\n      }\n    },\n\n    clear: function(element, inputNode) {\n      // clear text input\n      domQuery('input[name=condition]', inputNode).value='';\n\n      return true;\n    },\n\n    canClear: function(element, inputNode) {\n      var input = domQuery('input[name=condition]', inputNode);\n\n      return input.value !== '';\n    },\n\n    script : script,\n\n    cssClasses: [ 'bpp-textfield' ]\n  });\n};\n\n\n// utilities //////////////////////////\n\nvar CONDITIONAL_SOURCES = [\n  'bpmn:Activity',\n  'bpmn:ExclusiveGateway',\n  'bpmn:InclusiveGateway',\n  'bpmn:ComplexGateway'\n];\n\nfunction isConditionalSource(element) {\n  return isAny(element, CONDITIONAL_SOURCES);\n}\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var jobPriorityEntry = entryFactory.textField({\n    id: 'jobPriority',\n    label: translate('Job Priority'),\n    modelProperty: 'jobPriority',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        jobPriority: bo.get('camunda:jobPriority')\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:jobPriority': values.jobPriority || undefined\n      });\n    }\n\n  });\n\n  return [ jobPriorityEntry ];\n\n};\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","module.exports = {\n  __depends__: [\n    require('./cmd'),\n    require('diagram-js/lib/i18n/translate').default\n  ],\n  __init__: [\n    'customElementsPropertiesActivator',\n    'elementTemplatesLoader'\n  ],\n  customElementsPropertiesActivator: [ 'type', require('./CustomElementsPropertiesActivator') ],\n  elementTemplates: [ 'type', require('./ElementTemplates') ],\n  elementTemplatesLoader: [ 'type', require('./ElementTemplatesLoader') ]\n};\n","const {\n  is\n} = require('bpmnlint-utils');\n\n/**\n * A rule that verifies that there are no disconnected\n * flow elements, i.e. elements without incoming\n * _or_ outgoing sequence flows\n */\nmodule.exports = function() {\n\n  const keyed = {};\n\n  const outgoingReported = {};\n  const incomingReported = {};\n\n  function check(node, reporter) {\n\n    if (!is(node, 'bpmn:SequenceFlow')) {\n      return;\n    }\n\n    const key = flowKey(node);\n\n    if (key in keyed) {\n      reporter.report(node.id, 'SequenceFlow is a duplicate');\n\n      const sourceId = node.sourceRef.id;\n      const targetId = node.targetRef.id;\n\n      console.log(sourceId, targetId);\n\n      if (!outgoingReported[sourceId]) {\n        reporter.report(sourceId, 'Duplicate outgoing sequence flows');\n\n        outgoingReported[sourceId] = true;\n      }\n\n      if (!incomingReported[targetId]) {\n        reporter.report(targetId, 'Duplicate incoming sequence flows');\n\n        incomingReported[targetId] = true;\n      }\n    } else {\n      keyed[key] = node;\n    }\n  }\n\n  return {\n    check\n  };\n\n};\n\n\n// helpers /////////////////\n\nfunction flowKey(flow) {\n  const conditionExpression = flow.conditionExpression;\n\n  const condition = conditionExpression ? conditionExpression.body : '';\n  const source = flow.sourceRef ? flow.sourceRef.id : flow.id;\n  const target = flow.targetRef ? flow.targetRef.id : flow.id;\n\n  return source + '#' + target + '#' + condition;\n}","const {\n  is\n} = require('bpmnlint-utils');\n\n/**\n * A rule that checks that start events inside an event sub-process\n * are typed.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!is(node, 'bpmn:SubProcess') || !node.triggeredByEvent) {\n      return;\n    }\n\n    const flowElements = node.flowElements || [];\n\n    flowElements.forEach(function(flowElement) {\n\n      if (!is(flowElement, 'bpmn:StartEvent')) {\n        return false;\n      }\n\n      const eventDefinitions = flowElement.eventDefinitions || [];\n\n      if (eventDefinitions.length === 0) {\n        reporter.report(flowElement.id, 'Start event is missing event definition');\n      }\n    });\n  }\n\n  return {\n    check\n  };\n\n};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"file-upload-window\"},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":\"\",\"http-request\":_vm.uploadSectionFile,\"multiple\":\"\",\"file-list\":_vm.fileList,\"auto-upload\":false}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取文件\")]),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"上传到服务器\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"file-upload-window\">\r\n        <el-upload\r\n                class=\"upload-demo\"\r\n                ref=\"upload\"\r\n                action=\"\"\r\n                :http-request=\"uploadSectionFile\"\r\n                multiple\r\n                :file-list=\"fileList\"\r\n                :auto-upload=\"false\">\r\n            <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\r\n            <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传到服务器</el-button>\r\n            <!--  <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>-->\r\n        </el-upload>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"FileUpload\",\r\n        data() {\r\n            return {\r\n                //fileList: [{name: 'food.jpeg', url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100'}, {name: 'food2.jpeg', url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100'}]\r\n                formData:[],\r\n                fileList:[]\r\n            };\r\n        },\r\n        methods: {\r\n            submitUpload() {\r\n                console.log(\"submitUpload\");\r\n                this.formData = new FormData();\r\n                this.$refs.upload.submit();\r\n                console.log(\"AFTERSUBMIT\");\r\n                console.log(this.formData);\r\n\r\n                if(this.fileList.length>0){\r\n                    this.$axios({\r\n                        method: 'post',\r\n                        url: 'http://backend-java:8090/upload/uploadFiles',\r\n                        //url: 'http://lxc-backend-java.ingress.isa.buaanlsde.cn/upload/uploadFiles',\r\n                        //lxc\r\n                        // headers: {\r\n                        //     'Content-Type': 'multipart/form-data'\r\n                        // },\r\n                        data: this.formData\r\n                    })\r\n                }\r\n\r\n            },\r\n\r\n            uploadSectionFile(param) {\r\n                console.log(param.file);\r\n                this.fileList.push(param.file)\r\n                console.log(\"uploadSectionFile\");\r\n                this.formData.append('files',param.file)\r\n                //var fileObj = param.file;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .file-upload-window {        \r\n        width: 400px;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileUpload.vue?vue&type=template&id=8d3627ba&scoped=true&\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FileUpload.vue?vue&type=style&index=0&id=8d3627ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8d3627ba\",\n  null\n  \n)\n\nexport default component.exports","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    countHolders = require('./_countHolders'),\n    createCtor = require('./_createCtor'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    reorder = require('./_reorder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_ARY_FLAG = 128,\n    WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & WRAP_ARY_FLAG,\n      isBind = bitmask & WRAP_BIND_FLAG,\n      isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n      isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n      isFlip = bitmask & WRAP_FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createHybrid;\n","var WeakMap = require('./_WeakMap');\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nmodule.exports = metaMap;\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","/**\n * Traverse a moddle tree, depth first from top to bottom\n * and call the passed visitor fn.\n *\n * @param {ModdleElement} element\n * @param {Function} fn\n */\nmodule.exports = function traverse(element, fn) {\n  fn(element);\n\n  var descriptor = element.$descriptor;\n\n  if (descriptor.isGeneric) {\n    return;\n  }\n\n  var containedProperties = descriptor.properties.filter(p => {\n    return !p.isAttr && !p.isReference && p.type !== 'String';\n  });\n\n  containedProperties.forEach(p => {\n    if (p.name in element) {\n      const propertyValue = element[p.name];\n\n      if (p.isMany) {\n        propertyValue.forEach(child => {\n          traverse(child, fn);\n        });\n      } else {\n        traverse(propertyValue, fn);\n      }\n    }\n  });\n};\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","import inherits from 'inherits';\n\nimport Ids from 'ids';\n\nimport BaseViewer from './BaseViewer';\n\n\n/**\n * A base modeler for BPMN 2.0 diagrams.\n *\n * Have a look at {@link Modeler} for a bundle that includes actual features.\n *\n * @param {Object} [options] configuration options to pass to the viewer\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\n * @param {String|Number} [options.width] the width of the viewer\n * @param {String|Number} [options.height] the height of the viewer\n * @param {Object} [options.moddleExtensions] extension packages to provide\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\n */\nexport default function BaseModeler(options) {\n  BaseViewer.call(this, options);\n\n  // hook ID collection into the modeler\n  this.on('import.parse.complete', function(event) {\n    if (!event.error) {\n      this._collectIds(event.definitions, event.context);\n    }\n  }, this);\n\n  this.on('diagram.destroy', function() {\n    this.get('moddle').ids.clear();\n  }, this);\n}\n\ninherits(BaseModeler, BaseViewer);\n\n\n/**\n * Create a moddle instance, attaching ids to it.\n *\n * @param {Object} options\n */\nBaseModeler.prototype._createModdle = function(options) {\n  var moddle = BaseViewer.prototype._createModdle.call(this, options);\n\n  // attach ids to moddle to be able to track\n  // and validated ids in the BPMN 2.0 XML document\n  // tree\n  moddle.ids = new Ids([ 32, 36, 1 ]);\n\n  return moddle;\n};\n\n/**\n * Collect ids processed during parsing of the\n * definitions object.\n *\n * @param {ModdleElement} definitions\n * @param {Context} context\n */\nBaseModeler.prototype._collectIds = function(definitions, context) {\n\n  var moddle = definitions.$model,\n      ids = moddle.ids,\n      id;\n\n  // remove references from previous import\n  ids.clear();\n\n  for (id in context.elementsById) {\n    ids.claim(id, context.elementsById[id]);\n  }\n};","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  event as domEvent,\n  closest as domClosest\n} from 'min-dom';\n\nimport Hammer from 'hammerjs';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\nvar MIN_ZOOM = 0.2,\n    MAX_ZOOM = 4;\n\nvar mouseEvents = [\n  'mousedown',\n  'mouseup',\n  'mouseover',\n  'mouseout',\n  'click',\n  'dblclick'\n];\n\nfunction log() {\n\n  // console.log.apply(console, arguments);\n}\n\nfunction get(service, injector) {\n  return injector.get(service, false);\n}\n\nfunction stopEvent(event) {\n\n  event.preventDefault();\n  event.stopPropagation();\n\n  if (typeof event.stopImmediatePropagation === 'function') {\n    event.stopImmediatePropagation();\n  }\n}\n\n\nfunction createTouchRecognizer(node) {\n\n  function stopMouse(event) {\n\n    forEach(mouseEvents, function(e) {\n      domEvent.bind(node, e, stopEvent, true);\n    });\n  }\n\n  function allowMouse(event) {\n    setTimeout(function() {\n      forEach(mouseEvents, function(e) {\n        domEvent.unbind(node, e, stopEvent, true);\n      });\n    }, 500);\n  }\n\n  domEvent.bind(node, 'touchstart', stopMouse, true);\n  domEvent.bind(node, 'touchend', allowMouse, true);\n  domEvent.bind(node, 'touchcancel', allowMouse, true);\n\n  // A touch event recognizer that handles\n  // touch events only (we know, we can already handle\n  // mouse events out of the box)\n\n  var recognizer = new Hammer.Manager(node, {\n    inputClass: Hammer.TouchInput,\n    recognizers: []\n  });\n\n\n  var tap = new Hammer.Tap();\n  var pan = new Hammer.Pan({ threshold: 10 });\n  var press = new Hammer.Press();\n  var pinch = new Hammer.Pinch();\n\n  var doubleTap = new Hammer.Tap({ event: 'doubletap', taps: 2 });\n\n  pinch.requireFailure(pan);\n  pinch.requireFailure(press);\n\n  recognizer.add([ pan, press, pinch, doubleTap, tap ]);\n\n  recognizer.reset = function(force) {\n    var recognizers = this.recognizers,\n        session = this.session;\n\n    if (session.stopped) {\n      return;\n    }\n\n    log('recognizer', 'stop');\n\n    recognizer.stop(force);\n\n    setTimeout(function() {\n      var i, r;\n\n      log('recognizer', 'reset');\n      for (i = 0; (r = recognizers[i]); i++) {\n        r.reset();\n        r.state = 8; // FAILED STATE\n      }\n\n      session.curRecognizer = null;\n    }, 0);\n  };\n\n  recognizer.on('hammer.input', function(event) {\n    if (event.srcEvent.defaultPrevented) {\n      recognizer.reset(true);\n    }\n  });\n\n  return recognizer;\n}\n\n/**\n * A plugin that provides touch events for elements.\n *\n * @param {EventBus} eventBus\n * @param {InteractionEvents} interactionEvents\n */\nexport default function TouchInteractionEvents(\n    injector, canvas, eventBus,\n    elementRegistry, interactionEvents) {\n\n  // optional integrations\n  var dragging = get('dragging', injector),\n      move = get('move', injector),\n      contextPad = get('contextPad', injector),\n      palette = get('palette', injector);\n\n  // the touch recognizer\n  var recognizer;\n\n  function handler(type) {\n\n    return function(event) {\n      log('element', type, event);\n\n      interactionEvents.fire(type, event);\n    };\n  }\n\n  function getGfx(target) {\n    var node = domClosest(target, 'svg, .djs-element', true);\n    return node;\n  }\n\n  function initEvents(svg) {\n\n    // touch recognizer\n    recognizer = createTouchRecognizer(svg);\n\n    recognizer.on('doubletap', handler('element.dblclick'));\n\n    recognizer.on('tap', handler('element.click'));\n\n    function startGrabCanvas(event) {\n\n      log('canvas', 'grab start');\n\n      var lx = 0, ly = 0;\n\n      function update(e) {\n\n        var dx = e.deltaX - lx,\n            dy = e.deltaY - ly;\n\n        canvas.scroll({ dx: dx, dy: dy });\n\n        lx = e.deltaX;\n        ly = e.deltaY;\n      }\n\n      function end(e) {\n        recognizer.off('panmove', update);\n        recognizer.off('panend', end);\n        recognizer.off('pancancel', end);\n\n        log('canvas', 'grab end');\n      }\n\n      recognizer.on('panmove', update);\n      recognizer.on('panend', end);\n      recognizer.on('pancancel', end);\n    }\n\n    function startGrab(event) {\n\n      var gfx = getGfx(event.target),\n          element = gfx && elementRegistry.get(gfx);\n\n      // recognizer\n      if (move && canvas.getRootElement() !== element) {\n        log('element', 'move start', element, event, true);\n        return move.start(event, element, true);\n      } else {\n        startGrabCanvas(event);\n      }\n    }\n\n    function startZoom(e) {\n\n      log('canvas', 'zoom start');\n\n      var zoom = canvas.zoom(),\n          mid = e.center;\n\n      function update(e) {\n\n        var ratio = 1 - (1 - e.scale) / 1.50,\n            newZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, ratio * zoom));\n\n        canvas.zoom(newZoom, mid);\n\n        stopEvent(e);\n      }\n\n      function end(e) {\n        recognizer.off('pinchmove', update);\n        recognizer.off('pinchend', end);\n        recognizer.off('pinchcancel', end);\n\n        recognizer.reset(true);\n\n        log('canvas', 'zoom end');\n      }\n\n      recognizer.on('pinchmove', update);\n      recognizer.on('pinchend', end);\n      recognizer.on('pinchcancel', end);\n    }\n\n    recognizer.on('panstart', startGrab);\n    recognizer.on('press', startGrab);\n\n    recognizer.on('pinchstart', startZoom);\n  }\n\n  if (dragging) {\n\n    // simulate hover during dragging\n    eventBus.on('drag.move', function(event) {\n\n      var originalEvent = event.originalEvent;\n\n      if (!originalEvent || originalEvent instanceof MouseEvent) {\n        return;\n      }\n\n      var position = toPoint(originalEvent);\n\n      // this gets really expensive ...\n      var node = document.elementFromPoint(position.x, position.y),\n          gfx = getGfx(node),\n          element = gfx && elementRegistry.get(gfx);\n\n      if (element !== event.hover) {\n        if (event.hover) {\n          dragging.out(event);\n        }\n\n        if (element) {\n          dragging.hover({ element: element, gfx: gfx });\n\n          event.hover = element;\n          event.hoverGfx = gfx;\n        }\n      }\n    });\n  }\n\n  if (contextPad) {\n\n    eventBus.on('contextPad.create', function(event) {\n      var node = event.pad.html;\n\n      // touch recognizer\n      var padRecognizer = createTouchRecognizer(node);\n\n      padRecognizer.on('panstart', function(event) {\n        log('context-pad', 'panstart', event);\n        contextPad.trigger('dragstart', event, true);\n      });\n\n      padRecognizer.on('press', function(event) {\n        log('context-pad', 'press', event);\n        contextPad.trigger('dragstart', event, true);\n      });\n\n      padRecognizer.on('tap', function(event) {\n        log('context-pad', 'tap', event);\n        contextPad.trigger('click', event);\n      });\n    });\n  }\n\n  if (palette) {\n    eventBus.on('palette.create', function(event) {\n      var node = event.container;\n\n      // touch recognizer\n      var padRecognizer = createTouchRecognizer(node);\n\n      padRecognizer.on('panstart', function(event) {\n        log('palette', 'panstart', event);\n        palette.trigger('dragstart', event, true);\n      });\n\n      padRecognizer.on('press', function(event) {\n        log('palette', 'press', event);\n        palette.trigger('dragstart', event, true);\n      });\n\n      padRecognizer.on('tap', function(event) {\n        log('palette', 'tap', event);\n        palette.trigger('click', event);\n      });\n    });\n  }\n\n  eventBus.on('canvas.init', function(event) {\n    initEvents(event.svg);\n  });\n}\n\n\nTouchInteractionEvents.$inject = [\n  'injector',\n  'canvas',\n  'eventBus',\n  'elementRegistry',\n  'interactionEvents',\n  'touchFix'\n];\n","import {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\n\nexport default function TouchFix(canvas, eventBus) {\n\n  var self = this;\n\n  eventBus.on('canvas.init', function(e) {\n    self.addBBoxMarker(e.svg);\n  });\n}\n\nTouchFix.$inject = [ 'canvas', 'eventBus' ];\n\n\n/**\n * Safari mobile (iOS 7) does not fire touchstart event in <SVG> element\n * if there is no shape between 0,0 and viewport elements origin.\n *\n * So touchstart event is only fired when the <g class=\"viewport\"> element was hit.\n * Putting an element over and below the 'viewport' fixes that behavior.\n */\nTouchFix.prototype.addBBoxMarker = function(svg) {\n\n  var markerStyle = {\n    fill: 'none',\n    class: 'outer-bound-marker'\n  };\n\n  var rect1 = svgCreate('rect');\n  svgAttr(rect1, {\n    x: -10000,\n    y: 10000,\n    width: 10,\n    height: 10\n  });\n  svgAttr(rect1, markerStyle);\n\n  svgAppend(svg, rect1);\n\n  var rect2 = svgCreate('rect');\n  svgAttr(rect2, {\n    x: 10000,\n    y: 10000,\n    width: 10,\n    height: 10\n  });\n  svgAttr(rect2, markerStyle);\n\n  svgAppend(svg, rect2);\n};\n","import InteractionEventsModule from '../interaction-events';\n\nimport TouchInteractionEvents from './TouchInteractionEvents';\nimport TouchFix from './TouchFix';\n\nexport default {\n  __depends__: [ InteractionEventsModule ],\n  __init__: [ 'touchInteractionEvents' ],\n  touchInteractionEvents: [ 'type', TouchInteractionEvents ],\n  touchFix: [ 'type', TouchFix ]\n};","import TouchModule from '../../features/touch';\n\nexport default {\n  __depends__: [\n    TouchModule\n  ]\n};","import {\n  filter,\n  forEach,\n  sortBy\n} from 'min-dash';\n\nfunction last(arr) {\n  return arr && arr[arr.length - 1];\n}\n\nfunction sortTopOrMiddle(element) {\n  return element.y;\n}\n\nfunction sortLeftOrCenter(element) {\n  return element.x;\n}\n\n/**\n * Sorting functions for different types of alignment\n *\n * @type {Object}\n *\n * @return {Function}\n */\nvar ALIGNMENT_SORTING = {\n  left: sortLeftOrCenter,\n  center: sortLeftOrCenter,\n  right: function(element) {\n    return element.x + element.width;\n  },\n  top: sortTopOrMiddle,\n  middle: sortTopOrMiddle,\n  bottom: function(element) {\n    return element.y + element.height;\n  }\n};\n\n\nexport default function AlignElements(modeling) {\n  this._modeling = modeling;\n}\n\nAlignElements.$inject = [ 'modeling' ];\n\n\n/**\n * Get the relevant \"axis\" and \"dimension\" related to the current type of alignment\n *\n * @param  {String} type left|right|center|top|bottom|middle\n *\n * @return {Object} { axis, dimension }\n */\nAlignElements.prototype._getOrientationDetails = function(type) {\n  var vertical = [ 'top', 'bottom', 'middle' ],\n      axis = 'x',\n      dimension = 'width';\n\n  if (vertical.indexOf(type) !== -1) {\n    axis = 'y';\n    dimension = 'height';\n  }\n\n  return {\n    axis: axis,\n    dimension: dimension\n  };\n};\n\nAlignElements.prototype._isType = function(type, types) {\n  return types.indexOf(type) !== -1;\n};\n\n/**\n * Get a point on the relevant axis where elements should align to\n *\n * @param  {String} type left|right|center|top|bottom|middle\n * @param  {Array} sortedElements\n *\n * @return {Object}\n */\nAlignElements.prototype._alignmentPosition = function(type, sortedElements) {\n  var orientation = this._getOrientationDetails(type),\n      axis = orientation.axis,\n      dimension = orientation.dimension,\n      alignment = {},\n      centers = {},\n      hasSharedCenters = false,\n      centeredElements,\n      firstElement,\n      lastElement;\n\n  function getMiddleOrTop(first, last) {\n    return Math.round((first[axis] + last[axis] + last[dimension]) / 2);\n  }\n\n  if (this._isType(type, [ 'left', 'top' ])) {\n    alignment[type] = sortedElements[0][axis];\n\n  } else if (this._isType(type, [ 'right', 'bottom' ])) {\n    lastElement = last(sortedElements);\n\n    alignment[type] = lastElement[axis] + lastElement[dimension];\n\n  } else if (this._isType(type, [ 'center', 'middle' ])) {\n\n    // check if there is a center shared by more than one shape\n    // if not, just take the middle of the range\n    forEach(sortedElements, function(element) {\n      var center = element[axis] + Math.round(element[dimension] / 2);\n\n      if (centers[center]) {\n        centers[center].elements.push(element);\n      } else {\n        centers[center] = {\n          elements: [ element ],\n          center: center\n        };\n      }\n    });\n\n    centeredElements = sortBy(centers, function(center) {\n      if (center.elements.length > 1) {\n        hasSharedCenters = true;\n      }\n\n      return center.elements.length;\n    });\n\n    if (hasSharedCenters) {\n      alignment[type] = last(centeredElements).center;\n\n      return alignment;\n    }\n\n    firstElement = sortedElements[0];\n\n    sortedElements = sortBy(sortedElements, function(element) {\n      return element[axis] + element[dimension];\n    });\n\n    lastElement = last(sortedElements);\n\n    alignment[type] = getMiddleOrTop(firstElement, lastElement);\n  }\n\n  return alignment;\n};\n\n/**\n * Executes the alignment of a selection of elements\n *\n * @param  {Array} elements [description]\n * @param  {String} type left|right|center|top|bottom|middle\n */\nAlignElements.prototype.trigger = function(elements, type) {\n  var modeling = this._modeling;\n\n  var filteredElements = filter(elements, function(element) {\n    return !(element.waypoints || element.host || element.labelTarget);\n  });\n\n  var sortFn = ALIGNMENT_SORTING[type];\n\n  var sortedElements = sortBy(filteredElements, sortFn);\n\n  var alignment = this._alignmentPosition(type, sortedElements);\n\n  modeling.alignElements(sortedElements, alignment);\n};\n","import AlignElements from './AlignElements';\n\nexport default {\n  __init__: [ 'alignElements' ],\n  alignElements: [ 'type', AlignElements ]\n};\n","import { is } from '../../util/ModelUtil';\nimport { isAny } from '../modeling/util/ModelingUtil';\n\nimport {\n  getMid,\n  asTRBL,\n  getOrientation\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  find,\n  reduce\n} from 'min-dash';\n\nvar DEFAULT_HORIZONTAL_DISTANCE = 50;\n\nvar MAX_HORIZONTAL_DISTANCE = 250;\n\n// padding to detect element placement\nvar PLACEMENT_DETECTION_PAD = 10;\n\n/**\n * Find the new position for the target element to\n * connect to source.\n *\n * @param  {djs.model.Shape} source\n * @param  {djs.model.Shape} element\n *\n * @return {Point}\n */\nexport function getNewShapePosition(source, element) {\n\n  if (is(element, 'bpmn:TextAnnotation')) {\n    return getTextAnnotationPosition(source, element);\n  }\n\n  if (isAny(element, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ])) {\n    return getDataElementPosition(source, element);\n  }\n\n  if (is(element, 'bpmn:FlowNode')) {\n    return getFlowNodePosition(source, element);\n  }\n\n  return getDefaultPosition(source, element);\n}\n\n/**\n * Always try to place element right of source;\n * compute actual distance from previous nodes in flow.\n */\nexport function getFlowNodePosition(source, element) {\n\n  var sourceTrbl = asTRBL(source);\n  var sourceMid = getMid(source);\n\n  var horizontalDistance = getFlowNodeDistance(source, element);\n\n  var orientation = 'left',\n      rowSize = 80,\n      margin = 30;\n\n  if (is(source, 'bpmn:BoundaryEvent')) {\n    orientation = getOrientation(source, source.host, -25);\n\n    if (orientation.indexOf('top') !== -1) {\n      margin *= -1;\n    }\n  }\n\n  function getVerticalDistance(orient) {\n    if (orient.indexOf('top') != -1) {\n      return -1 * rowSize;\n    } else if (orient.indexOf('bottom') != -1) {\n      return rowSize;\n    } else {\n      return 0;\n    }\n  }\n\n  var position = {\n    x: sourceTrbl.right + horizontalDistance + element.width / 2,\n    y: sourceMid.y + getVerticalDistance(orientation)\n  };\n\n  var escapeDirection = {\n    y: {\n      margin: margin,\n      rowSize: rowSize\n    }\n  };\n\n  return deconflictPosition(source, element, position, escapeDirection);\n}\n\n\n/**\n * Compute best distance between source and target,\n * based on existing connections to and from source.\n *\n * @param {djs.model.Shape} source\n * @param {djs.model.Shape} element\n *\n * @return {Number} distance\n */\nexport function getFlowNodeDistance(source, element) {\n\n  var sourceTrbl = asTRBL(source);\n\n  // is connection a reference to consider?\n  function isReference(c) {\n    return is(c, 'bpmn:SequenceFlow');\n  }\n\n  function toTargetNode(weight) {\n\n    return function(shape) {\n      return {\n        shape: shape,\n        weight: weight,\n        distanceTo: function(shape) {\n          var shapeTrbl = asTRBL(shape);\n\n          return shapeTrbl.left - sourceTrbl.right;\n        }\n      };\n    };\n  }\n\n  function toSourceNode(weight) {\n    return function(shape) {\n      return {\n        shape: shape,\n        weight: weight,\n        distanceTo: function(shape) {\n          var shapeTrbl = asTRBL(shape);\n\n          return sourceTrbl.left - shapeTrbl.right;\n        }\n      };\n    };\n  }\n\n  // we create a list of nodes to take into consideration\n  // for calculating the optimal flow node distance\n  //\n  //   * weight existing target nodes higher than source nodes\n  //   * only take into account individual nodes once\n  //\n  var nodes = reduce([].concat(\n    getTargets(source, isReference).map(toTargetNode(5)),\n    getSources(source, isReference).map(toSourceNode(1))\n  ), function(nodes, node) {\n\n    // filter out shapes connected twice via source or target\n    nodes[node.shape.id + '__weight_' + node.weight] = node;\n\n    return nodes;\n  }, {});\n\n  // compute distances between source and incoming nodes;\n  // group at the same time by distance and expose the\n  // favourite distance as { fav: { count, value } }.\n  var distancesGrouped = reduce(nodes, function(result, node) {\n\n    var shape = node.shape,\n        weight = node.weight,\n        distanceTo = node.distanceTo;\n\n    var fav = result.fav,\n        currentDistance,\n        currentDistanceCount,\n        currentDistanceEntry;\n\n    currentDistance = distanceTo(shape);\n\n    // ignore too far away peers\n    // or non-left to right modeled nodes\n    if (currentDistance < 0 || currentDistance > MAX_HORIZONTAL_DISTANCE) {\n      return result;\n    }\n\n    currentDistanceEntry = result[String(currentDistance)] =\n      result[String(currentDistance)] || {\n        value: currentDistance,\n        count: 0\n      };\n\n    // inc diff count\n    currentDistanceCount = currentDistanceEntry.count += 1 * weight;\n\n    if (!fav || fav.count < currentDistanceCount) {\n      result.fav = currentDistanceEntry;\n    }\n\n    return result;\n  }, { });\n\n\n  if (distancesGrouped.fav) {\n    return distancesGrouped.fav.value;\n  } else {\n    return DEFAULT_HORIZONTAL_DISTANCE;\n  }\n}\n\n\n/**\n * Always try to place text annotations top right of source.\n */\nexport function getTextAnnotationPosition(source, element) {\n\n  var sourceTrbl = asTRBL(source);\n\n  var position = {\n    x: sourceTrbl.right + element.width / 2,\n    y: sourceTrbl.top - 50 - element.height / 2\n  };\n\n  var escapeDirection = {\n    y: {\n      margin: -30,\n      rowSize: 20\n    }\n  };\n\n  return deconflictPosition(source, element, position, escapeDirection);\n}\n\n\n/**\n * Always put element bottom right of source.\n */\nexport function getDataElementPosition(source, element) {\n\n  var sourceTrbl = asTRBL(source);\n\n  var position = {\n    x: sourceTrbl.right - 10 + element.width / 2,\n    y: sourceTrbl.bottom + 40 + element.width / 2\n  };\n\n  var escapeDirection = {\n    x: {\n      margin: 30,\n      rowSize: 30\n    }\n  };\n\n  return deconflictPosition(source, element, position, escapeDirection);\n}\n\n\n/**\n * Always put element right of source per default.\n */\nexport function getDefaultPosition(source, element) {\n\n  var sourceTrbl = asTRBL(source);\n\n  var sourceMid = getMid(source);\n\n  // simply put element right next to source\n  return {\n    x: sourceTrbl.right + DEFAULT_HORIZONTAL_DISTANCE + element.width / 2,\n    y: sourceMid.y\n  };\n}\n\n\n/**\n * Returns all connected elements around the given source.\n *\n * This includes:\n *\n *   - connected elements\n *   - host connected elements\n *   - attachers connected elements\n *\n * @param  {djs.model.Shape} source\n * @param  {djs.model.Shape} element\n *\n * @return {Array<djs.model.Shape>}\n */\nfunction getAutoPlaceClosure(source, element) {\n\n  var allConnected = getConnected(source);\n\n  if (source.host) {\n    allConnected = allConnected.concat(getConnected(source.host));\n  }\n\n  if (source.attachers) {\n    allConnected = allConnected.concat(source.attachers.reduce(function(shapes, attacher) {\n      return shapes.concat(getConnected(attacher));\n    }, []));\n  }\n\n  return allConnected;\n}\n\n/**\n * Return target at given position, if defined.\n *\n * This takes connected elements from host and attachers\n * into account, too.\n */\nexport function getConnectedAtPosition(source, position, element) {\n\n  var bounds = {\n    x: position.x - (element.width / 2),\n    y: position.y - (element.height / 2),\n    width: element.width,\n    height: element.height\n  };\n\n  var closure = getAutoPlaceClosure(source, element);\n\n  return find(closure, function(target) {\n\n    if (target === element) {\n      return false;\n    }\n\n    var orientation = getOrientation(target, bounds, PLACEMENT_DETECTION_PAD);\n\n    return orientation === 'intersect';\n  });\n}\n\n\n/**\n * Returns a new, position for the given element\n * based on the given element that is not occupied\n * by some element connected to source.\n *\n * Take into account the escapeDirection (where to move\n * on positioning clashes) in the computation.\n *\n * @param {djs.model.Shape} source\n * @param {djs.model.Shape} element\n * @param {Point} position\n * @param {Object} escapeDelta\n *\n * @return {Point}\n */\nexport function deconflictPosition(source, element, position, escapeDelta) {\n\n  function nextPosition(existingElement) {\n\n    var newPosition = {\n      x: position.x,\n      y: position.y\n    };\n\n    [ 'x', 'y' ].forEach(function(axis) {\n\n      var axisDelta = escapeDelta[axis];\n\n      if (!axisDelta) {\n        return;\n      }\n\n      var dimension = axis === 'x' ? 'width' : 'height';\n\n      var margin = axisDelta.margin,\n          rowSize = axisDelta.rowSize;\n\n      if (margin < 0) {\n        newPosition[axis] = Math.min(\n          existingElement[axis] + margin - element[dimension] / 2,\n          position[axis] - rowSize + margin\n        );\n      } else {\n        newPosition[axis] = Math.max(\n          existingTarget[axis] + existingTarget[dimension] + margin + element[dimension] / 2,\n          position[axis] + rowSize + margin\n        );\n      }\n    });\n\n    return newPosition;\n  }\n\n  var existingTarget;\n\n  // deconflict position until free slot is found\n  while ((existingTarget = getConnectedAtPosition(source, position, element))) {\n    position = nextPosition(existingTarget);\n  }\n\n  return position;\n}\n\n\n\n// helpers //////////////////////\n\nfunction noneFilter() {\n  return true;\n}\n\nfunction getConnected(element, connectionFilter) {\n  return [].concat(\n    getTargets(element, connectionFilter),\n    getSources(element, connectionFilter)\n  );\n}\n\nfunction getSources(shape, connectionFilter) {\n\n  if (!connectionFilter) {\n    connectionFilter = noneFilter;\n  }\n\n  return shape.incoming.filter(connectionFilter).map(function(c) {\n    return c.source;\n  });\n}\n\nfunction getTargets(shape, connectionFilter) {\n\n  if (!connectionFilter) {\n    connectionFilter = noneFilter;\n  }\n\n  return shape.outgoing.filter(connectionFilter).map(function(c) {\n    return c.target;\n  });\n}","import { getNewShapePosition } from './AutoPlaceUtil';\n\n\n/**\n * A service that places elements connected to existing ones\n * to an appropriate position in an _automated_ fashion.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function AutoPlace(eventBus, modeling) {\n\n  function emit(event, payload) {\n    return eventBus.fire(event, payload);\n  }\n\n\n  /**\n   * Append shape to source at appropriate position.\n   *\n   * @param {djs.model.Shape} source\n   * @param {djs.model.Shape} shape\n   *\n   * @return {djs.model.Shape} appended shape\n   */\n  this.append = function(source, shape) {\n\n    emit('autoPlace.start', {\n      source: source,\n      shape: shape\n    });\n\n    // allow others to provide the position\n    var position = emit('autoPlace', {\n      source: source,\n      shape: shape\n    });\n\n    if (!position) {\n      position = getNewShapePosition(source, shape);\n    }\n\n    var newShape = modeling.appendShape(source, shape, position, source.parent);\n\n    emit('autoPlace.end', {\n      source: source,\n      shape: newShape\n    });\n\n    return newShape;\n  };\n\n}\n\nAutoPlace.$inject = [\n  'eventBus',\n  'modeling'\n];","/**\n * Select element after auto placement.\n *\n * @param {EventBus} eventBus\n * @param {Selection} selection\n */\nexport default function AutoPlaceSelectionBehavior(eventBus, selection) {\n\n  eventBus.on('autoPlace.end', 500, function(e) {\n    selection.select(e.shape);\n  });\n\n}\n\nAutoPlaceSelectionBehavior.$inject = [\n  'eventBus',\n  'selection'\n];","import AutoPlace from './AutoPlace';\nimport AutoPlaceSelectionBehavior from './AutoPlaceSelectionBehavior';\n\nexport default {\n  __init__: [ 'autoPlaceSelectionBehavior' ],\n  autoPlace: [ 'type', AutoPlace ],\n  autoPlaceSelectionBehavior: [ 'type', AutoPlaceSelectionBehavior ]\n};","import {\n  forEach,\n  isFunction,\n  isArray,\n  isNumber,\n  isObject\n} from 'min-dash';\n\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A utility that can be used to plug-in into the command execution for\n * extension and/or validation.\n *\n * @param {EventBus} eventBus\n *\n * @example\n *\n * import inherits from 'inherits';\n *\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * function CommandLogger(eventBus) {\n *   CommandInterceptor.call(this, eventBus);\n *\n *   this.preExecute(function(event) {\n *     console.log('command pre-execute', event);\n *   });\n * }\n *\n * inherits(CommandLogger, CommandInterceptor);\n *\n */\nexport default function CommandInterceptor(eventBus) {\n  this._eventBus = eventBus;\n}\n\nCommandInterceptor.$inject = [ 'eventBus' ];\n\nfunction unwrapEvent(fn, that) {\n  return function(event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n\n/**\n * Register an interceptor for a command execution\n *\n * @param {String|Array<String>} [events] list of commands to register on\n * @param {String} [hook] command hook, i.e. preExecute, executed to listen on\n * @param {Number} [priority] the priority on which to hook into the execution\n * @param {Function} handlerFn interceptor to be invoked with (event)\n * @param {Boolean} unwrap if true, unwrap the event and pass (context, command, event) to the\n *                          listener instead\n * @param {Object} [that] Pass context (`this`) to the handler function\n */\nCommandInterceptor.prototype.on = function(events, hook, priority, handlerFn, unwrap, that) {\n\n  if (isFunction(hook) || isNumber(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n\n  if (isFunction(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (isObject(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n\n  if (!isFunction(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n\n  if (!isArray(events)) {\n    events = [ events ];\n  }\n\n  var eventBus = this._eventBus;\n\n  forEach(events, function(event) {\n\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = [ 'commandStack', event, hook ].filter(function(e) { return e; }).join('.');\n\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\n\nvar hooks = [\n  'canExecute',\n  'preExecute',\n  'preExecuted',\n  'execute',\n  'executed',\n  'postExecute',\n  'postExecuted',\n  'revert',\n  'reverted'\n];\n\n/*\n * Install hook shortcuts\n *\n * This will generate the CommandInterceptor#(preExecute|...|reverted) methods\n * which will in term forward to CommandInterceptor#on.\n */\nforEach(hooks, function(hook) {\n\n  /**\n   * {canExecute|preExecute|preExecuted|execute|executed|postExecute|postExecuted|revert|reverted}\n   *\n   * A named hook for plugging into the command execution\n   *\n   * @param {String|Array<String>} [events] list of commands to register on\n   * @param {Number} [priority] the priority on which to hook into the execution\n   * @param {Function} handlerFn interceptor to be invoked with (event)\n   * @param {Boolean} [unwrap=false] if true, unwrap the event and pass (context, command, event) to the\n   *                          listener instead\n   * @param {Object} [that] Pass context (`this`) to the handler function\n   */\n  CommandInterceptor.prototype[hook] = function(events, priority, handlerFn, unwrap, that) {\n\n    if (isFunction(events) || isNumber(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n});\n","import inherits from 'inherits';\n\nimport { getBBox as getBoundingBox } from '../../util/Elements';\n\nimport {\n  asTRBL,\n  asBounds\n} from '../../layout/LayoutUtil';\n\nimport {\n  assign,\n  flatten,\n  find,\n  forEach,\n  groupBy,\n  isArray,\n  matchPattern,\n  pick,\n  values\n} from 'min-dash';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n\n/**\n * An auto resize component that takes care of expanding a parent element\n * if child elements are created or moved close the parents edge.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function AutoResize(eventBus, elementRegistry, modeling, rules) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this._elementRegistry = elementRegistry;\n  this._modeling = modeling;\n  this._rules = rules;\n\n  var self = this;\n\n  this.postExecuted([ 'shape.create' ], function(event) {\n    var context = event.context,\n        hints = context.hints || {},\n        shape = context.shape,\n        parent = context.parent || context.newParent;\n\n    if (hints.autoResize === false) {\n      return;\n    }\n\n    self._expand([ shape ], parent);\n  });\n\n  this.postExecuted([ 'elements.move' ], function(event) {\n    var context = event.context,\n        elements = flatten(values(context.closure.topLevel)),\n        hints = context.hints;\n\n    var autoResize = hints ? hints.autoResize : true;\n\n    if (autoResize === false) {\n      return;\n    }\n\n    var expandings = groupBy(elements, function(element) {\n      return element.parent.id;\n    });\n\n    forEach(expandings, function(elements, parentId) {\n\n      // optionally filter elements to be considered when resizing\n      if (isArray(autoResize)) {\n        elements = elements.filter(function(element) {\n          return find(autoResize, matchPattern({ id: element.id }));\n        });\n      }\n\n      self._expand(elements, parentId);\n    });\n  });\n\n  this.postExecuted([ 'shape.toggleCollapse' ], function(event) {\n    var context = event.context,\n        hints = context.hints,\n        shape = context.shape;\n\n    if (hints && hints.autoResize === false) {\n      return;\n    }\n\n    if (shape.collapsed) {\n      return;\n    }\n\n    self._expand(shape.children || [], shape);\n  });\n\n  this.postExecuted([ 'shape.resize' ], function(event) {\n    var context = event.context,\n        hints = context.hints,\n        shape = context.shape,\n        parent = shape.parent;\n\n    if (hints && hints.autoResize === false) {\n      return;\n    }\n\n    if (parent) {\n      self._expand([ shape ], parent);\n    }\n  });\n\n}\n\nAutoResize.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'modeling',\n  'rules'\n];\n\ninherits(AutoResize, CommandInterceptor);\n\n\n/**\n * Calculate the new bounds of the target shape, given\n * a number of elements have been moved or added into the parent.\n *\n * This method considers the current size, the added elements as well as\n * the provided padding for the new bounds.\n *\n * @param {Array<djs.model.Shape>} elements\n * @param {djs.model.Shape} target\n */\nAutoResize.prototype._getOptimalBounds = function(elements, target) {\n\n  var offset = this.getOffset(target),\n      padding = this.getPadding(target);\n\n  var elementsTrbl = asTRBL(getBoundingBox(elements)),\n      targetTrbl = asTRBL(target);\n\n  var newTrbl = {};\n\n  if (elementsTrbl.top - targetTrbl.top < padding.top) {\n    newTrbl.top = elementsTrbl.top - offset.top;\n  }\n\n  if (elementsTrbl.left - targetTrbl.left < padding.left) {\n    newTrbl.left = elementsTrbl.left - offset.left;\n  }\n\n  if (targetTrbl.right - elementsTrbl.right < padding.right) {\n    newTrbl.right = elementsTrbl.right + offset.right;\n  }\n\n  if (targetTrbl.bottom - elementsTrbl.bottom < padding.bottom) {\n    newTrbl.bottom = elementsTrbl.bottom + offset.bottom;\n  }\n\n  return asBounds(assign({}, targetTrbl, newTrbl));\n};\n\n\n/**\n * Expand the target shape respecting rules, offset and padding\n *\n * @param {Array<djs.model.Shape>} elements\n * @param {djs.model.Shape|String} target|targetId\n */\nAutoResize.prototype._expand = function(elements, target) {\n\n  if (typeof target === 'string') {\n    target = this._elementRegistry.get(target);\n  }\n\n  var allowed = this._rules.allowed('element.autoResize', {\n    elements: elements,\n    target: target\n  });\n\n  if (!allowed) {\n    return;\n  }\n\n  // calculate the new bounds\n  var newBounds = this._getOptimalBounds(elements, target);\n\n  if (!boundsChanged(newBounds, target)) {\n    return;\n  }\n\n  var resizeDirections = getResizeDirections(pick(target, [ 'x', 'y', 'width', 'height' ]), newBounds);\n\n  // resize the parent shape\n  this.resize(target, newBounds, {\n    autoResize: resizeDirections\n  });\n\n  var parent = target.parent;\n\n  // recursively expand parent elements\n  if (parent) {\n    this._expand([ target ], parent);\n  }\n};\n\n\n/**\n * Get the amount to expand the given shape in each direction.\n *\n * @param {djs.model.Shape} shape\n *\n * @return {TRBL}\n */\nAutoResize.prototype.getOffset = function(shape) {\n  return { top: 60, bottom: 60, left: 100, right: 100 };\n};\n\n\n/**\n * Get the activation threshold for each side for which\n * resize triggers.\n *\n * @param {djs.model.Shape} shape\n *\n * @return {TRBL}\n */\nAutoResize.prototype.getPadding = function(shape) {\n  return { top: 2, bottom: 2, left: 15, right: 15 };\n};\n\n\n/**\n * Perform the actual resize operation.\n *\n * @param {djs.model.Shape} shape\n * @param {Bounds} newBounds\n * @param {Object} [hints]\n * @param {string} [hints.autoResize]\n */\nAutoResize.prototype.resize = function(shape, newBounds, hints) {\n  this._modeling.resizeShape(shape, newBounds, null, hints);\n};\n\n\nfunction boundsChanged(newBounds, oldBounds) {\n  return (\n    newBounds.x !== oldBounds.x ||\n    newBounds.y !== oldBounds.y ||\n    newBounds.width !== oldBounds.width ||\n    newBounds.height !== oldBounds.height\n  );\n}\n\n/**\n * Get directions of resize as {n|w|s|e} e.g. \"nw\".\n *\n * @param {Bounds} oldBounds\n * @param {Bounds} newBounds\n *\n * @returns {string} Resize directions as {n|w|s|e}.\n */\nfunction getResizeDirections(oldBounds, newBounds) {\n  var directions = '';\n\n  oldBounds = asTRBL(oldBounds);\n  newBounds = asTRBL(newBounds);\n\n  if (oldBounds.top > newBounds.top) {\n    directions = directions.concat('n');\n  }\n\n  if (oldBounds.right < newBounds.right) {\n    directions = directions.concat('w');\n  }\n\n  if (oldBounds.bottom < newBounds.bottom) {\n    directions = directions.concat('s');\n  }\n\n  if (oldBounds.left > newBounds.left) {\n    directions = directions.concat('e');\n  }\n\n  return directions;\n}","import AutoResize from 'diagram-js/lib/features/auto-resize/AutoResize';\n\nimport inherits from 'inherits';\n\nimport { is } from '../../util/ModelUtil';\n\n\n/**\n * Sub class of the AutoResize module which implements a BPMN\n * specific resize function.\n */\nexport default function BpmnAutoResize(injector) {\n\n  injector.invoke(AutoResize, this);\n}\n\nBpmnAutoResize.$inject = [\n  'injector'\n];\n\ninherits(BpmnAutoResize, AutoResize);\n\n\n/**\n * Resize shapes and lanes.\n *\n * @param {djs.model.Shape} target\n * @param {Bounds} newBounds\n * @param {Object} hints\n */\nBpmnAutoResize.prototype.resize = function(target, newBounds, hints) {\n\n  if (is(target, 'bpmn:Participant')) {\n    this._modeling.resizeLane(target, newBounds, null, hints);\n  } else {\n    this._modeling.resizeShape(target, newBounds, null, hints);\n  }\n};","import inherits from 'inherits';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n/**\n * A basic provider that may be extended to implement modeling rules.\n *\n * Extensions should implement the init method to actually add their custom\n * modeling checks. Checks may be added via the #addRule(action, fn) method.\n *\n * @param {EventBus} eventBus\n */\nexport default function RuleProvider(eventBus) {\n  CommandInterceptor.call(this, eventBus);\n\n  this.init();\n}\n\nRuleProvider.$inject = [ 'eventBus' ];\n\ninherits(RuleProvider, CommandInterceptor);\n\n\n/**\n * Adds a modeling rule for the given action, implemented through\n * a callback function.\n *\n * The function will receive the modeling specific action context\n * to perform its check. It must return `false` to disallow the\n * action from happening or `true` to allow the action.\n *\n * A rule provider may pass over the evaluation to lower priority\n * rules by returning return nothing (or <code>undefined</code>).\n *\n * @example\n *\n * ResizableRules.prototype.init = function() {\n *\n *   \\/**\n *    * Return `true`, `false` or nothing to denote\n *    * _allowed_, _not allowed_ and _continue evaluating_.\n *    *\\/\n *   this.addRule('shape.resize', function(context) {\n *\n *     var shape = context.shape;\n *\n *     if (!context.newBounds) {\n *       // check general resizability\n *       if (!shape.resizable) {\n *         return false;\n *       }\n *\n *       // not returning anything (read: undefined)\n *       // will continue the evaluation of other rules\n *       // (with lower priority)\n *       return;\n *     } else {\n *       // element must have minimum size of 10*10 points\n *       return context.newBounds.width > 10 && context.newBounds.height > 10;\n *     }\n *   });\n * };\n *\n * @param {String|Array<String>} actions the identifier for the modeling action to check\n * @param {Number} [priority] the priority at which this rule is being applied\n * @param {Function} fn the callback function that performs the actual check\n */\nRuleProvider.prototype.addRule = function(actions, priority, fn) {\n\n  var self = this;\n\n  if (typeof actions === 'string') {\n    actions = [ actions ];\n  }\n\n  actions.forEach(function(action) {\n\n    self.canExecute(action, priority, function(context, action, event) {\n      return fn(context);\n    }, true);\n  });\n};\n\n/**\n * Implement this method to add new rules during provider initialization.\n */\nRuleProvider.prototype.init = function() {};","import RuleProvider from '../rules/RuleProvider';\n\nimport inherits from 'inherits';\n\n/**\n * This is a base rule provider for the element.autoResize rule.\n */\nexport default function AutoResizeProvider(eventBus) {\n\n  RuleProvider.call(this, eventBus);\n\n  var self = this;\n\n  this.addRule('element.autoResize', function(context) {\n    return self.canResize(context.elements, context.target);\n  });\n}\n\nAutoResizeProvider.$inject = [ 'eventBus' ];\n\ninherits(AutoResizeProvider, RuleProvider);\n\n/**\n * Needs to be implemented by sub classes to allow actual auto resize\n *\n * @param  {Array<djs.model.Shape>} elements\n * @param  {djs.model.Shape} target\n *\n * @return {Boolean}\n */\nAutoResizeProvider.prototype.canResize = function(elements, target) {\n  return false;\n};","import { is } from '../../util/ModelUtil';\n\nimport inherits from 'inherits';\n\nimport { forEach } from 'min-dash';\n\nimport AutoResizeProvider from 'diagram-js/lib/features/auto-resize/AutoResizeProvider';\n\n\n/**\n * This module is a provider for automatically resizing parent BPMN elements\n */\nexport default function BpmnAutoResizeProvider(eventBus, modeling) {\n  AutoResizeProvider.call(this, eventBus);\n\n  this._modeling = modeling;\n}\n\ninherits(BpmnAutoResizeProvider, AutoResizeProvider);\n\nBpmnAutoResizeProvider.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n/**\n * Check if the given target can be expanded\n *\n * @param  {djs.model.Shape} target\n *\n * @return {boolean}\n */\nBpmnAutoResizeProvider.prototype.canResize = function(elements, target) {\n\n  if (!is(target, 'bpmn:Participant') && !is(target, 'bpmn:Lane') && !(is(target, 'bpmn:SubProcess'))) {\n    return false;\n  }\n\n  var canResize = true;\n\n  forEach(elements, function(element) {\n\n    if (is(element, 'bpmn:Lane') || element.labelTarget) {\n      canResize = false;\n      return;\n    }\n  });\n\n  return canResize;\n};\n","import BpmnAutoResize from './BpmnAutoResize';\nimport BpmnAutoResizeProvider from './BpmnAutoResizeProvider';\n\n\nexport default {\n  __init__: [\n    'bpmnAutoResize',\n    'bpmnAutoResizeProvider'\n  ],\n  bpmnAutoResize: [ 'type', BpmnAutoResize ],\n  bpmnAutoResizeProvider: [ 'type', BpmnAutoResizeProvider ]\n};\n","/* global TouchEvent */\n\nvar round = Math.round;\n\nimport { assign } from 'min-dash';\n\nimport {\n  event as domEvent\n} from 'min-dom';\n\nimport {\n  getOriginal,\n  toPoint,\n  stopPropagation\n} from '../../util/Event';\n\nimport {\n  set as cursorSet,\n  unset as cursorUnset\n} from '../../util/Cursor';\n\nimport {\n  install as installClickTrap\n} from '../../util/ClickTrap';\n\nimport {\n  delta as deltaPos\n} from '../../util/PositionUtil';\n\nvar DRAG_ACTIVE_CLS = 'djs-drag-active';\n\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nfunction isTouchEvent(event) {\n\n  // check for TouchEvent being available first\n  // (i.e. not available on desktop Firefox)\n  return typeof TouchEvent !== 'undefined' && event instanceof TouchEvent;\n}\n\nfunction getLength(point) {\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\n\n/**\n * A helper that fires canvas localized drag events and realizes\n * the general \"drag-and-drop\" look and feel.\n *\n * Calling {@link Dragging#activate} activates dragging on a canvas.\n *\n * It provides the following:\n *\n *   * emits life cycle events, namespaced with a prefix assigned\n *     during dragging activation\n *   * sets and restores the cursor\n *   * sets and restores the selection if elements still exist\n *   * ensures there can be only one drag operation active at a time\n *\n * Dragging may be canceled manually by calling {@link Dragging#cancel}\n * or by pressing ESC.\n *\n *\n * ## Life-cycle events\n *\n * Dragging can be in three different states, off, initialized\n * and active.\n *\n * (1) off: no dragging operation is in progress\n * (2) initialized: a new drag operation got initialized but not yet\n *                  started (i.e. because of no initial move)\n * (3) started: dragging is in progress\n *\n * Eventually dragging will be off again after a drag operation has\n * been ended or canceled via user click or ESC key press.\n *\n * To indicate transitions between these states dragging emits generic\n * life-cycle events with the `drag.` prefix _and_ events namespaced\n * to a prefix choosen by a user during drag initialization.\n *\n * The following events are emitted (appropriately prefixed) via\n * the {@link EventBus}.\n *\n * * `init`\n * * `start`\n * * `move`\n * * `end`\n * * `ended` (dragging already in off state)\n * * `cancel` (only if previously started)\n * * `canceled` (dragging already in off state, only if previously started)\n * * `cleanup`\n *\n *\n * @example\n *\n * function MyDragComponent(eventBus, dragging) {\n *\n *   eventBus.on('mydrag.start', function(event) {\n *     console.log('yes, we start dragging');\n *   });\n *\n *   eventBus.on('mydrag.move', function(event) {\n *     console.log('canvas local coordinates', event.x, event.y, event.dx, event.dy);\n *\n *     // local drag data is passed with the event\n *     event.context.foo; // \"BAR\"\n *\n *     // the original mouse event, too\n *     event.originalEvent; // MouseEvent(...)\n *   });\n *\n *   eventBus.on('element.click', function(event) {\n *     dragging.init(event, 'mydrag', {\n *       cursor: 'grabbing',\n *       data: {\n *         context: {\n *           foo: \"BAR\"\n *         }\n *       }\n *     });\n *   });\n * }\n */\nexport default function Dragging(eventBus, canvas, selection, elementRegistry) {\n\n  var defaultOptions = {\n    threshold: 5,\n    trapClick: true\n  };\n\n  // the currently active drag operation\n  // dragging is active as soon as this context exists.\n  //\n  // it is visually _active_ only when a context.active flag is set to true.\n  var context;\n\n  /* convert a global event into local coordinates */\n  function toLocalPoint(globalPosition) {\n\n    var viewbox = canvas.viewbox();\n\n    var clientRect = canvas._container.getBoundingClientRect();\n\n    return {\n      x: viewbox.x + (globalPosition.x - clientRect.left) / viewbox.scale,\n      y: viewbox.y + (globalPosition.y - clientRect.top) / viewbox.scale\n    };\n  }\n\n  // helpers\n\n  function fire(type, dragContext) {\n    dragContext = dragContext || context;\n\n    var event = eventBus.createEvent(\n      assign(\n        {},\n        dragContext.payload,\n        dragContext.data,\n        { isTouch: dragContext.isTouch }\n      )\n    );\n\n    // default integration\n    if (eventBus.fire('drag.' + type, event) === false) {\n      return false;\n    }\n\n    return eventBus.fire(dragContext.prefix + '.' + type, event);\n  }\n\n  function restoreSelection(previousSelection) {\n    var existingSelection = previousSelection.filter(function(element) {\n      return elementRegistry.get(element.id);\n    });\n\n    existingSelection.length && selection.select(existingSelection);\n  }\n\n  // event listeners\n\n  function move(event, activate) {\n    var payload = context.payload,\n        displacement = context.displacement;\n\n    var globalStart = context.globalStart,\n        globalCurrent = toPoint(event),\n        globalDelta = deltaPos(globalCurrent, globalStart);\n\n    var localStart = context.localStart,\n        localCurrent = toLocalPoint(globalCurrent),\n        localDelta = deltaPos(localCurrent, localStart);\n\n\n    // activate context explicitly or once threshold is reached\n    if (!context.active && (activate || getLength(globalDelta) > context.threshold)) {\n\n      // fire start event with original\n      // starting coordinates\n\n      assign(payload, {\n        x: round(localStart.x + displacement.x),\n        y: round(localStart.y + displacement.y),\n        dx: 0,\n        dy: 0\n      }, { originalEvent: event });\n\n      if (false === fire('start')) {\n        return cancel();\n      }\n\n      context.active = true;\n\n      // unset selection and remember old selection\n      // the previous (old) selection will always passed\n      // with the event via the event.previousSelection property\n      if (!context.keepSelection) {\n        payload.previousSelection = selection.get();\n        selection.select(null);\n      }\n\n      // allow custom cursor\n      if (context.cursor) {\n        cursorSet(context.cursor);\n      }\n\n      // indicate dragging via marker on root element\n      canvas.addMarker(canvas.getRootElement(), DRAG_ACTIVE_CLS);\n    }\n\n    stopPropagation(event);\n\n    if (context.active) {\n\n      // update payload with actual coordinates\n      assign(payload, {\n        x: round(localCurrent.x + displacement.x),\n        y: round(localCurrent.y + displacement.y),\n        dx: round(localDelta.x),\n        dy: round(localDelta.y)\n      }, { originalEvent: event });\n\n      // emit move event\n      fire('move');\n    }\n  }\n\n  function end(event) {\n    var previousContext,\n        returnValue = true;\n\n    if (context.active) {\n\n      if (event) {\n        context.payload.originalEvent = event;\n\n        // suppress original event (click, ...)\n        // because we just ended a drag operation\n        stopPropagation(event);\n      }\n\n      // implementations may stop restoring the\n      // original state (selections, ...) by preventing the\n      // end events default action\n      returnValue = fire('end');\n    }\n\n    if (returnValue === false) {\n      fire('rejected');\n    }\n\n    previousContext = cleanup(returnValue !== true);\n\n    // last event to be fired when all drag operations are done\n    // at this point in time no drag operation is in progress anymore\n    fire('ended', previousContext);\n  }\n\n\n  // cancel active drag operation if the user presses\n  // the ESC key on the keyboard\n\n  function checkCancel(event) {\n\n    if (event.which === 27) {\n      preventDefault(event);\n\n      cancel();\n    }\n  }\n\n\n  // prevent ghost click that might occur after a finished\n  // drag and drop session\n\n  function trapClickAndEnd(event) {\n\n    var untrap;\n\n    // trap the click in case we are part of an active\n    // drag operation. This will effectively prevent\n    // the ghost click that cannot be canceled otherwise.\n    if (context.active) {\n\n      untrap = installClickTrap(eventBus);\n\n      // remove trap after minimal delay\n      setTimeout(untrap, 400);\n\n      // prevent default action (click)\n      preventDefault(event);\n    }\n\n    end(event);\n  }\n\n  function trapTouch(event) {\n    move(event);\n  }\n\n  // update the drag events hover (djs.model.Base) and hoverGfx (Snap<SVGElement>)\n  // properties during hover and out and fire {prefix}.hover and {prefix}.out properties\n  // respectively\n\n  function hover(event) {\n    var payload = context.payload;\n\n    payload.hoverGfx = event.gfx;\n    payload.hover = event.element;\n\n    fire('hover');\n  }\n\n  function out(event) {\n    fire('out');\n\n    var payload = context.payload;\n\n    payload.hoverGfx = null;\n    payload.hover = null;\n  }\n\n\n  // life-cycle methods\n\n  function cancel(restore) {\n    var previousContext;\n\n    if (!context) {\n      return;\n    }\n\n    var wasActive = context.active;\n\n    if (wasActive) {\n      fire('cancel');\n    }\n\n    previousContext = cleanup(restore);\n\n    if (wasActive) {\n\n      // last event to be fired when all drag operations are done\n      // at this point in time no drag operation is in progress anymore\n      fire('canceled', previousContext);\n    }\n  }\n\n  function cleanup(restore) {\n    var previousContext,\n        endDrag;\n\n    fire('cleanup');\n\n    // reset cursor\n    cursorUnset();\n\n    if (context.trapClick) {\n      endDrag = trapClickAndEnd;\n    } else {\n      endDrag = end;\n    }\n\n    // reset dom listeners\n    domEvent.unbind(document, 'mousemove', move);\n\n    domEvent.unbind(document, 'dragstart', preventDefault);\n    domEvent.unbind(document, 'selectstart', preventDefault);\n\n    domEvent.unbind(document, 'mousedown', endDrag, true);\n    domEvent.unbind(document, 'mouseup', endDrag, true);\n\n    domEvent.unbind(document, 'keyup', checkCancel);\n\n    domEvent.unbind(document, 'touchstart', trapTouch, true);\n    domEvent.unbind(document, 'touchcancel', cancel, true);\n    domEvent.unbind(document, 'touchmove', move, true);\n    domEvent.unbind(document, 'touchend', end, true);\n\n    eventBus.off('element.hover', hover);\n    eventBus.off('element.out', out);\n\n    // remove drag marker on root element\n    canvas.removeMarker(canvas.getRootElement(), DRAG_ACTIVE_CLS);\n\n    // restore selection, unless it has changed\n    var previousSelection = context.payload.previousSelection;\n\n    if (restore !== false && previousSelection && !selection.get().length) {\n      restoreSelection(previousSelection);\n    }\n\n    previousContext = context;\n\n    context = null;\n\n    return previousContext;\n  }\n\n  /**\n   * Initialize a drag operation.\n   *\n   * If `localPosition` is given, drag events will be emitted\n   * relative to it.\n   *\n   * @param {MouseEvent|TouchEvent} [event]\n   * @param {Point} [localPosition] actual diagram local position this drag operation should start at\n   * @param {String} prefix\n   * @param {Object} [options]\n   */\n  function init(event, relativeTo, prefix, options) {\n\n    // only one drag operation may be active, at a time\n    if (context) {\n      cancel(false);\n    }\n\n    if (typeof relativeTo === 'string') {\n      options = prefix;\n      prefix = relativeTo;\n      relativeTo = null;\n    }\n\n    options = assign({}, defaultOptions, options || {});\n\n    var data = options.data || {},\n        originalEvent,\n        globalStart,\n        localStart,\n        endDrag,\n        isTouch;\n\n    if (options.trapClick) {\n      endDrag = trapClickAndEnd;\n    } else {\n      endDrag = end;\n    }\n\n    if (event) {\n      originalEvent = getOriginal(event) || event;\n      globalStart = toPoint(event);\n\n      stopPropagation(event);\n\n      // prevent default browser dragging behavior\n      if (originalEvent.type === 'dragstart') {\n        preventDefault(originalEvent);\n      }\n    } else {\n      originalEvent = null;\n      globalStart = { x: 0, y: 0 };\n    }\n\n    localStart = toLocalPoint(globalStart);\n\n    if (!relativeTo) {\n      relativeTo = localStart;\n    }\n\n    isTouch = isTouchEvent(originalEvent);\n\n    context = assign({\n      prefix: prefix,\n      data: data,\n      payload: {},\n      globalStart: globalStart,\n      displacement: deltaPos(relativeTo, localStart),\n      localStart: localStart,\n      isTouch: isTouch\n    }, options);\n\n    // skip dom registration if trigger\n    // is set to manual (during testing)\n    if (!options.manual) {\n\n      // add dom listeners\n\n      if (isTouch) {\n        domEvent.bind(document, 'touchstart', trapTouch, true);\n        domEvent.bind(document, 'touchcancel', cancel, true);\n        domEvent.bind(document, 'touchmove', move, true);\n        domEvent.bind(document, 'touchend', end, true);\n      } else {\n\n        // assume we use the mouse to interact per default\n        domEvent.bind(document, 'mousemove', move);\n\n        // prevent default browser drag and text selection behavior\n        domEvent.bind(document, 'dragstart', preventDefault);\n        domEvent.bind(document, 'selectstart', preventDefault);\n\n        domEvent.bind(document, 'mousedown', endDrag, true);\n        domEvent.bind(document, 'mouseup', endDrag, true);\n      }\n\n      domEvent.bind(document, 'keyup', checkCancel);\n\n      eventBus.on('element.hover', hover);\n      eventBus.on('element.out', out);\n    }\n\n    fire('init');\n\n    if (options.autoActivate) {\n      move(event, true);\n    }\n  }\n\n  // cancel on diagram destruction\n  eventBus.on('diagram.destroy', cancel);\n\n\n  // API\n\n  this.init = init;\n  this.move = move;\n  this.hover = hover;\n  this.out = out;\n  this.end = end;\n\n  this.cancel = cancel;\n\n  // for introspection\n\n  this.context = function() {\n    return context;\n  };\n\n  this.setOptions = function(options) {\n    assign(defaultOptions, options);\n  };\n}\n\nDragging.$inject = [\n  'eventBus',\n  'canvas',\n  'selection',\n  'elementRegistry'\n];\n","import {\n  closest as domClosest\n} from 'min-dom';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\nvar HIGH_PRIORITY = 1500;\n\n\n/**\n * Browsers may swallow certain events (hover, out ...) if users are to\n * fast with the mouse.\n *\n * @see http://stackoverflow.com/questions/7448468/why-cant-i-reliably-capture-a-mouseout-event\n *\n * The fix implemented in this component ensure that we\n *\n * 1) have a hover state after a successful drag.move event\n * 2) have an out event when dragging leaves an element\n *\n * @param {EventBus} eventBus\n * @param {Dragging} dragging\n * @param {ElementRegistry} elementRegistry\n */\nexport default function HoverFix(eventBus, dragging, elementRegistry) {\n\n  var self = this;\n\n  /**\n   * Make sure we are god damn hovering!\n   *\n   * @param {Event} dragging event\n   */\n  function ensureHover(event) {\n\n    if (event.hover) {\n      return;\n    }\n\n    var originalEvent = event.originalEvent;\n\n    var gfx = self._findTargetGfx(originalEvent);\n\n    var element = gfx && elementRegistry.get(gfx);\n\n    if (gfx && element) {\n\n      // 1) cancel current mousemove\n      event.stopPropagation();\n\n      // 2) emit fake hover for new target\n      dragging.hover({ element: element, gfx: gfx });\n\n      // 3) re-trigger move event\n      dragging.move(originalEvent);\n    }\n  }\n\n  /**\n   * We wait for a specific sequence of events before\n   * emitting a fake drag.hover event.\n   *\n   * Event Sequence:\n   *\n   * drag.start\n   * drag.move >> ensure we are hovering\n   */\n  eventBus.on('drag.start', function(event) {\n\n    eventBus.once('drag.move', HIGH_PRIORITY, function(event) {\n\n      ensureHover(event);\n\n    });\n\n  });\n\n\n  /**\n   * We make sure that drag.out is always fired, even if the\n   * browser swallows an element.out event.\n   *\n   * Event sequence:\n   *\n   * drag.hover\n   * (element.out >> sometimes swallowed)\n   * element.hover >> ensure we fired drag.out\n   */\n  eventBus.on('drag.init', function() {\n\n    var hover, hoverGfx;\n\n    function setDragHover(event) {\n      hover = event.hover;\n      hoverGfx = event.hoverGfx;\n    }\n\n    function unsetHover() {\n      hover = null;\n      hoverGfx = null;\n    }\n\n    function ensureOut() {\n\n      if (!hover) {\n        return;\n      }\n\n      var element = hover,\n          gfx = hoverGfx;\n\n      hover = null;\n      hoverGfx = null;\n\n      // emit synthetic out event\n      dragging.out({\n        element: element,\n        gfx: gfx\n      });\n    }\n\n    eventBus.on('drag.hover', setDragHover);\n    eventBus.on('element.out', unsetHover);\n    eventBus.on('element.hover', HIGH_PRIORITY, ensureOut);\n\n    eventBus.once('drag.cleanup', function() {\n      eventBus.off('drag.hover', setDragHover);\n      eventBus.off('element.out', unsetHover);\n      eventBus.off('element.hover', ensureOut);\n    });\n\n  });\n\n  this._findTargetGfx = function(event) {\n    var position,\n        target;\n\n    if (!(event instanceof MouseEvent)) {\n      return;\n    }\n\n    position = toPoint(event);\n\n    // damn expensive operation, ouch!\n    target = document.elementFromPoint(position.x, position.y);\n\n    return getGfx(target);\n  };\n\n}\n\nHoverFix.$inject = [\n  'eventBus',\n  'dragging',\n  'elementRegistry'\n];\n\n\n// helpers /////////////////////\n\nfunction getGfx(target) {\n  return domClosest(target, 'svg, .djs-element', true);\n}","import SelectionModule from '../selection';\n\nimport Dragging from './Dragging';\nimport HoverFix from './HoverFix';\n\nexport default {\n  __init__: [\n    'hoverFix'\n  ],\n  __depends__: [\n    SelectionModule\n  ],\n  dragging: [ 'type', Dragging ],\n  hoverFix: [ 'type', HoverFix ]\n};","import { assign } from 'min-dash';\n\nimport {\n  toPoint\n} from '../../util/Event';\n\n\n/**\n * Initiates canvas scrolling if current cursor point is close to a border.\n * Cancelled when current point moves back inside the scrolling borders\n * or cancelled manually.\n *\n * Default options :\n *   scrollThresholdIn: [ 20, 20, 20, 20 ],\n *   scrollThresholdOut: [ 0, 0, 0, 0 ],\n *   scrollRepeatTimeout: 15,\n *   scrollStep: 10\n *\n * Threshold order:\n *   [ left, top, right, bottom ]\n */\nexport default function AutoScroll(config, eventBus, canvas) {\n\n  this._canvas = canvas;\n\n  this._opts = assign({\n    scrollThresholdIn: [ 20, 20, 20, 20 ],\n    scrollThresholdOut: [ 0, 0, 0, 0 ],\n    scrollRepeatTimeout: 15,\n    scrollStep: 10\n  }, config);\n\n  var self = this;\n\n  eventBus.on('drag.move', function(e) {\n    var point = self._toBorderPoint(e);\n\n    self.startScroll(point);\n  });\n\n  eventBus.on([ 'drag.cleanup' ], function() {\n    self.stopScroll();\n  });\n}\n\nAutoScroll.$inject = [\n  'config.autoScroll',\n  'eventBus',\n  'canvas'\n];\n\n\n/**\n * Starts scrolling loop.\n * Point is given in global scale in canvas container box plane.\n *\n * @param  {Object} point { x: X, y: Y }\n */\nAutoScroll.prototype.startScroll = function(point) {\n\n  var canvas = this._canvas;\n  var opts = this._opts;\n  var self = this;\n\n  var clientRect = canvas.getContainer().getBoundingClientRect();\n\n  var diff = [\n    point.x,\n    point.y,\n    clientRect.width - point.x,\n    clientRect.height - point.y\n  ];\n\n  this.stopScroll();\n\n  var dx = 0,\n      dy = 0;\n\n  for (var i = 0; i < 4; i++) {\n    if (between(diff[i], opts.scrollThresholdOut[i], opts.scrollThresholdIn[i])) {\n      if (i === 0) {\n        dx = opts.scrollStep;\n      } else if (i == 1) {\n        dy = opts.scrollStep;\n      } else if (i == 2) {\n        dx = -opts.scrollStep;\n      } else if (i == 3) {\n        dy = -opts.scrollStep;\n      }\n    }\n  }\n\n  if (dx !== 0 || dy !== 0) {\n    canvas.scroll({ dx: dx, dy: dy });\n\n    this._scrolling = setTimeout(function() {\n      self.startScroll(point);\n    }, opts.scrollRepeatTimeout);\n  }\n};\n\nfunction between(val, start, end) {\n  if (start < val && val < end) {\n    return true;\n  }\n\n  return false;\n}\n\n\n/**\n * Stops scrolling loop.\n */\nAutoScroll.prototype.stopScroll = function() {\n  clearTimeout(this._scrolling);\n};\n\n\n/**\n * Overrides defaults options.\n *\n * @param  {Object} options\n */\nAutoScroll.prototype.setOptions = function(options) {\n  this._opts = assign({}, this._opts, options);\n};\n\n\n/**\n * Converts event to a point in canvas container plane in global scale.\n *\n * @param  {Event} event\n * @return {Point}\n */\nAutoScroll.prototype._toBorderPoint = function(event) {\n  var clientRect = this._canvas._container.getBoundingClientRect();\n\n  var globalPosition = toPoint(event.originalEvent);\n\n  return {\n    x: globalPosition.x - clientRect.left,\n    y: globalPosition.y - clientRect.top\n  };\n};","import DraggingModule from '../dragging';\n\nimport AutoScroll from './AutoScroll';\n\n\nexport default {\n  __depends__: [\n    DraggingModule,\n  ],\n  __init__: [ 'autoScroll' ],\n  autoScroll: [ 'type', AutoScroll ]\n};","/**\n * A service that provides rules for certain diagram actions.\n *\n * The default implementation will hook into the {@link CommandStack}\n * to perform the actual rule evaluation. Make sure to provide the\n * `commandStack` service with this module if you plan to use it.\n *\n * Together with this implementation you may use the {@link RuleProvider}\n * to implement your own rule checkers.\n *\n * This module is ment to be easily replaced, thus the tiny foot print.\n *\n * @param {Injector} injector\n */\nexport default function Rules(injector) {\n  this._commandStack = injector.get('commandStack', false);\n}\n\nRules.$inject = [ 'injector' ];\n\n\n/**\n * Returns whether or not a given modeling action can be executed\n * in the specified context.\n *\n * This implementation will respond with allow unless anyone\n * objects.\n *\n * @param {String} action the action to be checked\n * @param {Object} [context] the context to check the action in\n *\n * @return {Boolean} returns true, false or null depending on whether the\n *                   operation is allowed, not allowed or should be ignored.\n */\nRules.prototype.allowed = function(action, context) {\n  var allowed = true;\n\n  var commandStack = this._commandStack;\n\n  if (commandStack) {\n    allowed = commandStack.canExecute(action, context);\n  }\n\n  // map undefined to true, i.e. no rules\n  return allowed === undefined ? true : allowed;\n};","import Rules from './Rules';\n\nexport default {\n  __init__: [ 'rules' ],\n  rules: [ 'type', Rules ]\n};\n","import {\n  pointDistance\n} from './Geometry';\n\nimport intersectPaths from 'path-intersection';\n\nvar round = Math.round,\n    max = Math.max;\n\n\nfunction circlePath(center, r) {\n  var x = center.x,\n      y = center.y;\n\n  return [\n    ['M', x, y],\n    ['m', 0, -r],\n    ['a', r, r, 0, 1, 1, 0, 2 * r],\n    ['a', r, r, 0, 1, 1, 0, -2 * r],\n    ['z']\n  ];\n}\n\nfunction linePath(points) {\n  var segments = [];\n\n  points.forEach(function(p, idx) {\n    segments.push([ idx === 0 ? 'M' : 'L', p.x, p.y ]);\n  });\n\n  return segments;\n}\n\n\nvar INTERSECTION_THRESHOLD = 10;\n\nfunction getBendpointIntersection(waypoints, reference) {\n\n  var i, w;\n\n  for (i = 0; (w = waypoints[i]); i++) {\n\n    if (pointDistance(w, reference) <= INTERSECTION_THRESHOLD) {\n      return {\n        point: waypoints[i],\n        bendpoint: true,\n        index: i\n      };\n    }\n  }\n\n  return null;\n}\n\nfunction getPathIntersection(waypoints, reference) {\n\n  var intersections = intersectPaths(circlePath(reference, INTERSECTION_THRESHOLD), linePath(waypoints));\n\n  var a = intersections[0],\n      b = intersections[intersections.length - 1],\n      idx;\n\n  if (!a) {\n\n    // no intersection\n    return null;\n  }\n\n  if (a !== b) {\n\n    if (a.segment2 !== b.segment2) {\n\n      // we use the bendpoint in between both segments\n      // as the intersection point\n\n      idx = max(a.segment2, b.segment2) - 1;\n\n      return {\n        point: waypoints[idx],\n        bendpoint: true,\n        index: idx\n      };\n    }\n\n    return {\n      point: {\n        x: (round(a.x + b.x) / 2),\n        y: (round(a.y + b.y) / 2)\n      },\n      index: a.segment2\n    };\n  }\n\n  return {\n    point: {\n      x: round(a.x),\n      y: round(a.y)\n    },\n    index: a.segment2\n  };\n}\n\n/**\n * Returns the closest point on the connection towards a given reference point.\n *\n * @param  {Array<Point>} waypoints\n * @param  {Point} reference\n *\n * @return {Object} intersection data (segment, point)\n */\nexport function getApproxIntersection(waypoints, reference) {\n  return getBendpointIntersection(waypoints, reference) || getPathIntersection(waypoints, reference);\n}\n","import {\n  toPoint\n} from '../../util/Event';\n\nimport {\n  getMidPoint,\n  pointsAligned\n} from '../../util/Geometry';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  rotate,\n  translate\n} from '../../util/SvgTransformUtil';\n\nimport {\n  getApproxIntersection\n} from '../../util/LineIntersection';\n\nexport var BENDPOINT_CLS = 'djs-bendpoint';\nexport var SEGMENT_DRAGGER_CLS = 'djs-segment-dragger';\n\nexport function toCanvasCoordinates(canvas, event) {\n\n  var position = toPoint(event),\n      clientRect = canvas._container.getBoundingClientRect(),\n      offset;\n\n  // canvas relative position\n\n  offset = {\n    x: clientRect.left,\n    y: clientRect.top\n  };\n\n  // update actual event payload with canvas relative measures\n\n  var viewbox = canvas.viewbox();\n\n  return {\n    x: viewbox.x + (position.x - offset.x) / viewbox.scale,\n    y: viewbox.y + (position.y - offset.y) / viewbox.scale\n  };\n}\n\nexport function getConnectionIntersection(canvas, waypoints, event) {\n  var localPosition = toCanvasCoordinates(canvas, event),\n      intersection = getApproxIntersection(waypoints, localPosition);\n\n  return intersection;\n}\n\nexport function addBendpoint(parentGfx, cls) {\n  var groupGfx = svgCreate('g');\n  svgClasses(groupGfx).add(BENDPOINT_CLS);\n\n  svgAppend(parentGfx, groupGfx);\n\n  var visual = svgCreate('circle');\n  svgAttr(visual, {\n    cx: 0,\n    cy: 0,\n    r: 4\n  });\n  svgClasses(visual).add('djs-visual');\n\n  svgAppend(groupGfx, visual);\n\n  var hit = svgCreate('circle');\n  svgAttr(hit, {\n    cx: 0,\n    cy: 0,\n    r: 10\n  });\n  svgClasses(hit).add('djs-hit');\n\n  svgAppend(groupGfx, hit);\n\n  if (cls) {\n    svgClasses(groupGfx).add(cls);\n  }\n\n  return groupGfx;\n}\n\nfunction createParallelDragger(parentGfx, segmentStart, segmentEnd, alignment) {\n  var draggerGfx = svgCreate('g');\n\n  svgAppend(parentGfx, draggerGfx);\n\n  var width = 14,\n      height = 3,\n      padding = 6,\n      hitWidth = calculateHitWidth(segmentStart, segmentEnd, alignment),\n      hitHeight = height + padding;\n\n  var visual = svgCreate('rect');\n  svgAttr(visual, {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  });\n  svgClasses(visual).add('djs-visual');\n\n  svgAppend(draggerGfx, visual);\n\n  var hit = svgCreate('rect');\n  svgAttr(hit, {\n    x: -hitWidth / 2,\n    y: -hitHeight / 2,\n    width: hitWidth,\n    height: hitHeight\n  });\n  svgClasses(hit).add('djs-hit');\n\n  svgAppend(draggerGfx, hit);\n\n  rotate(draggerGfx, alignment === 'v' ? 90 : 0, 0, 0);\n\n  return draggerGfx;\n}\n\n\nexport function addSegmentDragger(parentGfx, segmentStart, segmentEnd) {\n\n  var groupGfx = svgCreate('g'),\n      mid = getMidPoint(segmentStart, segmentEnd),\n      alignment = pointsAligned(segmentStart, segmentEnd);\n\n  svgAppend(parentGfx, groupGfx);\n\n  createParallelDragger(groupGfx, segmentStart, segmentEnd, alignment);\n\n  svgClasses(groupGfx).add(SEGMENT_DRAGGER_CLS);\n  svgClasses(groupGfx).add(alignment === 'h' ? 'horizontal' : 'vertical');\n\n  translate(groupGfx, mid.x, mid.y);\n\n  return groupGfx;\n}\n\n/**\n * Calculates region for segment move which is 2/3 of the full segment length\n * @param {Number} segmentLength\n *\n * @return {Number}\n */\nexport function calculateSegmentMoveRegion(segmentLength) {\n  return Math.abs(Math.round(segmentLength * 2 / 3));\n}\n\n// helper //////////\n\nfunction calculateHitWidth(segmentStart, segmentEnd, alignment) {\n  var segmentLengthXAxis = segmentEnd.x - segmentStart.x,\n      segmentLengthYAxis = segmentEnd.y - segmentStart.y;\n\n  return alignment === 'h' ?\n    calculateSegmentMoveRegion(segmentLengthXAxis) :\n    calculateSegmentMoveRegion(segmentLengthYAxis);\n}\n","export {\n  default as escapeCSS\n} from 'css.escape';\n\nvar HTML_ESCAPE_MAP = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nexport function escapeHTML(str) {\n  str = '' + str;\n\n  return str && str.replace(/[&<>\"']/g, function(match) {\n    return HTML_ESCAPE_MAP[match];\n  });\n}\n","import { forEach } from 'min-dash';\n\nimport {\n  event as domEvent,\n  query as domQuery,\n  queryAll as domQueryAll\n} from 'min-dom';\n\nimport {\n  BENDPOINT_CLS,\n  SEGMENT_DRAGGER_CLS,\n  addBendpoint,\n  addSegmentDragger,\n  calculateSegmentMoveRegion,\n  getConnectionIntersection\n} from './BendpointUtil';\n\nimport {\n  escapeCSS\n} from '../../util/EscapeUtil';\n\nimport {\n  pointsAligned,\n  getMidPoint\n} from '../../util/Geometry';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  translate\n} from '../../util/SvgTransformUtil';\n\n\n/**\n * A service that adds editable bendpoints to connections.\n */\nexport default function Bendpoints(\n    eventBus, canvas, interactionEvents,\n    bendpointMove, connectionSegmentMove) {\n\n  /**\n   * Returns true if intersection point is inside middle region of segment, adjusted by\n   * optional threshold\n   */\n  function isIntersectionMiddle(intersection, waypoints, treshold) {\n    var idx = intersection.index,\n        p = intersection.point,\n        p0, p1, mid, aligned, xDelta, yDelta;\n\n    if (idx <= 0 || intersection.bendpoint) {\n      return false;\n    }\n\n    p0 = waypoints[idx - 1];\n    p1 = waypoints[idx];\n    mid = getMidPoint(p0, p1),\n    aligned = pointsAligned(p0, p1);\n    xDelta = Math.abs(p.x - mid.x);\n    yDelta = Math.abs(p.y - mid.y);\n\n    return aligned && xDelta <= treshold && yDelta <= treshold;\n  }\n\n  /**\n   * Calculates the threshold from a connection's middle which fits the two-third-region\n   */\n  function calculateIntersectionThreshold(connection, intersection) {\n    var waypoints = connection.waypoints,\n        relevantSegment, alignment, segmentLength, threshold;\n\n    if (intersection.index <= 0 || intersection.bendpoint) {\n      return null;\n    }\n\n    // segment relative to connection intersection\n    relevantSegment = {\n      start: waypoints[intersection.index - 1],\n      end: waypoints[intersection.index]\n    };\n\n    alignment = pointsAligned(relevantSegment.start, relevantSegment.end);\n\n    if (!alignment) {\n      return null;\n    }\n\n    if (alignment === 'h') {\n      segmentLength = relevantSegment.end.x - relevantSegment.start.x;\n    } else {\n      segmentLength = relevantSegment.end.y - relevantSegment.start.y;\n    }\n\n    // calculate threshold relative to 2/3 of segment length\n    threshold = calculateSegmentMoveRegion(segmentLength) / 2;\n\n    return threshold;\n  }\n\n  function activateBendpointMove(event, connection) {\n    var waypoints = connection.waypoints,\n        intersection = getConnectionIntersection(canvas, waypoints, event),\n        threshold;\n\n    if (!intersection) {\n      return;\n    }\n\n    threshold = calculateIntersectionThreshold(connection, intersection);\n\n    if (isIntersectionMiddle(intersection, waypoints, threshold)) {\n      connectionSegmentMove.start(event, connection, intersection.index);\n    } else {\n      bendpointMove.start(event, connection, intersection.index, !intersection.bendpoint);\n    }\n\n    // we've handled the event\n    return true;\n  }\n\n  function bindInteractionEvents(node, eventName, element) {\n\n    domEvent.bind(node, eventName, function(event) {\n      interactionEvents.triggerMouseEvent(eventName, event, element);\n      event.stopPropagation();\n    });\n  }\n\n  function getBendpointsContainer(element, create) {\n\n    var layer = canvas.getLayer('overlays'),\n        gfx = domQuery('.djs-bendpoints[data-element-id=\"' + escapeCSS(element.id) + '\"]', layer);\n\n    if (!gfx && create) {\n      gfx = svgCreate('g');\n      svgAttr(gfx, { 'data-element-id': element.id });\n      svgClasses(gfx).add('djs-bendpoints');\n\n      svgAppend(layer, gfx);\n\n      bindInteractionEvents(gfx, 'mousedown', element);\n      bindInteractionEvents(gfx, 'click', element);\n      bindInteractionEvents(gfx, 'dblclick', element);\n    }\n\n    return gfx;\n  }\n\n  function getSegmentDragger(idx, parentGfx) {\n    return domQuery(\n      '.djs-segment-dragger[data-segment-idx=\"' + idx + '\"]',\n      parentGfx\n    );\n  }\n\n  function createBendpoints(gfx, connection) {\n    connection.waypoints.forEach(function(p, idx) {\n      var bendpoint = addBendpoint(gfx);\n\n      svgAppend(gfx, bendpoint);\n\n      translate(bendpoint, p.x, p.y);\n    });\n\n    // add floating bendpoint\n    addBendpoint(gfx, 'floating');\n  }\n\n  function createSegmentDraggers(gfx, connection) {\n\n    var waypoints = connection.waypoints;\n\n    var segmentStart,\n        segmentEnd,\n        segmentDraggerGfx;\n\n    for (var i = 1; i < waypoints.length; i++) {\n\n      segmentStart = waypoints[i - 1];\n      segmentEnd = waypoints[i];\n\n      if (pointsAligned(segmentStart, segmentEnd)) {\n        segmentDraggerGfx = addSegmentDragger(gfx, segmentStart, segmentEnd);\n\n        svgAttr(segmentDraggerGfx, { 'data-segment-idx': i });\n\n        bindInteractionEvents(segmentDraggerGfx, 'mousemove', connection);\n      }\n    }\n  }\n\n  function clearBendpoints(gfx) {\n    forEach(domQueryAll('.' + BENDPOINT_CLS, gfx), function(node) {\n      svgRemove(node);\n    });\n  }\n\n  function clearSegmentDraggers(gfx) {\n    forEach(domQueryAll('.' + SEGMENT_DRAGGER_CLS, gfx), function(node) {\n      svgRemove(node);\n    });\n  }\n\n  function addHandles(connection) {\n\n    var gfx = getBendpointsContainer(connection);\n\n    if (!gfx) {\n      gfx = getBendpointsContainer(connection, true);\n\n      createBendpoints(gfx, connection);\n      createSegmentDraggers(gfx, connection);\n    }\n\n    return gfx;\n  }\n\n  function updateHandles(connection) {\n\n    var gfx = getBendpointsContainer(connection);\n\n    if (gfx) {\n      clearSegmentDraggers(gfx);\n      clearBendpoints(gfx);\n      createSegmentDraggers(gfx, connection);\n      createBendpoints(gfx, connection);\n    }\n  }\n\n  function updateFloatingBendpointPosition(parentGfx, intersection) {\n    var floating = domQuery('.floating', parentGfx),\n        point = intersection.point;\n\n    if (!floating) {\n      return;\n    }\n\n    translate(floating, point.x, point.y);\n\n  }\n\n  function updateSegmentDraggerPosition(parentGfx, intersection, waypoints) {\n\n    var draggerGfx = getSegmentDragger(intersection.index, parentGfx),\n        segmentStart = waypoints[intersection.index - 1],\n        segmentEnd = waypoints[intersection.index],\n        point = intersection.point,\n        mid = getMidPoint(segmentStart, segmentEnd),\n        alignment = pointsAligned(segmentStart, segmentEnd),\n        draggerVisual, relativePosition;\n\n    if (!draggerGfx) {\n      return;\n    }\n\n    draggerVisual = getDraggerVisual(draggerGfx);\n\n    relativePosition = {\n      x: point.x - mid.x,\n      y: point.y - mid.y\n    };\n\n    if (alignment === 'v') {\n\n      // rotate position\n      relativePosition = {\n        x: relativePosition.y,\n        y: relativePosition.x\n      };\n    }\n\n    translate(draggerVisual, relativePosition.x, relativePosition.y);\n  }\n\n  eventBus.on('connection.changed', function(event) {\n    updateHandles(event.element);\n  });\n\n  eventBus.on('connection.remove', function(event) {\n    var gfx = getBendpointsContainer(event.element);\n\n    if (gfx) {\n      svgRemove(gfx);\n    }\n  });\n\n  eventBus.on('element.marker.update', function(event) {\n\n    var element = event.element,\n        bendpointsGfx;\n\n    if (!element.waypoints) {\n      return;\n    }\n\n    bendpointsGfx = addHandles(element);\n\n    if (event.add) {\n      svgClasses(bendpointsGfx).add(event.marker);\n    } else {\n      svgClasses(bendpointsGfx).remove(event.marker);\n    }\n  });\n\n  eventBus.on('element.mousemove', function(event) {\n\n    var element = event.element,\n        waypoints = element.waypoints,\n        bendpointsGfx,\n        intersection;\n\n    if (waypoints) {\n      bendpointsGfx = getBendpointsContainer(element, true);\n\n      intersection = getConnectionIntersection(canvas, waypoints, event.originalEvent);\n\n      if (!intersection) {\n        return;\n      }\n\n      updateFloatingBendpointPosition(bendpointsGfx, intersection);\n\n      if (!intersection.bendpoint) {\n        updateSegmentDraggerPosition(bendpointsGfx, intersection, waypoints);\n      }\n\n    }\n  });\n\n  eventBus.on('element.mousedown', function(event) {\n\n    var originalEvent = event.originalEvent,\n        element = event.element;\n\n    if (!element.waypoints) {\n      return;\n    }\n\n    return activateBendpointMove(originalEvent, element);\n  });\n\n  eventBus.on('selection.changed', function(event) {\n    var newSelection = event.newSelection,\n        primary = newSelection[0];\n\n    if (primary && primary.waypoints) {\n      addHandles(primary);\n    }\n  });\n\n  eventBus.on('element.hover', function(event) {\n    var element = event.element;\n\n    if (element.waypoints) {\n      addHandles(element);\n      interactionEvents.registerEvent(event.gfx, 'mousemove', 'element.mousemove');\n    }\n  });\n\n  eventBus.on('element.out', function(event) {\n    interactionEvents.unregisterEvent(event.gfx, 'mousemove', 'element.mousemove');\n  });\n\n  // update bendpoint container data attribute on element ID change\n  eventBus.on('element.updateId', function(context) {\n    var element = context.element,\n        newId = context.newId;\n\n    if (element.waypoints) {\n      var bendpointContainer = getBendpointsContainer(element);\n\n      if (bendpointContainer) {\n        svgAttr(bendpointContainer, { 'data-element-id': newId });\n      }\n    }\n  });\n\n  // API\n\n  this.addHandles = addHandles;\n  this.updateHandles = updateHandles;\n  this.getBendpointsContainer = getBendpointsContainer;\n  this.getSegmentDragger = getSegmentDragger;\n}\n\nBendpoints.$inject = [\n  'eventBus',\n  'canvas',\n  'interactionEvents',\n  'bendpointMove',\n  'connectionSegmentMove'\n];\n\n\n\n// helper /////////////\n\nfunction getDraggerVisual(draggerGfx) {\n  return domQuery('.djs-visual', draggerGfx);\n}","import { filterRedundantWaypoints } from '../../layout/LayoutUtil';\n\nvar round = Math.round;\n\nvar RECONNECT_START = 'reconnectStart',\n    RECONNECT_END = 'reconnectEnd',\n    UPDATE_WAYPOINTS = 'updateWaypoints';\n\n\n/**\n * Move bendpoints through drag and drop to add/remove bendpoints or reconnect connection.\n */\nexport default function BendpointMove(injector, eventBus, canvas, dragging, rules, modeling) {\n  this._injector = injector;\n\n  this.start = function(event, connection, bendpointIndex, insert) {\n    var gfx = canvas.getGraphics(connection),\n        source = connection.source,\n        target = connection.target,\n        waypoints = connection.waypoints,\n        type;\n\n    if (!insert && bendpointIndex === 0) {\n      type = RECONNECT_START;\n    } else\n    if (!insert && bendpointIndex === waypoints.length - 1) {\n      type = RECONNECT_END;\n    } else {\n      type = UPDATE_WAYPOINTS;\n    }\n\n    var command = type === UPDATE_WAYPOINTS ? 'connection.updateWaypoints' : 'connection.reconnect';\n\n    var allowed = rules.allowed(command, {\n      connection: connection,\n      source: source,\n      target: target\n    });\n\n    if (allowed === false) {\n      allowed = rules.allowed(command, {\n        connection: connection,\n        source: target,\n        target: source\n      });\n    }\n\n    if (allowed === false) {\n      return;\n    }\n\n    dragging.init(event, 'bendpoint.move', {\n      data: {\n        connection: connection,\n        connectionGfx: gfx,\n        context: {\n          allowed: allowed,\n          bendpointIndex: bendpointIndex,\n          connection: connection,\n          source: source,\n          target: target,\n          insert: insert,\n          type: type\n        }\n      }\n    });\n  };\n\n  eventBus.on('bendpoint.move.hover', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source,\n        target = connection.target,\n        hover = event.hover,\n        type = context.type;\n\n    // cache hover state\n    context.hover = hover;\n\n    var allowed;\n\n    if (!hover) {\n      return;\n    }\n\n    var command = type === UPDATE_WAYPOINTS ? 'connection.updateWaypoints' : 'connection.reconnect';\n\n    allowed = context.allowed = rules.allowed(command, {\n      connection: connection,\n      source: type === RECONNECT_START ? hover : source,\n      target: type === RECONNECT_END ? hover : target\n    });\n\n    if (allowed) {\n      context.source = type === RECONNECT_START ? hover : source;\n      context.target = type === RECONNECT_END ? hover : target;\n\n      return;\n    }\n\n    if (allowed === false) {\n      allowed = context.allowed = rules.allowed(command, {\n        connection: connection,\n        source: type === RECONNECT_END ? hover : target,\n        target: type === RECONNECT_START ? hover : source\n      });\n    }\n\n    if (allowed) {\n      context.source = type === RECONNECT_END ? hover : target;\n      context.target = type === RECONNECT_START ? hover : source;\n    }\n  });\n\n  eventBus.on([ 'bendpoint.move.out', 'bendpoint.move.cleanup' ], function(event) {\n    var context = event.context;\n\n    context.hover = null;\n    context.source = null;\n    context.target = null;\n\n    context.allowed = false;\n  });\n\n  eventBus.on('bendpoint.move.end', function(event) {\n    var context = event.context,\n        allowed = context.allowed,\n        bendpointIndex = context.bendpointIndex,\n        connection = context.connection,\n        insert = context.insert,\n        newWaypoints = connection.waypoints.slice(),\n        source = context.source,\n        target = context.target,\n        type = context.type,\n        hints = {};\n\n    // ensure integer values (important if zoom level was > 1 during move)\n    var docking = {\n      x: round(event.x),\n      y: round(event.y)\n    };\n\n    if (!allowed) {\n      return false;\n    }\n\n    if (type === UPDATE_WAYPOINTS) {\n      if (insert) {\n\n        // insert new bendpoint\n        newWaypoints.splice(bendpointIndex, 0, docking);\n      } else {\n\n        // swap previous waypoint with moved one\n        newWaypoints[bendpointIndex] = docking;\n      }\n\n      // pass hints about actual moved bendpoint\n      // useful for connection/label layout\n      hints = {\n        bendpointMove: {\n          insert: insert,\n          bendpointIndex: bendpointIndex\n        }\n      };\n\n      newWaypoints = this.cropWaypoints(connection, newWaypoints);\n\n      modeling.updateWaypoints(connection, filterRedundantWaypoints(newWaypoints), hints);\n    } else {\n      if (type === RECONNECT_START) {\n        hints.docking = 'source';\n\n        if (isReverse(context)) {\n          hints.docking = 'target';\n\n          hints.newWaypoints = newWaypoints.reverse();\n        }\n      } else if (type === RECONNECT_END) {\n        hints.docking = 'target';\n\n        if (isReverse(context)) {\n          hints.docking = 'source';\n\n          hints.newWaypoints = newWaypoints.reverse();\n        }\n      }\n\n      modeling.reconnect(connection, source, target, docking, hints);\n    }\n  }, this);\n}\n\nBendpointMove.$inject = [\n  'injector',\n  'eventBus',\n  'canvas',\n  'dragging',\n  'rules',\n  'modeling'\n];\n\nBendpointMove.prototype.cropWaypoints = function(connection, newWaypoints) {\n  var connectionDocking = this._injector.get('connectionDocking', false);\n\n  if (!connectionDocking) {\n    return newWaypoints;\n  }\n\n  var waypoints = connection.waypoints;\n\n  connection.waypoints = newWaypoints;\n\n  connection.waypoints = connectionDocking.getCroppedWaypoints(connection);\n\n  newWaypoints = connection.waypoints;\n\n  connection.waypoints = waypoints;\n\n  return newWaypoints;\n};\n\n\n// helpers //////////\n\nexport function isReverse(context) {\n  var hover = context.hover,\n      source = context.source,\n      target = context.target,\n      type = context.type;\n\n  if (type === RECONNECT_START) {\n    return hover && target && hover === target && source !== target;\n  }\n\n  if (type === RECONNECT_END) {\n    return hover && source && hover === source && source !== target;\n  }\n}","import {\n  classes as svgClasses,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport { addBendpoint } from './BendpointUtil';\n\nimport { translate } from '../../util/SvgTransformUtil';\n\nimport { isReverse } from './BendpointMove';\n\nvar RECONNECT_START = 'reconnectStart',\n    RECONNECT_END = 'reconnectEnd',\n    UPDATE_WAYPOINTS = 'updateWaypoints';\n\nvar MARKER_OK = 'connect-ok',\n    MARKER_NOT_OK = 'connect-not-ok',\n    MARKER_CONNECT_HOVER = 'connect-hover',\n    MARKER_CONNECT_UPDATING = 'djs-updating',\n    MARKER_ELEMENT_HIDDEN = 'djs-element-hidden';\n\nvar HIGH_PRIORITY = 1100;\n\n/**\n * Preview connection while moving bendpoints.\n */\nexport default function BendpointMovePreview(bendpointMove, injector, eventBus, canvas) {\n  this._injector = injector;\n\n  var connectionPreview = injector.get('connectionPreview', false);\n\n  eventBus.on('bendpoint.move.start', function(event) {\n    var context = event.context,\n        bendpointIndex = context.bendpointIndex,\n        connection = context.connection,\n        insert = context.insert,\n        waypoints = connection.waypoints,\n        newWaypoints = waypoints.slice();\n\n    context.waypoints = waypoints;\n\n    if (insert) {\n\n      // insert placeholder for new bendpoint\n      newWaypoints.splice(bendpointIndex, 0, { x: event.x, y: event.y });\n    }\n\n    connection.waypoints = newWaypoints;\n\n    // add dragger gfx\n    var draggerGfx = context.draggerGfx = addBendpoint(canvas.getLayer('overlays'));\n\n    svgClasses(draggerGfx).add('djs-dragging');\n\n    canvas.addMarker(connection, MARKER_ELEMENT_HIDDEN);\n    canvas.addMarker(connection, MARKER_CONNECT_UPDATING);\n  });\n\n  eventBus.on('bendpoint.move.hover', function(event) {\n    var context = event.context,\n        allowed = context.allowed,\n        hover = context.hover,\n        type = context.type;\n\n    if (hover) {\n      canvas.addMarker(hover, MARKER_CONNECT_HOVER);\n\n      if (type === UPDATE_WAYPOINTS) {\n        return;\n      }\n\n      if (allowed) {\n        canvas.removeMarker(hover, MARKER_NOT_OK);\n        canvas.addMarker(hover, MARKER_OK);\n      } else if (allowed === false) {\n        canvas.removeMarker(hover, MARKER_OK);\n        canvas.addMarker(hover, MARKER_NOT_OK);\n      }\n    }\n  });\n\n  eventBus.on([\n    'bendpoint.move.out',\n    'bendpoint.move.cleanup'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        hover = context.hover,\n        target = context.target;\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_CONNECT_HOVER);\n      canvas.removeMarker(hover, target ? MARKER_OK : MARKER_NOT_OK);\n    }\n  });\n\n  eventBus.on('bendpoint.move.move', function(event) {\n    var context = event.context,\n        allowed = context.allowed,\n        bendpointIndex = context.bendpointIndex,\n        draggerGfx = context.draggerGfx,\n        hover = context.hover,\n        type = context.type,\n        connection = context.connection,\n        source = connection.source,\n        target = connection.target,\n        newWaypoints = connection.waypoints.slice(),\n        bendpoint = { x: event.x, y: event.y },\n        hints;\n\n    if (connectionPreview) {\n      hints = {\n        source: source,\n        target: target\n      };\n\n      if (type === RECONNECT_START) {\n        if (isReverse(context)) {\n          hints.connectionEnd = bendpoint;\n          hints.source = target;\n          hints.target = hover || source;\n\n          newWaypoints = newWaypoints.reverse();\n        } else {\n          hints.connectionStart = bendpoint;\n          hints.source = hover || source;\n        }\n      } else if (type === RECONNECT_END) {\n        if (isReverse(context)) {\n          hints.connectionStart = bendpoint;\n          hints.target = source;\n          hints.source = hover || target;\n\n          newWaypoints = newWaypoints.reverse();\n        } else {\n          hints.connectionEnd = bendpoint;\n          hints.target = hover || target;\n        }\n\n      } else {\n        hints.noCropping = true;\n        hints.noLayout = true;\n        newWaypoints[ bendpointIndex ] = bendpoint;\n      }\n\n      if (type === UPDATE_WAYPOINTS) {\n        newWaypoints = bendpointMove.cropWaypoints(connection, newWaypoints);\n      }\n\n      hints.waypoints = newWaypoints;\n\n      connectionPreview.drawPreview(context, allowed, hints);\n    }\n\n    translate(draggerGfx, event.x, event.y);\n  }, this);\n\n  eventBus.on([\n    'bendpoint.move.end',\n    'bendpoint.move.cancel'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        connection = context.connection,\n        draggerGfx = context.draggerGfx,\n        hover = context.hover,\n        target = context.target,\n        waypoints = context.waypoints;\n\n    connection.waypoints = waypoints;\n\n    // remove dragger gfx\n    svgRemove(draggerGfx);\n\n    canvas.removeMarker(connection, MARKER_CONNECT_UPDATING);\n    canvas.removeMarker(connection, MARKER_ELEMENT_HIDDEN);\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_OK);\n      canvas.removeMarker(hover, target ? MARKER_OK : MARKER_NOT_OK);\n    }\n\n    if (connectionPreview) {\n      connectionPreview.cleanUp(context);\n    }\n  });\n}\n\nBendpointMovePreview.$inject = [\n  'bendpointMove',\n  'injector',\n  'eventBus',\n  'canvas'\n];","import {\n  pointsAligned,\n  pointsOnLine\n} from '../../util/Geometry';\n\nimport {\n  addSegmentDragger,\n  getConnectionIntersection\n} from './BendpointUtil';\n\nimport {\n  getMid,\n  getOrientation\n} from '../../layout/LayoutUtil';\n\nvar MARKER_CONNECT_HOVER = 'connect-hover',\n    MARKER_CONNECT_UPDATING = 'djs-updating';\n\nimport {\n  classes as svgClasses,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  translate\n} from '../../util/SvgTransformUtil';\n\n\nfunction axisAdd(point, axis, delta) {\n  return axisSet(point, axis, point[axis] + delta);\n}\n\nfunction axisSet(point, axis, value) {\n  return {\n    x: (axis === 'x' ? value : point.x),\n    y: (axis === 'y' ? value : point.y)\n  };\n}\n\nfunction axisFenced(position, segmentStart, segmentEnd, axis) {\n\n  var maxValue = Math.max(segmentStart[axis], segmentEnd[axis]),\n      minValue = Math.min(segmentStart[axis], segmentEnd[axis]);\n\n  var padding = 20;\n\n  var fencedValue = Math.min(Math.max(minValue + padding, position[axis]), maxValue - padding);\n\n  return axisSet(segmentStart, axis, fencedValue);\n}\n\nfunction flipAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\n\n/**\n * Get the docking point on the given element.\n *\n * Compute a reasonable docking, if non exists.\n *\n * @param  {Point} point\n * @param  {djs.model.Shape} referenceElement\n * @param  {String} moveAxis (x|y)\n *\n * @return {Point}\n */\nfunction getDocking(point, referenceElement, moveAxis) {\n\n  var referenceMid,\n      inverseAxis;\n\n  if (point.original) {\n    return point.original;\n  } else {\n    referenceMid = getMid(referenceElement);\n    inverseAxis = flipAxis(moveAxis);\n\n    return axisSet(point, inverseAxis, referenceMid[inverseAxis]);\n  }\n}\n\n/**\n * A component that implements moving of bendpoints\n */\nexport default function ConnectionSegmentMove(\n    injector, eventBus, canvas,\n    dragging, graphicsFactory, modeling) {\n\n  // optional connection docking integration\n  var connectionDocking = injector.get('connectionDocking', false);\n\n\n  // API\n\n  this.start = function(event, connection, idx) {\n\n    var context,\n        gfx = canvas.getGraphics(connection),\n        segmentStartIndex = idx - 1,\n        segmentEndIndex = idx,\n        waypoints = connection.waypoints,\n        segmentStart = waypoints[segmentStartIndex],\n        segmentEnd = waypoints[segmentEndIndex],\n        intersection = getConnectionIntersection(canvas, waypoints, event),\n        direction, axis, dragPosition;\n\n    direction = pointsAligned(segmentStart, segmentEnd);\n\n    // do not move diagonal connection\n    if (!direction) {\n      return;\n    }\n\n    // the axis where we are going to move things\n    axis = direction === 'v' ? 'x' : 'y';\n\n    if (segmentStartIndex === 0) {\n      segmentStart = getDocking(segmentStart, connection.source, axis);\n    }\n\n    if (segmentEndIndex === waypoints.length - 1) {\n      segmentEnd = getDocking(segmentEnd, connection.target, axis);\n    }\n\n    if (intersection) {\n      dragPosition = intersection.point;\n    } else {\n\n      // set to segment center as default\n      dragPosition = {\n        x: (segmentStart.x + segmentEnd.x) / 2,\n        y: (segmentStart.y + segmentEnd.y) / 2\n      };\n    }\n\n    context = {\n      connection: connection,\n      segmentStartIndex: segmentStartIndex,\n      segmentEndIndex: segmentEndIndex,\n      segmentStart: segmentStart,\n      segmentEnd: segmentEnd,\n      axis: axis,\n      dragPosition: dragPosition\n    };\n\n    dragging.init(event, dragPosition, 'connectionSegment.move', {\n      cursor: axis === 'x' ? 'resize-ew' : 'resize-ns',\n      data: {\n        connection: connection,\n        connectionGfx: gfx,\n        context: context\n      }\n    });\n  };\n\n  /**\n   * Crop connection if connection cropping is provided.\n   *\n   * @param {Connection} connection\n   * @param {Array<Point>} newWaypoints\n   *\n   * @return {Array<Point>} cropped connection waypoints\n   */\n  function cropConnection(connection, newWaypoints) {\n\n    // crop connection, if docking service is provided only\n    if (!connectionDocking) {\n      return newWaypoints;\n    }\n\n    var oldWaypoints = connection.waypoints,\n        croppedWaypoints;\n\n    // temporary set new waypoints\n    connection.waypoints = newWaypoints;\n\n    croppedWaypoints = connectionDocking.getCroppedWaypoints(connection);\n\n    // restore old waypoints\n    connection.waypoints = oldWaypoints;\n\n    return croppedWaypoints;\n  }\n\n  // DRAGGING IMPLEMENTATION\n\n  function redrawConnection(data) {\n    graphicsFactory.update('connection', data.connection, data.connectionGfx);\n  }\n\n  function updateDragger(context, segmentOffset, event) {\n\n    var newWaypoints = context.newWaypoints,\n        segmentStartIndex = context.segmentStartIndex + segmentOffset,\n        segmentStart = newWaypoints[segmentStartIndex],\n        segmentEndIndex = context.segmentEndIndex + segmentOffset,\n        segmentEnd = newWaypoints[segmentEndIndex],\n        axis = flipAxis(context.axis);\n\n    // make sure the dragger does not move\n    // outside the connection\n    var draggerPosition = axisFenced(event, segmentStart, segmentEnd, axis);\n\n    // update dragger\n    translate(context.draggerGfx, draggerPosition.x, draggerPosition.y);\n  }\n\n  /**\n   * Filter waypoints for redundant ones (i.e. on the same axis).\n   * Returns the filtered waypoints and the offset related to the segment move.\n   *\n   * @param {Array<Point>} waypoints\n   * @param {Integer} segmentStartIndex of moved segment start\n   *\n   * @return {Object} { filteredWaypoints, segmentOffset }\n   */\n  function filterRedundantWaypoints(waypoints, segmentStartIndex) {\n\n    var segmentOffset = 0;\n\n    var filteredWaypoints = waypoints.filter(function(r, idx) {\n      if (pointsOnLine(waypoints[idx - 1], waypoints[idx + 1], r)) {\n\n        // remove point and increment offset\n        segmentOffset = idx <= segmentStartIndex ? segmentOffset - 1 : segmentOffset;\n        return false;\n      }\n\n      // dont remove point\n      return true;\n    });\n\n    return {\n      waypoints: filteredWaypoints,\n      segmentOffset: segmentOffset\n    };\n  }\n\n  eventBus.on('connectionSegment.move.start', function(event) {\n\n    var context = event.context,\n        connection = event.connection,\n        layer = canvas.getLayer('overlays');\n\n    context.originalWaypoints = connection.waypoints.slice();\n\n    // add dragger gfx\n    context.draggerGfx = addSegmentDragger(layer, context.segmentStart, context.segmentEnd);\n    svgClasses(context.draggerGfx).add('djs-dragging');\n\n    canvas.addMarker(connection, MARKER_CONNECT_UPDATING);\n  });\n\n  eventBus.on('connectionSegment.move.move', function(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        segmentStartIndex = context.segmentStartIndex,\n        segmentEndIndex = context.segmentEndIndex,\n        segmentStart = context.segmentStart,\n        segmentEnd = context.segmentEnd,\n        axis = context.axis;\n\n    var newWaypoints = context.originalWaypoints.slice(),\n        newSegmentStart = axisAdd(segmentStart, axis, event['d' + axis]),\n        newSegmentEnd = axisAdd(segmentEnd, axis, event['d' + axis]);\n\n    // original waypoint count and added / removed\n    // from start waypoint delta. We use the later\n    // to retrieve the updated segmentStartIndex / segmentEndIndex\n    var waypointCount = newWaypoints.length,\n        segmentOffset = 0;\n\n    // move segment start / end by axis delta\n    newWaypoints[segmentStartIndex] = newSegmentStart;\n    newWaypoints[segmentEndIndex] = newSegmentEnd;\n\n    var sourceToSegmentOrientation,\n        targetToSegmentOrientation;\n\n    // handle first segment\n    if (segmentStartIndex < 2) {\n      sourceToSegmentOrientation = getOrientation(connection.source, newSegmentStart);\n\n      // first bendpoint, remove first segment if intersecting\n      if (segmentStartIndex === 1) {\n\n        if (sourceToSegmentOrientation === 'intersect') {\n          newWaypoints.shift();\n          newWaypoints[0] = newSegmentStart;\n          segmentOffset--;\n        }\n      }\n\n      // docking point, add segment if not intersecting anymore\n      else {\n        if (sourceToSegmentOrientation !== 'intersect') {\n          newWaypoints.unshift(segmentStart);\n          segmentOffset++;\n        }\n      }\n    }\n\n    // handle last segment\n    if (segmentEndIndex > waypointCount - 3) {\n      targetToSegmentOrientation = getOrientation(connection.target, newSegmentEnd);\n\n      // last bendpoint, remove last segment if intersecting\n      if (segmentEndIndex === waypointCount - 2) {\n\n        if (targetToSegmentOrientation === 'intersect') {\n          newWaypoints.pop();\n          newWaypoints[newWaypoints.length - 1] = newSegmentEnd;\n        }\n      }\n\n      // last bendpoint, remove last segment if intersecting\n      else {\n        if (targetToSegmentOrientation !== 'intersect') {\n          newWaypoints.push(segmentEnd);\n        }\n      }\n    }\n\n    // update connection waypoints\n    context.newWaypoints = connection.waypoints = cropConnection(connection, newWaypoints);\n\n    // update dragger position\n    updateDragger(context, segmentOffset, event);\n\n    // save segmentOffset in context\n    context.newSegmentStartIndex = segmentStartIndex + segmentOffset;\n\n    // redraw connection\n    redrawConnection(event);\n  });\n\n  eventBus.on('connectionSegment.move.hover', function(event) {\n\n    event.context.hover = event.hover;\n    canvas.addMarker(event.hover, MARKER_CONNECT_HOVER);\n  });\n\n  eventBus.on([\n    'connectionSegment.move.out',\n    'connectionSegment.move.cleanup'\n  ], function(event) {\n\n    // remove connect marker\n    // if it was added\n    var hover = event.context.hover;\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_CONNECT_HOVER);\n    }\n  });\n\n  eventBus.on('connectionSegment.move.cleanup', function(event) {\n\n    var context = event.context,\n        connection = context.connection;\n\n    // remove dragger gfx\n    if (context.draggerGfx) {\n      svgRemove(context.draggerGfx);\n    }\n\n    canvas.removeMarker(connection, MARKER_CONNECT_UPDATING);\n  });\n\n  eventBus.on([\n    'connectionSegment.move.cancel',\n    'connectionSegment.move.end'\n  ], function(event) {\n    var context = event.context,\n        connection = context.connection;\n\n    connection.waypoints = context.originalWaypoints;\n\n    redrawConnection(event);\n  });\n\n  eventBus.on('connectionSegment.move.end', function(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        newWaypoints = context.newWaypoints,\n        newSegmentStartIndex = context.newSegmentStartIndex;\n\n    // ensure we have actual pixel values bendpoint\n    // coordinates (important when zoom level was > 1 during move)\n    newWaypoints = newWaypoints.map(function(p) {\n      return {\n        original: p.original,\n        x: Math.round(p.x),\n        y: Math.round(p.y)\n      };\n    });\n\n    // apply filter redunant waypoints\n    var filtered = filterRedundantWaypoints(newWaypoints, newSegmentStartIndex);\n\n    // get filtered waypoints\n    var filteredWaypoints = filtered.waypoints,\n        croppedWaypoints = cropConnection(connection, filteredWaypoints),\n        segmentOffset = filtered.segmentOffset;\n\n    var hints = {\n      segmentMove: {\n        segmentStartIndex: context.segmentStartIndex,\n        newSegmentStartIndex: newSegmentStartIndex + segmentOffset\n      }\n    };\n\n    modeling.updateWaypoints(connection, croppedWaypoints, hints);\n  });\n}\n\nConnectionSegmentMove.$inject = [\n  'injector',\n  'eventBus',\n  'canvas',\n  'dragging',\n  'graphicsFactory',\n  'modeling'\n];\n","var abs = Math.abs,\n    round = Math.round;\n\n\n/**\n * Snap value to a collection of reference values.\n *\n * @param  {Number} value\n * @param  {Array<Number>} values\n * @param  {Number} [tolerance=10]\n *\n * @return {Number} the value we snapped to or null, if none snapped\n */\nexport function snapTo(value, values, tolerance) {\n  tolerance = tolerance === undefined ? 10 : tolerance;\n\n  var idx, snapValue;\n\n  for (idx = 0; idx < values.length; idx++) {\n    snapValue = values[idx];\n\n    if (abs(snapValue - value) <= tolerance) {\n      return snapValue;\n    }\n  }\n}\n\n\nexport function topLeft(bounds) {\n  return {\n    x: bounds.x,\n    y: bounds.y\n  };\n}\n\nexport function topRight(bounds) {\n  return {\n    x: bounds.x + bounds.width,\n    y: bounds.y\n  };\n}\n\nexport function bottomLeft(bounds) {\n  return {\n    x: bounds.x,\n    y: bounds.y + bounds.height\n  };\n}\n\nexport function bottomRight(bounds) {\n  return {\n    x: bounds.x + bounds.width,\n    y: bounds.y + bounds.height\n  };\n}\n\nexport function mid(bounds, defaultValue) {\n\n  if (!bounds || isNaN(bounds.x) || isNaN(bounds.y)) {\n    return defaultValue;\n  }\n\n  return {\n    x: round(bounds.x + bounds.width / 2),\n    y: round(bounds.y + bounds.height / 2)\n  };\n}\n\n\n/**\n * Retrieve the snap state of the given event.\n *\n * @param  {Event} event\n * @param  {String} axis\n *\n * @return {Boolean} the snapped state\n *\n */\nexport function isSnapped(event, axis) {\n  var snapped = event.snapped;\n\n  if (!snapped) {\n    return false;\n  }\n\n  if (typeof axis === 'string') {\n    return snapped[axis];\n  }\n\n  return snapped.x && snapped.y;\n}\n\n\n/**\n * Set the given event as snapped.\n *\n * This method may change the x and/or y position of the shape\n * from the given event!\n *\n * @param {Event} event\n * @param {String} axis\n * @param {Number|Boolean} value\n *\n * @return {Number} old value\n */\nexport function setSnapped(event, axis, value) {\n  if (typeof axis !== 'string') {\n    throw new Error('axis must be in [x, y]');\n  }\n\n  if (typeof value !== 'number' && value !== false) {\n    throw new Error('value must be Number or false');\n  }\n\n  var delta,\n      previousValue = event[axis];\n\n  var snapped = event.snapped = (event.snapped || {});\n\n\n  if (value === false) {\n    snapped[axis] = false;\n  } else {\n    snapped[axis] = true;\n\n    delta = value - previousValue;\n\n    event[axis] += delta;\n    event['d' + axis] += delta;\n  }\n\n  return previousValue;\n}\n\n/**\n * Get children of a shape.\n *\n * @param {djs.model.Shape} parent\n *\n * @returns {Array<djs.model.Shape|djs.model.Connection>}\n */\nexport function getChildren(parent) {\n  return parent.children || [];\n}","import {\n  assign,\n  forEach,\n  isArray\n} from 'min-dash';\n\nimport { setSnapped } from '../snapping/SnapUtil';\n\nvar abs= Math.abs,\n    round = Math.round;\n\nvar TOLERANCE = 10;\n\n\nexport default function BendpointSnapping(eventBus) {\n\n  function snapTo(values, value) {\n\n    if (isArray(values)) {\n      var i = values.length;\n\n      while (i--) if (abs(values[i] - value) <= TOLERANCE) {\n        return values[i];\n      }\n    } else {\n      values = +values;\n      var rem = value % values;\n\n      if (rem < TOLERANCE) {\n        return value - rem;\n      }\n\n      if (rem > values - TOLERANCE) {\n        return value - rem + values;\n      }\n    }\n\n    return value;\n  }\n\n  function mid(element) {\n    if (element.width) {\n      return {\n        x: round(element.width / 2 + element.x),\n        y: round(element.height / 2 + element.y)\n      };\n    }\n  }\n\n  // connection segment snapping //////////////////////\n\n  function getConnectionSegmentSnaps(context) {\n\n    var snapPoints = context.snapPoints,\n        connection = context.connection,\n        waypoints = connection.waypoints,\n        segmentStart = context.segmentStart,\n        segmentStartIndex = context.segmentStartIndex,\n        segmentEnd = context.segmentEnd,\n        segmentEndIndex = context.segmentEndIndex,\n        axis = context.axis;\n\n    if (snapPoints) {\n      return snapPoints;\n    }\n\n    var referenceWaypoints = [\n      waypoints[segmentStartIndex - 1],\n      segmentStart,\n      segmentEnd,\n      waypoints[segmentEndIndex + 1]\n    ];\n\n    if (segmentStartIndex < 2) {\n      referenceWaypoints.unshift(mid(connection.source));\n    }\n\n    if (segmentEndIndex > waypoints.length - 3) {\n      referenceWaypoints.unshift(mid(connection.target));\n    }\n\n    context.snapPoints = snapPoints = { horizontal: [] , vertical: [] };\n\n    forEach(referenceWaypoints, function(p) {\n\n      // we snap on existing bendpoints only,\n      // not placeholders that are inserted during add\n      if (p) {\n        p = p.original || p;\n\n        if (axis === 'y') {\n          snapPoints.horizontal.push(p.y);\n        }\n\n        if (axis === 'x') {\n          snapPoints.vertical.push(p.x);\n        }\n      }\n    });\n\n    return snapPoints;\n  }\n\n  eventBus.on('connectionSegment.move.move', 1500, function(event) {\n    var context = event.context,\n        snapPoints = getConnectionSegmentSnaps(context),\n        x = event.x,\n        y = event.y,\n        sx, sy;\n\n    if (!snapPoints) {\n      return;\n    }\n\n    // snap\n    sx = snapTo(snapPoints.vertical, x);\n    sy = snapTo(snapPoints.horizontal, y);\n\n\n    // correction x/y\n    var cx = (x - sx),\n        cy = (y - sy);\n\n    // update delta\n    assign(event, {\n      dx: event.dx - cx,\n      dy: event.dy - cy,\n      x: sx,\n      y: sy\n    });\n\n    // only set snapped if actually snapped\n    if (cx || snapPoints.vertical.indexOf(x) !== -1) {\n      setSnapped(event, 'x', sx);\n    }\n\n    if (cy || snapPoints.horizontal.indexOf(y) !== -1) {\n      setSnapped(event, 'y', sy);\n    }\n  });\n\n\n  // bendpoint snapping //////////////////////\n\n  function getBendpointSnaps(context) {\n\n    var snapPoints = context.snapPoints,\n        waypoints = context.connection.waypoints,\n        bendpointIndex = context.bendpointIndex;\n\n    if (snapPoints) {\n      return snapPoints;\n    }\n\n    var referenceWaypoints = [ waypoints[bendpointIndex - 1], waypoints[bendpointIndex + 1] ];\n\n    context.snapPoints = snapPoints = { horizontal: [] , vertical: [] };\n\n    forEach(referenceWaypoints, function(p) {\n\n      // we snap on existing bendpoints only,\n      // not placeholders that are inserted during add\n      if (p) {\n        p = p.original || p;\n\n        snapPoints.horizontal.push(p.y);\n        snapPoints.vertical.push(p.x);\n      }\n    });\n\n    return snapPoints;\n  }\n\n\n  eventBus.on([ 'bendpoint.move.move', 'bendpoint.move.end' ], 1500, function(event) {\n\n    var context = event.context,\n        snapPoints = getBendpointSnaps(context),\n        hover = context.hover,\n        hoverMid = hover && mid(hover),\n        x = event.x,\n        y = event.y,\n        sx, sy;\n\n    if (!snapPoints) {\n      return;\n    }\n\n    // snap to hover mid\n    sx = snapTo(hoverMid ? snapPoints.vertical.concat([ hoverMid.x ]) : snapPoints.vertical, x);\n    sy = snapTo(hoverMid ? snapPoints.horizontal.concat([ hoverMid.y ]) : snapPoints.horizontal, y);\n\n    // correction x/y\n    var cx = (x - sx),\n        cy = (y - sy);\n\n    // update delta\n    assign(event, {\n      dx: event.dx - cx,\n      dy: event.dy - cy,\n      x: event.x - cx,\n      y: event.y - cy\n    });\n\n    // only set snapped if actually snapped\n    if (cx || snapPoints.vertical.indexOf(x) !== -1) {\n      setSnapped(event, 'x', sx);\n    }\n\n    if (cy || snapPoints.horizontal.indexOf(y) !== -1) {\n      setSnapped(event, 'y', sy);\n    }\n  });\n}\n\n\nBendpointSnapping.$inject = [ 'eventBus' ];","import DraggingModule from '../dragging';\nimport RulesModule from '../rules';\n\nimport Bendpoints from './Bendpoints';\nimport BendpointMove from './BendpointMove';\nimport BendpointMovePreview from './BendpointMovePreview';\nimport ConnectionSegmentMove from './ConnectionSegmentMove';\nimport BendpointSnapping from './BendpointSnapping';\n\n\nexport default {\n  __depends__: [\n    DraggingModule,\n    RulesModule\n  ],\n  __init__: [ 'bendpoints', 'bendpointSnapping', 'bendpointMovePreview' ],\n  bendpoints: [ 'type', Bendpoints ],\n  bendpointMove: [ 'type', BendpointMove ],\n  bendpointMovePreview: [ 'type', BendpointMovePreview ],\n  connectionSegmentMove: [ 'type', ConnectionSegmentMove ],\n  bendpointSnapping: [ 'type', BendpointSnapping ]\n};\n","import {\n  getMid\n} from '../../layout/LayoutUtil';\n\nimport {\n  isNil,\n  isObject\n} from 'min-dash';\n\n\nexport default function Connect(eventBus, dragging, modeling, rules) {\n\n  // rules\n\n  function canConnect(source, target) {\n    return rules.allowed('connection.create', {\n      source: source,\n      target: target\n    });\n  }\n\n  function canConnectReverse(source, target) {\n    return canConnect(target, source);\n  }\n\n\n  // event handlers\n\n  eventBus.on('connect.hover', function(event) {\n    var context = event.context,\n        start = context.start,\n        hover = event.hover,\n        canExecute;\n\n    // cache hover state\n    context.hover = hover;\n\n    canExecute = context.canExecute = canConnect(start, hover);\n\n    // ignore hover\n    if (isNil(canExecute)) {\n      return;\n    }\n\n    if (canExecute !== false) {\n      context.source = start;\n      context.target = hover;\n\n      return;\n    }\n\n    canExecute = context.canExecute = canConnectReverse(start, hover);\n\n    // ignore hover\n    if (isNil(canExecute)) {\n      return;\n    }\n\n    if (canExecute !== false) {\n      context.source = hover;\n      context.target = start;\n    }\n  });\n\n  eventBus.on([ 'connect.out', 'connect.cleanup' ], function(event) {\n    var context = event.context;\n\n    context.hover = null;\n    context.source = null;\n    context.target = null;\n\n    context.canExecute = false;\n  });\n\n  eventBus.on('connect.end', function(event) {\n    var context = event.context,\n        canExecute = context.canExecute,\n        connectionStart = context.connectionStart,\n        connectionEnd = {\n          x: event.x,\n          y: event.y\n        },\n        source = context.source,\n        target = context.target;\n\n    if (!canExecute) {\n      return false;\n    }\n\n    var attrs = null,\n        hints = {\n          connectionStart: isReverse(context) ? connectionEnd : connectionStart,\n          connectionEnd: isReverse(context) ? connectionStart : connectionEnd\n        };\n\n    if (isObject(canExecute)) {\n      attrs = canExecute;\n    }\n\n    modeling.connect(source, target, attrs, hints);\n  });\n\n\n  // API\n\n  /**\n   * Start connect operation.\n   *\n   * @param {DOMEvent} event\n   * @param {djs.model.Base} start\n   * @param {Point} [connectionStart]\n   * @param {boolean} [autoActivate=false]\n   */\n  this.start = function(event, start, connectionStart, autoActivate) {\n    if (!isObject(connectionStart)) {\n      autoActivate = connectionStart;\n      connectionStart = getMid(start);\n    }\n\n    dragging.init(event, 'connect', {\n      autoActivate: autoActivate,\n      data: {\n        shape: start,\n        context: {\n          start: start,\n          connectionStart: connectionStart\n        }\n      }\n    });\n  };\n}\n\nConnect.$inject = [\n  'eventBus',\n  'dragging',\n  'modeling',\n  'rules'\n];\n\n\n// helpers //////////\n\nexport function isReverse(context) {\n  var hover = context.hover,\n      source = context.source,\n      target = context.target;\n\n  return hover && source && hover === source && source !== target;\n}","import { isReverse } from './Connect';\n\nvar HIGH_PRIORITY = 1100,\n    LOW_PRIORITY = 900;\n\nvar MARKER_OK = 'connect-ok',\n    MARKER_NOT_OK = 'connect-not-ok';\n\n/**\n * Shows connection preview during connect.\n *\n * @param {didi.Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function ConnectPreview(injector, eventBus, canvas) {\n  var connectionPreview = injector.get('connectionPreview', false);\n\n  connectionPreview && eventBus.on('connect.move', function(event) {\n    var context = event.context,\n        canConnect = context.canExecute,\n        hover = context.hover,\n        source = context.source,\n        start = context.start,\n        startPosition = context.startPosition,\n        target = context.target;\n\n    var connectionStart = isReverse(context) ? {\n      x: event.x,\n      y: event.y\n    } : startPosition;\n\n    var connectionEnd = isReverse(context) ? startPosition : {\n      x: event.x,\n      y: event.y\n    };\n\n    connectionPreview.drawPreview(context, canConnect, {\n      source: source || start,\n      target: target || hover,\n      connectionStart: connectionStart,\n      connectionEnd: connectionEnd\n    });\n  });\n\n  eventBus.on('connect.hover', LOW_PRIORITY, function(event) {\n    var context = event.context,\n        hover = event.hover,\n        canExecute = context.canExecute;\n\n    // ignore hover\n    if (canExecute === null) {\n      return;\n    }\n\n    canvas.addMarker(hover, canExecute ? MARKER_OK : MARKER_NOT_OK);\n  });\n\n  eventBus.on([\n    'connect.out',\n    'connect.cleanup'\n  ], HIGH_PRIORITY, function(event) {\n    var hover = event.hover;\n\n    if (hover) {\n      canvas.removeMarker(hover, MARKER_OK);\n      canvas.removeMarker(hover, MARKER_NOT_OK);\n    }\n  });\n\n  connectionPreview && eventBus.on('connect.cleanup', function(event) {\n    connectionPreview.cleanUp(event.context);\n  });\n}\n\nConnectPreview.$inject = [\n  'injector',\n  'eventBus',\n  'canvas'\n];\n","import SelectionModule from '../selection';\nimport RulesModule from '../rules';\nimport DraggingModule from '../dragging';\n\nimport Connect from './Connect';\nimport ConnectPreview from './ConnectPreview';\n\nexport default {\n  __depends__: [\n    SelectionModule,\n    RulesModule,\n    DraggingModule\n  ],\n  __init__: [\n    'connectPreview'\n  ],\n  connect: [ 'type', Connect ],\n  connectPreview: [ 'type', ConnectPreview ]\n};\n","import {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove,\n  clear as svgClear\n} from 'tiny-svg';\n\nimport {\n  isObject\n} from 'min-dash';\n\nimport {\n  getElementLineIntersection,\n  getMid\n} from '../../layout/LayoutUtil';\n\n\nvar MARKER_CONNECTION_PREVIEW = 'djs-connection-preview';\n\n/**\n * Draws connection preview. Optionally, this can use layouter and connection docking to draw\n * better looking previews.\n *\n * @param {didi.Injector} injector\n * @param {Canvas} canvas\n * @param {GraphicsFactory} graphicsFactory\n * @param {ElementFactory} elementFactory\n */\nexport default function ConnectionPreview(\n    injector,\n    canvas,\n    graphicsFactory,\n    elementFactory\n) {\n  this._canvas = canvas;\n  this._graphicsFactory = graphicsFactory;\n  this._elementFactory = elementFactory;\n\n  // optional components\n  this._connectionDocking = injector.get('connectionDocking', false);\n  this._layouter = injector.get('layouter', false);\n}\n\nConnectionPreview.$inject = [\n  'injector',\n  'canvas',\n  'graphicsFactory',\n  'elementFactory'\n];\n\n/**\n * Draw connection preview.\n *\n * Provide at least one of <source, connectionStart> and <target, connectionEnd> to create a preview.\n * In the clean up stage, call `connectionPreview#cleanUp` with the context to remove preview.\n *\n * @param {Object} context\n * @param {Object|boolean} canConnect\n * @param {Object} hints\n * @param {djs.model.shape} [hints.source] source element\n * @param {djs.model.shape} [hints.target] target element\n * @param {Point} [hints.connectionStart] connection preview start\n * @param {Point} [hints.connectionEnd] connection preview end\n * @param {Array<Point>} [hints.waypoints] provided waypoints for preview\n * @param {boolean} [hints.noLayout] true if preview should not be laid out\n * @param {boolean} [hints.noCropping] true if preview should not be cropped\n * @param {boolean} [hints.noNoop] true if simple connection should not be drawn\n */\nConnectionPreview.prototype.drawPreview = function(context, canConnect, hints) {\n\n  hints = hints || {};\n\n  var connectionPreviewGfx = context.connectionPreviewGfx,\n      getConnection = context.getConnection,\n      source = hints.source,\n      target = hints.target,\n      waypoints = hints.waypoints,\n      connectionStart = hints.connectionStart,\n      connectionEnd = hints.connectionEnd,\n      noLayout = hints.noLayout,\n      noCropping = hints.noCropping,\n      noNoop = hints.noNoop,\n      connection;\n\n  var self = this;\n\n  if (!connectionPreviewGfx) {\n    connectionPreviewGfx = context.connectionPreviewGfx = this.createConnectionPreviewGfx();\n  }\n\n  svgClear(connectionPreviewGfx);\n\n  if (!getConnection) {\n    getConnection = context.getConnection = cacheReturnValues(function(canConnect, source, target) {\n      return self.getConnection(canConnect, source, target);\n    });\n  }\n\n  if (canConnect) {\n    connection = getConnection(canConnect, source, target);\n  }\n\n  if (!connection) {\n    !noNoop && this.drawNoopPreview(connectionPreviewGfx, hints);\n    return;\n  }\n\n  connection.waypoints = waypoints || [];\n\n  // optional layout\n  if (this._layouter && !noLayout) {\n    connection.waypoints = this._layouter.layoutConnection(connection, {\n      source: source,\n      target: target,\n      connectionStart: connectionStart,\n      connectionEnd: connectionEnd,\n      waypoints: hints.waypoints || connection.waypoints\n    });\n  }\n\n  // fallback if no waypoints were provided nor created with layouter\n  if (!connection.waypoints || !connection.waypoints.length) {\n    connection.waypoints = [\n      source ? getMid(source) : connectionStart,\n      target ? getMid(target) : connectionEnd\n    ];\n  }\n\n  // optional cropping\n  if (this._connectionDocking && (source || target) && !noCropping) {\n    connection.waypoints = this._connectionDocking.getCroppedWaypoints(connection, source, target);\n  }\n\n  this._graphicsFactory.drawConnection(connectionPreviewGfx, connection);\n};\n\n/**\n * Draw simple connection between source and target or provided points.\n *\n * @param {SVGElement} connectionPreviewGfx container for the connection\n * @param {Object} hints\n * @param {djs.model.shape} [hints.source] source element\n * @param {djs.model.shape} [hints.target] target element\n * @param {Point} [hints.connectionStart] required if source is not provided\n * @param {Point} [hints.connectionEnd] required if target is not provided\n */\nConnectionPreview.prototype.drawNoopPreview = function(connectionPreviewGfx, hints) {\n  var source = hints.source,\n      target = hints.target,\n      start = hints.connectionStart || getMid(source),\n      end = hints.connectionEnd || getMid(target);\n\n  var waypoints = this.cropWaypoints(start, end, source, target);\n\n  var connection = this.createNoopConnection(waypoints[0], waypoints[1]);\n\n  svgAppend(connectionPreviewGfx, connection);\n};\n\n/**\n * Return cropped waypoints.\n *\n * @param {Point} start\n * @param {Point} end\n * @param {djs.model.shape} source\n * @param {djs.model.shape} target\n *\n * @returns {Array}\n */\nConnectionPreview.prototype.cropWaypoints = function(start, end, source, target) {\n  var graphicsFactory = this._graphicsFactory,\n      sourcePath = source && graphicsFactory.getShapePath(source),\n      targetPath = target && graphicsFactory.getShapePath(target),\n      connectionPath = graphicsFactory.getConnectionPath({ waypoints: [ start, end ] });\n\n  start = (source && getElementLineIntersection(sourcePath, connectionPath, true)) || start;\n  end = (target && getElementLineIntersection(targetPath, connectionPath, false)) || end;\n\n  return [ start, end ];\n};\n\n/**\n * Remove connection preview container if it exists.\n *\n * @param {Object} [context]\n * @param {SVGElement} [context.connectionPreviewGfx] preview container\n */\nConnectionPreview.prototype.cleanUp = function(context) {\n  if (context && context.connectionPreviewGfx) {\n    svgRemove(context.connectionPreviewGfx);\n  }\n};\n\n/**\n * Get connection that connects source and target.\n *\n * @param {Object|boolean} canConnect\n *\n * @returns {djs.model.connection}\n */\nConnectionPreview.prototype.getConnection = function(canConnect) {\n  var attrs = ensureConnectionAttrs(canConnect);\n\n  return this._elementFactory.createConnection(attrs);\n};\n\n\n/**\n * Add and return preview graphics.\n *\n * @returns {SVGElement}\n */\nConnectionPreview.prototype.createConnectionPreviewGfx = function() {\n  var gfx = svgCreate('g');\n\n  svgAttr(gfx, {\n    pointerEvents: 'none'\n  });\n\n  svgClasses(gfx).add(MARKER_CONNECTION_PREVIEW);\n\n  svgAppend(this._canvas.getDefaultLayer(), gfx);\n\n  return gfx;\n};\n\n/**\n * Create and return simple connection.\n *\n * @param {Point} start\n * @param {Point} end\n *\n * @returns {SVGElement}\n */\nConnectionPreview.prototype.createNoopConnection = function(start, end) {\n  var connection = svgCreate('polyline');\n\n  svgAttr(connection, {\n    'stroke': '#333',\n    'strokeDasharray': [ 1 ],\n    'strokeWidth': 2,\n    'pointer-events': 'none'\n  });\n\n  svgAttr(connection, { 'points': [ start.x, start.y, end.x, end.y ] });\n\n  return connection;\n};\n\n// helpers //////////\n\n/**\n * Returns function that returns cached return values referenced by stringified first argument.\n *\n * @param {Function} fn\n *\n * @return {Function}\n */\nfunction cacheReturnValues(fn) {\n  var returnValues = {};\n\n  /**\n   * Return cached return value referenced by stringified first argument.\n   *\n   * @returns {*}\n   */\n  return function(firstArgument) {\n    var key = JSON.stringify(firstArgument);\n\n    var returnValue = returnValues[key];\n\n    if (!returnValue) {\n      returnValue = returnValues[key] = fn.apply(null, arguments);\n    }\n\n    return returnValue;\n  };\n}\n\n/**\n * Ensure connection attributes is object.\n *\n * @param {Object|boolean} canConnect\n *\n * @returns {Object}\n */\nfunction ensureConnectionAttrs(canConnect) {\n  if (isObject(canConnect)) {\n    return canConnect;\n  } else {\n    return {};\n  }\n}\n","import ConnectionPreview from './ConnectionPreview';\n\nexport default {\n  __init__: [ 'connectionPreview' ],\n  connectionPreview: [ 'type', ConnectionPreview ]\n};\n","import {\n  assign,\n  bind,\n  pick\n} from 'min-dash';\n\nimport {\n  domify,\n  query as domQuery,\n  event as domEvent,\n  remove as domRemove\n} from 'min-dom';\n\nvar min = Math.min,\n    max = Math.max;\n\nfunction preventDefault(e) {\n  e.preventDefault();\n}\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n}\n\nfunction isTextNode(node) {\n  return node.nodeType === Node.TEXT_NODE;\n}\n\nfunction toArray(nodeList) {\n  return [].slice.call(nodeList);\n}\n\n/**\n * Initializes a container for a content editable div.\n *\n * Structure:\n *\n * container\n *   parent\n *     content\n *     resize-handle\n *\n * @param {object} options\n * @param {DOMElement} options.container The DOM element to append the contentContainer to\n * @param {Function} options.keyHandler Handler for key events\n * @param {Function} options.resizeHandler Handler for resize events\n */\nexport default function TextBox(options) {\n  this.container = options.container;\n\n  this.parent = domify(\n    '<div class=\"djs-direct-editing-parent\">' +\n      '<div class=\"djs-direct-editing-content\" contenteditable=\"true\"></div>' +\n    '</div>'\n  );\n\n  this.content = domQuery('[contenteditable]', this.parent);\n\n  this.keyHandler = options.keyHandler || function() {};\n  this.resizeHandler = options.resizeHandler || function() {};\n\n  this.autoResize = bind(this.autoResize, this);\n  this.handlePaste = bind(this.handlePaste, this);\n}\n\n\n/**\n * Create a text box with the given position, size, style and text content\n *\n * @param {Object} bounds\n * @param {Number} bounds.x absolute x position\n * @param {Number} bounds.y absolute y position\n * @param {Number} [bounds.width] fixed width value\n * @param {Number} [bounds.height] fixed height value\n * @param {Number} [bounds.maxWidth] maximum width value\n * @param {Number} [bounds.maxHeight] maximum height value\n * @param {Number} [bounds.minWidth] minimum width value\n * @param {Number} [bounds.minHeight] minimum height value\n * @param {Object} [style]\n * @param {String} value text content\n *\n * @return {DOMElement} The created content DOM element\n */\nTextBox.prototype.create = function(bounds, style, value, options) {\n  var self = this;\n\n  var parent = this.parent,\n      content = this.content,\n      container = this.container;\n\n  options = this.options = options || {};\n\n  style = this.style = style || {};\n\n  var parentStyle = pick(style, [\n    'width',\n    'height',\n    'maxWidth',\n    'maxHeight',\n    'minWidth',\n    'minHeight',\n    'left',\n    'top',\n    'backgroundColor',\n    'position',\n    'overflow',\n    'border',\n    'wordWrap',\n    'textAlign',\n    'outline',\n    'transform'\n  ]);\n\n  assign(parent.style, {\n    width: bounds.width + 'px',\n    height: bounds.height + 'px',\n    maxWidth: bounds.maxWidth + 'px',\n    maxHeight: bounds.maxHeight + 'px',\n    minWidth: bounds.minWidth + 'px',\n    minHeight: bounds.minHeight + 'px',\n    left: bounds.x + 'px',\n    top: bounds.y + 'px',\n    backgroundColor: '#ffffff',\n    position: 'absolute',\n    overflow: 'visible',\n    border: '1px solid #ccc',\n    boxSizing: 'border-box',\n    wordWrap: 'normal',\n    textAlign: 'center',\n    outline: 'none'\n  }, parentStyle);\n\n  var contentStyle = pick(style, [\n    'fontFamily',\n    'fontSize',\n    'fontWeight',\n    'lineHeight',\n    'padding',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft'\n  ]);\n\n  assign(content.style, {\n    boxSizing: 'border-box',\n    width: '100%',\n    outline: 'none',\n    wordWrap: 'break-word'\n  }, contentStyle);\n\n  if (options.centerVertically) {\n    assign(content.style, {\n      position: 'absolute',\n      top: '50%',\n      transform: 'translate(0, -50%)'\n    }, contentStyle);\n  }\n\n  content.innerText = value;\n\n  domEvent.bind(content, 'keydown', this.keyHandler);\n  domEvent.bind(content, 'mousedown', stopPropagation);\n  domEvent.bind(content, 'paste', self.handlePaste);\n\n  if (options.autoResize) {\n    domEvent.bind(content, 'input', this.autoResize);\n  }\n\n  if (options.resizable) {\n    this.resizable(style);\n  }\n\n  container.appendChild(parent);\n\n  // set selection to end of text\n  this.setSelection(content.lastChild, content.lastChild && content.lastChild.length);\n\n  return parent;\n};\n\n/**\n * Intercept paste events to remove formatting from pasted text.\n */\nTextBox.prototype.handlePaste = function(e) {\n  var options = this.options,\n      style = this.style;\n\n  e.preventDefault();\n\n  var text;\n\n  if (e.clipboardData) {\n\n    // Chrome, Firefox, Safari\n    text = e.clipboardData.getData('text/plain');\n  } else {\n\n    // Internet Explorer\n    text = window.clipboardData.getData('Text');\n  }\n\n  this.insertText(text);\n\n  if (options.autoResize) {\n    var hasResized = this.autoResize(style);\n\n    if (hasResized) {\n      this.resizeHandler(hasResized);\n    }\n  }\n};\n\nTextBox.prototype.insertText = function(text) {\n\n  // insertText command not supported by Internet Explorer\n  var success = document.execCommand('insertText', false, text);\n\n  if (success) {\n    return;\n  }\n\n  this._insertTextIE(text);\n};\n\nTextBox.prototype._insertTextIE = function(text) {\n\n  // Internet Explorer\n  var range = this.getSelection(),\n      startContainer = range.startContainer,\n      endContainer = range.endContainer,\n      startOffset = range.startOffset,\n      endOffset = range.endOffset,\n      commonAncestorContainer = range.commonAncestorContainer;\n\n  var childNodesArray = toArray(commonAncestorContainer.childNodes);\n\n  var container,\n      offset;\n\n  if (isTextNode(commonAncestorContainer)) {\n    var containerTextContent = startContainer.textContent;\n\n    startContainer.textContent =\n      containerTextContent.substring(0, startOffset)\n      + text\n      + containerTextContent.substring(endOffset);\n\n    container = startContainer;\n    offset = startOffset + text.length;\n\n  } else if (startContainer === this.content && endContainer === this.content) {\n    var textNode = document.createTextNode(text);\n\n    this.content.insertBefore(textNode, childNodesArray[startOffset]);\n\n    container = textNode;\n    offset = textNode.textContent.length;\n  } else {\n    var startContainerChildIndex = childNodesArray.indexOf(startContainer),\n        endContainerChildIndex = childNodesArray.indexOf(endContainer);\n\n    childNodesArray.forEach(function(childNode, index) {\n\n      if (index === startContainerChildIndex) {\n        childNode.textContent =\n          startContainer.textContent.substring(0, startOffset) +\n          text +\n          endContainer.textContent.substring(endOffset);\n      } else if (index > startContainerChildIndex && index <= endContainerChildIndex) {\n        domRemove(childNode);\n      }\n    });\n\n    container = startContainer;\n    offset = startOffset + text.length;\n  }\n\n  if (container && offset !== undefined) {\n\n    // is necessary in Internet Explorer\n    setTimeout(function() {\n      self.setSelection(container, offset);\n    });\n  }\n};\n\n/**\n * Automatically resize element vertically to fit its content.\n */\nTextBox.prototype.autoResize = function() {\n  var parent = this.parent,\n      content = this.content;\n\n  var fontSize = parseInt(this.style.fontSize) || 12;\n\n  if (content.scrollHeight > parent.offsetHeight ||\n      content.scrollHeight < parent.offsetHeight - fontSize) {\n    var bounds = parent.getBoundingClientRect();\n\n    var height = content.scrollHeight;\n    parent.style.height = height + 'px';\n\n    this.resizeHandler({\n      width: bounds.width,\n      height: bounds.height,\n      dx: 0,\n      dy: height - bounds.height\n    });\n  }\n};\n\n/**\n * Make an element resizable by adding a resize handle.\n */\nTextBox.prototype.resizable = function() {\n  var self = this;\n\n  var parent = this.parent,\n      resizeHandle = this.resizeHandle;\n\n  var minWidth = parseInt(this.style.minWidth) || 0,\n      minHeight = parseInt(this.style.minHeight) || 0,\n      maxWidth = parseInt(this.style.maxWidth) || Infinity,\n      maxHeight = parseInt(this.style.maxHeight) || Infinity;\n\n  if (!resizeHandle) {\n    resizeHandle = this.resizeHandle = domify(\n      '<div class=\"djs-direct-editing-resize-handle\"></div>'\n    );\n\n    var startX, startY, startWidth, startHeight;\n\n    var onMouseDown = function(e) {\n      preventDefault(e);\n      stopPropagation(e);\n\n      startX = e.clientX;\n      startY = e.clientY;\n\n      var bounds = parent.getBoundingClientRect();\n\n      startWidth = bounds.width;\n      startHeight = bounds.height;\n\n      domEvent.bind(document, 'mousemove', onMouseMove);\n      domEvent.bind(document, 'mouseup', onMouseUp);\n    };\n\n    var onMouseMove = function(e) {\n      preventDefault(e);\n      stopPropagation(e);\n\n      var newWidth = min(max(startWidth + e.clientX - startX, minWidth), maxWidth);\n      var newHeight = min(max(startHeight + e.clientY - startY, minHeight), maxHeight);\n\n      parent.style.width = newWidth + 'px';\n      parent.style.height = newHeight + 'px';\n\n      self.resizeHandler({\n        width: startWidth,\n        height: startHeight,\n        dx: e.clientX - startX,\n        dy: e.clientY - startY\n      });\n    };\n\n    var onMouseUp = function(e) {\n      preventDefault(e);\n      stopPropagation(e);\n\n      domEvent.unbind(document,'mousemove', onMouseMove, false);\n      domEvent.unbind(document, 'mouseup', onMouseUp, false);\n    };\n\n    domEvent.bind(resizeHandle, 'mousedown', onMouseDown);\n  }\n\n  assign(resizeHandle.style, {\n    position: 'absolute',\n    bottom: '0px',\n    right: '0px',\n    cursor: 'nwse-resize',\n    width: '0',\n    height: '0',\n    borderTop: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid transparent',\n    borderRight: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid #ccc',\n    borderBottom: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid #ccc',\n    borderLeft: (parseInt(this.style.fontSize) / 4 || 3) + 'px solid transparent'\n  });\n\n  parent.appendChild(resizeHandle);\n};\n\n\n/**\n * Clear content and style of the textbox, unbind listeners and\n * reset CSS style.\n */\nTextBox.prototype.destroy = function() {\n  var parent = this.parent,\n      content = this.content,\n      resizeHandle = this.resizeHandle;\n\n  // clear content\n  content.innerText = '';\n\n  // clear styles\n  parent.removeAttribute('style');\n  content.removeAttribute('style');\n\n  domEvent.unbind(content, 'keydown', this.keyHandler);\n  domEvent.unbind(content, 'mousedown', stopPropagation);\n  domEvent.unbind(content, 'input', this.autoResize);\n  domEvent.unbind(content, 'paste', this.handlePaste);\n\n  if (resizeHandle) {\n    resizeHandle.removeAttribute('style');\n\n    domRemove(resizeHandle);\n  }\n\n  domRemove(parent);\n};\n\n\nTextBox.prototype.getValue = function() {\n  return this.content.innerText.trim();\n};\n\n\nTextBox.prototype.getSelection = function() {\n  var selection = window.getSelection(),\n      range = selection.getRangeAt(0);\n\n  return range;\n};\n\n\nTextBox.prototype.setSelection = function(container, offset) {\n  var range = document.createRange();\n\n  if (container === null) {\n    range.selectNodeContents(this.content);\n  } else {\n    range.setStart(container, offset);\n    range.setEnd(container, offset);\n  }\n\n  var selection = window.getSelection();\n\n  selection.removeAllRanges();\n  selection.addRange(range);\n};\n","import {\n  bind,\n  find\n} from 'min-dash';\n\nimport TextBox from './TextBox';\n\n\n/**\n * A direct editing component that allows users\n * to edit an elements text directly in the diagram\n *\n * @param {EventBus} eventBus the event bus\n */\nexport default function DirectEditing(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n\n  this._providers = [];\n  this._textbox = new TextBox({\n    container: canvas.getContainer(),\n    keyHandler: bind(this._handleKey, this),\n    resizeHandler: bind(this._handleResize, this)\n  });\n}\n\nDirectEditing.$inject = [ 'eventBus', 'canvas' ];\n\n\n/**\n * Register a direct editing provider\n\n * @param {Object} provider the provider, must expose an #activate(element) method that returns\n *                          an activation context ({ bounds: {x, y, width, height }, text }) if\n *                          direct editing is available for the given element.\n *                          Additionally the provider must expose a #update(element, value) method\n *                          to receive direct editing updates.\n */\nDirectEditing.prototype.registerProvider = function(provider) {\n  this._providers.push(provider);\n};\n\n\n/**\n * Returns true if direct editing is currently active\n *\n * @return {Boolean}\n */\nDirectEditing.prototype.isActive = function() {\n  return !!this._active;\n};\n\n\n/**\n * Cancel direct editing, if it is currently active\n */\nDirectEditing.prototype.cancel = function() {\n  if (!this._active) {\n    return;\n  }\n\n  this._fire('cancel');\n  this.close();\n};\n\n\nDirectEditing.prototype._fire = function(event, context) {\n  this._eventBus.fire('directEditing.' + event, context || { active: this._active });\n};\n\nDirectEditing.prototype.close = function() {\n  this._textbox.destroy();\n\n  this._fire('deactivate');\n\n  this._active = null;\n\n  this.resizable = undefined;\n};\n\n\nDirectEditing.prototype.complete = function() {\n\n  var active = this._active;\n\n  if (!active) {\n    return;\n  }\n\n  var containerBounds,\n      previousBounds = active.context.bounds,\n      newBounds = this.$textbox.getBoundingClientRect(),\n      newText = this.getValue(),\n      previousText = active.context.text;\n\n  if (\n    newText !== previousText ||\n    newBounds.height !== previousBounds.height ||\n    newBounds.width !== previousBounds.width\n  ) {\n    containerBounds = this._textbox.container.getBoundingClientRect();\n\n    active.provider.update(active.element, newText, active.context.text, {\n      x: newBounds.left - containerBounds.left,\n      y: newBounds.top - containerBounds.top,\n      width: newBounds.width,\n      height: newBounds.height\n    });\n  }\n\n  this._fire('complete');\n\n  this.close();\n};\n\n\nDirectEditing.prototype.getValue = function() {\n  return this._textbox.getValue();\n};\n\n\nDirectEditing.prototype._handleKey = function(e) {\n\n  // stop bubble\n  e.stopPropagation();\n\n  var key = e.keyCode || e.charCode;\n\n  // ESC\n  if (key === 27) {\n    e.preventDefault();\n    return this.cancel();\n  }\n\n  // Enter\n  if (key === 13 && !e.shiftKey) {\n    e.preventDefault();\n    return this.complete();\n  }\n};\n\n\nDirectEditing.prototype._handleResize = function(event) {\n  this._fire('resize', event);\n};\n\n\n/**\n * Activate direct editing on the given element\n *\n * @param {Object} ElementDescriptor the descriptor for a shape or connection\n * @return {Boolean} true if the activation was possible\n */\nDirectEditing.prototype.activate = function(element) {\n  if (this.isActive()) {\n    this.cancel();\n  }\n\n  // the direct editing context\n  var context;\n\n  var provider = find(this._providers, function(p) {\n    return (context = p.activate(element)) ? p : null;\n  });\n\n  // check if activation took place\n  if (context) {\n    this.$textbox = this._textbox.create(\n      context.bounds,\n      context.style,\n      context.text,\n      context.options\n    );\n\n    this._active = {\n      element: element,\n      context: context,\n      provider: provider\n    };\n\n    if (context.options && context.options.resizable) {\n      this.resizable = true;\n    }\n\n    this._fire('activate');\n  }\n\n  return !!context;\n};\n","import InteractionEventsModule from 'diagram-js/lib/features/interaction-events';\n\nimport DirectEditing from './lib/DirectEditing';\n\nexport default {\n  __depends__: [\n    InteractionEventsModule\n  ],\n  __init__: [ 'directEditing' ],\n  directEditing: [ 'type', DirectEditing ]\n};","import {\n  assign,\n  isFunction,\n  isArray,\n  forEach,\n  isDefined\n} from 'min-dash';\n\nimport {\n  delegate as domDelegate,\n  event as domEvent,\n  attr as domAttr,\n  query as domQuery,\n  classes as domClasses,\n  domify as domify\n} from 'min-dom';\n\nvar entrySelector = '.entry';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A context pad that displays element specific, contextual actions next\n * to a diagram element.\n *\n * @param {Object} config\n * @param {Boolean|Object} [config.scale={ min: 1.0, max: 1.5 }]\n * @param {Number} [config.scale.min]\n * @param {Number} [config.scale.max]\n * @param {EventBus} eventBus\n * @param {Overlays} overlays\n */\nexport default function ContextPad(config, eventBus, overlays) {\n\n  this._eventBus = eventBus;\n  this._overlays = overlays;\n\n  var scale = isDefined(config && config.scale) ? config.scale : {\n    min: 1,\n    max: 1.5\n  };\n\n  this._overlaysConfig = {\n    position: {\n      right: -9,\n      top: -6\n    },\n    scale: scale\n  };\n\n  this._current = null;\n\n  this._init();\n}\n\nContextPad.$inject = [\n  'config.contextPad',\n  'eventBus',\n  'overlays'\n];\n\n\n/**\n * Registers events needed for interaction with other components\n */\nContextPad.prototype._init = function() {\n\n  var eventBus = this._eventBus;\n\n  var self = this;\n\n  eventBus.on('selection.changed', function(e) {\n\n    var selection = e.newSelection;\n\n    if (selection.length === 1) {\n      self.open(selection[0]);\n    } else {\n      self.close();\n    }\n  });\n\n  eventBus.on('elements.delete', function(event) {\n    var elements = event.elements;\n\n    forEach(elements, function(e) {\n      if (self.isOpen(e)) {\n        self.close();\n      }\n    });\n  });\n\n  eventBus.on('element.changed', function(event) {\n    var element = event.element,\n        current = self._current;\n\n    // force reopen if element for which we are currently opened changed\n    if (current && current.element === element) {\n      self.open(element, true);\n    }\n  });\n};\n\n\n/**\n * Register a provider with the context pad\n *\n * @param  {Number} [priority=1000]\n * @param  {ContextPadProvider} provider\n *\n * @example\n * const contextPadProvider = {\n  *   getContextPadEntries: function(element) {\n  *     return function(entries) {\n  *       return {\n  *         ...entries,\n  *         'entry-1': {\n  *           label: 'My Entry',\n  *           action: function() { alert(\"I have been clicked!\"); }\n  *         }\n  *       };\n  *     }\n  *   }\n  * };\n  *\n * contextPad.registerProvider(800, contextPadProvider);\n */\nContextPad.prototype.registerProvider = function(priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('contextPad.getProviders', priority, function(event) {\n    event.providers.push(provider);\n  });\n};\n\n\n/**\n * Returns the context pad entries for a given element\n *\n * @param {djs.element.Base} element\n *\n * @return {Array<ContextPadEntryDescriptor>} list of entries\n */\nContextPad.prototype.getEntries = function(element) {\n  var providers = this._getProviders();\n\n  var entries = {};\n\n  // loop through all providers and their entries.\n  // group entries by id so that overriding an entry is possible\n  forEach(providers, function(provider) {\n    var entriesOrUpdater = provider.getContextPadEntries(element);\n\n    if (isFunction(entriesOrUpdater)) {\n      entries = entriesOrUpdater(entries);\n    } else {\n      forEach(entriesOrUpdater, function(entry, id) {\n        entries[id] = entry;\n      });\n    }\n  });\n\n  return entries;\n};\n\n\n/**\n * Trigger an action available on the opened context pad\n *\n * @param  {String} action\n * @param  {Event} event\n * @param  {Boolean} [autoActivate=false]\n */\nContextPad.prototype.trigger = function(action, event, autoActivate) {\n\n  var element = this._current.element,\n      entries = this._current.entries,\n      entry,\n      handler,\n      originalEvent,\n      button = event.delegateTarget || event.target;\n\n  if (!button) {\n    return event.preventDefault();\n  }\n\n  entry = entries[domAttr(button, 'data-action')];\n  handler = entry.action;\n\n  originalEvent = event.originalEvent || event;\n\n  // simple action (via callback function)\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      return handler(originalEvent, element, autoActivate);\n    }\n  } else {\n    if (handler[action]) {\n      return handler[action](originalEvent, element, autoActivate);\n    }\n  }\n\n  // silence other actions\n  event.preventDefault();\n};\n\n\n/**\n * Open the context pad for the given element\n *\n * @param {djs.model.Base} element\n * @param {Boolean} force if true, force reopening the context pad\n */\nContextPad.prototype.open = function(element, force) {\n  if (!force && this.isOpen(element)) {\n    return;\n  }\n\n  this.close();\n  this._updateAndOpen(element);\n};\n\nContextPad.prototype._getProviders = function(id) {\n\n  var event = this._eventBus.createEvent({\n    type: 'contextPad.getProviders',\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\nContextPad.prototype._updateAndOpen = function(element) {\n\n  var entries = this.getEntries(element),\n      pad = this.getPad(element),\n      html = pad.html;\n\n  forEach(entries, function(entry, id) {\n    var grouping = entry.group || 'default',\n        control = domify(entry.html || '<div class=\"entry\" draggable=\"true\"></div>'),\n        container;\n\n    domAttr(control, 'data-action', id);\n\n    container = domQuery('[data-group=' + grouping + ']', html);\n    if (!container) {\n      container = domify('<div class=\"group\" data-group=\"' + grouping + '\"></div>');\n      html.appendChild(container);\n    }\n\n    container.appendChild(control);\n\n    if (entry.className) {\n      addClasses(control, entry.className);\n    }\n\n    if (entry.title) {\n      domAttr(control, 'title', entry.title);\n    }\n\n    if (entry.imageUrl) {\n      control.appendChild(domify('<img src=\"' + entry.imageUrl + '\">'));\n    }\n  });\n\n  domClasses(html).add('open');\n\n  this._current = {\n    element: element,\n    pad: pad,\n    entries: entries\n  };\n\n  this._eventBus.fire('contextPad.open', { current: this._current });\n};\n\n\nContextPad.prototype.getPad = function(element) {\n  if (this.isOpen()) {\n    return this._current.pad;\n  }\n\n  var self = this;\n\n  var overlays = this._overlays;\n\n  var html = domify('<div class=\"djs-context-pad\"></div>');\n\n  var overlaysConfig = assign({\n    html: html\n  }, this._overlaysConfig);\n\n  domDelegate.bind(html, entrySelector, 'click', function(event) {\n    self.trigger('click', event);\n  });\n\n  domDelegate.bind(html, entrySelector, 'dragstart', function(event) {\n    self.trigger('dragstart', event);\n  });\n\n  // stop propagation of mouse events\n  domEvent.bind(html, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  this._overlayId = overlays.add(element, 'context-pad', overlaysConfig);\n\n  var pad = overlays.get(this._overlayId);\n\n  this._eventBus.fire('contextPad.create', { element: element, pad: pad });\n\n  return pad;\n};\n\n\n/**\n * Close the context pad\n */\nContextPad.prototype.close = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._overlays.remove(this._overlayId);\n\n  this._overlayId = null;\n\n  this._eventBus.fire('contextPad.close', { current: this._current });\n\n  this._current = null;\n};\n\n/**\n * Check if pad is open. If element is given, will check\n * if pad is opened with given element.\n *\n * @param {Element} element\n * @return {Boolean}\n */\nContextPad.prototype.isOpen = function(element) {\n  return !!this._current && (!element ? true : this._current.element === element);\n};\n\n\n\n\n// helpers //////////////////////\n\nfunction addClasses(element, classNames) {\n\n  var classes = domClasses(element);\n\n  var actualClassNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\n  actualClassNames.forEach(function(cls) {\n    classes.add(cls);\n  });\n}","import InteractionEventsModule from '../interaction-events';\nimport OverlaysModule from '../overlays';\n\nimport ContextPad from './ContextPad';\n\n\nexport default {\n  __depends__: [\n    InteractionEventsModule,\n    OverlaysModule\n  ],\n  contextPad: [ 'type', ContextPad ]\n};","import {\r\n  forEach\r\n} from 'min-dash';\r\n\r\nimport {\r\n  append as svgAppend,\r\n  attr as svgAttr,\r\n  classes as svgClasses,\r\n  clone as svgClone,\r\n  create as svgCreate,\r\n  remove as svgRemove\r\n} from 'tiny-svg';\r\n\r\nimport { query as domQuery } from 'min-dom';\r\n\r\nimport { getVisual } from '../../util/GraphicsUtil';\r\n\r\nvar MARKER_TYPES = [\r\n  'marker-start',\r\n  'marker-mid',\r\n  'marker-end'\r\n];\r\n\r\nvar NODES_CAN_HAVE_MARKER = [\r\n  'circle',\r\n  'ellipse',\r\n  'line',\r\n  'path',\r\n  'polygon',\r\n  'polyline',\r\n  'rect'\r\n];\r\n\r\n\r\n/**\r\n * Adds support for previews of moving/resizing elements.\r\n */\r\nexport default function PreviewSupport(elementRegistry, eventBus, canvas, styles) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._canvas = canvas;\r\n  this._styles = styles;\r\n\r\n  this._clonedMarkers = {};\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('drag.cleanup', function() {\r\n    forEach(self._clonedMarkers, function(clonedMarker) {\r\n      svgRemove(clonedMarker);\r\n    });\r\n\r\n    self._clonedMarkers = {};\r\n  });\r\n}\r\n\r\nPreviewSupport.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'canvas',\r\n  'styles'\r\n];\r\n\r\n\r\n/**\r\n * Returns graphics of an element.\r\n *\r\n * @param {djs.model.Base} element\r\n *\r\n * @return {SVGElement}\r\n */\r\nPreviewSupport.prototype.getGfx = function(element) {\r\n  return this._elementRegistry.getGraphics(element);\r\n};\r\n\r\n/**\r\n * Adds a move preview of a given shape to a given svg group.\r\n *\r\n * @param {djs.model.Base} element\r\n * @param {SVGElement} group\r\n * @param {SVGElement} [gfx]\r\n *\r\n * @return {SVGElement} dragger\r\n */\r\nPreviewSupport.prototype.addDragger = function(element, group, gfx) {\r\n  gfx = gfx || this.getGfx(element);\r\n\r\n  var dragger = svgClone(gfx);\r\n  var bbox = gfx.getBoundingClientRect();\r\n\r\n  this._cloneMarkers(getVisual(dragger));\r\n\r\n  svgAttr(dragger, this._styles.cls('djs-dragger', [], {\r\n    x: bbox.top,\r\n    y: bbox.left\r\n  }));\r\n\r\n  svgAppend(group, dragger);\r\n\r\n  return dragger;\r\n};\r\n\r\n/**\r\n * Adds a resize preview of a given shape to a given svg group.\r\n *\r\n * @param {djs.model.Base} element\r\n * @param {SVGElement} group\r\n *\r\n * @return {SVGElement} frame\r\n */\r\nPreviewSupport.prototype.addFrame = function(shape, group) {\r\n\r\n  var frame = svgCreate('rect', {\r\n    class: 'djs-resize-overlay',\r\n    width:  shape.width,\r\n    height: shape.height,\r\n    x: shape.x,\r\n    y: shape.y\r\n  });\r\n\r\n  svgAppend(group, frame);\r\n\r\n  return frame;\r\n};\r\n\r\n/**\r\n * Clone all markers referenced by a node and its child nodes.\r\n *\r\n * @param {SVGElement} gfx\r\n */\r\nPreviewSupport.prototype._cloneMarkers = function(gfx) {\r\n  var self = this;\r\n\r\n  if (gfx.childNodes) {\r\n\r\n    // TODO: use forEach once we drop PhantomJS\r\n    for (var i = 0; i < gfx.childNodes.length; i++) {\r\n\r\n      // recursively clone markers of child nodes\r\n      self._cloneMarkers(gfx.childNodes[ i ]);\r\n    }\r\n  }\r\n\r\n  if (!canHaveMarker(gfx)) {\r\n    return;\r\n  }\r\n\r\n  MARKER_TYPES.forEach(function(markerType) {\r\n    if (svgAttr(gfx, markerType)) {\r\n      var marker = getMarker(gfx, markerType, self._canvas.getContainer());\r\n\r\n      self._cloneMarker(gfx, marker, markerType);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Clone marker referenced by an element.\r\n *\r\n * @param {SVGElement} gfx\r\n * @param {SVGElement} marker\r\n * @param {string} markerType\r\n */\r\nPreviewSupport.prototype._cloneMarker = function(gfx, marker, markerType) {\r\n  var markerId = marker.id;\r\n\r\n  var clonedMarker = this._clonedMarkers[ markerId ];\r\n\r\n  if (!clonedMarker) {\r\n    clonedMarker = svgClone(marker);\r\n\r\n    var clonedMarkerId = markerId + '-clone';\r\n\r\n    clonedMarker.id = clonedMarkerId;\r\n\r\n    svgClasses(clonedMarker)\r\n      .add('djs-dragger')\r\n      .add('djs-dragger-marker');\r\n\r\n    this._clonedMarkers[ markerId ] = clonedMarker;\r\n\r\n    var defs = domQuery('defs', this._canvas._svg);\r\n\r\n    if (!defs) {\r\n      defs = svgCreate('defs');\r\n\r\n      svgAppend(this._canvas._svg, defs);\r\n    }\r\n\r\n    svgAppend(defs, clonedMarker);\r\n  }\r\n\r\n  var reference = idToReference(this._clonedMarkers[ markerId ].id);\r\n\r\n  svgAttr(gfx, markerType, reference);\r\n};\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Get marker of given type referenced by node.\r\n *\r\n * @param {Node} node\r\n * @param {string} markerType\r\n * @param {Node} [parentNode]\r\n *\r\n * @param {Node}\r\n */\r\nfunction getMarker(node, markerType, parentNode) {\r\n  var id = referenceToId(svgAttr(node, markerType));\r\n\r\n  return domQuery('marker#' + id, parentNode || document);\r\n}\r\n\r\n/**\r\n * Get ID of fragment within current document from its functional IRI reference.\r\n * References may use single or double quotes.\r\n *\r\n * @param {string} reference\r\n *\r\n * @returns {string}\r\n */\r\nfunction referenceToId(reference) {\r\n  return reference.match(/url\\(['\"]?#([^'\"]*)['\"]?\\)/)[1];\r\n}\r\n\r\n/**\r\n * Get functional IRI reference for given ID of fragment within current document.\r\n *\r\n * @param {string} id\r\n *\r\n * @returns {string}\r\n */\r\nfunction idToReference(id) {\r\n  return 'url(#' + id + ')';\r\n}\r\n\r\n/**\r\n * Check wether node type can have marker attributes.\r\n *\r\n * @param {Node} node\r\n *\r\n * @returns {boolean}\r\n */\r\nfunction canHaveMarker(node) {\r\n  return NODES_CAN_HAVE_MARKER.indexOf(node.nodeName) !== -1;\r\n}","import PreviewSupport from './PreviewSupport';\n\nexport default {\n  __init__: [ 'previewSupport' ],\n  previewSupport: [ 'type', PreviewSupport ]\n};\n","var MARKER_OK = 'drop-ok',\n    MARKER_NOT_OK = 'drop-not-ok',\n    MARKER_ATTACH = 'attach-ok',\n    MARKER_NEW_PARENT = 'new-parent';\n\nimport {\n  assign,\n  filter,\n  find,\n  forEach,\n  isArray,\n  isNumber,\n  map\n} from 'min-dash';\n\nimport { getBBox } from '../../util/Elements';\n\nvar PREFIX = 'create';\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * Create new elements through drag and drop.\n *\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function Create(\n    canvas,\n    dragging,\n    eventBus,\n    modeling,\n    rules\n) {\n\n  // rules //////////\n\n  /**\n   * Check wether elements can be created.\n   *\n   * @param {Array<djs.model.Base>} elements\n   * @param {djs.model.Base} target\n   * @param {Point} position\n   * @param {djs.model.Base} [source]\n   *\n   * @returns {boolean|null|Object}\n   */\n  function canCreate(elements, target, position, source) {\n    if (!target) {\n      return false;\n    }\n\n    // ignore child elements and external labels\n    elements = filter(elements, function(element) {\n      var labelTarget = element.labelTarget;\n\n      return !element.parent && !(isLabel(element) && elements.indexOf(labelTarget) !== -1);\n    });\n\n    var shape = find(elements, function(element) {\n      return !isConnection(element);\n    });\n\n    var attach = false,\n        connect = false,\n        create = false;\n\n    // (1) attaching single shapes\n    if (isSingleShape(elements)) {\n      attach = rules.allowed('shape.attach', {\n        position: position,\n        shape: shape,\n        target: target\n      });\n    }\n\n    if (!attach) {\n\n      // (2) creating elements\n      if (isSingleShape(elements)) {\n        create = rules.allowed('shape.create', {\n          position: position,\n          shape: shape,\n          source: source,\n          target: target\n        });\n      } else {\n        create = rules.allowed('elements.create', {\n          elements: elements,\n          position: position,\n          target: target\n        });\n      }\n\n    }\n\n    // (3) appending single shapes\n    if (create || attach) {\n\n      if (shape && source) {\n        connect = rules.allowed('connection.create', {\n          source: source,\n          target: shape,\n          hints: {\n            targetParent: target,\n            targetAttach: attach\n          }\n        });\n      }\n\n      return {\n        attach: attach,\n        connect: connect\n      };\n    }\n\n    // ignore wether or not elements can be created\n    if (create === null || attach === null) {\n      return null;\n    }\n\n    return false;\n  }\n\n  function setMarker(element, marker) {\n    [ MARKER_ATTACH, MARKER_OK, MARKER_NOT_OK, MARKER_NEW_PARENT ].forEach(function(m) {\n\n      if (m === marker) {\n        canvas.addMarker(element, m);\n      } else {\n        canvas.removeMarker(element, m);\n      }\n    });\n  }\n\n  // event handling //////////\n\n  eventBus.on([ 'create.move', 'create.hover' ], function(event) {\n    var context = event.context,\n        elements = context.elements,\n        hover = event.hover,\n        source = context.source;\n\n    if (!hover) {\n      context.canExecute = false;\n      context.target = null;\n\n      return;\n    }\n\n    ensureConstraints(event);\n\n    var position = {\n      x: event.x,\n      y: event.y\n    };\n\n    var canExecute = context.canExecute = hover && canCreate(elements, hover, position, source);\n\n    if (hover && canExecute !== null) {\n      context.target = hover;\n\n      if (canExecute && canExecute.attach) {\n        setMarker(hover, MARKER_ATTACH);\n      } else {\n        setMarker(hover, canExecute ? MARKER_NEW_PARENT : MARKER_NOT_OK);\n      }\n    }\n  });\n\n  eventBus.on([ 'create.end', 'create.out', 'create.cleanup' ], function(event) {\n    var hover = event.hover;\n\n    if (hover) {\n      setMarker(hover, null);\n    }\n  });\n\n  eventBus.on('create.end', function(event) {\n    var context = event.context,\n        source = context.source,\n        shape = context.shape,\n        elements = context.elements,\n        target = context.target,\n        hints = context.hints,\n        canExecute = context.canExecute,\n        attach = canExecute && canExecute.attach,\n        connect = canExecute && canExecute.connect;\n\n    if (canExecute === false || !target) {\n      return false;\n    }\n\n    ensureConstraints(event);\n\n    var position = {\n      x: event.x,\n      y: event.y\n    };\n\n    if (connect) {\n      shape = modeling.appendShape(source, shape, position, target, {\n        attach: attach,\n        connection: connect === true ? {} : connect\n      });\n    } else {\n      elements = modeling.createElements(elements, position, target, assign({}, hints, {\n        attach: attach\n      }));\n\n      // update shape\n      shape = find(elements, function(element) {\n        return !isConnection(element);\n      });\n    }\n\n    // update elements and shape\n    assign(context, {\n      elements: elements,\n      shape: shape\n    });\n\n    assign(event, {\n      elements: elements,\n      shape: shape\n    });\n  });\n\n  function cancel() {\n    var context = dragging.context();\n\n    if (context && context.prefix === PREFIX) {\n      dragging.cancel();\n    }\n  }\n\n  // cancel on <elements.changed> that is not result of <drag.end>\n  eventBus.on('create.init', function() {\n    eventBus.on('elements.changed', cancel);\n\n    eventBus.once([ 'create.cancel', 'create.end' ], HIGH_PRIORITY, function() {\n      eventBus.off('elements.changed', cancel);\n    });\n  });\n\n  // API //////////\n\n  this.start = function(event, elements, context) {\n    if (!isArray(elements)) {\n      elements = [ elements ];\n    }\n\n    var shape = find(elements, function(element) {\n      return !isConnection(element);\n    });\n\n    if (!shape) {\n\n      // at least one shape is required\n      return;\n    }\n\n    context = assign({\n      elements: elements,\n      hints: {},\n      shape: shape\n    }, context || {});\n\n    // make sure each element has x and y\n    forEach(elements, function(element) {\n      if (!isNumber(element.x)) {\n        element.x = 0;\n      }\n\n      if (!isNumber(element.y)) {\n        element.y = 0;\n      }\n    });\n\n    var bbox = getBBox(elements);\n\n    // center elements around cursor\n    forEach(elements, function(element) {\n      if (isConnection(element)) {\n        element.waypoints = map(element.waypoints, function(waypoint) {\n          return {\n            x: waypoint.x - bbox.x - bbox.width / 2,\n            y: waypoint.y - bbox.y - bbox.height / 2\n          };\n        });\n      }\n\n      assign(element, {\n        x: element.x - bbox.x - bbox.width / 2,\n        y: element.y - bbox.y - bbox.height / 2\n      });\n    });\n\n    dragging.init(event, PREFIX, {\n      cursor: 'grabbing',\n      autoActivate: true,\n      data: {\n        shape: shape,\n        elements: elements,\n        context: context\n      }\n    });\n  };\n}\n\nCreate.$inject = [\n  'canvas',\n  'dragging',\n  'eventBus',\n  'modeling',\n  'rules'\n];\n\n// helpers //////////\n\nfunction ensureConstraints(event) {\n  var context = event.context,\n      createConstraints = context.createConstraints;\n\n  if (!createConstraints) {\n    return;\n  }\n\n  if (createConstraints.left) {\n    event.x = Math.max(event.x, createConstraints.left);\n  }\n\n  if (createConstraints.right) {\n    event.x = Math.min(event.x, createConstraints.right);\n  }\n\n  if (createConstraints.top) {\n    event.y = Math.max(event.y, createConstraints.top);\n  }\n\n  if (createConstraints.bottom) {\n    event.y = Math.min(event.y, createConstraints.bottom);\n  }\n}\n\nfunction isConnection(element) {\n  return !!element.waypoints;\n}\n\nfunction isSingleShape(elements) {\n  return elements && elements.length === 1 && !isConnection(elements[0]);\n}\n\nfunction isLabel(element) {\n  return !!element.labelTarget;\n}\n","import {\r\n  translate\r\n} from '../../util/SvgTransformUtil';\r\n\r\nimport { getVisual } from '../../util/GraphicsUtil';\r\n\r\nimport {\r\n  append as svgAppend,\r\n  attr as svgAttr,\r\n  create as svgCreate,\r\n  remove as svgRemove\r\n} from 'tiny-svg';\r\n\r\nvar LOW_PRIORITY = 750;\r\n\r\n\r\nexport default function CreatePreview(\r\n    canvas,\r\n    eventBus,\r\n    graphicsFactory,\r\n    previewSupport,\r\n    styles\r\n) {\r\n  function createDragGroup(elements) {\r\n    var dragGroup = svgCreate('g');\r\n\r\n    svgAttr(dragGroup, styles.cls('djs-drag-group', [ 'no-events' ]));\r\n\r\n    var childrenGfx = svgCreate('g');\r\n\r\n    elements.forEach(function(element) {\r\n\r\n      // create graphics\r\n      var gfx;\r\n\r\n      if (element.hidden) {\r\n        return;\r\n      }\r\n\r\n      if (element.waypoints) {\r\n        gfx = graphicsFactory._createContainer('connection', childrenGfx);\r\n\r\n        graphicsFactory.drawConnection(getVisual(gfx), element);\r\n      } else {\r\n        gfx = graphicsFactory._createContainer('shape', childrenGfx);\r\n\r\n        graphicsFactory.drawShape(getVisual(gfx), element);\r\n\r\n        translate(gfx, element.x, element.y);\r\n      }\r\n\r\n      // add preview\r\n      previewSupport.addDragger(element, dragGroup, gfx);\r\n    });\r\n\r\n    return dragGroup;\r\n  }\r\n\r\n  eventBus.on('create.move', LOW_PRIORITY, function(event) {\r\n\r\n    var hover = event.hover,\r\n        context = event.context,\r\n        elements = context.elements,\r\n        dragGroup = context.dragGroup;\r\n\r\n    // lazily create previews\r\n    if (!dragGroup) {\r\n      dragGroup = context.dragGroup = createDragGroup(elements);\r\n    }\r\n\r\n    var defaultLayer;\r\n\r\n    if (hover) {\r\n      if (!dragGroup.parentNode) {\r\n        defaultLayer = canvas.getDefaultLayer();\r\n\r\n        svgAppend(defaultLayer, dragGroup);\r\n      }\r\n\r\n      translate(dragGroup, event.x, event.y);\r\n    } else {\r\n      svgRemove(dragGroup);\r\n    }\r\n  });\r\n\r\n  eventBus.on('create.cleanup', function(event) {\r\n    var context = event.context,\r\n        dragGroup = context.dragGroup;\r\n\r\n    if (dragGroup) {\r\n      svgRemove(dragGroup);\r\n    }\r\n  });\r\n}\r\n\r\nCreatePreview.$inject = [\r\n  'canvas',\r\n  'eventBus',\r\n  'graphicsFactory',\r\n  'previewSupport',\r\n  'styles'\r\n];\r\n","import DraggingModule from '../dragging';\nimport PreviewSupportModule from '../preview-support';\nimport RulesModule from '../rules';\nimport SelectionModule from '../selection';\n\nimport Create from './Create';\nimport CreatePreview from './CreatePreview';\n\n\nexport default {\n  __depends__: [\n    DraggingModule,\n    PreviewSupportModule,\n    RulesModule,\n    SelectionModule\n  ],\n  __init__: [\n    'create',\n    'createPreview'\n  ],\n  create: [ 'type', Create ],\n  createPreview: [ 'type', CreatePreview ]\n};\n","import {\n  assign,\n  forEach,\n  isFunction,\n  isDefined,\n  omit,\n  size\n} from 'min-dash';\n\nimport {\n  delegate as domDelegate,\n  domify as domify,\n  classes as domClasses,\n  attr as domAttr,\n  remove as domRemove\n} from 'min-dom';\n\nvar DATA_REF = 'data-id';\n\nvar CLOSE_EVENTS = [\n  'contextPad.close',\n  'canvas.viewbox.changing',\n  'commandStack.changed'\n];\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A popup menu that can be used to display a list of actions anywhere in the canvas.\n *\n * @param {Object} config\n * @param {Boolean|Object} [config.scale={ min: 1.0, max: 1.5 }]\n * @param {Number} [config.scale.min]\n * @param {Number} [config.scale.max]\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n *\n * @class\n * @constructor\n */\nexport default function PopupMenu(config, eventBus, canvas) {\n\n  var scale = isDefined(config && config.scale) ? config.scale : {\n    min: 1,\n    max: 1.5\n  };\n\n  this._config = {\n    scale: scale\n  };\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._providers = {};\n  this._current = {};\n}\n\nPopupMenu.$inject = [\n  'config.popupMenu',\n  'eventBus',\n  'canvas'\n];\n\n/**\n * Registers a popup menu provider\n *\n * @param  {String} id\n * @param {Number} [priority=1000]\n * @param  {Object} provider\n *\n * @example\n * const popupMenuProvider = {\n *   getPopupMenuEntries: function(element) {\n *     return {\n *       'entry-1': {\n *         label: 'My Entry',\n *         action: function() { alert(\"I have been clicked!\"); }\n *       }\n *     }\n *   }\n * };\n *\n * popupMenu.registerProvider('myMenuID', popupMenuProvider);\n */\nPopupMenu.prototype.registerProvider = function(id, priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('popupMenu.getProviders.' + id, priority, function(event) {\n    event.providers.push(provider);\n  });\n};\n\n/**\n * Determine if the popup menu has entries.\n *\n * @return {Boolean} true if empty\n */\nPopupMenu.prototype.isEmpty = function(element, providerId) {\n  if (!element) {\n    throw new Error('element parameter is missing');\n  }\n\n  if (!providerId) {\n    throw new Error('providerId parameter is missing');\n  }\n\n  var providers = this._getProviders(providerId);\n\n  if (!providers) {\n    return true;\n  }\n\n  var entries = this._getEntries(element, providers),\n      headerEntries = this._getHeaderEntries(element, providers);\n\n  var hasEntries = size(entries) > 0,\n      hasHeaderEntries = headerEntries && size(headerEntries) > 0;\n\n  return !hasEntries && !hasHeaderEntries;\n};\n\n\n/**\n * Create entries and open popup menu at given position\n *\n * @param  {Object} element\n * @param  {String} id provider id\n * @param  {Object} position\n *\n * @return {Object} popup menu instance\n */\nPopupMenu.prototype.open = function(element, id, position) {\n\n  var providers = this._getProviders(id);\n\n  if (!element) {\n    throw new Error('Element is missing');\n  }\n\n  if (!providers || !providers.length) {\n    throw new Error('No registered providers for: ' + id);\n  }\n\n  if (!position) {\n    throw new Error('the position argument is missing');\n  }\n\n  if (this.isOpen()) {\n    this.close();\n  }\n\n  this._emit('open');\n\n  var current = this._current = {\n    className: id,\n    element: element,\n    position: position\n  };\n\n  var entries = this._getEntries(element, providers),\n      headerEntries = this._getHeaderEntries(element, providers);\n\n  current.entries = assign({}, entries, headerEntries);\n\n  current.container = this._createContainer();\n\n  if (size(headerEntries)) {\n    current.container.appendChild(\n      this._createEntries(headerEntries, 'djs-popup-header')\n    );\n  }\n\n  if (size(entries)) {\n    current.container.appendChild(\n      this._createEntries(entries, 'djs-popup-body')\n    );\n  }\n\n  var canvas = this._canvas,\n      parent = canvas.getContainer();\n\n  this._attachContainer(current.container, parent, position.cursor);\n  this._bindAutoClose();\n};\n\n\n/**\n * Removes the popup menu and unbinds the event handlers.\n */\nPopupMenu.prototype.close = function() {\n\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._emit('close');\n\n  this._unbindAutoClose();\n  domRemove(this._current.container);\n  this._current.container = null;\n};\n\n\n/**\n * Determine if an open popup menu exist.\n *\n * @return {Boolean} true if open\n */\nPopupMenu.prototype.isOpen = function() {\n  return !!this._current.container;\n};\n\n\n/**\n * Trigger an action associated with an entry.\n *\n * @param {Object} event\n *\n * @return the result of the action callback, if any\n */\nPopupMenu.prototype.trigger = function(event) {\n\n  // silence other actions\n  event.preventDefault();\n\n  var element = event.delegateTarget || event.target,\n      entryId = domAttr(element, DATA_REF);\n\n  var entry = this._getEntry(entryId);\n\n  if (entry.action) {\n    return entry.action.call(null, event, entry);\n  }\n};\n\nPopupMenu.prototype._getProviders = function(id) {\n\n  var event = this._eventBus.createEvent({\n    type: 'popupMenu.getProviders.' + id,\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\nPopupMenu.prototype._getEntries = function(element, providers) {\n\n  var entries = {};\n\n  forEach(providers, function(provider) {\n\n    // handle legacy method\n    if (!provider.getPopupMenuEntries) {\n      forEach(provider.getEntries(element), function(entry) {\n        var id = entry.id;\n\n        if (!id) {\n          throw new Error('every entry must have the id property set');\n        }\n\n        entries[id] = omit(entry, [ 'id' ]);\n      });\n\n      return;\n    }\n\n    var entriesOrUpdater = provider.getPopupMenuEntries(element);\n\n    if (isFunction(entriesOrUpdater)) {\n      entries = entriesOrUpdater(entries);\n    } else {\n      forEach(entriesOrUpdater, function(entry, id) {\n        entries[id] = entry;\n      });\n    }\n  });\n\n  return entries;\n};\n\nPopupMenu.prototype._getHeaderEntries = function(element, providers) {\n\n  var entries = {};\n\n  forEach(providers, function(provider) {\n\n    // handle legacy method\n    if (!provider.getPopupMenuHeaderEntries) {\n      if (!provider.getHeaderEntries) {\n        return;\n      }\n\n      forEach(provider.getHeaderEntries(element), function(entry) {\n        var id = entry.id;\n\n        if (!id) {\n          throw new Error('every entry must have the id property set');\n        }\n\n        entries[id] = omit(entry, [ 'id' ]);\n      });\n\n      return;\n    }\n\n    var entriesOrUpdater = provider.getPopupMenuHeaderEntries(element);\n\n    if (isFunction(entriesOrUpdater)) {\n      entries = entriesOrUpdater(entries);\n    } else {\n      forEach(entriesOrUpdater, function(entry, id) {\n        entries[id] = entry;\n      });\n    }\n  });\n\n  return entries;\n\n\n};\n\n/**\n * Gets an entry instance (either entry or headerEntry) by id.\n *\n * @param  {String} entryId\n *\n * @return {Object} entry instance\n */\nPopupMenu.prototype._getEntry = function(entryId) {\n\n  var entry = this._current.entries[entryId];\n\n  if (!entry) {\n    throw new Error('entry not found');\n  }\n\n  return entry;\n};\n\nPopupMenu.prototype._emit = function(eventName) {\n  this._eventBus.fire('popupMenu.' + eventName);\n};\n\n/**\n * Creates the popup menu container.\n *\n * @return {Object} a DOM container\n */\nPopupMenu.prototype._createContainer = function() {\n  var container = domify('<div class=\"djs-popup\">'),\n      position = this._current.position,\n      className = this._current.className;\n\n  assign(container.style, {\n    position: 'absolute',\n    left: position.x + 'px',\n    top: position.y + 'px',\n    visibility: 'hidden'\n  });\n\n  domClasses(container).add(className);\n\n  return container;\n};\n\n\n/**\n * Attaches the container to the DOM.\n *\n * @param {Object} container\n * @param {Object} parent\n */\nPopupMenu.prototype._attachContainer = function(container, parent, cursor) {\n  var self = this;\n\n  // Event handler\n  domDelegate.bind(container, '.entry' ,'click', function(event) {\n    self.trigger(event);\n  });\n\n  this._updateScale(container);\n\n  // Attach to DOM\n  parent.appendChild(container);\n\n  if (cursor) {\n    this._assureIsInbounds(container, cursor);\n  }\n};\n\n\n/**\n * Updates popup style.transform with respect to the config and zoom level.\n *\n * @method _updateScale\n *\n * @param {Object} container\n */\nPopupMenu.prototype._updateScale = function(container) {\n  var zoom = this._canvas.zoom();\n\n  var scaleConfig = this._config.scale,\n      minScale,\n      maxScale,\n      scale = zoom;\n\n  if (scaleConfig !== true) {\n\n    if (scaleConfig === false) {\n      minScale = 1;\n      maxScale = 1;\n    } else {\n      minScale = scaleConfig.min;\n      maxScale = scaleConfig.max;\n    }\n\n    if (isDefined(minScale) && zoom < minScale) {\n      scale = minScale;\n    }\n\n    if (isDefined(maxScale) && zoom > maxScale) {\n      scale = maxScale;\n    }\n\n  }\n\n  setTransform(container, 'scale(' + scale + ')');\n};\n\n\n/**\n * Make sure that the menu is always fully shown\n *\n * @method function\n *\n * @param  {Object} container\n * @param  {Position} cursor {x, y}\n */\nPopupMenu.prototype._assureIsInbounds = function(container, cursor) {\n  var canvas = this._canvas,\n      clientRect = canvas._container.getBoundingClientRect();\n\n  var containerX = container.offsetLeft,\n      containerY = container.offsetTop,\n      containerWidth = container.scrollWidth,\n      containerHeight = container.scrollHeight,\n      overAxis = {},\n      left, top;\n\n  var cursorPosition = {\n    x: cursor.x - clientRect.left,\n    y: cursor.y - clientRect.top\n  };\n\n  if (containerX + containerWidth > clientRect.width) {\n    overAxis.x = true;\n  }\n\n  if (containerY + containerHeight > clientRect.height) {\n    overAxis.y = true;\n  }\n\n  if (overAxis.x && overAxis.y) {\n    left = cursorPosition.x - containerWidth + 'px';\n    top = cursorPosition.y - containerHeight + 'px';\n  } else if (overAxis.x) {\n    left = cursorPosition.x - containerWidth + 'px';\n    top = cursorPosition.y + 'px';\n  } else if (overAxis.y && cursorPosition.y < containerHeight) {\n    left = cursorPosition.x + 'px';\n    top = 10 + 'px';\n  } else if (overAxis.y) {\n    left = cursorPosition.x + 'px';\n    top = cursorPosition.y - containerHeight + 'px';\n  }\n\n  assign(container.style, { left: left, top: top }, { visibility: 'visible', 'z-index': 1000 });\n};\n\n\n/**\n * Creates a list of entries and returns them as a DOM container.\n *\n * @param {Array<Object>} entries an array of entry objects\n * @param {String} className the class name of the entry container\n *\n * @return {Object} a DOM container\n */\nPopupMenu.prototype._createEntries = function(entries, className) {\n\n  var entriesContainer = domify('<div>'),\n      self = this;\n\n  domClasses(entriesContainer).add(className);\n\n  forEach(entries, function(entry, id) {\n    var entryContainer = self._createEntry(entry, id);\n    entriesContainer.appendChild(entryContainer);\n  });\n\n  return entriesContainer;\n};\n\n\n/**\n * Creates a single entry and returns it as a DOM container.\n *\n * @param  {Object} entry\n *\n * @return {Object} a DOM container\n */\nPopupMenu.prototype._createEntry = function(entry, id) {\n\n  var entryContainer = domify('<div>'),\n      entryClasses = domClasses(entryContainer);\n\n  entryClasses.add('entry');\n\n  if (entry.className) {\n    entry.className.split(' ').forEach(function(className) {\n      entryClasses.add(className);\n    });\n  }\n\n  domAttr(entryContainer, DATA_REF, id);\n\n  if (entry.label) {\n    var label = domify('<span>');\n    label.textContent = entry.label;\n    entryContainer.appendChild(label);\n  }\n\n  if (entry.imageUrl) {\n    entryContainer.appendChild(domify('<img src=\"' + entry.imageUrl + '\" />'));\n  }\n\n  if (entry.active === true) {\n    entryClasses.add('active');\n  }\n\n  if (entry.disabled === true) {\n    entryClasses.add('disabled');\n  }\n\n  if (entry.title) {\n    entryContainer.title = entry.title;\n  }\n\n  return entryContainer;\n};\n\n\n/**\n * Set up listener to close popup automatically on certain events.\n */\nPopupMenu.prototype._bindAutoClose = function() {\n  this._eventBus.once(CLOSE_EVENTS, this.close, this);\n};\n\n\n/**\n * Remove the auto-closing listener.\n */\nPopupMenu.prototype._unbindAutoClose = function() {\n  this._eventBus.off(CLOSE_EVENTS, this.close, this);\n};\n\n\n\n// helpers /////////////////////////////\n\nfunction setTransform(element, transform) {\n  element.style['transform-origin'] = 'top left';\n\n  [ '', '-ms-', '-webkit-' ].forEach(function(prefix) {\n    element.style[prefix + 'transform'] = transform;\n  });\n}","import PopupMenu from './PopupMenu';\n\nexport default {\n  __init__: [ 'popupMenu' ],\n  popupMenu: [ 'type', PopupMenu ]\n};\n","/**\n * A clip board stub\n */\nexport default function Clipboard() {}\n\n\nClipboard.prototype.get = function() {\n  return this._data;\n};\n\nClipboard.prototype.set = function(data) {\n  this._data = data;\n};\n\nClipboard.prototype.clear = function() {\n  var data = this._data;\n\n  delete this._data;\n\n  return data;\n};\n\nClipboard.prototype.isEmpty = function() {\n  return !this._data;\n};","import Clipboard from './Clipboard';\n\nexport default {\n  clipboard: [ 'type', Clipboard ]\n};\n","export default function Mouse(eventBus) {\r\n  var self = this;\r\n\r\n  this._lastMoveEvent = null;\r\n\r\n  function setLastMoveEvent(mousemoveEvent) {\r\n    self._lastMoveEvent = mousemoveEvent;\r\n  }\r\n\r\n  eventBus.on('canvas.init', function(context) {\r\n    var svg = self._svg = context.svg;\r\n\r\n    svg.addEventListener('mousemove', setLastMoveEvent);\r\n  });\r\n\r\n  eventBus.on('canvas.destroy', function() {\r\n    self._lastMouseEvent = null;\r\n\r\n    self._svg.removeEventListener('mousemove', setLastMoveEvent);\r\n  });\r\n}\r\n\r\nMouse.$inject = [ 'eventBus' ];\r\n\r\nMouse.prototype.getLastMoveEvent = function() {\r\n  return this._lastMoveEvent || createMoveEvent(0, 0);\r\n};\r\n\r\n// helpers //////////\r\n\r\nexport function createMoveEvent(x, y) {\r\n  var event = document.createEvent('MouseEvent');\r\n\r\n  var screenX = x,\r\n      screenY = y,\r\n      clientX = x,\r\n      clientY = y;\r\n\r\n  if (event.initMouseEvent) {\r\n    event.initMouseEvent(\r\n      'mousemove',\r\n      true,\r\n      true,\r\n      window,\r\n      0,\r\n      screenX,\r\n      screenY,\r\n      clientX,\r\n      clientY,\r\n      false,\r\n      false,\r\n      false,\r\n      false,\r\n      0,\r\n      null\r\n    );\r\n  }\r\n\r\n  return event;\r\n}","import Mouse from './Mouse';\n\nexport default {\n  __init__: [ 'mouse' ],\n  mouse: [ 'type', Mouse ]\n};\n","import {\n  assign,\n  find,\n  forEach,\n  isArray,\n  isNumber,\n  map,\n  matchPattern,\n  omit,\n  sortBy\n} from 'min-dash';\n\nimport {\n  getBBox,\n  getParents\n} from '../../util/Elements';\n\nimport { eachElement } from '../../util/Elements';\n\n/**\n * @typedef {Function} <copyPaste.canCopyElements> listener\n *\n * @param {Object} context\n * @param {Array<djs.model.Base>} context.elements\n *\n * @returns {Array<djs.model.Base>|boolean} - Return elements to be copied or false to disallow\n * copying.\n */\n\n/**\n * @typedef {Function} <copyPaste.copyElement> listener\n *\n * @param {Object} context\n * @param {Object} context.descriptor\n * @param {djs.model.Base} context.element\n * @param {Array<djs.model.Base>} context.elements\n */\n\n/**\n * @typedef {Function} <copyPaste.elementsCopied> listener\n *\n * @param {Object} context\n * @param {Object} context.elements\n * @param {Object} context.tree\n */\n\n/**\n * @typedef {Function} <copyPaste.pasteElement> listener\n *\n * @param {Object} context\n * @param {Object} context.cache - Already created elements.\n * @param {Object} context.descriptor\n */\n\n/**\n * @typedef {Function} <copyPaste.pasteElements> listener\n *\n * @param {Object} context\n * @param {Object} context.hints - Add hints before pasting.\n */\n\n/**\n * Copy and paste elements.\n *\n * @param {Canvas} canvas\n * @param {Create} create\n * @param {Clipboard} clipboard\n * @param {ElementFactory} elementFactory\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Mouse} mouse\n * @param {Rules} rules\n */\nexport default function CopyPaste(\n    canvas,\n    create,\n    clipboard,\n    elementFactory,\n    eventBus,\n    modeling,\n    mouse,\n    rules\n) {\n\n  this._canvas = canvas;\n  this._create = create;\n  this._clipboard = clipboard;\n  this._elementFactory = elementFactory;\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._mouse = mouse;\n  this._rules = rules;\n\n  eventBus.on('copyPaste.copyElement', function(context) {\n    var descriptor = context.descriptor,\n        element = context.element,\n        elements = context.elements;\n\n    // default priority (priority = 1)\n    descriptor.priority = 1;\n\n    descriptor.id = element.id;\n\n    var parentCopied = find(elements, function(e) {\n      return e === element.parent;\n    });\n\n    // do NOT reference parent if parent wasn't copied\n    if (parentCopied) {\n      descriptor.parent = element.parent.id;\n    }\n\n    // attachers (priority = 2)\n    if (isAttacher(element)) {\n      descriptor.priority = 2;\n\n      descriptor.host = element.host.id;\n    }\n\n    // connections (priority = 3)\n    if (isConnection(element)) {\n      descriptor.priority = 3;\n\n      descriptor.source = element.source.id;\n      descriptor.target = element.target.id;\n\n      descriptor.waypoints = copyWaypoints(element);\n    }\n\n    // labels (priority = 4)\n    if (isLabel(element)) {\n      descriptor.priority = 4;\n\n      descriptor.labelTarget = element.labelTarget.id;\n    }\n\n    forEach([ 'x', 'y', 'width', 'height' ], function(property) {\n      if (isNumber(element[ property ])) {\n        descriptor[ property ] = element[ property ];\n      }\n    });\n\n    descriptor.hidden = element.hidden;\n    descriptor.collapsed = element.collapsed;\n\n  });\n\n  eventBus.on('copyPaste.pasteElements', function(context) {\n    var hints = context.hints;\n\n    assign(hints, {\n      createElementsBehavior: false\n    });\n  });\n}\n\nCopyPaste.$inject = [\n  'canvas',\n  'create',\n  'clipboard',\n  'elementFactory',\n  'eventBus',\n  'modeling',\n  'mouse',\n  'rules'\n];\n\n\n/**\n * Copy elements.\n *\n * @param {Array<djs.model.Base>} elements\n *\n * @returns {Object}\n */\nCopyPaste.prototype.copy = function(elements) {\n  var allowed,\n      tree;\n\n  if (!isArray(elements)) {\n    elements = elements ? [ elements ] : [];\n  }\n\n  allowed = this._eventBus.fire('copyPaste.canCopyElements', {\n    elements: elements\n  });\n\n  if (allowed === false) {\n    tree = {};\n  } else {\n    tree = this.createTree(isArray(allowed) ? allowed : elements);\n  }\n\n  // we set an empty tree, selection of elements\n  // to copy was empty.\n  this._clipboard.set(tree);\n\n  this._eventBus.fire('copyPaste.elementsCopied', {\n    elements: elements,\n    tree: tree\n  });\n\n  return tree;\n};\n\n/**\n * Paste elements.\n *\n * @param {Object} [context]\n * @param {djs.model.base} [context.element] - Parent.\n * @param {Point} [context.point] - Position.\n * @param {Object} [context.hints] - Hints.\n */\nCopyPaste.prototype.paste = function(context) {\n  var tree = this._clipboard.get();\n\n  if (this._clipboard.isEmpty()) {\n    return;\n  }\n\n  var hints = context && context.hints || {};\n\n  this._eventBus.fire('copyPaste.pasteElements', {\n    hints: hints\n  });\n\n  var elements = this._createElements(tree);\n\n  // paste directly\n  if (context && context.element && context.point) {\n    return this._paste(elements, context.element, context.point, hints);\n  }\n\n  this._create.start(this._mouse.getLastMoveEvent(), elements, {\n    hints: hints || {}\n  });\n};\n\n/**\n * Paste elements directly.\n *\n * @param {Array<djs.model.Base>} elements\n * @param {djs.model.base} target\n * @param {Point} position\n * @param {Object} [hints]\n */\nCopyPaste.prototype._paste = function(elements, target, position, hints) {\n\n  // make sure each element has x and y\n  forEach(elements, function(element) {\n    if (!isNumber(element.x)) {\n      element.x = 0;\n    }\n\n    if (!isNumber(element.y)) {\n      element.y = 0;\n    }\n  });\n\n  var bbox = getBBox(elements);\n\n  // center elements around cursor\n  forEach(elements, function(element) {\n    if (isConnection(element)) {\n      element.waypoints = map(element.waypoints, function(waypoint) {\n        return {\n          x: waypoint.x - bbox.x - bbox.width / 2,\n          y: waypoint.y - bbox.y - bbox.height / 2\n        };\n      });\n    }\n\n    assign(element, {\n      x: element.x - bbox.x - bbox.width / 2,\n      y: element.y - bbox.y - bbox.height / 2\n    });\n  });\n\n  return this._modeling.createElements(elements, position, target, assign({}, hints));\n};\n\n/**\n * Create elements from tree.\n */\nCopyPaste.prototype._createElements = function(tree) {\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var cache = {};\n\n  var elements = [];\n\n  forEach(tree, function(branch, depth) {\n\n    depth = parseInt(depth, 10);\n\n    // sort by priority\n    branch = sortBy(branch, 'priority');\n\n    forEach(branch, function(descriptor) {\n\n      // remove priority\n      var attrs = assign({}, omit(descriptor, [ 'priority' ]));\n\n      if (cache[ descriptor.parent ]) {\n        attrs.parent = cache[ descriptor.parent ];\n      } else {\n        delete attrs.parent;\n      }\n\n      eventBus.fire('copyPaste.pasteElement', {\n        cache: cache,\n        descriptor: attrs\n      });\n\n      var element;\n\n      if (isConnection(attrs)) {\n        attrs.source = cache[ descriptor.source ];\n        attrs.target = cache[ descriptor.target ];\n\n        element = cache[ descriptor.id ] = self.createConnection(attrs);\n\n        elements.push(element);\n\n        return;\n      }\n\n      if (isLabel(attrs)) {\n        attrs.labelTarget = cache[ attrs.labelTarget ];\n\n        element = cache[ descriptor.id ] = self.createLabel(attrs);\n\n        elements.push(element);\n\n        return;\n      }\n\n      if (attrs.host) {\n        attrs.host = cache[ attrs.host ];\n      }\n\n      element = cache[ descriptor.id ] = self.createShape(attrs);\n\n      elements.push(element);\n    });\n\n  });\n\n  return elements;\n};\n\nCopyPaste.prototype.createConnection = function(attrs) {\n  var connection = this._elementFactory.createConnection(omit(attrs, [ 'id' ]));\n\n  return connection;\n};\n\nCopyPaste.prototype.createLabel = function(attrs) {\n  var label = this._elementFactory.createLabel(omit(attrs, [ 'id' ]));\n\n  return label;\n};\n\nCopyPaste.prototype.createShape = function(attrs) {\n  var shape = this._elementFactory.createShape(omit(attrs, [ 'id' ]));\n\n  return shape;\n};\n\n/**\n * Check wether element has relations to other elements e.g. attachers, labels and connections.\n *\n * @param  {Object} element\n * @param  {Array<djs.model.Base>} elements\n *\n * @returns {Boolean}\n */\nCopyPaste.prototype.hasRelations = function(element, elements) {\n  var labelTarget,\n      source,\n      target;\n\n  if (isConnection(element)) {\n    source = find(elements, matchPattern({ id: element.source.id }));\n    target = find(elements, matchPattern({ id: element.target.id }));\n\n    if (!source || !target) {\n      return false;\n    }\n  }\n\n  if (isLabel(element)) {\n    labelTarget = find(elements, matchPattern({ id: element.labelTarget.id }));\n\n    if (!labelTarget) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Create a tree-like structure from elements.\n *\n * @example\n * tree: {\n  *  0: [\n  *    { id: 'Shape_1', priority: 1, ... },\n  *    { id: 'Shape_2', priority: 1, ... },\n  *    { id: 'Connection_1', source: 'Shape_1', target: 'Shape_2', priority: 3, ... },\n  *    ...\n  *  ],\n  *  1: [\n  *    { id: 'Shape_3', parent: 'Shape1', priority: 1, ... },\n  *    ...\n  *  ]\n  * };\n  *\n  * @param  {Array<djs.model.base>} elements\n  *\n  * @return {Object}\n  */\nCopyPaste.prototype.createTree = function(elements) {\n  var rules = this._rules,\n      self = this;\n\n  var tree = {},\n      elementsData = [];\n\n  var parents = getParents(elements);\n\n  function canCopy(element, elements) {\n    return rules.allowed('element.copy', {\n      element: element,\n      elements: elements\n    });\n  }\n\n  function addElementData(element, depth) {\n\n    // (1) check wether element has already been added\n    var foundElementData = find(elementsData, function(elementsData) {\n      return element === elementsData.element;\n    });\n\n    // (2) add element if not already added\n    if (!foundElementData) {\n      elementsData.push({\n        element: element,\n        depth: depth\n      });\n\n      return;\n    }\n\n    // (3) update depth\n    if (foundElementData.depth < depth) {\n      elementsData = removeElementData(foundElementData, elementsData);\n\n      elementsData.push({\n        element: foundElementData.element,\n        depth: depth\n      });\n    }\n  }\n\n  function removeElementData(elementData, elementsData) {\n    var index = elementsData.indexOf(elementData);\n\n    if (index !== -1) {\n      elementsData.splice(index, 1);\n    }\n\n    return elementsData;\n  }\n\n  // (1) add elements\n  eachElement(parents, function(element, _index, depth) {\n\n    // do NOT add external labels directly\n    if (isLabel(element)) {\n      return;\n    }\n\n    // always copy external labels\n    forEach(element.labels, function(label) {\n      addElementData(label, depth);\n    });\n\n    function addRelatedElements(elements) {\n      elements && elements.length && forEach(elements, function(element) {\n\n        // add external labels\n        forEach(element.labels, function(label) {\n          addElementData(label, depth);\n        });\n\n        addElementData(element, depth);\n      });\n    }\n\n    forEach([ element.attachers, element.incoming, element.outgoing ], addRelatedElements);\n\n    addElementData(element, depth);\n\n    return element.children;\n  });\n\n  elements = map(elementsData, function(elementData) {\n    return elementData.element;\n  });\n\n  // (2) copy elements\n  elementsData = map(elementsData, function(elementData) {\n    elementData.descriptor = {};\n\n    self._eventBus.fire('copyPaste.copyElement', {\n      descriptor: elementData.descriptor,\n      element: elementData.element,\n      elements: elements\n    });\n\n    return elementData;\n  });\n\n  // (3) sort elements by priority\n  elementsData = sortBy(elementsData, function(elementData) {\n    return elementData.descriptor.priority;\n  });\n\n  elements = map(elementsData, function(elementData) {\n    return elementData.element;\n  });\n\n  // (4) create tree\n  forEach(elementsData, function(elementData) {\n    var depth = elementData.depth;\n\n    if (!self.hasRelations(elementData.element, elements)) {\n      removeElement(elementData.element, elements);\n\n      return;\n    }\n\n    if (!canCopy(elementData.element, elements)) {\n      removeElement(elementData.element, elements);\n\n      return;\n    }\n\n    if (!tree[depth]) {\n      tree[depth] = [];\n    }\n\n    tree[depth].push(elementData.descriptor);\n  });\n\n  return tree;\n};\n\n// helpers //////////\n\nfunction isAttacher(element) {\n  return !!element.host;\n}\n\nfunction isConnection(element) {\n  return !!element.waypoints;\n}\n\nfunction isLabel(element) {\n  return !!element.labelTarget;\n}\n\nfunction copyWaypoints(element) {\n  return map(element.waypoints, function(waypoint) {\n\n    waypoint = copyWaypoint(waypoint);\n\n    if (waypoint.original) {\n      waypoint.original = copyWaypoint(waypoint.original);\n    }\n\n    return waypoint;\n  });\n}\n\nfunction copyWaypoint(waypoint) {\n  return assign({}, waypoint);\n}\n\nfunction removeElement(element, elements) {\n  var index = elements.indexOf(element);\n\n  if (index === -1) {\n    return elements;\n  }\n\n  return elements.splice(index, 1);\n}\n","import ClipboardModule from '../clipboard';\nimport CreateModule from '../create';\nimport MouseModule from '../mouse';\nimport RulesModule from '../rules';\n\nimport CopyPaste from './CopyPaste';\n\n\nexport default {\n  __depends__: [\n    ClipboardModule,\n    CreateModule,\n    MouseModule,\n    RulesModule\n  ],\n  __init__: [ 'copyPaste' ],\n  copyPaste: [ 'type', CopyPaste ]\n};\n","import {\n  getBusinessObject,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  forEach,\n  isArray,\n  isUndefined,\n  omit,\n  reduce\n} from 'min-dash';\n\nfunction copyProperties(source, target, properties) {\n  if (!isArray(properties)) {\n    properties = [ properties ];\n  }\n\n  forEach(properties, function(property) {\n    if (!isUndefined(source[property])) {\n      target[property] = source[property];\n    }\n  });\n}\n\nfunction removeProperties(element, properties) {\n  if (!isArray(properties)) {\n    properties = [ properties ];\n  }\n\n  forEach(properties, function(property) {\n    if (element[property]) {\n      delete element[property];\n    }\n  });\n}\n\nvar LOW_PRIORITY = 750;\n\n\nexport default function BpmnCopyPaste(bpmnFactory, eventBus, moddleCopy) {\n\n  eventBus.on('copyPaste.copyElement', LOW_PRIORITY, function(context) {\n    var descriptor = context.descriptor,\n        element = context.element;\n\n    var businessObject = descriptor.oldBusinessObject = getBusinessObject(element);\n\n    descriptor.type = element.type;\n\n    copyProperties(businessObject, descriptor, 'name');\n\n    descriptor.di = {};\n\n    // fill and stroke will be set to DI\n    copyProperties(businessObject.di, descriptor.di, [\n      'fill',\n      'stroke'\n    ]);\n\n    copyProperties(businessObject.di, descriptor, 'isExpanded');\n\n    if (isLabel(descriptor)) {\n      return descriptor;\n    }\n\n    // default sequence flow\n    if (businessObject.default) {\n      descriptor.default = businessObject.default.id;\n    }\n  });\n\n  eventBus.on('moddleCopy.canCopyProperty', function(context) {\n    var parent = context.parent,\n        property = context.property,\n        propertyName = context.propertyName,\n        bpmnProcess;\n\n    if (\n      propertyName === 'processRef' &&\n      is(parent, 'bpmn:Participant') &&\n      is(property, 'bpmn:Process')\n    ) {\n      bpmnProcess = bpmnFactory.create('bpmn:Process');\n\n      // return copy of process\n      return moddleCopy.copyElement(property, bpmnProcess);\n    }\n  });\n\n  var references;\n\n  function resolveReferences(descriptor, cache) {\n    var businessObject = getBusinessObject(descriptor);\n\n    // default sequence flows\n    if (descriptor.default) {\n\n      // relationship cannot be resolved immediately\n      references[ descriptor.default ] = {\n        element: businessObject,\n        property: 'default'\n      };\n    }\n\n    // boundary events\n    if (descriptor.host) {\n\n      // relationship can be resolved immediately\n      getBusinessObject(descriptor).attachedToRef = getBusinessObject(cache[ descriptor.host ]);\n    }\n\n    references = omit(references, reduce(references, function(array, reference, key) {\n      var element = reference.element,\n          property = reference.property;\n\n      if (key === descriptor.id) {\n        element[ property ] = businessObject;\n\n        array.push(descriptor.id);\n      }\n\n      return array;\n    }, []));\n  }\n\n  eventBus.on('copyPaste.pasteElements', function() {\n    references = {};\n  });\n\n  eventBus.on('copyPaste.pasteElement', function(context) {\n    var cache = context.cache,\n        descriptor = context.descriptor,\n        oldBusinessObject = descriptor.oldBusinessObject,\n        newBusinessObject;\n\n    // do NOT copy business object if external label\n    if (isLabel(descriptor)) {\n      descriptor.businessObject = getBusinessObject(cache[ descriptor.labelTarget ]);\n\n      return;\n    }\n\n    newBusinessObject = bpmnFactory.create(oldBusinessObject.$type);\n\n    descriptor.businessObject = moddleCopy.copyElement(\n      oldBusinessObject,\n      newBusinessObject\n    );\n\n    // resolve references e.g. default sequence flow\n    resolveReferences(descriptor, cache);\n\n    copyProperties(descriptor, newBusinessObject, [\n      'isExpanded',\n      'name'\n    ]);\n\n    removeProperties(descriptor, 'oldBusinessObject');\n  });\n\n}\n\n\nBpmnCopyPaste.$inject = [\n  'bpmnFactory',\n  'eventBus',\n  'moddleCopy'\n];\n\n// helpers //////////\n\nfunction isLabel(element) {\n  return !!element.labelTarget;\n}\n","import {\n  find,\n  forEach,\n  isArray,\n  isDefined,\n  isObject,\n  matchPattern,\n  reduce,\n  has,\n  sortBy\n} from 'min-dash';\n\nvar DISALLOWED_PROPERTIES = [\n  'artifacts',\n  'dataInputAssociations',\n  'dataOutputAssociations',\n  'default',\n  'flowElements',\n  'lanes',\n  'incoming',\n  'outgoing'\n];\n\n/**\n * @typedef {Function} <moddleCopy.canCopyProperties> listener\n *\n * @param {Object} context\n * @param {Array<string>} context.propertyNames\n * @param {ModdleElement} context.sourceElement\n * @param {ModdleElement} context.targetElement\n *\n * @returns {Array<string>|boolean} - Return properties to be copied or false to disallow\n * copying.\n */\n\n/**\n * @typedef {Function} <moddleCopy.canCopyProperty> listener\n *\n * @param {Object} context\n * @param {ModdleElement} context.parent\n * @param {*} context.property\n * @param {string} context.propertyName\n *\n * @returns {*|boolean} - Return copied property or false to disallow\n * copying.\n */\n\n/**\n * @typedef {Function} <moddleCopy.canSetCopiedProperty> listener\n *\n * @param {Object} context\n * @param {ModdleElement} context.parent\n * @param {*} context.property\n * @param {string} context.propertyName\n *\n * @returns {boolean} - Return false to disallow\n * setting copied property.\n */\n\n/**\n * Utility for copying model properties from source element to target element.\n *\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n * @param {BpmnModdle} moddle\n */\nexport default function ModdleCopy(eventBus, bpmnFactory, moddle) {\n  this._bpmnFactory = bpmnFactory;\n  this._eventBus = eventBus;\n  this._moddle = moddle;\n\n  // copy extension elements last\n  eventBus.on('moddleCopy.canCopyProperties', function(context) {\n    var propertyNames = context.propertyNames;\n\n    if (!propertyNames || !propertyNames.length) {\n      return;\n    }\n\n    return sortBy(propertyNames, function(propertyName) {\n      return propertyName === 'extensionElements';\n    });\n  });\n\n  // default check whether property can be copied\n  eventBus.on('moddleCopy.canCopyProperty', function(context) {\n    var parent = context.parent,\n        parentDescriptor = isObject(parent) && parent.$descriptor,\n        propertyName = context.propertyName;\n\n    if (propertyName && DISALLOWED_PROPERTIES.indexOf(propertyName) !== -1) {\n\n      // disallow copying property\n      return false;\n    }\n\n    if (propertyName &&\n      parentDescriptor &&\n      !find(parentDescriptor.properties, matchPattern({ name: propertyName }))) {\n\n      // disallow copying property\n      return false;\n    }\n  });\n\n  // do NOT allow to copy empty extension elements\n  eventBus.on('moddleCopy.canSetCopiedProperty', function(context) {\n    var property = context.property;\n\n    if (is(property, 'bpmn:ExtensionElements') && (!property.values || !property.values.length)) {\n\n      // disallow setting copied property\n      return false;\n    }\n  });\n}\n\nModdleCopy.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'moddle'\n];\n\n/**\n * Copy model properties of source element to target element.\n *\n * @param {ModdleElement} sourceElement\n * @param {ModdleElement} targetElement\n * @param {Array<string>} [propertyNames]\n *\n * @param {ModdleElement}\n */\nModdleCopy.prototype.copyElement = function(sourceElement, targetElement, propertyNames) {\n  var self = this;\n\n  if (propertyNames && !isArray(propertyNames)) {\n    propertyNames = [ propertyNames ];\n  }\n\n  propertyNames = propertyNames || getPropertyNames(sourceElement.$descriptor);\n\n  var canCopyProperties = this._eventBus.fire('moddleCopy.canCopyProperties', {\n    propertyNames: propertyNames,\n    sourceElement: sourceElement,\n    targetElement: targetElement\n  });\n\n  if (canCopyProperties === false) {\n    return targetElement;\n  }\n\n  if (isArray(canCopyProperties)) {\n    propertyNames = canCopyProperties;\n  }\n\n  // copy properties\n  forEach(propertyNames, function(propertyName) {\n    var sourceProperty;\n\n    if (has(sourceElement, propertyName)) {\n      sourceProperty = sourceElement.get(propertyName);\n    }\n\n    var copiedProperty = self.copyProperty(sourceProperty, targetElement, propertyName);\n\n    var canSetProperty = self._eventBus.fire('moddleCopy.canSetCopiedProperty', {\n      parent: parent,\n      property: copiedProperty,\n      propertyName: propertyName\n    });\n\n    if (canSetProperty === false) {\n      return;\n    }\n\n    if (isDefined(copiedProperty)) {\n      targetElement.set(propertyName, copiedProperty);\n    }\n  });\n\n  return targetElement;\n};\n\n/**\n * Copy model property.\n *\n * @param {*} property\n * @param {ModdleElement} parent\n * @param {string} propertyName\n *\n * @returns {*}\n */\nModdleCopy.prototype.copyProperty = function(property, parent, propertyName) {\n  var self = this;\n\n  // allow others to copy property\n  var copiedProperty = this._eventBus.fire('moddleCopy.canCopyProperty', {\n    parent: parent,\n    property: property,\n    propertyName: propertyName\n  });\n\n  // return if copying is NOT allowed\n  if (copiedProperty === false) {\n    return;\n  }\n\n  if (copiedProperty) {\n    if (isObject(copiedProperty) && copiedProperty.$type && !copiedProperty.$parent) {\n      copiedProperty.$parent = parent;\n    }\n\n    return copiedProperty;\n  }\n\n  var propertyDescriptor = this._moddle.getPropertyDescriptor(parent, propertyName);\n\n  // do NOT copy Ids and references\n  if (propertyDescriptor.isId || propertyDescriptor.isReference) {\n    return;\n  }\n\n  // copy arrays\n  if (isArray(property)) {\n    return reduce(property, function(childProperties, childProperty) {\n\n      // recursion\n      copiedProperty = self.copyProperty(childProperty, parent, propertyName);\n\n      // copying might NOT be allowed\n      if (copiedProperty) {\n        copiedProperty.$parent = parent;\n\n        return childProperties.concat(copiedProperty);\n      }\n\n      return childProperties;\n    }, []);\n  }\n\n  // copy model elements\n  if (isObject(property) && property.$type) {\n    if (this._moddle.getElementDescriptor(property).isGeneric) {\n      return;\n    }\n\n    copiedProperty = self._bpmnFactory.create(property.$type);\n\n    copiedProperty.$parent = parent;\n\n    // recursion\n    copiedProperty = self.copyElement(property, copiedProperty);\n\n    return copiedProperty;\n  }\n\n  // copy primitive properties\n  return property;\n};\n\n// helpers //////////\n\nexport function getPropertyNames(descriptor, keepDefaultProperties) {\n  return reduce(descriptor.properties, function(properties, property) {\n\n    if (keepDefaultProperties && property.default) {\n      return properties;\n    }\n\n    return properties.concat(property.name);\n  }, []);\n}\n\nfunction is(element, type) {\n  return element && (typeof element.$instanceOf === 'function') && element.$instanceOf(type);\n}","import CopyPasteModule from 'diagram-js/lib/features/copy-paste';\n\nimport BpmnCopyPaste from './BpmnCopyPaste';\nimport ModdleCopy from './ModdleCopy';\n\nexport default {\n  __depends__: [\n    CopyPasteModule\n  ],\n  __init__: [ 'bpmnCopyPaste', 'moddleCopy' ],\n  bpmnCopyPaste: [ 'type', BpmnCopyPaste ],\n  moddleCopy: [ 'type', ModdleCopy ]\n};\n","import {\n  assign\n} from 'min-dash';\n\nvar round = Math.round;\n\n/**\n * Service that allow replacing of elements.\n */\nexport default function Replace(modeling) {\n\n  this._modeling = modeling;\n}\n\nReplace.$inject = [ 'modeling' ];\n\n/**\n * @param {Element} oldElement - Element to be replaced\n * @param {Object}  newElementData - Containing information about the new element,\n *                                   for example the new bounds and type.\n * @param {Object}  options - Custom options that will be attached to the context. It can be used to inject data\n *                            that is needed in the command chain. For example it could be used in\n *                            eventbus.on('commandStack.shape.replace.postExecute') to change shape attributes after\n *                            shape creation.\n */\nReplace.prototype.replaceElement = function(oldElement, newElementData, options) {\n\n  if (oldElement.waypoints) {\n\n    // TODO(nikku): we do not replace connections, yet\n    return null;\n  }\n\n  var modeling = this._modeling;\n\n  var width = newElementData.width || oldElement.width,\n      height = newElementData.height || oldElement.height,\n      x = newElementData.x || oldElement.x,\n      y = newElementData.y || oldElement.y,\n      centerX = round(x + width / 2),\n      centerY = round(y + height / 2);\n\n  // modeling API requires center coordinates,\n  // account for that when handling shape bounds\n\n  return modeling.replaceShape(\n    oldElement,\n    assign(\n      {},\n      newElementData,\n      {\n        x: centerX,\n        y: centerY,\n        width: width,\n        height: height\n      }\n    ),\n    options\n  );\n};\n","import Replace from './Replace';\n\nexport default {\n  __init__: [ 'replace' ],\n  replace: [ 'type', Replace ]\n};","import {\n  pick,\n  assign,\n  filter,\n  forEach,\n  isArray,\n  isUndefined,\n  has\n} from 'min-dash';\n\nimport {\n  is,\n  getBusinessObject\n} from '../../util/ModelUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  isExpanded,\n  isEventSubProcess\n} from '../../util/DiUtil';\n\nimport { getPropertyNames } from '../copy-paste/ModdleCopy';\n\nfunction copyProperties(source, target, properties) {\n  if (!isArray(properties)) {\n    properties = [ properties ];\n  }\n\n  forEach(properties, function(property) {\n    if (!isUndefined(source[property])) {\n      target[property] = source[property];\n    }\n  });\n}\n\nvar CUSTOM_PROPERTIES = [\n  'cancelActivity',\n  'instantiate',\n  'eventGatewayType',\n  'triggeredByEvent',\n  'isInterrupting'\n];\n\n\nfunction toggeling(element, target) {\n\n  var oldCollapsed = (\n    element && has(element, 'collapsed') ? element.collapsed : !isExpanded(element)\n  );\n\n  var targetCollapsed;\n\n  if (target && (has(target, 'collapsed') || has(target, 'isExpanded'))) {\n\n    // property is explicitly set so use it\n    targetCollapsed = (\n      has(target, 'collapsed') ? target.collapsed : !target.isExpanded\n    );\n  } else {\n\n    // keep old state\n    targetCollapsed = oldCollapsed;\n  }\n\n  if (oldCollapsed !== targetCollapsed) {\n    element.collapsed = oldCollapsed;\n    return true;\n  }\n\n  return false;\n}\n\n\n\n/**\n * This module takes care of replacing BPMN elements\n */\nexport default function BpmnReplace(\n    bpmnFactory,\n    elementFactory,\n    moddleCopy,\n    modeling,\n    replace,\n    selection\n) {\n\n  /**\n   * Prepares a new business object for the replacement element\n   * and triggers the replace operation.\n   *\n   * @param  {djs.model.Base} element\n   * @param  {Object} target\n   * @param  {Object} [hints]\n   *\n   * @return {djs.model.Base} the newly created element\n   */\n  function replaceElement(element, target, hints) {\n\n    hints = hints || {};\n\n    var type = target.type,\n        oldBusinessObject = element.businessObject;\n\n    if (isSubProcess(oldBusinessObject)) {\n      if (type === 'bpmn:SubProcess') {\n        if (toggeling(element, target)) {\n\n          // expanding or collapsing process\n          modeling.toggleCollapse(element);\n\n          return element;\n        }\n      }\n    }\n\n    var newBusinessObject = bpmnFactory.create(type);\n\n    var newElement = {\n      type: type,\n      businessObject: newBusinessObject\n    };\n\n    var elementProps = getPropertyNames(oldBusinessObject.$descriptor),\n        newElementProps = getPropertyNames(newBusinessObject.$descriptor, true),\n        copyProps = intersection(elementProps, newElementProps);\n\n    // initialize special properties defined in target definition\n    assign(newBusinessObject, pick(target, CUSTOM_PROPERTIES));\n\n    var properties = filter(copyProps, function(propertyName) {\n\n      // copying event definitions, unless we replace\n      if (propertyName === 'eventDefinitions') {\n        return hasEventDefinition(element, target.eventDefinitionType);\n      }\n\n      // retain loop characteristics if the target element\n      // is not an event sub process\n      if (propertyName === 'loopCharacteristics') {\n        return !isEventSubProcess(newBusinessObject);\n      }\n\n      // so the applied properties from 'target' don't get lost\n      if (newBusinessObject.hasOwnProperty(propertyName)) {\n        return false;\n      }\n\n      if (propertyName === 'processRef' && target.isExpanded === false) {\n        return false;\n      }\n\n      if (propertyName === 'triggeredByEvent') {\n        return false;\n      }\n\n      return true;\n    });\n\n    newBusinessObject = moddleCopy.copyElement(\n      oldBusinessObject,\n      newBusinessObject,\n      properties\n    );\n\n    // initialize custom BPMN extensions\n    if (target.eventDefinitionType) {\n\n      // only initialize with new eventDefinition\n      // if we did not set an event definition yet,\n      // i.e. because we copied it\n      if (!hasEventDefinition(newBusinessObject, target.eventDefinitionType)) {\n        newElement.eventDefinitionType = target.eventDefinitionType;\n      }\n    }\n\n    if (is(oldBusinessObject, 'bpmn:Activity')) {\n\n      if (isSubProcess(oldBusinessObject)) {\n\n        // no toggeling, so keep old state\n        newElement.isExpanded = isExpanded(oldBusinessObject);\n      }\n\n      // else if property is explicitly set, use it\n      else if (target && has(target, 'isExpanded')) {\n        newElement.isExpanded = target.isExpanded;\n      }\n\n      // TODO: need also to respect min/max Size\n      // copy size, from an expanded subprocess to an expanded alternative subprocess\n      // except bpmn:Task, because Task is always expanded\n      if ((isExpanded(oldBusinessObject) && !is(oldBusinessObject, 'bpmn:Task')) && newElement.isExpanded) {\n        newElement.width = element.width;\n        newElement.height = element.height;\n      }\n    }\n\n    // remove children if not expanding sub process\n    if (isSubProcess(oldBusinessObject) && !isSubProcess(newBusinessObject)) {\n      hints.moveChildren = false;\n    }\n\n    // transform collapsed/expanded pools\n    if (is(oldBusinessObject, 'bpmn:Participant')) {\n\n      // create expanded pool\n      if (target.isExpanded === true) {\n        newBusinessObject.processRef = bpmnFactory.create('bpmn:Process');\n      } else {\n\n        // remove children when transforming to collapsed pool\n        hints.moveChildren = false;\n      }\n\n      // apply same width and default height\n      newElement.width = element.width;\n      newElement.height = elementFactory._getDefaultSize(newBusinessObject).height;\n    }\n\n    newBusinessObject.name = oldBusinessObject.name;\n\n    // retain default flow's reference between inclusive <-> exclusive gateways and activities\n    if (\n      isAny(oldBusinessObject, [\n        'bpmn:ExclusiveGateway',\n        'bpmn:InclusiveGateway',\n        'bpmn:Activity'\n      ]) &&\n      isAny(newBusinessObject, [\n        'bpmn:ExclusiveGateway',\n        'bpmn:InclusiveGateway',\n        'bpmn:Activity'\n      ])\n    ) {\n      newBusinessObject.default = oldBusinessObject.default;\n    }\n\n    if (\n      target.host &&\n      !is(oldBusinessObject, 'bpmn:BoundaryEvent') &&\n      is(newBusinessObject, 'bpmn:BoundaryEvent')\n    ) {\n      newElement.host = target.host;\n    }\n\n    newElement.di = {};\n\n    // fill and stroke will be set to DI\n    copyProperties(oldBusinessObject.di, newElement.di, [\n      'fill',\n      'stroke'\n    ]);\n\n    newElement = replace.replaceElement(element, newElement, hints);\n\n    if (hints.select !== false) {\n      selection.select(newElement);\n    }\n\n    return newElement;\n  }\n\n  this.replaceElement = replaceElement;\n}\n\nBpmnReplace.$inject = [\n  'bpmnFactory',\n  'elementFactory',\n  'moddleCopy',\n  'modeling',\n  'replace',\n  'selection'\n];\n\n\nfunction isSubProcess(bo) {\n  return is(bo, 'bpmn:SubProcess');\n}\n\nfunction hasEventDefinition(element, type) {\n\n  var bo = getBusinessObject(element);\n\n  return type && bo.get('eventDefinitions').some(function(definition) {\n    return is(definition, type);\n  });\n}\n\n/**\n * Compute intersection between two arrays.\n */\nfunction intersection(a1, a2) {\n  return a1.filter(function(el) {\n    return a2.indexOf(el) !== -1;\n  });\n}\n","import CopyPasteModule from '../copy-paste';\nimport ReplaceModule from 'diagram-js/lib/features/replace';\nimport SelectionModule from 'diagram-js/lib/features/selection';\n\nimport BpmnReplace from './BpmnReplace';\n\nexport default {\n  __depends__: [\n    CopyPasteModule,\n    ReplaceModule,\n    SelectionModule\n  ],\n  bpmnReplace: [ 'type', BpmnReplace ]\n};\n","import {\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport {\n  isExpanded\n} from '../../../util/DiUtil';\n\n\n/**\n * Returns true, if an element is from a different type\n * than a target definition. Takes into account the type,\n * event definition type and triggeredByEvent property.\n *\n * @param {djs.model.Base} element\n *\n * @return {Boolean}\n */\nexport function isDifferentType(element) {\n\n  return function(entry) {\n    var target = entry.target;\n\n    var businessObject = getBusinessObject(element),\n        eventDefinition = businessObject.eventDefinitions && businessObject.eventDefinitions[0];\n\n    var isTypeEqual = businessObject.$type === target.type;\n\n    var isEventDefinitionEqual = (\n      (eventDefinition && eventDefinition.$type) === target.eventDefinitionType\n    );\n\n    var isTriggeredByEventEqual = (\n      businessObject.triggeredByEvent === target.triggeredByEvent\n    );\n\n    var isExpandedEqual = (\n      target.isExpanded === undefined ||\n      target.isExpanded === isExpanded(businessObject)\n    );\n\n    return !isTypeEqual || !isEventDefinitionEqual || !isTriggeredByEventEqual || !isExpandedEqual;\n  };\n}","export var START_EVENT = [\n  {\n    label: 'Start Event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate Throw Event',\n    actionName: 'replace-with-none-intermediate-throwing',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End Event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  },\n  {\n    label: 'Message Start Event',\n    actionName: 'replace-with-message-start',\n    className: 'bpmn-icon-start-event-message',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Timer Start Event',\n    actionName: 'replace-with-timer-start',\n    className: 'bpmn-icon-start-event-timer',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition'\n    }\n  },\n  {\n    label: 'Conditional Start Event',\n    actionName: 'replace-with-conditional-start',\n    className: 'bpmn-icon-start-event-condition',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n    }\n  },\n  {\n    label: 'Signal Start Event',\n    actionName: 'replace-with-signal-start',\n    className: 'bpmn-icon-start-event-signal',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  }\n];\n\nexport var INTERMEDIATE_EVENT = [\n  {\n    label: 'Start Event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate Throw Event',\n    actionName: 'replace-with-none-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End Event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  },\n  {\n    label: 'Message Intermediate Catch Event',\n    actionName: 'replace-with-message-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-message',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Message Intermediate Throw Event',\n    actionName: 'replace-with-message-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-message',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Timer Intermediate Catch Event',\n    actionName: 'replace-with-timer-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-timer',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition'\n    }\n  },\n  {\n    label: 'Escalation Intermediate Throw Event',\n    actionName: 'replace-with-escalation-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-escalation',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition'\n    }\n  },\n  {\n    label: 'Conditional Intermediate Catch Event',\n    actionName: 'replace-with-conditional-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-condition',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n    }\n  },\n  {\n    label: 'Link Intermediate Catch Event',\n    actionName: 'replace-with-link-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-link',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:LinkEventDefinition'\n    }\n  },\n  {\n    label: 'Link Intermediate Throw Event',\n    actionName: 'replace-with-link-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-link',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:LinkEventDefinition'\n    }\n  },\n  {\n    label: 'Compensation Intermediate Throw Event',\n    actionName: 'replace-with-compensation-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-compensation',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition'\n    }\n  },\n  {\n    label: 'Signal Intermediate Catch Event',\n    actionName: 'replace-with-signal-intermediate-catch',\n    className: 'bpmn-icon-intermediate-event-catch-signal',\n    target: {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  },\n  {\n    label: 'Signal Intermediate Throw Event',\n    actionName: 'replace-with-signal-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-throw-signal',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  }\n];\n\nexport var END_EVENT = [\n  {\n    label: 'Start Event',\n    actionName: 'replace-with-none-start',\n    className: 'bpmn-icon-start-event-none',\n    target: {\n      type: 'bpmn:StartEvent'\n    }\n  },\n  {\n    label: 'Intermediate Throw Event',\n    actionName: 'replace-with-none-intermediate-throw',\n    className: 'bpmn-icon-intermediate-event-none',\n    target: {\n      type: 'bpmn:IntermediateThrowEvent'\n    }\n  },\n  {\n    label: 'End Event',\n    actionName: 'replace-with-none-end',\n    className: 'bpmn-icon-end-event-none',\n    target: {\n      type: 'bpmn:EndEvent'\n    }\n  },\n  {\n    label: 'Message End Event',\n    actionName: 'replace-with-message-end',\n    className: 'bpmn-icon-end-event-message',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Escalation End Event',\n    actionName: 'replace-with-escalation-end',\n    className: 'bpmn-icon-end-event-escalation',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition'\n    }\n  },\n  {\n    label: 'Error End Event',\n    actionName: 'replace-with-error-end',\n    className: 'bpmn-icon-end-event-error',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:ErrorEventDefinition'\n    }\n  },\n  {\n    label: 'Cancel End Event',\n    actionName: 'replace-with-cancel-end',\n    className: 'bpmn-icon-end-event-cancel',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:CancelEventDefinition'\n    }\n  },\n  {\n    label: 'Compensation End Event',\n    actionName: 'replace-with-compensation-end',\n    className: 'bpmn-icon-end-event-compensation',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition'\n    }\n  },\n  {\n    label: 'Signal End Event',\n    actionName: 'replace-with-signal-end',\n    className: 'bpmn-icon-end-event-signal',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  },\n  {\n    label: 'Terminate End Event',\n    actionName: 'replace-with-terminate-end',\n    className: 'bpmn-icon-end-event-terminate',\n    target: {\n      type: 'bpmn:EndEvent',\n      eventDefinitionType: 'bpmn:TerminateEventDefinition'\n    }\n  }\n];\n\nexport var GATEWAY = [\n  {\n    label: 'Exclusive Gateway',\n    actionName: 'replace-with-exclusive-gateway',\n    className: 'bpmn-icon-gateway-xor',\n    target: {\n      type: 'bpmn:ExclusiveGateway'\n    }\n  },\n  {\n    label: 'Parallel Gateway',\n    actionName: 'replace-with-parallel-gateway',\n    className: 'bpmn-icon-gateway-parallel',\n    target: {\n      type: 'bpmn:ParallelGateway'\n    }\n  },\n  {\n    label: 'Inclusive Gateway',\n    actionName: 'replace-with-inclusive-gateway',\n    className: 'bpmn-icon-gateway-or',\n    target: {\n      type: 'bpmn:InclusiveGateway'\n    }\n  },\n  {\n    label: 'Complex Gateway',\n    actionName: 'replace-with-complex-gateway',\n    className: 'bpmn-icon-gateway-complex',\n    target: {\n      type: 'bpmn:ComplexGateway'\n    }\n  },\n  {\n    label: 'Event based Gateway',\n    actionName: 'replace-with-event-based-gateway',\n    className: 'bpmn-icon-gateway-eventbased',\n    target: {\n      type: 'bpmn:EventBasedGateway',\n      instantiate: false,\n      eventGatewayType: 'Exclusive'\n    }\n  }\n\n  // Gateways deactivated until https://github.com/bpmn-io/bpmn-js/issues/194\n  // {\n  //   label: 'Event based instantiating Gateway',\n  //   actionName: 'replace-with-exclusive-event-based-gateway',\n  //   className: 'bpmn-icon-exclusive-event-based',\n  //   target: {\n  //     type: 'bpmn:EventBasedGateway'\n  //   },\n  //   options: {\n  //     businessObject: { instantiate: true, eventGatewayType: 'Exclusive' }\n  //   }\n  // },\n  // {\n  //   label: 'Parallel Event based instantiating Gateway',\n  //   actionName: 'replace-with-parallel-event-based-instantiate-gateway',\n  //   className: 'bpmn-icon-parallel-event-based-instantiate-gateway',\n  //   target: {\n  //     type: 'bpmn:EventBasedGateway'\n  //   },\n  //   options: {\n  //     businessObject: { instantiate: true, eventGatewayType: 'Parallel' }\n  //   }\n  // }\n];\n\nexport var SUBPROCESS_EXPANDED = [\n  {\n    label: 'Transaction',\n    actionName: 'replace-with-transaction',\n    className: 'bpmn-icon-transaction',\n    target: {\n      type: 'bpmn:Transaction',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Event Sub Process',\n    actionName: 'replace-with-event-subprocess',\n    className: 'bpmn-icon-event-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      triggeredByEvent: true,\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Sub Process (collapsed)',\n    actionName: 'replace-with-collapsed-subprocess',\n    className: 'bpmn-icon-subprocess-collapsed',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: false\n    }\n  }\n];\n\nexport var TRANSACTION = [\n  {\n    label: 'Sub Process',\n    actionName: 'replace-with-subprocess',\n    className: 'bpmn-icon-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Event Sub Process',\n    actionName: 'replace-with-event-subprocess',\n    className: 'bpmn-icon-event-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      triggeredByEvent: true,\n      isExpanded: true\n    }\n  }\n];\n\nexport var EVENT_SUB_PROCESS = [\n  {\n    label: 'Sub Process',\n    actionName: 'replace-with-subprocess',\n    className: 'bpmn-icon-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Transaction',\n    actionName: 'replace-with-transaction',\n    className: 'bpmn-icon-transaction',\n    target: {\n      type: 'bpmn:Transaction',\n      isExpanded: true\n    }\n  }\n];\n\nexport var TASK = [\n  {\n    label: 'Task',\n    actionName: 'replace-with-task',\n    className: 'bpmn-icon-task',\n    target: {\n      type: 'bpmn:Task'\n    }\n  },\n  {\n    label: 'Send Task',\n    actionName: 'replace-with-send-task',\n    className: 'bpmn-icon-send',\n    target: {\n      type: 'bpmn:SendTask'\n    }\n  },\n  {\n    label: 'Receive Task',\n    actionName: 'replace-with-receive-task',\n    className: 'bpmn-icon-receive',\n    target: {\n      type: 'bpmn:ReceiveTask'\n    }\n  },\n  {\n    label: 'User Task',\n    actionName: 'replace-with-user-task',\n    className: 'bpmn-icon-user',\n    target: {\n      type: 'bpmn:UserTask'\n    }\n  },\n  {\n    label: 'Manual Task',\n    actionName: 'replace-with-manual-task',\n    className: 'bpmn-icon-manual',\n    target: {\n      type: 'bpmn:ManualTask'\n    }\n  },\n  {\n    label: 'Business Rule Task',\n    actionName: 'replace-with-rule-task',\n    className: 'bpmn-icon-business-rule',\n    target: {\n      type: 'bpmn:BusinessRuleTask'\n    }\n  },\n  {\n    label: 'Service Task',\n    actionName: 'replace-with-service-task',\n    className: 'bpmn-icon-service',\n    target: {\n      type: 'bpmn:ServiceTask'\n    }\n  },\n  {\n    label: 'Script Task',\n    actionName: 'replace-with-script-task',\n    className: 'bpmn-icon-script',\n    target: {\n      type: 'bpmn:ScriptTask'\n    }\n  },\n  {\n    label: 'Call Activity',\n    actionName: 'replace-with-call-activity',\n    className: 'bpmn-icon-call-activity',\n    target: {\n      type: 'bpmn:CallActivity'\n    }\n  },\n  {\n    label: 'Sub Process (collapsed)',\n    actionName: 'replace-with-collapsed-subprocess',\n    className: 'bpmn-icon-subprocess-collapsed',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: false\n    }\n  },\n  {\n    label: 'Sub Process (expanded)',\n    actionName: 'replace-with-expanded-subprocess',\n    className: 'bpmn-icon-subprocess-expanded',\n    target: {\n      type: 'bpmn:SubProcess',\n      isExpanded: true\n    }\n  }\n];\n\nexport var BOUNDARY_EVENT = [\n  {\n    label: 'Message Boundary Event',\n    actionName: 'replace-with-message-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-message',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Timer Boundary Event',\n    actionName: 'replace-with-timer-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-timer',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition'\n    }\n  },\n  {\n    label: 'Escalation Boundary Event',\n    actionName: 'replace-with-escalation-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-escalation',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition'\n    }\n  },\n  {\n    label: 'Conditional Boundary Event',\n    actionName: 'replace-with-conditional-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-condition',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n    }\n  },\n  {\n    label: 'Error Boundary Event',\n    actionName: 'replace-with-error-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-error',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:ErrorEventDefinition'\n    }\n  },\n  {\n    label: 'Cancel Boundary Event',\n    actionName: 'replace-with-cancel-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-cancel',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:CancelEventDefinition'\n    }\n  },\n  {\n    label: 'Signal Boundary Event',\n    actionName: 'replace-with-signal-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-signal',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  },\n  {\n    label: 'Compensation Boundary Event',\n    actionName: 'replace-with-compensation-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-compensation',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition'\n    }\n  },\n  {\n    label: 'Message Boundary Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-message-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-message',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Timer Boundary Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-timer-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-timer',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Escalation Boundary Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-escalation-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-escalation',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Conditional Boundary Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-conditional-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-condition',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition',\n      cancelActivity: false\n    }\n  },\n  {\n    label: 'Signal Boundary Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-signal-boundary',\n    className: 'bpmn-icon-intermediate-event-catch-non-interrupting-signal',\n    target: {\n      type: 'bpmn:BoundaryEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition',\n      cancelActivity: false\n    }\n  }\n];\n\nexport var EVENT_SUB_PROCESS_START_EVENT = [\n  {\n    label: 'Message Start Event',\n    actionName: 'replace-with-message-start',\n    className: 'bpmn-icon-start-event-message',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition'\n    }\n  },\n  {\n    label: 'Timer Start Event',\n    actionName: 'replace-with-timer-start',\n    className: 'bpmn-icon-start-event-timer',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition'\n    }\n  },\n  {\n    label: 'Conditional Start Event',\n    actionName: 'replace-with-conditional-start',\n    className: 'bpmn-icon-start-event-condition',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n    }\n  },\n  {\n    label: 'Signal Start Event',\n    actionName: 'replace-with-signal-start',\n    className: 'bpmn-icon-start-event-signal',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition'\n    }\n  },\n  {\n    label: 'Error Start Event',\n    actionName: 'replace-with-error-start',\n    className: 'bpmn-icon-start-event-error',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ErrorEventDefinition'\n    }\n  },\n  {\n    label: 'Escalation Start Event',\n    actionName: 'replace-with-escalation-start',\n    className: 'bpmn-icon-start-event-escalation',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition'\n    }\n  },\n  {\n    label: 'Compensation Start Event',\n    actionName: 'replace-with-compensation-start',\n    className: 'bpmn-icon-start-event-compensation',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:CompensateEventDefinition'\n    }\n  },\n  {\n    label: 'Message Start Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-message-start',\n    className: 'bpmn-icon-start-event-non-interrupting-message',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:MessageEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Timer Start Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-timer-start',\n    className: 'bpmn-icon-start-event-non-interrupting-timer',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:TimerEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Conditional Start Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-conditional-start',\n    className: 'bpmn-icon-start-event-non-interrupting-condition',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:ConditionalEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Signal Start Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-signal-start',\n    className: 'bpmn-icon-start-event-non-interrupting-signal',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:SignalEventDefinition',\n      isInterrupting: false\n    }\n  },\n  {\n    label: 'Escalation Start Event (non-interrupting)',\n    actionName: 'replace-with-non-interrupting-escalation-start',\n    className: 'bpmn-icon-start-event-non-interrupting-escalation',\n    target: {\n      type: 'bpmn:StartEvent',\n      eventDefinitionType: 'bpmn:EscalationEventDefinition',\n      isInterrupting: false\n    }\n  }\n];\n\nexport var SEQUENCE_FLOW = [\n  {\n    label: 'Sequence Flow',\n    actionName: 'replace-with-sequence-flow',\n    className: 'bpmn-icon-connection'\n  },\n  {\n    label: 'Default Flow',\n    actionName: 'replace-with-default-flow',\n    className: 'bpmn-icon-default-flow'\n  },\n  {\n    label: 'Conditional Flow',\n    actionName: 'replace-with-conditional-flow',\n    className: 'bpmn-icon-conditional-flow'\n  }\n];\n\nexport var PARTICIPANT = [\n  {\n    label: 'Expanded Pool',\n    actionName: 'replace-with-expanded-pool',\n    className: 'bpmn-icon-participant',\n    target: {\n      type: 'bpmn:Participant',\n      isExpanded: true\n    }\n  },\n  {\n    label: 'Collapsed Pool',\n    actionName: 'replace-with-collapsed-pool',\n\n    // TODO(@janstuemmel): maybe design new icon\n    className: 'bpmn-icon-lane',\n    target: {\n      type: 'bpmn:Participant',\n      isExpanded: false\n    }\n  }\n];\n","import {\n  getBusinessObject,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isEventSubProcess,\n  isExpanded\n} from '../../util/DiUtil';\n\nimport {\n  isDifferentType\n} from './util/TypeUtil';\n\nimport {\n  forEach,\n  filter\n} from 'min-dash';\n\nimport * as replaceOptions from '../replace/ReplaceOptions';\n\n\n/**\n * This module is an element agnostic replace menu provider for the popup menu.\n */\nexport default function ReplaceMenuProvider(\n    popupMenu, modeling, moddle,\n    bpmnReplace, rules, translate) {\n\n  this._popupMenu = popupMenu;\n  this._modeling = modeling;\n  this._moddle = moddle;\n  this._bpmnReplace = bpmnReplace;\n  this._rules = rules;\n  this._translate = translate;\n\n  this.register();\n}\n\nReplaceMenuProvider.$inject = [\n  'popupMenu',\n  'modeling',\n  'moddle',\n  'bpmnReplace',\n  'rules',\n  'translate'\n];\n\n\n/**\n * Register replace menu provider in the popup menu\n */\nReplaceMenuProvider.prototype.register = function() {\n  this._popupMenu.registerProvider('bpmn-replace', this);\n};\n\n\n/**\n * Get all entries from replaceOptions for the given element and apply filters\n * on them. Get for example only elements, which are different from the current one.\n *\n * @param {djs.model.Base} element\n *\n * @return {Array<Object>} a list of menu entry items\n */\nReplaceMenuProvider.prototype.getEntries = function(element) {\n\n  var businessObject = element.businessObject;\n\n  var rules = this._rules;\n\n  var entries;\n\n  if (!rules.allowed('shape.replace', { element: element })) {\n    return [];\n  }\n\n  var differentType = isDifferentType(element);\n\n  // start events outside event sub processes\n  if (is(businessObject, 'bpmn:StartEvent') && !isEventSubProcess(businessObject.$parent)) {\n\n    entries = filter(replaceOptions.START_EVENT, differentType);\n\n    return this._createEntries(element, entries);\n  }\n\n  // expanded/collapsed pools\n  if (is(businessObject, 'bpmn:Participant')) {\n\n    entries = filter(replaceOptions.PARTICIPANT, function(entry) {\n      return isExpanded(businessObject) !== entry.target.isExpanded;\n    });\n\n    return this._createEntries(element, entries);\n  }\n\n  // start events inside event sub processes\n  if (is(businessObject, 'bpmn:StartEvent') && isEventSubProcess(businessObject.$parent)) {\n\n    entries = filter(replaceOptions.EVENT_SUB_PROCESS_START_EVENT, function(entry) {\n\n      var target = entry.target;\n\n      var isInterrupting = target.isInterrupting !== false;\n\n      var isInterruptingEqual = getBusinessObject(element).isInterrupting === isInterrupting;\n\n      // filters elements which types and event definition are equal but have have different interrupting types\n      return differentType(entry) || !differentType(entry) && !isInterruptingEqual;\n\n    });\n\n    return this._createEntries(element, entries);\n  }\n\n  // end events\n  if (is(businessObject, 'bpmn:EndEvent')) {\n\n    entries = filter(replaceOptions.END_EVENT, function(entry) {\n      var target = entry.target;\n\n      // hide cancel end events outside transactions\n      if (target.eventDefinitionType == 'bpmn:CancelEventDefinition' && !is(businessObject.$parent, 'bpmn:Transaction')) {\n        return false;\n      }\n\n      return differentType(entry);\n    });\n\n    return this._createEntries(element, entries);\n  }\n\n  // boundary events\n  if (is(businessObject, 'bpmn:BoundaryEvent')) {\n\n    entries = filter(replaceOptions.BOUNDARY_EVENT, function(entry) {\n\n      var target = entry.target;\n\n      if (target.eventDefinition == 'bpmn:CancelEventDefinition' &&\n         !is(businessObject.attachedToRef, 'bpmn:Transaction')) {\n        return false;\n      }\n      var cancelActivity = target.cancelActivity !== false;\n\n      var isCancelActivityEqual = businessObject.cancelActivity == cancelActivity;\n\n      return differentType(entry) || !differentType(entry) && !isCancelActivityEqual;\n    });\n\n    return this._createEntries(element, entries);\n  }\n\n  // intermediate events\n  if (is(businessObject, 'bpmn:IntermediateCatchEvent') ||\n      is(businessObject, 'bpmn:IntermediateThrowEvent')) {\n\n    entries = filter(replaceOptions.INTERMEDIATE_EVENT, differentType);\n\n    return this._createEntries(element, entries);\n  }\n\n  // gateways\n  if (is(businessObject, 'bpmn:Gateway')) {\n\n    entries = filter(replaceOptions.GATEWAY, differentType);\n\n    return this._createEntries(element, entries);\n  }\n\n  // transactions\n  if (is(businessObject, 'bpmn:Transaction')) {\n\n    entries = filter(replaceOptions.TRANSACTION, differentType);\n\n    return this._createEntries(element, entries);\n  }\n\n  // expanded event sub processes\n  if (isEventSubProcess(businessObject) && isExpanded(businessObject)) {\n\n    entries = filter(replaceOptions.EVENT_SUB_PROCESS, differentType);\n\n    return this._createEntries(element, entries);\n  }\n\n  // expanded sub processes\n  if (is(businessObject, 'bpmn:SubProcess') && isExpanded(businessObject)) {\n\n    entries = filter(replaceOptions.SUBPROCESS_EXPANDED, differentType);\n\n    return this._createEntries(element, entries);\n  }\n\n  // collapsed ad hoc sub processes\n  if (is(businessObject, 'bpmn:AdHocSubProcess') && !isExpanded(businessObject)) {\n\n    entries = filter(replaceOptions.TASK, function(entry) {\n\n      var target = entry.target;\n\n      var isTargetSubProcess = target.type === 'bpmn:SubProcess';\n\n      var isTargetExpanded = target.isExpanded === true;\n\n      return isDifferentType(element, target) && (!isTargetSubProcess || isTargetExpanded);\n    });\n\n    return this._createEntries(element, entries);\n  }\n\n  // sequence flows\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    return this._createSequenceFlowEntries(element, replaceOptions.SEQUENCE_FLOW);\n  }\n\n  // flow nodes\n  if (is(businessObject, 'bpmn:FlowNode')) {\n    entries = filter(replaceOptions.TASK, differentType);\n\n    // collapsed SubProcess can not be replaced with itself\n    if (is(businessObject, 'bpmn:SubProcess') && !isExpanded(businessObject)) {\n      entries = filter(entries, function(entry) {\n        return entry.label !== 'Sub Process (collapsed)';\n      });\n    }\n\n    return this._createEntries(element, entries);\n  }\n\n  return [];\n};\n\n\n/**\n * Get a list of header items for the given element. This includes buttons\n * for multi instance markers and for the ad hoc marker.\n *\n * @param {djs.model.Base} element\n *\n * @return {Array<Object>} a list of menu entry items\n */\nReplaceMenuProvider.prototype.getHeaderEntries = function(element) {\n\n  var headerEntries = [];\n\n  if (is(element, 'bpmn:Activity') && !isEventSubProcess(element)) {\n    headerEntries = headerEntries.concat(this._getLoopEntries(element));\n  }\n\n  if (is(element, 'bpmn:SubProcess') &&\n      !is(element, 'bpmn:Transaction') &&\n      !isEventSubProcess(element)) {\n    headerEntries.push(this._getAdHocEntry(element));\n  }\n\n  return headerEntries;\n};\n\n\n/**\n * Creates an array of menu entry objects for a given element and filters the replaceOptions\n * according to a filter function.\n *\n * @param  {djs.model.Base} element\n * @param  {Object} replaceOptions\n *\n * @return {Array<Object>} a list of menu items\n */\nReplaceMenuProvider.prototype._createEntries = function(element, replaceOptions) {\n  var menuEntries = [];\n\n  var self = this;\n\n  forEach(replaceOptions, function(definition) {\n    var entry = self._createMenuEntry(definition, element);\n\n    menuEntries.push(entry);\n  });\n\n  return menuEntries;\n};\n\n/**\n * Creates an array of menu entry objects for a given sequence flow.\n *\n * @param  {djs.model.Base} element\n * @param  {Object} replaceOptions\n\n * @return {Array<Object>} a list of menu items\n */\nReplaceMenuProvider.prototype._createSequenceFlowEntries = function(element, replaceOptions) {\n\n  var businessObject = getBusinessObject(element);\n\n  var menuEntries = [];\n\n  var modeling = this._modeling,\n      moddle = this._moddle;\n\n  var self = this;\n\n  forEach(replaceOptions, function(entry) {\n\n    switch (entry.actionName) {\n    case 'replace-with-default-flow':\n      if (businessObject.sourceRef.default !== businessObject &&\n            (is(businessObject.sourceRef, 'bpmn:ExclusiveGateway') ||\n             is(businessObject.sourceRef, 'bpmn:InclusiveGateway') ||\n             is(businessObject.sourceRef, 'bpmn:ComplexGateway') ||\n             is(businessObject.sourceRef, 'bpmn:Activity'))) {\n\n        menuEntries.push(self._createMenuEntry(entry, element, function() {\n          modeling.updateProperties(element.source, { default: businessObject });\n        }));\n      }\n      break;\n    case 'replace-with-conditional-flow':\n      if (!businessObject.conditionExpression && is(businessObject.sourceRef, 'bpmn:Activity')) {\n\n        menuEntries.push(self._createMenuEntry(entry, element, function() {\n          var conditionExpression = moddle.create('bpmn:FormalExpression', { body: '' });\n\n          modeling.updateProperties(element, { conditionExpression: conditionExpression });\n        }));\n      }\n      break;\n    default:\n\n      // default flows\n      if (is(businessObject.sourceRef, 'bpmn:Activity') && businessObject.conditionExpression) {\n        return menuEntries.push(self._createMenuEntry(entry, element, function() {\n          modeling.updateProperties(element, { conditionExpression: undefined });\n        }));\n      }\n\n      // conditional flows\n      if ((is(businessObject.sourceRef, 'bpmn:ExclusiveGateway') ||\n           is(businessObject.sourceRef, 'bpmn:InclusiveGateway') ||\n           is(businessObject.sourceRef, 'bpmn:ComplexGateway') ||\n           is(businessObject.sourceRef, 'bpmn:Activity')) &&\n           businessObject.sourceRef.default === businessObject) {\n\n        return menuEntries.push(self._createMenuEntry(entry, element, function() {\n          modeling.updateProperties(element.source, { default: undefined });\n        }));\n      }\n    }\n  });\n\n  return menuEntries;\n};\n\n\n/**\n * Creates and returns a single menu entry item.\n *\n * @param  {Object} definition a single replace options definition object\n * @param  {djs.model.Base} element\n * @param  {Function} [action] an action callback function which gets called when\n *                             the menu entry is being triggered.\n *\n * @return {Object} menu entry item\n */\nReplaceMenuProvider.prototype._createMenuEntry = function(definition, element, action) {\n  var translate = this._translate;\n  var replaceElement = this._bpmnReplace.replaceElement;\n\n  var replaceAction = function() {\n    return replaceElement(element, definition.target);\n  };\n\n  action = action || replaceAction;\n\n  var menuEntry = {\n    label: translate(definition.label),\n    className: definition.className,\n    id: definition.actionName,\n    action: action\n  };\n\n  return menuEntry;\n};\n\n/**\n * Get a list of menu items containing buttons for multi instance markers\n *\n * @param  {djs.model.Base} element\n *\n * @return {Array<Object>} a list of menu items\n */\nReplaceMenuProvider.prototype._getLoopEntries = function(element) {\n\n  var self = this;\n  var translate = this._translate;\n\n  function toggleLoopEntry(event, entry) {\n    var loopCharacteristics;\n\n    if (entry.active) {\n      loopCharacteristics = undefined;\n    } else {\n      loopCharacteristics = self._moddle.create(entry.options.loopCharacteristics);\n\n      if (entry.options.isSequential) {\n        loopCharacteristics.isSequential = entry.options.isSequential;\n      }\n    }\n    self._modeling.updateProperties(element, { loopCharacteristics: loopCharacteristics });\n  }\n\n  var businessObject = getBusinessObject(element),\n      loopCharacteristics = businessObject.loopCharacteristics;\n\n  var isSequential,\n      isLoop,\n      isParallel;\n\n  if (loopCharacteristics) {\n    isSequential = loopCharacteristics.isSequential;\n    isLoop = loopCharacteristics.isSequential === undefined;\n    isParallel = loopCharacteristics.isSequential !== undefined && !loopCharacteristics.isSequential;\n  }\n\n\n  var loopEntries = [\n    {\n      id: 'toggle-parallel-mi',\n      className: 'bpmn-icon-parallel-mi-marker',\n      title: translate('Parallel Multi Instance'),\n      active: isParallel,\n      action: toggleLoopEntry,\n      options: {\n        loopCharacteristics: 'bpmn:MultiInstanceLoopCharacteristics',\n        isSequential: false\n      }\n    },\n    {\n      id: 'toggle-sequential-mi',\n      className: 'bpmn-icon-sequential-mi-marker',\n      title: translate('Sequential Multi Instance'),\n      active: isSequential,\n      action: toggleLoopEntry,\n      options: {\n        loopCharacteristics: 'bpmn:MultiInstanceLoopCharacteristics',\n        isSequential: true\n      }\n    },\n    {\n      id: 'toggle-loop',\n      className: 'bpmn-icon-loop-marker',\n      title: translate('Loop'),\n      active: isLoop,\n      action: toggleLoopEntry,\n      options: {\n        loopCharacteristics: 'bpmn:StandardLoopCharacteristics'\n      }\n    }\n  ];\n  return loopEntries;\n};\n\n\n/**\n * Get the menu items containing a button for the ad hoc marker\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} a menu item\n */\nReplaceMenuProvider.prototype._getAdHocEntry = function(element) {\n  var translate = this._translate;\n  var businessObject = getBusinessObject(element);\n\n  var isAdHoc = is(businessObject, 'bpmn:AdHocSubProcess');\n\n  var replaceElement = this._bpmnReplace.replaceElement;\n\n  var adHocEntry = {\n    id: 'toggle-adhoc',\n    className: 'bpmn-icon-ad-hoc-marker',\n    title: translate('Ad-hoc'),\n    active: isAdHoc,\n    action: function(event, entry) {\n      if (isAdHoc) {\n        return replaceElement(element, { type: 'bpmn:SubProcess' }, {\n          autoResize: false,\n          layoutConnection: false\n        });\n      } else {\n        return replaceElement(element, { type: 'bpmn:AdHocSubProcess' }, {\n          autoResize: false,\n          layoutConnection: false\n        });\n      }\n    }\n  };\n\n  return adHocEntry;\n};\n","import PopupMenuModule from 'diagram-js/lib/features/popup-menu';\nimport ReplaceModule from '../replace';\n\nimport ReplaceMenuProvider from './ReplaceMenuProvider';\n\n\nexport default {\n  __depends__: [\n    PopupMenuModule,\n    ReplaceModule\n  ],\n  __init__: [ 'replaceMenuProvider' ],\n  replaceMenuProvider: [ 'type', ReplaceMenuProvider ]\n};","import {\n  filter,\n  isNumber\n} from 'min-dash';\n\nvar max = Math.max,\n    min = Math.min;\n\nvar DEFAULT_CHILD_BOX_PADDING = 20;\n\nimport {\n  getBBox\n} from '../../util/Elements';\n\nimport {\n  asTRBL,\n  asBounds\n} from '../../layout/LayoutUtil';\n\n\n/**\n * Substract a TRBL from another\n *\n * @param  {TRBL} trblA\n * @param  {TRBL} trblB\n *\n * @return {TRBL}\n */\nexport function substractTRBL(trblA, trblB) {\n  return {\n    top: trblA.top - trblB.top,\n    right: trblA.right - trblB.right,\n    bottom: trblA.bottom - trblB.bottom,\n    left: trblA.left - trblB.left\n  };\n}\n\n/**\n * Resize the given bounds by the specified delta from a given anchor point.\n *\n * @param {Bounds} bounds the bounding box that should be resized\n * @param {String} direction in which the element is resized (nw, ne, se, sw)\n * @param {Point} delta of the resize operation\n *\n * @return {Bounds} resized bounding box\n */\nexport function resizeBounds(bounds, direction, delta) {\n  var dx = delta.x,\n      dy = delta.y;\n\n  var newBounds = {\n    x: bounds.x,\n    y: bounds.y,\n    width: bounds.width,\n    height: bounds.height\n  };\n\n  if (direction.indexOf('n') !== -1) {\n    newBounds.y = bounds.y + dy;\n    newBounds.height = bounds.height - dy;\n  } else if (direction.indexOf('s') !== -1) {\n    newBounds.height = bounds.height + dy;\n  }\n\n  if (direction.indexOf('e') !== -1) {\n    newBounds.width = bounds.width + dx;\n  } else if (direction.indexOf('w') !== -1) {\n    newBounds.x = bounds.x + dx;\n    newBounds.width = bounds.width - dx;\n  }\n\n  return newBounds;\n}\n\n\n/**\n * Resize the given bounds by applying the passed\n * { top, right, bottom, left } delta.\n *\n * @param {Bounds} bounds\n * @param {TRBL} trblResize\n *\n * @return {Bounds}\n */\nexport function resizeTRBL(bounds, resize) {\n  return {\n    x: bounds.x + (resize.left || 0),\n    y: bounds.y + (resize.top || 0),\n    width: bounds.width - (resize.left || 0) + (resize.right || 0),\n    height: bounds.height - (resize.top || 0) + (resize.bottom || 0)\n  };\n}\n\n\nexport function reattachPoint(bounds, newBounds, point) {\n\n  var sx = bounds.width / newBounds.width,\n      sy = bounds.height / newBounds.height;\n\n  return {\n    x: Math.round((newBounds.x + newBounds.width / 2)) - Math.floor(((bounds.x + bounds.width / 2) - point.x) / sx),\n    y: Math.round((newBounds.y + newBounds.height / 2)) - Math.floor(((bounds.y + bounds.height / 2) - point.y) / sy)\n  };\n}\n\n\nfunction applyConstraints(attr, trbl, resizeConstraints) {\n\n  var value = trbl[attr],\n      minValue = resizeConstraints.min && resizeConstraints.min[attr],\n      maxValue = resizeConstraints.max && resizeConstraints.max[attr];\n\n  if (isNumber(minValue)) {\n    value = (/top|left/.test(attr) ? min : max)(value, minValue);\n  }\n\n  if (isNumber(maxValue)) {\n    value = (/top|left/.test(attr) ? max : min)(value, maxValue);\n  }\n\n  return value;\n}\n\nexport function ensureConstraints(currentBounds, resizeConstraints) {\n\n  if (!resizeConstraints) {\n    return currentBounds;\n  }\n\n  var currentTrbl = asTRBL(currentBounds);\n\n  return asBounds({\n    top: applyConstraints('top', currentTrbl, resizeConstraints),\n    right: applyConstraints('right', currentTrbl, resizeConstraints),\n    bottom: applyConstraints('bottom', currentTrbl, resizeConstraints),\n    left: applyConstraints('left', currentTrbl, resizeConstraints)\n  });\n}\n\n\nexport function getMinResizeBounds(direction, currentBounds, minDimensions, childrenBounds) {\n\n  var currentBox = asTRBL(currentBounds);\n\n  var minBox = {\n    top: /n/.test(direction) ? currentBox.bottom - minDimensions.height : currentBox.top,\n    left: /w/.test(direction) ? currentBox.right - minDimensions.width : currentBox.left,\n    bottom: /s/.test(direction) ? currentBox.top + minDimensions.height : currentBox.bottom,\n    right: /e/.test(direction) ? currentBox.left + minDimensions.width : currentBox.right\n  };\n\n  var childrenBox = childrenBounds ? asTRBL(childrenBounds) : minBox;\n\n  var combinedBox = {\n    top: min(minBox.top, childrenBox.top),\n    left: min(minBox.left, childrenBox.left),\n    bottom: max(minBox.bottom, childrenBox.bottom),\n    right: max(minBox.right, childrenBox.right)\n  };\n\n  return asBounds(combinedBox);\n}\n\nfunction asPadding(mayBePadding, defaultValue) {\n  if (typeof mayBePadding !== 'undefined') {\n    return mayBePadding;\n  } else {\n    return DEFAULT_CHILD_BOX_PADDING;\n  }\n}\n\nexport function addPadding(bbox, padding) {\n  var left, right, top, bottom;\n\n  if (typeof padding === 'object') {\n    left = asPadding(padding.left);\n    right = asPadding(padding.right);\n    top = asPadding(padding.top);\n    bottom = asPadding(padding.bottom);\n  } else {\n    left = right = top = bottom = asPadding(padding);\n  }\n\n  return {\n    x: bbox.x - left,\n    y: bbox.y - top,\n    width: bbox.width + left + right,\n    height: bbox.height + top + bottom\n  };\n}\n\n\n/**\n * Is the given element part of the resize\n * targets min boundary box?\n *\n * This is the default implementation which excludes\n * connections and labels.\n *\n * @param {djs.model.Base} element\n */\nfunction isBBoxChild(element) {\n\n  // exclude connections\n  if (element.waypoints) {\n    return false;\n  }\n\n  // exclude labels\n  if (element.type === 'label') {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Return children bounding computed from a shapes children\n * or a list of prefiltered children.\n *\n * @param  {djs.model.Shape|Array<djs.model.Shape>} shapeOrChildren\n * @param  {Number|Object} padding\n *\n * @return {Bounds}\n */\nexport function computeChildrenBBox(shapeOrChildren, padding) {\n\n  var elements;\n\n  // compute based on shape\n  if (shapeOrChildren.length === undefined) {\n\n    // grab all the children that are part of the\n    // parents children box\n    elements = filter(shapeOrChildren.children, isBBoxChild);\n\n  } else {\n    elements = shapeOrChildren;\n  }\n\n  if (elements.length) {\n    return addPadding(getBBox(elements), padding);\n  }\n}\n","import { is } from '../../../util/ModelUtil';\n\nimport {\n  getParent\n} from './ModelingUtil';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  substractTRBL,\n  resizeTRBL\n} from 'diagram-js/lib/features/resize/ResizeUtil';\n\nvar abs = Math.abs;\n\n\nfunction getTRBLResize(oldBounds, newBounds) {\n  return substractTRBL(asTRBL(newBounds), asTRBL(oldBounds));\n}\n\n\nvar LANE_PARENTS = [\n  'bpmn:Participant',\n  'bpmn:Process',\n  'bpmn:SubProcess'\n];\n\nexport var LANE_INDENTATION = 30;\n\n\n/**\n * Collect all lane shapes in the given paren\n *\n * @param  {djs.model.Shape} shape\n * @param  {Array<djs.model.Base>} [collectedShapes]\n *\n * @return {Array<djs.model.Base>}\n */\nexport function collectLanes(shape, collectedShapes) {\n\n  collectedShapes = collectedShapes || [];\n\n  shape.children.filter(function(s) {\n    if (is(s, 'bpmn:Lane')) {\n      collectLanes(s, collectedShapes);\n\n      collectedShapes.push(s);\n    }\n  });\n\n  return collectedShapes;\n}\n\n\n/**\n * Return the lane children of the given element.\n *\n * @param {djs.model.Shape} shape\n *\n * @return {Array<djs.model.Shape>}\n */\nexport function getChildLanes(shape) {\n  return shape.children.filter(function(c) {\n    return is(c, 'bpmn:Lane');\n  });\n}\n\n\n/**\n * Return the root element containing the given lane shape\n *\n * @param {djs.model.Shape} shape\n *\n * @return {djs.model.Shape}\n */\nexport function getLanesRoot(shape) {\n  return getParent(shape, LANE_PARENTS) || shape;\n}\n\n\n/**\n * Compute the required resize operations for lanes\n * adjacent to the given shape, assuming it will be\n * resized to the given new bounds.\n *\n * @param {djs.model.Shape} shape\n * @param {Bounds} newBounds\n *\n * @return {Array<Object>}\n */\nexport function computeLanesResize(shape, newBounds) {\n\n  var rootElement = getLanesRoot(shape);\n\n  var initialShapes = is(rootElement, 'bpmn:Process') ? [] : [ rootElement ];\n\n  var allLanes = collectLanes(rootElement, initialShapes),\n      shapeTrbl = asTRBL(shape),\n      shapeNewTrbl = asTRBL(newBounds),\n      trblResize = getTRBLResize(shape, newBounds),\n      resizeNeeded = [];\n\n  allLanes.forEach(function(other) {\n\n    if (other === shape) {\n      return;\n    }\n\n    var topResize = 0,\n        rightResize = trblResize.right,\n        bottomResize = 0,\n        leftResize = trblResize.left;\n\n    var otherTrbl = asTRBL(other);\n\n    if (trblResize.top) {\n      if (abs(otherTrbl.bottom - shapeTrbl.top) < 10) {\n        bottomResize = shapeNewTrbl.top - otherTrbl.bottom;\n      }\n\n      if (abs(otherTrbl.top - shapeTrbl.top) < 5) {\n        topResize = shapeNewTrbl.top - otherTrbl.top;\n      }\n    }\n\n    if (trblResize.bottom) {\n      if (abs(otherTrbl.top - shapeTrbl.bottom) < 10) {\n        topResize = shapeNewTrbl.bottom - otherTrbl.top;\n      }\n\n      if (abs(otherTrbl.bottom - shapeTrbl.bottom) < 5) {\n        bottomResize = shapeNewTrbl.bottom - otherTrbl.bottom;\n      }\n    }\n\n    if (topResize || rightResize || bottomResize || leftResize) {\n\n      resizeNeeded.push({\n        shape: other,\n        newBounds: resizeTRBL(other, {\n          top: topResize,\n          right: rightResize,\n          bottom: bottomResize,\n          left: leftResize\n        })\n      });\n    }\n\n  });\n\n  return resizeNeeded;\n}","import {\n  assign,\n  forEach,\n  isArray\n} from 'min-dash';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isEventSubProcess\n} from '../../util/DiUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  getChildLanes\n} from '../modeling/util/LaneUtil';\n\nimport {\n  hasPrimaryModifier\n} from 'diagram-js/lib/util/Mouse';\n\n\n/**\n * A provider for BPMN 2.0 elements context pad\n */\nexport default function ContextPadProvider(\n    config, injector, eventBus,\n    contextPad, modeling, elementFactory,\n    connect, create, popupMenu,\n    canvas, rules, translate) {\n\n  config = config || {};\n\n  contextPad.registerProvider(this);\n\n  this._contextPad = contextPad;\n\n  this._modeling = modeling;\n\n  this._elementFactory = elementFactory;\n  this._connect = connect;\n  this._create = create;\n  this._popupMenu = popupMenu;\n  this._canvas = canvas;\n  this._rules = rules;\n  this._translate = translate;\n\n  if (config.autoPlace !== false) {\n    this._autoPlace = injector.get('autoPlace', false);\n  }\n\n  eventBus.on('create.end', 250, function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (!hasPrimaryModifier(event) || !contextPad.isOpen(shape)) {\n      return;\n    }\n\n    var entries = contextPad.getEntries(shape);\n\n    if (entries.replace) {\n      entries.replace.action.click(event, shape);\n    }\n  });\n}\n\nContextPadProvider.$inject = [\n  'config.contextPad',\n  'injector',\n  'eventBus',\n  'contextPad',\n  'modeling',\n  'elementFactory',\n  'connect',\n  'create',\n  'popupMenu',\n  'canvas',\n  'rules',\n  'translate'\n];\n\n\nContextPadProvider.prototype.getContextPadEntries = function(element) {\n\n  var contextPad = this._contextPad,\n      modeling = this._modeling,\n\n      elementFactory = this._elementFactory,\n      connect = this._connect,\n      create = this._create,\n      popupMenu = this._popupMenu,\n      canvas = this._canvas,\n      rules = this._rules,\n      autoPlace = this._autoPlace,\n      translate = this._translate;\n\n  var actions = {};\n\n  if (element.type === 'label') {\n    return actions;\n  }\n\n  var businessObject = element.businessObject;\n\n  function startConnect(event, element) {\n    connect.start(event, element);\n  }\n\n  function removeElement(e) {\n    modeling.removeElements([ element ]);\n  }\n\n  function getReplaceMenuPosition(element) {\n\n    var Y_OFFSET = 5;\n\n    var diagramContainer = canvas.getContainer(),\n        pad = contextPad.getPad(element).html;\n\n    var diagramRect = diagramContainer.getBoundingClientRect(),\n        padRect = pad.getBoundingClientRect();\n\n    var top = padRect.top - diagramRect.top;\n    var left = padRect.left - diagramRect.left;\n\n    var pos = {\n      x: left,\n      y: top + padRect.height + Y_OFFSET\n    };\n\n    return pos;\n  }\n\n\n  /**\n   * Create an append action\n   *\n   * @param {String} type\n   * @param {String} className\n   * @param {String} [title]\n   * @param {Object} [options]\n   *\n   * @return {Object} descriptor\n   */\n  function appendAction(type, className, title, options) {\n\n    if (typeof title !== 'string') {\n      options = title;\n      title = translate('Append {type}', { type: type.replace(/^bpmn:/, '') });\n    }\n\n    function appendStart(event, element) {\n\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n      create.start(event, shape, {\n        source: element\n      });\n    }\n\n\n    var append = autoPlace ? function(event, element) {\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      autoPlace.append(element, shape);\n    } : appendStart;\n\n\n    return {\n      group: 'model',\n      className: className,\n      title: title,\n      action: {\n        dragstart: appendStart,\n        click: append\n      }\n    };\n  }\n\n  function splitLaneHandler(count) {\n\n    return function(event, element) {\n\n      // actual split\n      modeling.splitLane(element, count);\n\n      // refresh context pad after split to\n      // get rid of split icons\n      contextPad.open(element, true);\n    };\n  }\n\n\n  if (isAny(businessObject, [ 'bpmn:Lane', 'bpmn:Participant' ]) && isExpanded(businessObject)) {\n\n    var childLanes = getChildLanes(element);\n\n    assign(actions, {\n      'lane-insert-above': {\n        group: 'lane-insert-above',\n        className: 'bpmn-icon-lane-insert-above',\n        title: translate('Add Lane above'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'top');\n          }\n        }\n      }\n    });\n\n    if (childLanes.length < 2) {\n\n      if (element.height >= 120) {\n        assign(actions, {\n          'lane-divide-two': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-two',\n            title: translate('Divide into two Lanes'),\n            action: {\n              click: splitLaneHandler(2)\n            }\n          }\n        });\n      }\n\n      if (element.height >= 180) {\n        assign(actions, {\n          'lane-divide-three': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-three',\n            title: translate('Divide into three Lanes'),\n            action: {\n              click: splitLaneHandler(3)\n            }\n          }\n        });\n      }\n    }\n\n    assign(actions, {\n      'lane-insert-below': {\n        group: 'lane-insert-below',\n        className: 'bpmn-icon-lane-insert-below',\n        title: translate('Add Lane below'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'bottom');\n          }\n        }\n      }\n    });\n\n  }\n\n  if (is(businessObject, 'bpmn:FlowNode')) {\n\n    if (is(businessObject, 'bpmn:EventBasedGateway')) {\n\n      assign(actions, {\n        'append.receive-task': appendAction(\n          'bpmn:ReceiveTask',\n          'bpmn-icon-receive-task',\n          translate('Append ReceiveTask')\n        ),\n        'append.message-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-message',\n          translate('Append MessageIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:MessageEventDefinition' }\n        ),\n        'append.timer-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-timer',\n          translate('Append TimerIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:TimerEventDefinition' }\n        ),\n        'append.condition-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-condition',\n          translate('Append ConditionIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:ConditionalEventDefinition' }\n        ),\n        'append.signal-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-signal',\n          translate('Append SignalIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:SignalEventDefinition' }\n        )\n      });\n    } else\n\n    if (isEventType(businessObject, 'bpmn:BoundaryEvent', 'bpmn:CompensateEventDefinition')) {\n\n      assign(actions, {\n        'append.compensation-activity':\n            appendAction(\n              'bpmn:Task',\n              'bpmn-icon-task',\n              translate('Append compensation activity'),\n              {\n                isForCompensation: true\n              }\n            )\n      });\n    } else\n\n    if (!is(businessObject, 'bpmn:EndEvent') &&\n        !businessObject.isForCompensation &&\n        !isEventType(businessObject, 'bpmn:IntermediateThrowEvent', 'bpmn:LinkEventDefinition') &&\n        !isEventSubProcess(businessObject)) {\n\n      assign(actions, {\n        'append.end-event': appendAction(\n          'bpmn:EndEvent',\n          'bpmn-icon-end-event-none',\n          translate('Append EndEvent')\n        ),\n        'append.gateway': appendAction(\n          'bpmn:ExclusiveGateway',\n          'bpmn-icon-gateway-none',\n          translate('Append Gateway')\n        ),\n        'append.append-task': appendAction(\n          'bpmn:Task',\n          'bpmn-icon-task',\n          translate('Append Task')\n        ),\n        'append.intermediate-event': appendAction(\n          'bpmn:IntermediateThrowEvent',\n          'bpmn-icon-intermediate-event-none',\n          translate('Append Intermediate/Boundary Event')\n        )\n      });\n    }\n  }\n\n  if (!popupMenu.isEmpty(element, 'bpmn-replace')) {\n\n    // Replace menu entry\n    assign(actions, {\n      'replace': {\n        group: 'edit',\n        className: 'bpmn-icon-screw-wrench',\n        title: translate('Change type'),\n        action: {\n          click: function(event, element) {\n\n            var position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y }\n            });\n\n            popupMenu.open(element, 'bpmn-replace', position);\n          }\n        }\n      }\n    });\n  }\n\n  if (isAny(businessObject, [\n    'bpmn:FlowNode',\n    'bpmn:InteractionNode',\n    'bpmn:DataObjectReference',\n    'bpmn:DataStoreReference'\n  ])) {\n\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation'),\n\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using ' +\n                  (businessObject.isForCompensation ? '' : 'Sequence/MessageFlow or ') +\n                  'Association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (isAny(businessObject, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ])) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using DataInputAssociation'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  // delete element entry, only show if allowed by rules\n  var deleteAllowed = rules.allowed('elements.delete', { elements: [ element ] });\n\n  if (isArray(deleteAllowed)) {\n\n    // was the element returned as a deletion candidate?\n    deleteAllowed = deleteAllowed[0] === element;\n  }\n\n  if (deleteAllowed) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: translate('Remove'),\n        action: {\n          click: removeElement\n        }\n      }\n    });\n  }\n\n  return actions;\n};\n\n\n// helpers /////////\n\nfunction isEventType(eventBo, type, definition) {\n\n  var isType = eventBo.$instanceOf(type);\n  var isDefinition = false;\n\n  var definitions = eventBo.eventDefinitions || [];\n  forEach(definitions, function(def) {\n    if (def.$type === definition) {\n      isDefinition = true;\n    }\n  });\n\n  return isType && isDefinition;\n}\n","import DirectEditingModule from 'diagram-js-direct-editing';\nimport ContextPadModule from 'diagram-js/lib/features/context-pad';\nimport SelectionModule from 'diagram-js/lib/features/selection';\nimport ConnectModule from 'diagram-js/lib/features/connect';\nimport CreateModule from 'diagram-js/lib/features/create';\nimport PopupMenuModule from '../popup-menu';\n\nimport ContextPadProvider from './ContextPadProvider';\n\nexport default {\n  __depends__: [\n    DirectEditingModule,\n    ContextPadModule,\n    SelectionModule,\n    ConnectModule,\n    CreateModule,\n    PopupMenuModule\n  ],\n  __init__: [ 'contextPadProvider' ],\n  contextPadProvider: [ 'type', ContextPadProvider ]\n};","import {\n  sortBy,\n  forEach,\n  filter\n} from 'min-dash';\n\nvar AXIS_DIMENSIONS = {\n  horizontal: [ 'x', 'width' ],\n  vertical: [ 'y', 'height' ]\n};\n\nvar THRESHOLD = 5;\n\n\n/**\n * Groups and filters elements and then trigger even distribution.\n */\nexport default function DistributeElements(modeling) {\n  this._modeling = modeling;\n\n  this._filters = [];\n\n  // register filter for filtering big elements\n  this.registerFilter(function(elements, axis, dimension) {\n    var elementsSize = 0,\n        numOfShapes = 0,\n        avgDimension;\n\n    forEach(elements, function(element) {\n      if (element.waypoints || element.labelTarget) {\n        return;\n      }\n\n      elementsSize += element[dimension];\n\n      numOfShapes += 1;\n    });\n\n    avgDimension = Math.round(elementsSize / numOfShapes);\n\n    return filter(elements, function(element) {\n      return element[dimension] < (avgDimension + 50);\n    });\n  });\n\n}\n\nDistributeElements.$inject = [ 'modeling' ];\n\n\n/**\n * Registers filter functions that allow external parties to filter\n * out certain elements.\n *\n * @param  {Function} filterFn\n */\nDistributeElements.prototype.registerFilter = function(filterFn) {\n  if (typeof filterFn !== 'function') {\n    throw new Error('the filter has to be a function');\n  }\n\n  this._filters.push(filterFn);\n};\n\n/**\n * Distributes the elements with a given orientation\n *\n * @param  {Array} elements    [description]\n * @param  {String} orientation [description]\n */\nDistributeElements.prototype.trigger = function(elements, orientation) {\n  var modeling = this._modeling;\n\n  var groups,\n      distributableElements;\n\n  if (elements.length < 3) {\n    return;\n  }\n\n  this._setOrientation(orientation);\n\n  distributableElements = this._filterElements(elements);\n\n  groups = this._createGroups(distributableElements);\n\n  // nothing to distribute\n  if (groups.length <= 2) {\n    return;\n  }\n\n  modeling.distributeElements(groups, this._axis, this._dimension);\n\n  return groups;\n};\n\n/**\n * Filters the elements with provided filters by external parties\n *\n * @param  {Array[Elements]} elements\n *\n * @return {Array[Elements]}\n */\nDistributeElements.prototype._filterElements = function(elements) {\n  var filters = this._filters,\n      axis = this._axis,\n      dimension = this._dimension,\n      distributableElements = [].concat(elements);\n\n  if (!filters.length) {\n    return elements;\n  }\n\n  forEach(filters, function(filterFn) {\n    distributableElements = filterFn(distributableElements, axis, dimension);\n  });\n\n  return distributableElements;\n};\n\n\n/**\n * Create range (min, max) groups. Also tries to group elements\n * together that share the same range.\n *\n * @example\n * \tvar distributableElements = [\n * \t\t{\n * \t\t\trange: {\n * \t\t\t\tmin: 100,\n * \t\t\t\tmax: 200\n * \t\t\t},\n * \t\t\telements: [ { id: 'shape1', .. }]\n * \t\t}\n * \t]\n *\n * @param  {Array} elements\n *\n * @return {Array[Objects]}\n */\nDistributeElements.prototype._createGroups = function(elements) {\n  var rangeGroups = [],\n      self = this,\n      axis = this._axis,\n      dimension = this._dimension;\n\n  if (!axis) {\n    throw new Error('must have a defined \"axis\" and \"dimension\"');\n  }\n\n  // sort by 'left->right' or 'top->bottom'\n  var sortedElements = sortBy(elements, axis);\n\n  forEach(sortedElements, function(element, idx) {\n    var elementRange = self._findRange(element, axis, dimension),\n        range;\n\n    var previous = rangeGroups[rangeGroups.length - 1];\n\n    if (previous && self._hasIntersection(previous.range, elementRange)) {\n      rangeGroups[rangeGroups.length - 1].elements.push(element);\n    } else {\n      range = { range: elementRange, elements: [ element ] };\n\n      rangeGroups.push(range);\n    }\n  });\n\n  return rangeGroups;\n};\n\n\n/**\n * Maps a direction to the according axis and dimension\n *\n * @param  {String} direction 'horizontal' or 'vertical'\n */\nDistributeElements.prototype._setOrientation = function(direction) {\n  var orientation = AXIS_DIMENSIONS[direction];\n\n  this._axis = orientation[0];\n  this._dimension = orientation[1];\n};\n\n\n/**\n * Checks if the two ranges intercept each other\n *\n * @param  {Object} rangeA {min, max}\n * @param  {Object} rangeB {min, max}\n *\n * @return {Boolean}\n */\nDistributeElements.prototype._hasIntersection = function(rangeA, rangeB) {\n  return Math.max(rangeA.min, rangeA.max) >= Math.min(rangeB.min, rangeB.max) &&\n         Math.min(rangeA.min, rangeA.max) <= Math.max(rangeB.min, rangeB.max);\n};\n\n\n/**\n * Returns the min and max values for an element\n *\n * @param  {[type]} element   [description]\n * @param  {[type]} axis      [description]\n * @param  {[type]} dimension [description]\n *\n * @return {[type]}           [description]\n */\nDistributeElements.prototype._findRange = function(element) {\n  var axis = element[this._axis],\n      dimension = element[this._dimension];\n\n  return {\n    min: axis + THRESHOLD,\n    max: axis + dimension - THRESHOLD\n  };\n};\n","import DistributeElements from './DistributeElements';\n\nexport default {\n  __init__: [ 'distributeElements' ],\n  distributeElements: [ 'type', DistributeElements ]\n};\n","import {\n  filter\n} from 'min-dash';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\n\n/**\n * Registers element exclude filters for elements that\n * currently do not support distribution.\n */\nexport default function BpmnDistributeElements(distributeElements) {\n\n  distributeElements.registerFilter(function(elements) {\n    return filter(elements, function(element) {\n      var cannotDistribute = isAny(element, [\n        'bpmn:Association',\n        'bpmn:BoundaryEvent',\n        'bpmn:DataInputAssociation',\n        'bpmn:DataOutputAssociation',\n        'bpmn:Lane',\n        'bpmn:MessageFlow',\n        'bpmn:Participant',\n        'bpmn:SequenceFlow',\n        'bpmn:TextAnnotation'\n      ]);\n\n      return !(element.labelTarget || cannotDistribute);\n    });\n  });\n}\n\nBpmnDistributeElements.$inject = [ 'distributeElements' ];","import DistributeElementsModule from 'diagram-js/lib/features/distribute-elements';\n\nimport BpmnDistributeElements from './BpmnDistributeElements';\n\n\nexport default {\n  __depends__: [\n    DistributeElementsModule\n  ],\n  __init__: [ 'bpmnDistributeElements' ],\n  bpmnDistributeElements: [ 'type', BpmnDistributeElements ]\n};\n","import {\n  forEach,\n  isArray\n} from 'min-dash';\n\nvar NOT_REGISTERED_ERROR = 'is not a registered action',\n    IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´\n * and likewise unregister existing ones with ´unregisterAction´.\n *\n *\n * ## Life-Cycle and configuration\n *\n * The editor actions will wait for diagram initialization before\n * registering default actions _and_ firing an `editorActions.init` event.\n *\n * Interested parties may listen to the `editorActions.init` event with\n * low priority to check, which actions got registered. Other components\n * may use the event to register their own actions via `registerAction`.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function EditorActions(eventBus, injector) {\n\n  // initialize actions\n  this._actions = {};\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n\n    // all diagram modules got loaded; check which ones\n    // are available and register the respective default actions\n    self._registerDefaultActions(injector);\n\n    // ask interested parties to register available editor\n    // actions on diagram initialization\n    eventBus.fire('editorActions.init', {\n      editorActions: self\n    });\n  });\n\n}\n\nEditorActions.$inject = [\n  'eventBus',\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (1) retrieve optional components to integrate with\n\n  var commandStack = injector.get('commandStack', false);\n  var modeling = injector.get('modeling', false);\n  var selection = injector.get('selection', false);\n  var zoomScroll = injector.get('zoomScroll', false);\n  var copyPaste = injector.get('copyPaste', false);\n  var canvas = injector.get('canvas', false);\n  var rules = injector.get('rules', false);\n  var keyboardMove = injector.get('keyboardMove', false);\n  var keyboardMoveSelection = injector.get('keyboardMoveSelection', false);\n\n  // (2) check components and register actions\n\n  if (commandStack) {\n    this.register('undo', function() {\n      commandStack.undo();\n    });\n\n    this.register('redo', function() {\n      commandStack.redo();\n    });\n  }\n\n  if (copyPaste && selection) {\n    this.register('copy', function() {\n      var selectedElements = selection.get();\n\n      copyPaste.copy(selectedElements);\n    });\n  }\n\n  if (copyPaste) {\n    this.register('paste', function() {\n      copyPaste.paste();\n    });\n  }\n\n  if (zoomScroll) {\n    this.register('stepZoom', function(opts) {\n      zoomScroll.stepZoom(opts.value);\n    });\n  }\n\n  if (canvas) {\n    this.register('zoom', function(opts) {\n      canvas.zoom(opts.value);\n    });\n  }\n\n  if (modeling && selection && rules) {\n    this.register('removeSelection', function() {\n\n      var selectedElements = selection.get();\n\n      if (!selectedElements.length) {\n        return;\n      }\n\n      var allowed = rules.allowed('elements.delete', { elements: selectedElements }),\n          removableElements;\n\n      if (allowed === false) {\n        return;\n      }\n      else if (isArray(allowed)) {\n        removableElements = allowed;\n      }\n      else {\n        removableElements = selectedElements;\n      }\n\n      if (removableElements.length) {\n        modeling.removeElements(removableElements.slice());\n      }\n    });\n  }\n\n  if (keyboardMove) {\n    this.register('moveCanvas', function(opts) {\n      keyboardMove.moveCanvas(opts);\n    });\n  }\n\n  if (keyboardMoveSelection) {\n    this.register('moveSelection', function(opts) {\n      keyboardMoveSelection.moveSelection(opts.direction, opts.accelerated);\n    });\n  }\n\n};\n\n\n/**\n * Triggers a registered action\n *\n * @param  {String} action\n * @param  {Object} opts\n *\n * @return {Unknown} Returns what the registered listener returns\n */\nEditorActions.prototype.trigger = function(action, opts) {\n  if (!this._actions[action]) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  return this._actions[action](opts);\n};\n\n\n/**\n * Registers a collections of actions.\n * The key of the object will be the name of the action.\n *\n * @example\n * ´´´\n * var actions = {\n *   spaceTool: function() {\n *     spaceTool.activateSelection();\n *   },\n *   lassoTool: function() {\n *     lassoTool.activateSelection();\n *   }\n * ];\n *\n * editorActions.register(actions);\n *\n * editorActions.isRegistered('spaceTool'); // true\n * ´´´\n *\n * @param  {Object} actions\n */\nEditorActions.prototype.register = function(actions, listener) {\n  var self = this;\n\n  if (typeof actions === 'string') {\n    return this._registerAction(actions, listener);\n  }\n\n  forEach(actions, function(listener, action) {\n    self._registerAction(action, listener);\n  });\n};\n\n/**\n * Registers a listener to an action key\n *\n * @param  {String} action\n * @param  {Function} listener\n */\nEditorActions.prototype._registerAction = function(action, listener) {\n  if (this.isRegistered(action)) {\n    throw error(action, IS_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = listener;\n};\n\n/**\n * Unregister an existing action\n *\n * @param {String} action\n */\nEditorActions.prototype.unregister = function(action) {\n  if (!this.isRegistered(action)) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = undefined;\n};\n\n/**\n * Returns the number of actions that are currently registered\n *\n * @return {Number}\n */\nEditorActions.prototype.getActions = function() {\n  return Object.keys(this._actions);\n};\n\n/**\n * Checks wether the given action is registered\n *\n * @param {String} action\n *\n * @return {Boolean}\n */\nEditorActions.prototype.isRegistered = function(action) {\n  return !!this._actions[action];\n};\n\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}\n","import EditorActions from './EditorActions';\n\nexport default {\n  __init__: [ 'editorActions' ],\n  editorActions: [ 'type', EditorActions ]\n};\n","import inherits from 'inherits';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nimport { filter } from 'min-dash';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  getBBox\n} from 'diagram-js/lib/util/Elements';\n\n\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(BpmnEditorActions, EditorActions);\n\nBpmnEditorActions.$inject = [\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nBpmnEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function() {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function() {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function(element) {\n          return !is(element, 'bpmn:Lane');\n        });\n\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function(opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function() {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function() {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function(element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function(element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n\n      modeling.moveElements(\n        elements,\n        { x: -boundingBox.x, y: -boundingBox.y },\n        rootElement\n      );\n    });\n  }\n\n};","import EditorActionsModule from 'diagram-js/lib/features/editor-actions';\n\nimport BpmnEditorActions from './BpmnEditorActions';\n\nexport default {\n  __depends__: [\n    EditorActionsModule\n  ],\n  editorActions: [ 'type', BpmnEditorActions ]\n};\n","import { isAny } from '../modeling/util/ModelingUtil';\r\n\r\nexport default function BpmnGridSnapping(eventBus) {\r\n  eventBus.on([\r\n    'create.init',\r\n    'shape.move.init'\r\n  ], function(event) {\r\n    var context = event.context,\r\n        shape = event.shape;\r\n\r\n    if (isAny(shape, [\r\n      'bpmn:Participant',\r\n      'bpmn:SubProcess',\r\n      'bpmn:TextAnnotation'\r\n    ])) {\r\n      if (!context.gridSnappingContext) {\r\n        context.gridSnappingContext = {};\r\n      }\r\n\r\n      context.gridSnappingContext.snapLocation = 'top-left';\r\n    }\r\n  });\r\n}\r\n\r\nBpmnGridSnapping.$inject = [ 'eventBus' ];","export var SPACING = 10;\n\nexport function quantize(value, quantum, fn) {\n  if (!fn) {\n    fn = 'round';\n  }\n\n  return Math[ fn ](value / quantum) * quantum;\n}","import {\r\n  setSnapped,\r\n  isSnapped\r\n} from '../snapping/SnapUtil';\r\n\r\nimport { isCmd } from '../keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  assign,\r\n  isNumber\r\n} from 'min-dash';\r\n\r\nimport {\r\n  SPACING,\r\n  quantize\r\n} from './GridUtil';\r\n\r\nvar LOWER_PRIORITY = 1200;\r\nvar LOW_PRIORITY = 800;\r\n\r\n/**\r\n * Basic grid snapping that covers connecting, creating, moving, resizing shapes, moving bendpoints\r\n * and connection segments.\r\n */\r\nexport default function GridSnapping(elementRegistry, eventBus, config) {\r\n\r\n  var active = !config || config.active !== false;\r\n\r\n  this._eventBus = eventBus;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('diagram.init', LOW_PRIORITY, function() {\r\n    self.setActive(active);\r\n  });\r\n\r\n  eventBus.on([\r\n    'create.move',\r\n    'create.end',\r\n    'bendpoint.move.move',\r\n    'bendpoint.move.end',\r\n    'connect.move',\r\n    'connect.end',\r\n    'connectionSegment.move.move',\r\n    'connectionSegment.move.end',\r\n    'resize.move',\r\n    'resize.end',\r\n    'shape.move.move',\r\n    'shape.move.end'\r\n  ], LOWER_PRIORITY, function(event) {\r\n    var originalEvent = event.originalEvent;\r\n\r\n    if (!self.active || (originalEvent && isCmd(originalEvent))) {\r\n      return;\r\n    }\r\n\r\n    var context = event.context,\r\n        gridSnappingContext = context.gridSnappingContext;\r\n\r\n    if (!gridSnappingContext) {\r\n      gridSnappingContext = context.gridSnappingContext = {};\r\n    }\r\n\r\n    [ 'x', 'y' ].forEach(function(axis) {\r\n      var options = {};\r\n\r\n      // allow snapping with offset\r\n      var snapOffset = getSnapOffset(event, axis, elementRegistry);\r\n\r\n      if (snapOffset) {\r\n        options.offset = snapOffset;\r\n      }\r\n\r\n      // allow snapping with min and max\r\n      var snapConstraints = getSnapConstraints(event, axis);\r\n\r\n      if (snapConstraints) {\r\n        assign(options, snapConstraints);\r\n      }\r\n\r\n      if (!isSnapped(event, axis)) {\r\n        self.snapEvent(event, axis, options);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Snap an events x or y with optional min, max and offset.\r\n *\r\n * @param {Object} event\r\n * @param {string} axis\r\n * @param {number} [options.min]\r\n * @param {number} [options.max]\r\n * @param {number} [options.offset]\r\n */\r\nGridSnapping.prototype.snapEvent = function(event, axis, options) {\r\n  var snappedValue = this.snapValue(event[ axis ], options);\r\n\r\n  setSnapped(event, axis, snappedValue);\r\n};\r\n\r\n/**\r\n * Expose grid spacing for third parties (i.e. extensions).\r\n *\r\n * @return {Number} spacing of grid dots\r\n */\r\nGridSnapping.prototype.getGridSpacing = function() {\r\n  return SPACING;\r\n};\r\n\r\n/**\r\n * Snap value with optional min, max and offset.\r\n *\r\n * @param {number} value\r\n * @param {Object} options\r\n * @param {number} [options.min]\r\n * @param {number} [options.max]\r\n * @param {number} [options.offset]\r\n */\r\nGridSnapping.prototype.snapValue = function(value, options) {\r\n  var offset = 0;\r\n\r\n  if (options && options.offset) {\r\n    offset = options.offset;\r\n  }\r\n\r\n  value += offset;\r\n\r\n  value = quantize(value, SPACING);\r\n\r\n  var min, max;\r\n\r\n  if (options && options.min) {\r\n    min = options.min;\r\n\r\n    if (isNumber(min)) {\r\n      min = quantize(min + offset, SPACING, 'ceil');\r\n\r\n      value = Math.max(value, min);\r\n    }\r\n  }\r\n\r\n  if (options && options.max) {\r\n    max = options.max;\r\n\r\n    if (isNumber(max)) {\r\n      max = quantize(max + offset, SPACING, 'floor');\r\n\r\n      value = Math.min(value, max);\r\n    }\r\n  }\r\n\r\n  value -= offset;\r\n\r\n  return value;\r\n};\r\n\r\nGridSnapping.prototype.isActive = function() {\r\n  return this.active;\r\n};\r\n\r\nGridSnapping.prototype.setActive = function(active) {\r\n  this.active = active;\r\n\r\n  this._eventBus.fire('gridSnapping.toggle', { active: active });\r\n};\r\n\r\nGridSnapping.prototype.toggleActive = function() {\r\n  this.setActive(!this.active);\r\n};\r\n\r\nGridSnapping.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'config.gridSnapping'\r\n];\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Get minimum and maximum snap constraints.\r\n * Constraints are cached.\r\n *\r\n * @param {Object} event\r\n * @param {Object} event.context\r\n * @param {string} axis\r\n *\r\n * @returns {boolean|Object}\r\n */\r\nfunction getSnapConstraints(event, axis) {\r\n  var context = event.context,\r\n      createConstraints = context.createConstraints,\r\n      resizeConstraints = context.resizeConstraints || {},\r\n      gridSnappingContext = context.gridSnappingContext,\r\n      snapConstraints = gridSnappingContext.snapConstraints;\r\n\r\n  // cache snap constraints\r\n  if (snapConstraints && snapConstraints[ axis ]) {\r\n    return snapConstraints[ axis ];\r\n  }\r\n\r\n  if (!snapConstraints) {\r\n    snapConstraints = gridSnappingContext.snapConstraints = {};\r\n  }\r\n\r\n  if (!snapConstraints[ axis ]) {\r\n    snapConstraints[ axis ] = {};\r\n  }\r\n\r\n  var direction = context.direction;\r\n\r\n  // create\r\n  if (createConstraints) {\r\n    if (isHorizontal(axis)) {\r\n      snapConstraints.x.min = createConstraints.left;\r\n      snapConstraints.x.max = createConstraints.right;\r\n    } else {\r\n      snapConstraints.y.min = createConstraints.top;\r\n      snapConstraints.y.max = createConstraints.bottom;\r\n    }\r\n  }\r\n\r\n  // resize\r\n  var minResizeConstraints = resizeConstraints.min,\r\n      maxResizeConstraints = resizeConstraints.max;\r\n\r\n  if (minResizeConstraints) {\r\n    if (isHorizontal(axis)) {\r\n\r\n      if (isWest(direction)) {\r\n        snapConstraints.x.max = minResizeConstraints.left;\r\n      } else {\r\n        snapConstraints.x.min = minResizeConstraints.right;\r\n      }\r\n\r\n    } else {\r\n\r\n      if (isNorth(direction)) {\r\n        snapConstraints.y.max = minResizeConstraints.top;\r\n      } else {\r\n        snapConstraints.y.min = minResizeConstraints.bottom;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  if (maxResizeConstraints) {\r\n    if (isHorizontal(axis)) {\r\n\r\n      if (isWest(direction)) {\r\n        snapConstraints.x.min = maxResizeConstraints.left;\r\n      } else {\r\n        snapConstraints.x.max = maxResizeConstraints.right;\r\n      }\r\n\r\n    } else {\r\n\r\n      if (isNorth(direction)) {\r\n        snapConstraints.y.min = maxResizeConstraints.top;\r\n      } else {\r\n        snapConstraints.y.max = maxResizeConstraints.bottom;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  return snapConstraints[ axis ];\r\n}\r\n\r\n/**\r\n * Get snap offset.\r\n * Offset is cached.\r\n *\r\n * @param {Object} event\r\n * @param {string} axis\r\n * @param {ElementRegistry} elementRegistry\r\n *\r\n * @returns {number}\r\n */\r\nfunction getSnapOffset(event, axis, elementRegistry) {\r\n  var context = event.context,\r\n      shape = event.shape,\r\n      gridSnappingContext = context.gridSnappingContext,\r\n      snapLocation = gridSnappingContext.snapLocation,\r\n      snapOffset = gridSnappingContext.snapOffset;\r\n\r\n  // cache snap offset\r\n  if (snapOffset && isNumber(snapOffset[ axis ])) {\r\n    return snapOffset[ axis ];\r\n  }\r\n\r\n  if (!snapOffset) {\r\n    snapOffset = gridSnappingContext.snapOffset = {};\r\n  }\r\n\r\n  if (!isNumber(snapOffset[ axis ])) {\r\n    snapOffset[ axis ] = 0;\r\n  }\r\n\r\n  if (!shape) {\r\n    return snapOffset[ axis ];\r\n  }\r\n\r\n  if (!elementRegistry.get(shape.id)) {\r\n\r\n    if (isHorizontal(axis)) {\r\n      snapOffset[ axis ] += shape[ axis ] + shape.width / 2;\r\n    } else {\r\n      snapOffset[ axis ] += shape[ axis ] + shape.height / 2;\r\n    }\r\n  }\r\n\r\n  if (!snapLocation) {\r\n    return snapOffset[ axis ];\r\n  }\r\n\r\n  if (axis === 'x') {\r\n    if (/left/.test(snapLocation)) {\r\n      snapOffset[ axis ] -= shape.width / 2;\r\n    } else if (/right/.test(snapLocation)) {\r\n      snapOffset[ axis ] += shape.width / 2;\r\n    }\r\n  } else {\r\n    if (/top/.test(snapLocation)) {\r\n      snapOffset[ axis ] -= shape.height / 2;\r\n    } else if (/bottom/.test(snapLocation)) {\r\n      snapOffset[ axis ] += shape.height / 2;\r\n    }\r\n  }\r\n\r\n  return snapOffset[ axis ];\r\n}\r\n\r\nfunction isHorizontal(axis) {\r\n  return axis === 'x';\r\n}\r\n\r\nfunction isNorth(direction) {\r\n  return direction.indexOf('n') !== -1;\r\n}\r\n\r\nfunction isWest(direction) {\r\n  return direction.indexOf('w') !== -1;\r\n}","import inherits from 'inherits';\r\n\r\nimport CommandInterceptor from '../../../command/CommandInterceptor';\r\n\r\nimport {\r\n  assign,\r\n  isString\r\n} from 'min-dash';\r\n\r\n\r\n/**\r\n * Integrates resizing with grid snapping.\r\n */\r\nexport default function ResizeBehavior(eventBus, gridSnapping) {\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  this._gridSnapping = gridSnapping;\r\n\r\n  var self = this;\r\n\r\n  this.preExecute('shape.resize', function(event) {\r\n    var context = event.context,\r\n        hints = context.hints || {},\r\n        autoResize = hints.autoResize;\r\n\r\n    if (!autoResize) {\r\n      return;\r\n    }\r\n\r\n    var shape = context.shape,\r\n        newBounds = context.newBounds;\r\n\r\n    if (isString(autoResize)) {\r\n      context.newBounds = self.snapComplex(newBounds, autoResize);\r\n    } else {\r\n      context.newBounds = self.snapSimple(shape, newBounds);\r\n    }\r\n  });\r\n}\r\n\r\nResizeBehavior.$inject = [\r\n  'eventBus',\r\n  'gridSnapping',\r\n  'modeling'\r\n];\r\n\r\ninherits(ResizeBehavior, CommandInterceptor);\r\n\r\n/**\r\n * Snap width and height in relation to center.\r\n *\r\n * @param {djs.model.shape} shape\r\n * @param {Bounds} newBounds\r\n *\r\n * @returns {Bounds} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapSimple = function(shape, newBounds) {\r\n  var gridSnapping = this._gridSnapping;\r\n\r\n  newBounds.width = gridSnapping.snapValue(newBounds.width, {\r\n    min: newBounds.width\r\n  });\r\n\r\n  newBounds.height = gridSnapping.snapValue(newBounds.height, {\r\n    min: newBounds.height\r\n  });\r\n\r\n  newBounds.x = shape.x + (shape.width / 2) - (newBounds.width / 2);\r\n  newBounds.y = shape.y + (shape.height / 2) - (newBounds.height / 2);\r\n\r\n  return newBounds;\r\n};\r\n\r\n/**\r\n * Snap x, y, width and height according to given directions.\r\n *\r\n * @param {Bounds} newBounds\r\n * @param {string} directions - Directions as {n|w|s|e}.\r\n *\r\n * @returns {Bounds} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapComplex = function(newBounds, directions) {\r\n  if (/w|e/.test(directions)) {\r\n    newBounds = this.snapHorizontally(newBounds, directions);\r\n  }\r\n\r\n  if (/n|s/.test(directions)) {\r\n    newBounds = this.snapVertically(newBounds, directions);\r\n  }\r\n\r\n  return newBounds;\r\n};\r\n\r\n/**\r\n * Snap in one or both directions horizontally.\r\n *\r\n * @param {Bounds} newBounds\r\n * @param {string} directions - Directions as {n|w|s|e}.\r\n *\r\n * @returns {Bounds} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapHorizontally = function(newBounds, directions) {\r\n  var gridSnapping = this._gridSnapping,\r\n      west = /w/.test(directions),\r\n      east = /e/.test(directions);\r\n\r\n  var snappedNewBounds = {};\r\n\r\n  snappedNewBounds.width = gridSnapping.snapValue(newBounds.width, {\r\n    min: newBounds.width\r\n  });\r\n\r\n  if (east) {\r\n\r\n    // handle <we>\r\n    if (west) {\r\n      snappedNewBounds.x = gridSnapping.snapValue(newBounds.x, {\r\n        max: newBounds.x\r\n      });\r\n\r\n      snappedNewBounds.width += gridSnapping.snapValue(newBounds.x - snappedNewBounds.x, {\r\n        min: newBounds.x - snappedNewBounds.x\r\n      });\r\n    }\r\n\r\n    // handle <e>\r\n    else {\r\n      newBounds.x = newBounds.x + newBounds.width - snappedNewBounds.width;\r\n    }\r\n  }\r\n\r\n  // assign snapped x and width\r\n  assign(newBounds, snappedNewBounds);\r\n\r\n  return newBounds;\r\n};\r\n\r\n/**\r\n * Snap in one or both directions vertically.\r\n *\r\n * @param {Bounds} newBounds\r\n * @param {string} directions - Directions as {n|w|s|e}.\r\n *\r\n * @returns {Bounds} Snapped bounds.\r\n */\r\nResizeBehavior.prototype.snapVertically = function(newBounds, directions) {\r\n  var gridSnapping = this._gridSnapping,\r\n      north = /n/.test(directions),\r\n      south = /s/.test(directions);\r\n\r\n  var snappedNewBounds = {};\r\n\r\n  snappedNewBounds.height = gridSnapping.snapValue(newBounds.height, {\r\n    min: newBounds.height\r\n  });\r\n\r\n  if (north) {\r\n\r\n    // handle <ns>\r\n    if (south) {\r\n      snappedNewBounds.y = gridSnapping.snapValue(newBounds.y, {\r\n        max: newBounds.y\r\n      });\r\n\r\n      snappedNewBounds.height += gridSnapping.snapValue(newBounds.y - snappedNewBounds.y, {\r\n        min: newBounds.y - snappedNewBounds.y\r\n      });\r\n    }\r\n\r\n    // handle <n>\r\n    else {\r\n      newBounds.y = newBounds.y + newBounds.height - snappedNewBounds.height;\r\n    }\r\n  }\r\n\r\n  // assign snapped y and height\r\n  assign(newBounds, snappedNewBounds);\r\n\r\n  return newBounds;\r\n};","var HIGH_PRIORITY = 2000;\r\n\r\n/**\r\n * Integrates space tool with grid snapping.\r\n */\r\nexport default function SpaceToolBehavior(eventBus, gridSnapping) {\r\n  eventBus.on([\r\n    'spaceTool.move',\r\n    'spaceTool.end'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context;\r\n\r\n    if (!context.initialized) {\r\n      return;\r\n    }\r\n\r\n    var axis = context.axis;\r\n\r\n    var snapped;\r\n\r\n    if (axis === 'x') {\r\n\r\n      // snap delta x to multiple of 10\r\n      snapped = gridSnapping.snapValue(event.dx);\r\n\r\n      event.x = event.x + snapped - event.dx;\r\n      event.dx = snapped;\r\n    } else {\r\n\r\n      // snap delta y to multiple of 10\r\n      snapped = gridSnapping.snapValue(event.dy);\r\n\r\n      event.y = event.y + snapped - event.dy;\r\n      event.dy = snapped;\r\n    }\r\n  });\r\n}\r\n\r\nSpaceToolBehavior.$inject = [\r\n  'eventBus',\r\n  'gridSnapping'\r\n];","import ResizeBehavior from './ResizeBehavior';\r\nimport SpaceToolBehavior from './SpaceToolBehavior';\r\n\r\nexport default {\r\n  __init__: [\r\n    'gridSnappingResizeBehavior',\r\n    'gridSnappingSpaceToolBehavior'\r\n  ],\r\n  gridSnappingResizeBehavior: [ 'type', ResizeBehavior ],\r\n  gridSnappingSpaceToolBehavior: [ 'type', SpaceToolBehavior ]\r\n};","import GridSnapping from './GridSnapping';\r\n\r\nimport GridSnappingBehaviorModule from './behavior';\r\n\r\nexport default {\r\n  __depends__: [ GridSnappingBehaviorModule ],\r\n  __init__: [ 'gridSnapping' ],\r\n  gridSnapping: [ 'type', GridSnapping ]\r\n};","import { getNewShapePosition } from '../../auto-place/AutoPlaceUtil';\r\n\r\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\n\r\nexport default function AutoPlaceBehavior(eventBus, gridSnapping) {\r\n  eventBus.on('autoPlace', function(context) {\r\n    var source = context.source,\r\n        sourceMid = getMid(source),\r\n        shape = context.shape;\r\n\r\n    var position = getNewShapePosition(source, shape);\r\n\r\n    [ 'x', 'y' ].forEach(function(axis) {\r\n      var options = {};\r\n\r\n      // do not snap if x/y equal\r\n      if (position[ axis ] === sourceMid[ axis ]) {\r\n        return;\r\n      }\r\n\r\n      if (position[ axis ] > sourceMid[ axis ]) {\r\n        options.min = position[ axis ];\r\n      } else {\r\n        options.max = position[ axis ];\r\n      }\r\n\r\n      if (is(shape, 'bpmn:TextAnnotation')) {\r\n\r\n        if (isHorizontal(axis)) {\r\n          options.offset = -shape.width / 2;\r\n        } else {\r\n          options.offset = -shape.height / 2;\r\n        }\r\n\r\n      }\r\n\r\n      position[ axis ] = gridSnapping.snapValue(position[ axis ], options);\r\n\r\n    });\r\n\r\n    // must be returned to be considered by auto place\r\n    return position;\r\n  });\r\n}\r\n\r\nAutoPlaceBehavior.$inject = [\r\n  'eventBus',\r\n  'gridSnapping'\r\n];\r\n\r\n// helpers //////////\r\n\r\nfunction isHorizontal(axis) {\r\n  return axis === 'x';\r\n}","import { is } from '../../../util/ModelUtil';\r\n\r\nvar HIGHER_PRIORITY = 1750;\r\n\r\n\r\nexport default function CreateParticipantBehavior(canvas, eventBus, gridSnapping) {\r\n  eventBus.on([\r\n    'create.start',\r\n    'shape.move.start'\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        rootElement = canvas.getRootElement();\r\n\r\n    if (!is(shape, 'bpmn:Participant') ||\r\n      !is(rootElement, 'bpmn:Process') ||\r\n      !rootElement.children.length) {\r\n      return;\r\n    }\r\n\r\n    var createConstraints = context.createConstraints;\r\n\r\n    if (!createConstraints) {\r\n      return;\r\n    }\r\n\r\n    shape.width = gridSnapping.snapValue(shape.width, { min: shape.width });\r\n    shape.height = gridSnapping.snapValue(shape.height, { min: shape.height });\r\n  });\r\n}\r\n\r\nCreateParticipantBehavior.$inject = [\r\n  'canvas',\r\n  'eventBus',\r\n  'gridSnapping'\r\n];","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { pointsAligned } from 'diagram-js/lib/util/Geometry';\n\nimport {\n  assign\n} from 'min-dash';\n\nvar HIGH_PRIORITY = 3000;\n\n\n/**\n * Snaps connections with Manhattan layout.\n */\nexport default function LayoutConnectionBehavior(eventBus, gridSnapping, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  this._gridSnapping = gridSnapping;\n\n  var self = this;\n\n  this.postExecuted([\n    'connection.create',\n    'connection.layout'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        connection = context.connection,\n        hints = context.hints || {},\n        waypoints = connection.waypoints;\n\n    if (hints.connectionStart || hints.connectionEnd || hints.createElementsBehavior === false) {\n      return;\n    }\n\n    if (!hasMiddleSegments(waypoints)) {\n      return;\n    }\n\n    modeling.updateWaypoints(connection, self.snapMiddleSegments(waypoints));\n  });\n}\n\nLayoutConnectionBehavior.$inject = [\n  'eventBus',\n  'gridSnapping',\n  'modeling'\n];\n\ninherits(LayoutConnectionBehavior, CommandInterceptor);\n\n/**\n * Snap middle segments of a given connection.\n *\n * @param {Array<Point>} waypoints\n *\n * @returns {Array<Point>}\n */\nLayoutConnectionBehavior.prototype.snapMiddleSegments = function(waypoints) {\n  var gridSnapping = this._gridSnapping,\n      snapped;\n\n  waypoints = waypoints.slice();\n\n  for (var i = 1; i < waypoints.length - 2; i++) {\n\n    snapped = snapSegment(gridSnapping, waypoints[i], waypoints[i + 1]);\n\n    waypoints[i] = snapped[0];\n    waypoints[i + 1] = snapped[1];\n  }\n\n  return waypoints;\n};\n\n\n// helpers //////////\n\n/**\n * Check whether a connection has a middle segments.\n *\n * @param {Array} waypoints\n *\n * @returns {boolean}\n */\nfunction hasMiddleSegments(waypoints) {\n  return waypoints.length > 3;\n}\n\n/**\n * Check whether an alignment is horizontal.\n *\n * @param {string} aligned\n *\n * @returns {boolean}\n */\nfunction horizontallyAligned(aligned) {\n  return aligned === 'h';\n}\n\n/**\n * Check whether an alignment is vertical.\n *\n * @param {string} aligned\n *\n * @returns {boolean}\n */\nfunction verticallyAligned(aligned) {\n  return aligned === 'v';\n}\n\n/**\n * Get middle segments from a given connection.\n *\n * @param {Array} waypoints\n *\n * @returns {Array}\n */\nfunction snapSegment(gridSnapping, segmentStart, segmentEnd) {\n\n  var aligned = pointsAligned(segmentStart, segmentEnd);\n\n  var snapped = {};\n\n  if (horizontallyAligned(aligned)) {\n\n    // snap horizontally\n    snapped.y = gridSnapping.snapValue(segmentStart.y);\n  }\n\n  if (verticallyAligned(aligned)) {\n\n    // snap vertically\n    snapped.x = gridSnapping.snapValue(segmentStart.x);\n  }\n\n  if ('x' in snapped || 'y' in snapped) {\n    segmentStart = assign({}, segmentStart, snapped);\n    segmentEnd = assign({}, segmentEnd, snapped);\n  }\n\n  return [ segmentStart, segmentEnd ];\n}","import AutoPlaceBehavior from './AutoPlaceBehavior';\r\nimport CreateParticipantBehavior from './CreateParticipantBehavior';\r\nimport LayoutConnectionBehavior from './LayoutConnectionBehavior';\r\n\r\nexport default {\r\n  __init__: [\r\n    'gridSnappingAutoPlaceBehavior',\r\n    'gridSnappingCreateParticipantBehavior',\r\n    'gridSnappingLayoutConnectionBehavior',\r\n  ],\r\n  gridSnappingAutoPlaceBehavior: [ 'type', AutoPlaceBehavior ],\r\n  gridSnappingCreateParticipantBehavior: [ 'type', CreateParticipantBehavior ],\r\n  gridSnappingLayoutConnectionBehavior: [ 'type', LayoutConnectionBehavior ]\r\n};","import BpmnGridSnapping from './BpmnGridSnapping';\r\nimport GridSnappingModule from 'diagram-js/lib/features/grid-snapping';\r\n\r\nimport GridSnappingBehaviorModule from './behavior';\r\n\r\nexport default {\r\n  __depends__: [\r\n    GridSnappingModule,\r\n    GridSnappingBehaviorModule\r\n  ],\r\n  __init__: [ 'bpmnGridSnapping' ],\r\n  bpmnGridSnapping: [ 'type', BpmnGridSnapping ]\r\n};","import { is } from '../../util/ModelUtil';\n\nimport { isExpanded } from '../../util/DiUtil';\n\nvar LABEL_WIDTH = 30,\n    LABEL_HEIGHT = 30;\n\n\n/**\n * BPMN-specific hit zones and interaction fixes.\n *\n * @param {EventBus} eventBus\n * @param {InteractionEvents} interactionEvents\n */\nexport default function BpmnInteractionEvents(eventBus, interactionEvents) {\n\n  this._interactionEvents = interactionEvents;\n\n  var self = this;\n\n  eventBus.on([\n    'interactionEvents.createHit',\n    'interactionEvents.updateHit'\n  ], function(context) {\n    var element = context.element,\n        gfx = context.gfx;\n\n    if (is(element, 'bpmn:Lane')) {\n      return self.createParticipantHit(element, gfx);\n    } else\n\n    if (is(element, 'bpmn:Participant')) {\n      if (isExpanded(element)) {\n        return self.createParticipantHit(element, gfx);\n      } else {\n        return self.createDefaultHit(element, gfx);\n      }\n    } else\n\n    if (is(element, 'bpmn:SubProcess')) {\n      if (isExpanded(element)) {\n        return self.createSubProcessHit(element, gfx);\n      } else {\n        return self.createDefaultHit(element, gfx);\n      }\n    }\n  });\n\n}\n\nBpmnInteractionEvents.$inject = [\n  'eventBus',\n  'interactionEvents'\n];\n\n\nBpmnInteractionEvents.prototype.createDefaultHit = function(element, gfx) {\n  this._interactionEvents.removeHits(gfx);\n\n  this._interactionEvents.createDefaultHit(element, gfx);\n\n  // indicate that we created a hit\n  return true;\n};\n\nBpmnInteractionEvents.prototype.createParticipantHit = function(element, gfx) {\n\n  // remove existing hits\n  this._interactionEvents.removeHits(gfx);\n\n  // add outline hit\n  this._interactionEvents.createBoxHit(gfx, 'click-stroke', {\n    width: element.width,\n    height: element.height\n  });\n\n  // add label hit\n  this._interactionEvents.createBoxHit(gfx, 'all', {\n    width: LABEL_WIDTH,\n    height: element.height\n  });\n\n  // indicate that we created a hit\n  return true;\n};\n\nBpmnInteractionEvents.prototype.createSubProcessHit = function(element, gfx) {\n\n  // remove existing hits\n  this._interactionEvents.removeHits(gfx);\n\n  // add outline hit\n  this._interactionEvents.createBoxHit(gfx, 'click-stroke', {\n    width: element.width,\n    height: element.height\n  });\n\n  // add label hit\n  this._interactionEvents.createBoxHit(gfx, 'all', {\n    width: element.width,\n    height: LABEL_HEIGHT\n  });\n\n  // indicate that we created a hit\n  return true;\n};","import BpmnInteractionEvents from './BpmnInteractionEvents';\n\nexport default {\n  __init__: [ 'bpmnInteractionEvents' ],\n  bpmnInteractionEvents: [ 'type', BpmnInteractionEvents ]\n};","import inherits from 'inherits';\n\nimport KeyboardBindings from 'diagram-js/lib/features/keyboard/KeyboardBindings';\n\n\n/**\n * BPMN 2.0 specific keyboard bindings.\n *\n * @param {Injector} injector\n */\nexport default function BpmnKeyboardBindings(injector) {\n  injector.invoke(KeyboardBindings, this);\n}\n\ninherits(BpmnKeyboardBindings, KeyboardBindings);\n\nBpmnKeyboardBindings.$inject = [\n  'injector'\n];\n\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nBpmnKeyboardBindings.prototype.registerBindings = function(keyboard, editorActions) {\n\n  // inherit default bindings\n  KeyboardBindings.prototype.registerBindings.call(this, keyboard, editorActions);\n\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {String} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n  // select all elements\n  // CTRL + A\n  addListener('selectElements', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.isKey(['a', 'A'], event) && keyboard.isCmd(event)) {\n      editorActions.trigger('selectElements');\n\n      return true;\n    }\n  });\n\n  // search labels\n  // CTRL + F\n  addListener('find', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.isKey(['f', 'F'], event) && keyboard.isCmd(event)) {\n      editorActions.trigger('find');\n\n      return true;\n    }\n  });\n\n  // activate space tool\n  // S\n  addListener('spaceTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey(['s', 'S'], event)) {\n      editorActions.trigger('spaceTool');\n\n      return true;\n    }\n  });\n\n  // activate lasso tool\n  // L\n  addListener('lassoTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey(['l', 'L'], event)) {\n      editorActions.trigger('lassoTool');\n\n      return true;\n    }\n  });\n\n  // activate hand tool\n  // H\n  addListener('handTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey(['h', 'H'], event)) {\n      editorActions.trigger('handTool');\n\n      return true;\n    }\n  });\n\n  // activate global connect tool\n  // C\n  addListener('globalConnectTool', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey(['c', 'C'], event)) {\n      editorActions.trigger('globalConnectTool');\n\n      return true;\n    }\n  });\n\n  // activate direct editing\n  // E\n  addListener('directEditing', function(context) {\n\n    var event = context.keyEvent;\n\n    if (keyboard.hasModifier(event)) {\n      return;\n    }\n\n    if (keyboard.isKey(['e', 'E'], event)) {\n      editorActions.trigger('directEditing');\n\n      return true;\n    }\n  });\n\n};","import KeyboardModule from 'diagram-js/lib/features/keyboard';\n\nimport BpmnKeyboardBindings from './BpmnKeyboardBindings';\n\nexport default {\n  __depends__: [\n    KeyboardModule\n  ],\n  __init__: [ 'keyboardBindings' ],\n  keyboardBindings: [ 'type', BpmnKeyboardBindings ]\n};\n","import {\n  assign\n} from 'min-dash';\n\n\nvar DEFAULT_CONFIG = {\n  moveSpeed: 1,\n  moveSpeedAccelerated: 10\n};\n\nvar HIGHER_PRIORITY = 1500;\n\nvar LEFT = 'left';\nvar UP = 'up';\nvar RIGHT = 'right';\nvar DOWN = 'down';\n\nvar KEY_TO_DIRECTION = {\n  ArrowLeft: LEFT,\n  Left: LEFT,\n  ArrowUp: UP,\n  Up: UP,\n  ArrowRight: RIGHT,\n  Right: RIGHT,\n  ArrowDown: DOWN,\n  Down: DOWN\n};\n\nvar DIRECTIONS_DELTA = {\n  left: function(speed) {\n    return {\n      x: -speed,\n      y: 0\n    };\n  },\n  up: function(speed) {\n    return {\n      x: 0,\n      y: -speed\n    };\n  },\n  right: function(speed) {\n    return {\n      x: speed,\n      y: 0\n    };\n  },\n  down: function(speed) {\n    return {\n      x: 0,\n      y: speed\n    };\n  }\n};\n\n\n/**\n * Enables to move selection with keyboard arrows.\n * Use with Shift for modified speed (default=1, with Shift=10).\n * Pressed Cmd/Ctrl turns the feature off.\n *\n * @param {Object} config\n * @param {Number} [config.moveSpeed=1]\n * @param {Number} [config.moveSpeedAccelerated=10]\n * @param {Keyboard} keyboard\n * @param {Modeling} modeling\n * @param {Selection} selection\n */\nexport default function KeyboardMoveSelection(\n    config,\n    keyboard,\n    modeling,\n    rules,\n    selection\n) {\n\n  var self = this;\n\n  this._config = assign({}, DEFAULT_CONFIG, config || {});\n\n  keyboard.addListener(HIGHER_PRIORITY, function(event) {\n\n    var keyEvent = event.keyEvent;\n\n    var direction = KEY_TO_DIRECTION[keyEvent.key];\n\n    if (!direction) {\n      return;\n    }\n\n    if (keyboard.isCmd(keyEvent)) {\n      return;\n    }\n\n    var accelerated = keyboard.isShift(keyEvent);\n\n    self.moveSelection(direction, accelerated);\n\n    return true;\n  });\n\n\n  /**\n   * Move selected elements in the given direction,\n   * optionally specifying accelerated movement.\n   *\n   * @param {String} direction\n   * @param {Boolean} [accelerated=false]\n   */\n  this.moveSelection = function(direction, accelerated) {\n\n    var selectedElements = selection.get();\n\n    if (!selectedElements.length) {\n      return;\n    }\n\n    var speed = this._config[\n      accelerated ?\n        'moveSpeedAccelerated' :\n        'moveSpeed'\n    ];\n\n    var delta = DIRECTIONS_DELTA[direction](speed);\n\n    var canMove = rules.allowed('elements.move', {\n      shapes: selectedElements\n    });\n\n    if (canMove) {\n      modeling.moveElements(selectedElements, delta);\n    }\n  };\n\n}\n\nKeyboardMoveSelection.$inject = [\n  'config.keyboardMoveSelection',\n  'keyboard',\n  'modeling',\n  'rules',\n  'selection'\n];","import KeyboardModule from '../keyboard';\nimport SelectionModule from '../selection';\n\nimport KeyboardMoveSelection from './KeyboardMoveSelection';\n\nexport default {\n  __depends__: [\n    KeyboardModule,\n    SelectionModule\n  ],\n  __init__: [\n    'keyboardMoveSelection'\n  ],\n  keyboardMoveSelection: [ 'type', KeyboardMoveSelection ]\n};\n","import {\n  getType as getElementType\n} from '../../util/Elements';\n\n/**\n * Adds change support to the diagram, including\n *\n * <ul>\n *   <li>redrawing shapes and connections on change</li>\n * </ul>\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n * @param {GraphicsFactory} graphicsFactory\n */\nexport default function ChangeSupport(\n    eventBus, canvas, elementRegistry,\n    graphicsFactory) {\n\n\n  // redraw shapes / connections on change\n\n  eventBus.on('element.changed', function(event) {\n\n    var element = event.element;\n\n    // element might have been deleted and replaced by new element with same ID\n    // thus check for parent of element except for root element\n    if (element.parent || element === canvas.getRootElement()) {\n      event.gfx = elementRegistry.getGraphics(element);\n    }\n\n    // shape + gfx may have been deleted\n    if (!event.gfx) {\n      return;\n    }\n\n    eventBus.fire(getElementType(element) + '.changed', event);\n  });\n\n  eventBus.on('elements.changed', function(event) {\n\n    var elements = event.elements;\n\n    elements.forEach(function(e) {\n      eventBus.fire('element.changed', { element: e });\n    });\n\n    graphicsFactory.updateContainments(elements);\n  });\n\n  eventBus.on('shape.changed', function(event) {\n    graphicsFactory.update('shape', event.element, event.gfx);\n  });\n\n  eventBus.on('connection.changed', function(event) {\n    graphicsFactory.update('connection', event.element, event.gfx);\n  });\n}\n\nChangeSupport.$inject = [\n  'eventBus',\n  'canvas',\n  'elementRegistry',\n  'graphicsFactory'\n];","import ChangeSupport from './ChangeSupport';\n\nexport default {\n  __init__: [ 'changeSupport'],\n  changeSupport: [ 'type', ChangeSupport ]\n};","import {\n  pick,\n  assign\n} from 'min-dash';\n\nimport {\n  resizeBounds,\n  ensureConstraints,\n  computeChildrenBBox,\n  getMinResizeBounds\n} from './ResizeUtil';\n\nimport {\n  asTRBL,\n  getMid,\n  roundBounds\n} from '../../layout/LayoutUtil';\n\nvar DEFAULT_MIN_WIDTH = 10;\n\n\n/**\n * A component that provides resizing of shapes on the canvas.\n *\n * The following components are part of shape resize:\n *\n *  * adding resize handles,\n *  * creating a visual during resize\n *  * checking resize rules\n *  * committing a change once finished\n *\n *\n * ## Customizing\n *\n * It's possible to customize the resizing behaviour by intercepting 'resize.start'\n * and providing the following parameters through the 'context':\n *\n *   * minDimensions ({ width, height }): minimum shape dimensions\n *\n *   * childrenBoxPadding ({ left, top, bottom, right } || number):\n *     gap between the minimum bounding box and the container\n *\n * f.ex:\n *\n * ```javascript\n * eventBus.on('resize.start', 1500, function(event) {\n *   var context = event.context,\n *\n *  context.minDimensions = { width: 140, height: 120 };\n *\n *  // Passing general padding\n *  context.childrenBoxPadding = 30;\n *\n *  // Passing padding to a specific side\n *  context.childrenBoxPadding.left = 20;\n * });\n * ```\n */\nexport default function Resize(eventBus, rules, modeling, dragging) {\n\n  this._dragging = dragging;\n  this._rules = rules;\n\n  var self = this;\n\n\n  /**\n   * Handle resize move by specified delta.\n   *\n   * @param {Object} context\n   * @param {Point} delta\n   */\n  function handleMove(context, delta) {\n\n    var shape = context.shape,\n        direction = context.direction,\n        resizeConstraints = context.resizeConstraints,\n        newBounds;\n\n    context.delta = delta;\n\n    newBounds = resizeBounds(shape, direction, delta);\n\n    // ensure constraints during resize\n    context.newBounds = ensureConstraints(newBounds, resizeConstraints);\n\n    // update + cache executable state\n    context.canExecute = self.canResize(context);\n  }\n\n  /**\n   * Handle resize start.\n   *\n   * @param  {Object} context\n   */\n  function handleStart(context) {\n\n    var resizeConstraints = context.resizeConstraints,\n\n        // evaluate minBounds for backwards compatibility\n        minBounds = context.minBounds;\n\n    if (resizeConstraints !== undefined) {\n      return;\n    }\n\n    if (minBounds === undefined) {\n      minBounds = self.computeMinResizeBox(context);\n    }\n\n    context.resizeConstraints = {\n      min: asTRBL(minBounds)\n    };\n  }\n\n  /**\n   * Handle resize end.\n   *\n   * @param  {Object} context\n   */\n  function handleEnd(context) {\n    var shape = context.shape,\n        canExecute = context.canExecute,\n        newBounds = context.newBounds;\n\n    if (canExecute) {\n\n      // ensure we have actual pixel values for new bounds\n      // (important when zoom level was > 1 during move)\n      newBounds = roundBounds(newBounds);\n\n      if (!boundsChanged(shape, newBounds)) {\n\n        // no resize necessary\n        return;\n      }\n\n      // perform the actual resize\n      modeling.resizeShape(shape, newBounds);\n    }\n  }\n\n\n  eventBus.on('resize.start', function(event) {\n    handleStart(event.context);\n  });\n\n  eventBus.on('resize.move', function(event) {\n    var delta = {\n      x: event.dx,\n      y: event.dy\n    };\n\n    handleMove(event.context, delta);\n  });\n\n  eventBus.on('resize.end', function(event) {\n    handleEnd(event.context);\n  });\n\n}\n\n\nResize.prototype.canResize = function(context) {\n  var rules = this._rules;\n\n  var ctx = pick(context, [ 'newBounds', 'shape', 'delta', 'direction' ]);\n\n  return rules.allowed('shape.resize', ctx);\n};\n\n/**\n * Activate a resize operation.\n *\n * You may specify additional contextual information and must specify a\n * resize direction during activation of the resize event.\n *\n * @param {MouseEvent} event\n * @param {djs.model.Shape} shape\n * @param {Object|String} contextOrDirection\n */\nResize.prototype.activate = function(event, shape, contextOrDirection) {\n  var dragging = this._dragging,\n      context,\n      direction;\n\n  if (typeof contextOrDirection === 'string') {\n    contextOrDirection = {\n      direction: contextOrDirection\n    };\n  }\n\n  context = assign({ shape: shape }, contextOrDirection);\n\n  direction = context.direction;\n\n  if (!direction) {\n    throw new Error('must provide a direction (n|w|s|e|nw|se|ne|sw)');\n  }\n\n  dragging.init(event, getReferencePoint(shape, direction), 'resize', {\n    autoActivate: true,\n    cursor: getCursor(direction),\n    data: {\n      shape: shape,\n      context: context\n    }\n  });\n};\n\nResize.prototype.computeMinResizeBox = function(context) {\n  var shape = context.shape,\n      direction = context.direction,\n      minDimensions,\n      childrenBounds;\n\n  minDimensions = context.minDimensions || {\n    width: DEFAULT_MIN_WIDTH,\n    height: DEFAULT_MIN_WIDTH\n  };\n\n  // get children bounds\n  childrenBounds = computeChildrenBBox(shape, context.childrenBoxPadding);\n\n  // get correct minimum bounds from given resize direction\n  // basically ensures that the minBounds is max(childrenBounds, minDimensions)\n  return getMinResizeBounds(direction, shape, minDimensions, childrenBounds);\n};\n\n\nResize.$inject = [\n  'eventBus',\n  'rules',\n  'modeling',\n  'dragging'\n];\n\n// helpers //////////\n\nfunction boundsChanged(shape, newBounds) {\n  return shape.x !== newBounds.x ||\n    shape.y !== newBounds.y ||\n    shape.width !== newBounds.width ||\n    shape.height !== newBounds.height;\n}\n\nexport function getReferencePoint(shape, direction) {\n  var mid = getMid(shape),\n      trbl = asTRBL(shape);\n\n  var referencePoint = {\n    x: mid.x,\n    y: mid.y\n  };\n\n  if (direction.indexOf('n') !== -1) {\n    referencePoint.y = trbl.top;\n  } else if (direction.indexOf('s') !== -1) {\n    referencePoint.y = trbl.bottom;\n  }\n\n  if (direction.indexOf('e') !== -1) {\n    referencePoint.x = trbl.right;\n  } else if (direction.indexOf('w') !== -1) {\n    referencePoint.x = trbl.left;\n  }\n\n  return referencePoint;\n}\n\nfunction getCursor(direction) {\n  var prefix = 'resize-';\n\n  if (direction === 'n' || direction === 's') {\n    return prefix + 'ns';\n  } else if (direction === 'e' || direction === 'w') {\n    return prefix + 'ew';\n  } else if (direction === 'nw' || direction === 'se') {\n    return prefix + 'nwse';\n  } else {\n    return prefix + 'nesw';\n  }\n}","var MARKER_RESIZING = 'djs-resizing',\n    MARKER_RESIZE_NOT_OK = 'resize-not-ok';\n\nvar LOW_PRIORITY = 500;\n\nimport {\n  attr as svgAttr,\n  remove as svgRemove,\n  classes as svgClasses\n} from 'tiny-svg';\n\n\n/**\n * Provides previews for resizing shapes when resizing.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {PreviewSupport} previewSupport\n */\nexport default function ResizePreview(eventBus, canvas, previewSupport) {\n\n  /**\n   * Update resizer frame.\n   *\n   * @param {Object} context\n   */\n  function updateFrame(context) {\n\n    var shape = context.shape,\n        bounds = context.newBounds,\n        frame = context.frame;\n\n    if (!frame) {\n      frame = context.frame = previewSupport.addFrame(shape, canvas.getDefaultLayer());\n\n      canvas.addMarker(shape, MARKER_RESIZING);\n    }\n\n    if (bounds.width > 5) {\n      svgAttr(frame, { x: bounds.x, width: bounds.width });\n    }\n\n    if (bounds.height > 5) {\n      svgAttr(frame, { y: bounds.y, height: bounds.height });\n    }\n\n    if (context.canExecute) {\n      svgClasses(frame).remove(MARKER_RESIZE_NOT_OK);\n    } else {\n      svgClasses(frame).add(MARKER_RESIZE_NOT_OK);\n    }\n  }\n\n  /**\n   * Remove resizer frame.\n   *\n   * @param {Object} context\n   */\n  function removeFrame(context) {\n    var shape = context.shape,\n        frame = context.frame;\n\n    if (frame) {\n      svgRemove(context.frame);\n    }\n\n    canvas.removeMarker(shape, MARKER_RESIZING);\n  }\n\n  // add and update previews\n  eventBus.on('resize.move', LOW_PRIORITY, function(event) {\n    updateFrame(event.context);\n  });\n\n  // remove previews\n  eventBus.on('resize.cleanup', function(event) {\n    removeFrame(event.context);\n  });\n\n}\n\nResizePreview.$inject = [\n  'eventBus',\n  'canvas',\n  'previewSupport'\n];","import {\n  bind,\n  forEach\n} from 'min-dash';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  clear as svgClear,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  event as domEvent\n} from 'min-dom';\n\nimport {\n  isPrimaryButton\n} from '../../util/Mouse';\n\nimport {\n  transform\n} from '../../util/SvgTransformUtil';\n\nimport { getReferencePoint } from './Resize';\n\nvar HANDLE_OFFSET = -6,\n    HANDLE_SIZE = 4,\n    HANDLE_HIT_SIZE = 20;\n\nvar CLS_RESIZER = 'djs-resizer';\n\nvar directions = [ 'n', 'w', 's', 'e', 'nw', 'ne', 'se', 'sw' ];\n\n\n/**\n * This component is responsible for adding resize handles.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Selection} selection\n * @param {Resize} resize\n */\nexport default function ResizeHandles(eventBus, canvas, selection, resize) {\n\n  this._resize = resize;\n  this._canvas = canvas;\n\n  var self = this;\n\n  eventBus.on('selection.changed', function(e) {\n    var newSelection = e.newSelection;\n\n    // remove old selection markers\n    self.removeResizers();\n\n    // add new selection markers ONLY if single selection\n    if (newSelection.length === 1) {\n      forEach(newSelection, bind(self.addResizer, self));\n    }\n  });\n\n  eventBus.on('shape.changed', function(e) {\n    var shape = e.element;\n\n    if (selection.isSelected(shape)) {\n      self.removeResizers();\n\n      self.addResizer(shape);\n    }\n  });\n}\n\n\nResizeHandles.prototype.makeDraggable = function(element, gfx, direction) {\n  var resize = this._resize;\n\n  function startResize(event) {\n\n    // only trigger on left mouse button\n    if (isPrimaryButton(event)) {\n      resize.activate(event, element, direction);\n    }\n  }\n\n  domEvent.bind(gfx, 'mousedown', startResize);\n  domEvent.bind(gfx, 'touchstart', startResize);\n};\n\n\nResizeHandles.prototype._createResizer = function(element, x, y, direction) {\n  var resizersParent = this._getResizersParent();\n\n  var offset = getHandleOffset(direction);\n\n  var group = svgCreate('g');\n\n  svgClasses(group).add(CLS_RESIZER);\n  svgClasses(group).add(CLS_RESIZER + '-' + element.id);\n  svgClasses(group).add(CLS_RESIZER + '-' + direction);\n\n  svgAppend(resizersParent, group);\n\n  var visual = svgCreate('rect');\n\n  svgAttr(visual, {\n    x: -HANDLE_SIZE / 2 + offset.x,\n    y: -HANDLE_SIZE / 2 + offset.y,\n    width: HANDLE_SIZE,\n    height: HANDLE_SIZE\n  });\n\n  svgClasses(visual).add(CLS_RESIZER + '-visual');\n\n  svgAppend(group, visual);\n\n  var hit = svgCreate('rect');\n\n  svgAttr(hit, {\n    x: -HANDLE_HIT_SIZE / 2 + offset.x,\n    y: -HANDLE_HIT_SIZE / 2 + offset.y,\n    width: HANDLE_HIT_SIZE,\n    height: HANDLE_HIT_SIZE\n  });\n\n  svgClasses(hit).add(CLS_RESIZER + '-hit');\n\n  svgAppend(group, hit);\n\n  transform(group, x, y);\n\n  return group;\n};\n\nResizeHandles.prototype.createResizer = function(element, direction) {\n  var point = getReferencePoint(element, direction);\n\n  var resizer = this._createResizer(element, point.x, point.y, direction);\n\n  this.makeDraggable(element, resizer, direction);\n};\n\n// resize handles implementation ///////////////////////////////\n\n/**\n * Add resizers for a given element.\n *\n * @param {djs.model.Shape} shape\n */\nResizeHandles.prototype.addResizer = function(shape) {\n  var self = this;\n\n  var resize = this._resize;\n\n  if (!resize.canResize({ shape: shape })) {\n    return;\n  }\n\n  forEach(directions, function(direction) {\n    self.createResizer(shape, direction);\n  });\n};\n\n/**\n * Remove all resizers\n */\nResizeHandles.prototype.removeResizers = function() {\n  var resizersParent = this._getResizersParent();\n\n  svgClear(resizersParent);\n};\n\nResizeHandles.prototype._getResizersParent = function() {\n  return this._canvas.getLayer('resizers');\n};\n\nResizeHandles.$inject = [\n  'eventBus',\n  'canvas',\n  'selection',\n  'resize'\n];\n\n// helpers //////////\n\nfunction getHandleOffset(direction) {\n  var offset = {\n    x: 0,\n    y: 0\n  };\n\n  if (direction.indexOf('e') !== -1) {\n    offset.x = -HANDLE_OFFSET;\n  } else if (direction.indexOf('w') !== -1) {\n    offset.x = HANDLE_OFFSET;\n  }\n\n  if (direction.indexOf('s') !== -1) {\n    offset.y = -HANDLE_OFFSET;\n  } else if (direction.indexOf('n') !== -1) {\n    offset.y = HANDLE_OFFSET;\n  }\n\n  return offset;\n}","import RulesModule from '../rules';\nimport DraggingModule from '../dragging';\nimport PreviewSupportModule from '../preview-support';\n\nimport Resize from './Resize';\nimport ResizePreview from './ResizePreview';\nimport ResizeHandles from './ResizeHandles';\n\nexport default {\n  __depends__: [\n    RulesModule,\n    DraggingModule,\n    PreviewSupportModule\n  ],\n  __init__: [\n    'resize',\n    'resizePreview',\n    'resizeHandles'\n  ],\n  resize: [ 'type', Resize ],\n  resizePreview: [ 'type', ResizePreview ],\n  resizeHandles: [ 'type', ResizeHandles ]\n};\n","import {\n  add as collectionAdd\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  getBusinessObject\n} from '../../../../util/ModelUtil';\n\n/**\n * Creates a new bpmn:CategoryValue inside a new bpmn:Category\n *\n * @param {ModdleElement} definitions\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement} categoryValue.\n */\nexport function createCategoryValue(definitions, bpmnFactory) {\n  var categoryValue = bpmnFactory.create('bpmn:CategoryValue'),\n      category = bpmnFactory.create('bpmn:Category', {\n        categoryValue: [ categoryValue ]\n      });\n\n  // add to correct place\n  collectionAdd(definitions.get('rootElements'), category);\n  getBusinessObject(category).$parent = definitions;\n  getBusinessObject(categoryValue).$parent = category;\n\n  return categoryValue;\n\n}","import {\n  assign\n} from 'min-dash';\n\nimport {\n  getLabel\n} from './LabelUtil';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  createCategoryValue\n} from '../modeling/behavior/util/CategoryUtil';\n\nimport { isAny } from '../modeling/util/ModelingUtil';\nimport { isExpanded } from '../../util/DiUtil';\n\nimport {\n  getExternalLabelMid,\n  isLabelExternal,\n  hasExternalLabel,\n  isLabel\n} from '../../util/LabelUtil';\n\n\nexport default function LabelEditingProvider(\n    eventBus, bpmnFactory, canvas, directEditing,\n    modeling, resizeHandles, textRenderer) {\n\n  this._bpmnFactory = bpmnFactory;\n  this._canvas = canvas;\n  this._modeling = modeling;\n  this._textRenderer = textRenderer;\n\n  directEditing.registerProvider(this);\n\n  // listen to dblclick on non-root elements\n  eventBus.on('element.dblclick', function(event) {\n    activateDirectEdit(event.element, true);\n  });\n\n  // complete on followup canvas operation\n  eventBus.on([\n    'autoPlace.start',\n    'canvas.viewbox.changing',\n    'drag.init',\n    'element.mousedown',\n    'popupMenu.open'\n  ], function(event) {\n\n    if (directEditing.isActive()) {\n      directEditing.complete();\n    }\n  });\n\n  // cancel on command stack changes\n  eventBus.on([ 'commandStack.changed' ], function(e) {\n    if (directEditing.isActive()) {\n      directEditing.cancel();\n    }\n  });\n\n\n  eventBus.on('directEditing.activate', function(event) {\n    resizeHandles.removeResizers();\n  });\n\n  eventBus.on('create.end', 500, function(event) {\n\n    var context = event.context,\n        element = context.shape,\n        canExecute = event.context.canExecute,\n        isTouch = event.isTouch;\n\n    // TODO(nikku): we need to find a way to support the\n    // direct editing on mobile devices; right now this will\n    // break for desworkflowediting on mobile devices\n    // as it breaks the user interaction workflow\n\n    // TODO(nre): we should temporarily focus the edited element\n    // here and release the focused viewport after the direct edit\n    // operation is finished\n    if (isTouch) {\n      return;\n    }\n\n    if (!canExecute) {\n      return;\n    }\n\n    if (context.hints && context.hints.createElementsBehavior === false) {\n      return;\n    }\n\n    activateDirectEdit(element);\n  });\n\n  eventBus.on('autoPlace.end', 500, function(event) {\n    activateDirectEdit(event.shape);\n  });\n\n\n  function activateDirectEdit(element, force) {\n    if (force ||\n        isAny(element, [ 'bpmn:Task', 'bpmn:TextAnnotation', 'bpmn:Group' ]) ||\n        isCollapsedSubProcess(element)) {\n\n      directEditing.activate(element);\n    }\n  }\n\n}\n\nLabelEditingProvider.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'canvas',\n  'directEditing',\n  'modeling',\n  'resizeHandles',\n  'textRenderer'\n];\n\n\n/**\n * Activate direct editing for activities and text annotations.\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} an object with properties bounds (position and size), text and options\n */\nLabelEditingProvider.prototype.activate = function(element) {\n\n  // text\n  var text = getLabel(element);\n\n  if (text === undefined) {\n    return;\n  }\n\n  var context = {\n    text: text\n  };\n\n  // bounds\n  var bounds = this.getEditingBBox(element);\n\n  assign(context, bounds);\n\n  var options = {};\n\n  // tasks\n  if (\n    isAny(element, [\n      'bpmn:Task',\n      'bpmn:Participant',\n      'bpmn:Lane',\n      'bpmn:CallActivity'\n    ]) ||\n    isCollapsedSubProcess(element)\n  ) {\n    assign(options, {\n      centerVertically: true\n    });\n  }\n\n  // external labels\n  if (isLabelExternal(element)) {\n    assign(options, {\n      autoResize: true\n    });\n  }\n\n  // text annotations\n  if (is(element, 'bpmn:TextAnnotation')) {\n    assign(options, {\n      resizable: true,\n      autoResize: true\n    });\n  }\n\n  assign(context, {\n    options: options\n  });\n\n  return context;\n};\n\n\n/**\n * Get the editing bounding box based on the element's size and position\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} an object containing information about position\n *                  and size (fixed or minimum and/or maximum)\n */\nLabelEditingProvider.prototype.getEditingBBox = function(element) {\n  var canvas = this._canvas;\n\n  var target = element.label || element;\n\n  var bbox = canvas.getAbsoluteBBox(target);\n\n  var mid = {\n    x: bbox.x + bbox.width / 2,\n    y: bbox.y + bbox.height / 2\n  };\n\n  // default position\n  var bounds = { x: bbox.x, y: bbox.y };\n\n  var zoom = canvas.zoom();\n\n  var defaultStyle = this._textRenderer.getDefaultStyle(),\n      externalStyle = this._textRenderer.getExternalStyle();\n\n  // take zoom into account\n  var externalFontSize = externalStyle.fontSize * zoom,\n      externalLineHeight = externalStyle.lineHeight,\n      defaultFontSize = defaultStyle.fontSize * zoom,\n      defaultLineHeight = defaultStyle.lineHeight;\n\n  var style = {\n    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,\n    fontWeight: this._textRenderer.getDefaultStyle().fontWeight\n  };\n\n  // adjust for expanded pools AND lanes\n  if (is(element, 'bpmn:Lane') || isExpandedPool(element)) {\n\n    assign(bounds, {\n      width: bbox.height,\n      height: 30 * zoom,\n      x: bbox.x - bbox.height / 2 + (15 * zoom),\n      y: mid.y - (30 * zoom) / 2\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px',\n      transform: 'rotate(-90deg)'\n    });\n  }\n\n\n  // internal labels for tasks and collapsed call activities,\n  // sub processes and participants\n  if (isAny(element, [ 'bpmn:Task', 'bpmn:CallActivity']) ||\n      isCollapsedPool(element) ||\n      isCollapsedSubProcess(element)) {\n\n    assign(bounds, {\n      width: bbox.width,\n      height: bbox.height\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px'\n    });\n  }\n\n\n  // internal labels for expanded sub processes\n  if (isExpandedSubProcess(element)) {\n    assign(bounds, {\n      width: bbox.width,\n      x: bbox.x\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight,\n      paddingTop: (7 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (5 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px'\n    });\n  }\n\n  var width = 90 * zoom,\n      paddingTop = 7 * zoom,\n      paddingBottom = 4 * zoom;\n\n  // external labels for events, data elements, gateways, groups and connections\n  if (target.labelTarget) {\n    assign(bounds, {\n      width: width,\n      height: bbox.height + paddingTop + paddingBottom,\n      x: mid.x - width / 2,\n      y: bbox.y - paddingTop\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + 'px',\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + 'px',\n      paddingBottom: paddingBottom + 'px'\n    });\n  }\n\n  // external label not yet created\n  if (isLabelExternal(target)\n      && !hasExternalLabel(target)\n      && !isLabel(target)) {\n\n    var externalLabelMid = getExternalLabelMid(element);\n\n    var absoluteBBox = canvas.getAbsoluteBBox({\n      x: externalLabelMid.x,\n      y: externalLabelMid.y,\n      width: 0,\n      height: 0\n    });\n\n    var height = externalFontSize + paddingTop + paddingBottom;\n\n    assign(bounds, {\n      width: width,\n      height: height,\n      x: absoluteBBox.x - width / 2,\n      y: absoluteBBox.y - height / 2\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + 'px',\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + 'px',\n      paddingBottom: paddingBottom + 'px'\n    });\n  }\n\n  // text annotations\n  if (is(element, 'bpmn:TextAnnotation')) {\n    assign(bounds, {\n      width: bbox.width,\n      height: bbox.height,\n      minWidth: 30 * zoom,\n      minHeight: 10 * zoom\n    });\n\n    assign(style, {\n      textAlign: 'left',\n      paddingTop: (5 * zoom) + 'px',\n      paddingBottom: (7 * zoom) + 'px',\n      paddingLeft: (7 * zoom) + 'px',\n      paddingRight: (5 * zoom) + 'px',\n      fontSize: defaultFontSize + 'px',\n      lineHeight: defaultLineHeight\n    });\n  }\n\n  return { bounds: bounds, style: style };\n};\n\n\nLabelEditingProvider.prototype.update = function(\n    element, newLabel,\n    activeContextText, bounds) {\n\n  var newBounds,\n      bbox;\n\n  if (is(element, 'bpmn:TextAnnotation')) {\n\n    bbox = this._canvas.getAbsoluteBBox(element);\n\n    newBounds = {\n      x: element.x,\n      y: element.y,\n      width: element.width / bbox.width * bounds.width,\n      height: element.height / bbox.height * bounds.height\n    };\n  }\n\n  if (is(element, 'bpmn:Group')) {\n\n    var businessObject = getBusinessObject(element);\n\n    // initialize categoryValue if not existing\n    if (!businessObject.categoryValueRef) {\n\n      var rootElement = this._canvas.getRootElement(),\n          definitions = getBusinessObject(rootElement).$parent;\n\n      var categoryValue = createCategoryValue(definitions, this._bpmnFactory);\n\n      getBusinessObject(element).categoryValueRef = categoryValue;\n    }\n\n  }\n\n  if (isEmptyText(newLabel)) {\n    newLabel = null;\n  }\n\n  this._modeling.updateLabel(element, newLabel, newBounds);\n};\n\n\n\n// helpers //////////////////////\n\nfunction isCollapsedSubProcess(element) {\n  return is(element, 'bpmn:SubProcess') && !isExpanded(element);\n}\n\nfunction isExpandedSubProcess(element) {\n  return is(element, 'bpmn:SubProcess') && isExpanded(element);\n}\n\nfunction isCollapsedPool(element) {\n  return is(element, 'bpmn:Participant') && !isExpanded(element);\n}\n\nfunction isExpandedPool(element) {\n  return is(element, 'bpmn:Participant') && isExpanded(element);\n}\n\nfunction isEmptyText(label) {\n  return !label || !label.trim();\n}","import {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  translate\n} from 'diagram-js/lib/util/SvgTransformUtil';\n\nvar MARKER_HIDDEN = 'djs-element-hidden',\n    MARKER_LABEL_HIDDEN = 'djs-label-hidden';\n\n\nexport default function LabelEditingPreview(\n    eventBus, canvas, elementRegistry,\n    pathMap) {\n\n  var self = this;\n\n  var defaultLayer = canvas.getDefaultLayer();\n\n  var element, absoluteElementBBox, gfx;\n\n  eventBus.on('directEditing.activate', function(context) {\n    var activeProvider = context.active;\n\n    element = activeProvider.element.label || activeProvider.element;\n\n    // text annotation\n    if (is(element, 'bpmn:TextAnnotation')) {\n      absoluteElementBBox = canvas.getAbsoluteBBox(element);\n\n      gfx = svgCreate('g');\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      var path = self.path = svgCreate('path');\n\n      svgAttr(path, {\n        d: textPathData,\n        strokeWidth: 2,\n        stroke: getStrokeColor(element)\n      });\n\n      svgAppend(gfx, path);\n\n      svgAppend(defaultLayer, gfx);\n\n      translate(gfx, element.x, element.y);\n    }\n\n    if (is(element, 'bpmn:TextAnnotation') ||\n        element.labelTarget) {\n      canvas.addMarker(element, MARKER_HIDDEN);\n    } else if (is(element, 'bpmn:Task') ||\n               is(element, 'bpmn:CallActivity') ||\n               is(element, 'bpmn:SubProcess') ||\n               is(element, 'bpmn:Participant')) {\n      canvas.addMarker(element, MARKER_LABEL_HIDDEN);\n    }\n  });\n\n  eventBus.on('directEditing.resize', function(context) {\n\n    // text annotation\n    if (is(element, 'bpmn:TextAnnotation')) {\n      var height = context.height,\n          dy = context.dy;\n\n      var newElementHeight = Math.max(element.height / absoluteElementBBox.height * (height + dy), 0);\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: newElementHeight,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      svgAttr(self.path, {\n        d: textPathData\n      });\n    }\n  });\n\n  eventBus.on([ 'directEditing.complete', 'directEditing.cancel' ], function(context) {\n    var activeProvider = context.active;\n\n    if (activeProvider) {\n      canvas.removeMarker(activeProvider.element.label || activeProvider.element, MARKER_HIDDEN);\n      canvas.removeMarker(element, MARKER_LABEL_HIDDEN);\n    }\n\n    element = undefined;\n    absoluteElementBBox = undefined;\n\n    if (gfx) {\n      svgRemove(gfx);\n\n      gfx = undefined;\n    }\n  });\n}\n\nLabelEditingPreview.$inject = [\n  'eventBus',\n  'canvas',\n  'elementRegistry',\n  'pathMap'\n];\n\n\n// helpers ///////////////////\n\nfunction getStrokeColor(element, defaultColor) {\n  var bo = getBusinessObject(element);\n\n  return bo.di.get('stroke') || defaultColor || 'black';\n}","import ChangeSupportModule from 'diagram-js/lib/features/change-support';\nimport ResizeModule from 'diagram-js/lib/features/resize';\nimport DirectEditingModule from 'diagram-js-direct-editing';\n\nimport LabelEditingProvider from './LabelEditingProvider';\nimport LabelEditingPreview from './LabelEditingPreview';\n\n\nexport default {\n  __depends__: [\n    ChangeSupportModule,\n    ResizeModule,\n    DirectEditingModule\n  ],\n  __init__: [\n    'labelEditingProvider',\n    'labelEditingPreview'\n  ],\n  labelEditingProvider: [ 'type', LabelEditingProvider ],\n  labelEditingPreview: [ 'type', LabelEditingPreview ]\n};\n","import inherits from 'inherits';\n\nimport {\n  getOrientation,\n  getMid,\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  substract\n} from 'diagram-js/lib/util/Math';\n\nimport {\n  hasExternalLabel\n} from '../../../util/LabelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nvar ALIGNMENTS = [\n  'top',\n  'bottom',\n  'left',\n  'right'\n];\n\nvar ELEMENT_LABEL_DISTANCE = 10;\n\n/**\n * A component that makes sure that external labels are added\n * together with respective elements and properly updated (DI wise)\n * during move.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function AdaptiveLabelPositioningBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.postExecuted([\n    'connection.create',\n    'connection.layout',\n    'connection.updateWaypoints'\n  ], function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source,\n        target = connection.target,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior !== false) {\n      checkLabelAdjustment(source);\n      checkLabelAdjustment(target);\n    }\n  });\n\n\n  this.postExecuted([\n    'label.create'\n  ], function(event) {\n    var context = event.context,\n        shape = context.shape,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior !== false) {\n      checkLabelAdjustment(shape.labelTarget);\n    }\n  });\n\n\n  this.postExecuted([\n    'elements.create'\n  ], function(event) {\n    var context = event.context,\n        elements = context.elements,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior !== false) {\n      elements.forEach(function(element) {\n        checkLabelAdjustment(element);\n      });\n    }\n  });\n\n  function checkLabelAdjustment(element) {\n\n    // skip non-existing labels\n    if (!hasExternalLabel(element)) {\n      return;\n    }\n\n    var optimalPosition = getOptimalPosition(element);\n\n    // no optimal position found\n    if (!optimalPosition) {\n      return;\n    }\n\n    adjustLabelPosition(element, optimalPosition);\n  }\n\n  function adjustLabelPosition(element, orientation) {\n\n    var elementMid = getMid(element),\n        label = element.label,\n        labelMid = getMid(label);\n\n    // ignore labels that are being created\n    if (!label.parent) {\n      return;\n    }\n\n    var elementTrbl = asTRBL(element);\n\n    var newLabelMid;\n\n    switch (orientation) {\n    case 'top':\n      newLabelMid = {\n        x: elementMid.x,\n        y: elementTrbl.top - ELEMENT_LABEL_DISTANCE - label.height / 2\n      };\n\n      break;\n\n    case 'left':\n\n      newLabelMid = {\n        x: elementTrbl.left - ELEMENT_LABEL_DISTANCE - label.width / 2,\n        y: elementMid.y\n      };\n\n      break;\n\n    case 'bottom':\n\n      newLabelMid = {\n        x: elementMid.x,\n        y: elementTrbl.bottom + ELEMENT_LABEL_DISTANCE + label.height / 2\n      };\n\n      break;\n\n    case 'right':\n\n      newLabelMid = {\n        x: elementTrbl.right + ELEMENT_LABEL_DISTANCE + label.width / 2,\n        y: elementMid.y\n      };\n\n      break;\n    }\n\n    var delta = substract(newLabelMid, labelMid);\n\n    modeling.moveShape(label, delta);\n  }\n\n}\n\ninherits(AdaptiveLabelPositioningBehavior, CommandInterceptor);\n\nAdaptiveLabelPositioningBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\n/**\n * Return alignments which are taken by a boundary's host element\n *\n * @param {Shape} element\n *\n * @return {Array<String>}\n */\nfunction getTakenHostAlignments(element) {\n\n  var hostElement = element.host,\n      elementMid = getMid(element),\n      hostOrientation = getOrientation(elementMid, hostElement);\n\n  var freeAlignments;\n\n  // check whether there is a multi-orientation, e.g. 'top-left'\n  if (hostOrientation.indexOf('-') >= 0) {\n    freeAlignments = hostOrientation.split('-');\n  } else {\n    freeAlignments = [ hostOrientation ];\n  }\n\n  var takenAlignments = ALIGNMENTS.filter(function(alignment) {\n\n    return freeAlignments.indexOf(alignment) === -1;\n  });\n\n  return takenAlignments;\n\n}\n\n/**\n * Return alignments which are taken by related connections\n *\n * @param {Shape} element\n *\n * @return {Array<String>}\n */\nfunction getTakenConnectionAlignments(element) {\n\n  var elementMid = getMid(element);\n\n  var takenAlignments = [].concat(\n    element.incoming.map(function(c) {\n      return c.waypoints[c.waypoints.length - 2 ];\n    }),\n    element.outgoing.map(function(c) {\n      return c.waypoints[1];\n    })\n  ).map(function(point) {\n    return getApproximateOrientation(elementMid, point);\n  });\n\n  return takenAlignments;\n}\n\n/**\n * Return the optimal label position around an element\n * or _undefined_, if none was found.\n *\n * @param  {Shape} element\n *\n * @return {String} positioning identifier\n */\nfunction getOptimalPosition(element) {\n\n  var labelMid = getMid(element.label);\n\n  var elementMid = getMid(element);\n\n  var labelOrientation = getApproximateOrientation(elementMid, labelMid);\n\n  if (!isAligned(labelOrientation)) {\n    return;\n  }\n\n  var takenAlignments = getTakenConnectionAlignments(element);\n\n  if (element.host) {\n    var takenHostAlignments = getTakenHostAlignments(element);\n\n    takenAlignments = takenAlignments.concat(takenHostAlignments);\n  }\n\n  var freeAlignments = ALIGNMENTS.filter(function(alignment) {\n\n    return takenAlignments.indexOf(alignment) === -1;\n  });\n\n  // NOTHING TO DO; label already aligned a.O.K.\n  if (freeAlignments.indexOf(labelOrientation) !== -1) {\n    return;\n  }\n\n  return freeAlignments[0];\n}\n\nfunction getApproximateOrientation(p0, p1) {\n  return getOrientation(p1, p0, 5);\n}\n\nfunction isAligned(orientation) {\n  return ALIGNMENTS.indexOf(orientation) !== -1;\n}\n","import inherits from 'inherits';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n\nexport default function AppendBehavior(eventBus, elementFactory, bpmnRules) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  // assign correct shape position unless already set\n\n  this.preExecute('shape.append', function(context) {\n\n    var source = context.source,\n        shape = context.shape;\n\n    if (!context.position) {\n\n      if (is(shape, 'bpmn:TextAnnotation')) {\n        context.position = {\n          x: source.x + source.width / 2 + 75,\n          y: source.y - (50) - shape.height / 2\n        };\n      } else {\n        context.position = {\n          x: source.x + source.width + 80 + shape.width / 2,\n          y: source.y + source.height / 2\n        };\n      }\n    }\n  }, true);\n}\n\ninherits(AppendBehavior, CommandInterceptor);\n\nAppendBehavior.$inject = [\n  'eventBus',\n  'elementFactory',\n  'bpmnRules'\n];","import inherits from 'inherits';\r\n\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport {\r\n  filter,\r\n  forEach\r\n} from 'min-dash';\r\n\r\n\r\nexport default function AssociationBehavior(injector, modeling) {\r\n  injector.invoke(CommandInterceptor, this);\r\n\r\n  this.postExecute('shape.move', function(context) {\r\n    var newParent = context.newParent,\r\n        shape = context.shape;\r\n\r\n    var associations = filter(shape.incoming.concat(shape.outgoing), function(connection) {\r\n      return is(connection, 'bpmn:Association');\r\n    });\r\n\r\n    forEach(associations, function(association) {\r\n      modeling.moveConnection(association, { x: 0, y: 0 }, newParent);\r\n    });\r\n  }, true);\r\n}\r\n\r\ninherits(AssociationBehavior, CommandInterceptor);\r\n\r\nAssociationBehavior.$inject = [\r\n  'injector',\r\n  'modeling'\r\n];","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject } from '../../../util/ModelUtil';\n\nimport { isAny } from '../util/ModelingUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Replace intermediate event with boundary event when creating or moving results in attached event.\n */\nexport default function AttachEventBehavior(bpmnReplace, injector) {\n  injector.invoke(CommandInterceptor, this);\n\n  this._bpmnReplace = bpmnReplace;\n\n  var self = this;\n\n  this.postExecuted('elements.create', LOW_PRIORITY, function(context) {\n    var elements = context.elements;\n\n    elements = elements.filter(function(shape) {\n      var host = shape.host;\n\n      return shouldReplace(shape, host);\n    });\n\n    if (elements.length !== 1) {\n      return;\n    }\n\n    elements.map(function(element) {\n      return elements.indexOf(element);\n    }).forEach(function(index) {\n      var host = elements[ index ];\n\n      context.elements[ index ] = self.replaceShape(elements[ index ], host);\n    });\n  }, true);\n\n\n  this.preExecute('elements.move', LOW_PRIORITY, function(context) {\n    var shapes = context.shapes,\n        host = context.newHost;\n\n    if (shapes.length !== 1) {\n      return;\n    }\n\n    var shape = shapes[0];\n\n    if (shouldReplace(shape, host)) {\n      context.shapes = [ self.replaceShape(shape, host) ];\n    }\n  }, true);\n}\n\nAttachEventBehavior.$inject = [\n  'bpmnReplace',\n  'injector'\n];\n\ninherits(AttachEventBehavior, CommandInterceptor);\n\nAttachEventBehavior.prototype.replaceShape = function(shape, host) {\n  var eventDefinition = getEventDefinition(shape);\n\n  var boundaryEvent = {\n    type: 'bpmn:BoundaryEvent',\n    host: host\n  };\n\n  if (eventDefinition) {\n    boundaryEvent.eventDefinitionType = eventDefinition.$type;\n  }\n\n  return this._bpmnReplace.replaceElement(shape, boundaryEvent, { layoutConnection: false });\n};\n\n\n// helpers //////////\n\nfunction getEventDefinition(element) {\n  var businessObject = getBusinessObject(element),\n      eventDefinitions = businessObject.eventDefinitions;\n\n  return eventDefinitions && eventDefinitions[0];\n}\n\nfunction shouldReplace(shape, host) {\n  return !isLabel(shape) &&\n    isAny(shape, [ 'bpmn:IntermediateThrowEvent', 'bpmn:IntermediateCatchEvent' ]) && !!host;\n}\n","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport {\n  filter,\n  forEach\n} from 'min-dash';\n\n\n/**\n * BPMN specific boundary event behavior\n */\nexport default function BoundaryEventBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  function getBoundaryEvents(element) {\n    return filter(element.attachers, function(attacher) {\n      return is(attacher, 'bpmn:BoundaryEvent');\n    });\n  }\n\n  // remove after connecting to event-based gateway\n  this.postExecute('connection.create', function(event) {\n    var source = event.context.source,\n        target = event.context.target,\n        boundaryEvents = getBoundaryEvents(target);\n\n    if (\n      is(source, 'bpmn:EventBasedGateway') &&\n      is(target, 'bpmn:ReceiveTask') &&\n      boundaryEvents.length > 0\n    ) {\n      modeling.removeElements(boundaryEvents);\n    }\n\n  });\n\n  // remove after replacing connected gateway with event-based gateway\n  this.postExecute('connection.reconnect', function(event) {\n    var oldSource = event.context.oldSource,\n        newSource = event.context.newSource;\n\n    if (is(oldSource, 'bpmn:Gateway') &&\n        is(newSource, 'bpmn:EventBasedGateway')) {\n      forEach(newSource.outgoing, function(connection) {\n        var target = connection.target,\n            attachedboundaryEvents = getBoundaryEvents(target);\n\n        if (is(target, 'bpmn:ReceiveTask') &&\n            attachedboundaryEvents.length > 0) {\n          modeling.removeElements(attachedboundaryEvents);\n        }\n      });\n    }\n  });\n}\n\nBoundaryEventBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\ninherits(BoundaryEventBehavior, CommandInterceptor);\n","import inherits from 'inherits';\r\n\r\nimport {\r\n  find,\r\n  isArray,\r\n  matchPattern,\r\n  some\r\n} from 'min-dash';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport {\r\n  add as collectionAdd,\r\n  remove as collectionRemove\r\n} from 'diagram-js/lib/util/Collections';\r\n\r\nimport {\r\n  getBusinessObject,\r\n  is\r\n} from '../../../util/ModelUtil';\r\n\r\nimport { isAny } from '../util/ModelingUtil';\r\n\r\nimport { hasEventDefinition } from '../../../util/DiUtil';\r\n\r\nvar LOW_PRIORITY = 500;\r\n\r\n\r\n/**\r\n * Add referenced root elements (error, escalation, message, signal) if they don't exist.\r\n * Copy referenced root elements on copy & paste.\r\n */\r\nexport default function RootElementReferenceBehavior(\r\n    bpmnjs, eventBus, injector, moddleCopy, bpmnFactory\r\n) {\r\n  injector.invoke(CommandInterceptor, this);\r\n\r\n  function canHaveRootElementReference(element) {\r\n    return isAny(element, [ 'bpmn:ReceiveTask', 'bpmn:SendTask' ]) ||\r\n      hasAnyEventDefinition(element, [\r\n        'bpmn:ErrorEventDefinition',\r\n        'bpmn:EscalationEventDefinition',\r\n        'bpmn:MessageEventDefinition',\r\n        'bpmn:SignalEventDefinition'\r\n      ]);\r\n  }\r\n\r\n  function hasRootElement(rootElement) {\r\n    var definitions = bpmnjs.getDefinitions(),\r\n        rootElements = definitions.get('rootElements');\r\n\r\n    return !!find(rootElements, matchPattern({ id: rootElement.id }));\r\n  }\r\n\r\n  function getRootElementReferencePropertyName(eventDefinition) {\r\n    if (is(eventDefinition, 'bpmn:ErrorEventDefinition')) {\r\n      return 'errorRef';\r\n    } else if (is(eventDefinition, 'bpmn:EscalationEventDefinition')) {\r\n      return 'escalationRef';\r\n    } else if (is(eventDefinition, 'bpmn:MessageEventDefinition')) {\r\n      return 'messageRef';\r\n    } else if (is(eventDefinition, 'bpmn:SignalEventDefinition')) {\r\n      return 'signalRef';\r\n    }\r\n  }\r\n\r\n  function getRootElement(businessObject) {\r\n    if (isAny(businessObject, [ 'bpmn:ReceiveTask', 'bpmn:SendTask' ])) {\r\n      return businessObject.get('messageRef');\r\n    }\r\n\r\n    var eventDefinitions = businessObject.get('eventDefinitions'),\r\n        eventDefinition = eventDefinitions[ 0 ];\r\n\r\n    return eventDefinition.get(getRootElementReferencePropertyName(eventDefinition));\r\n  }\r\n\r\n  function setRootElement(businessObject, rootElement) {\r\n    if (isAny(businessObject, [ 'bpmn:ReceiveTask', 'bpmn:SendTask' ])) {\r\n      return businessObject.set('messageRef', rootElement);\r\n    }\r\n\r\n    var eventDefinitions = businessObject.get('eventDefinitions'),\r\n        eventDefinition = eventDefinitions[ 0 ];\r\n\r\n    return eventDefinition.set(getRootElementReferencePropertyName(eventDefinition), rootElement);\r\n  }\r\n\r\n  // create shape\r\n  this.executed('shape.create', function(context) {\r\n    var shape = context.shape;\r\n\r\n    if (!canHaveRootElementReference(shape)) {\r\n      return;\r\n    }\r\n\r\n    var businessObject = getBusinessObject(shape),\r\n        rootElement = getRootElement(businessObject),\r\n        rootElements;\r\n\r\n    if (rootElement && !hasRootElement(rootElement)) {\r\n      rootElements = bpmnjs.getDefinitions().get('rootElements');\r\n\r\n      // add root element\r\n      collectionAdd(rootElements, rootElement);\r\n\r\n      context.addedRootElement = rootElement;\r\n    }\r\n  }, true);\r\n\r\n  this.reverted('shape.create', function(context) {\r\n    var addedRootElement = context.addedRootElement;\r\n\r\n    if (!addedRootElement) {\r\n      return;\r\n    }\r\n\r\n    var rootElements = bpmnjs.getDefinitions().get('rootElements');\r\n\r\n    // remove root element\r\n    collectionRemove(rootElements, addedRootElement);\r\n  }, true);\r\n\r\n  eventBus.on('copyPaste.copyElement', function(context) {\r\n    var descriptor = context.descriptor,\r\n        element = context.element;\r\n\r\n    if (!canHaveRootElementReference(element)) {\r\n      return;\r\n    }\r\n\r\n    var businessObject = getBusinessObject(element),\r\n        rootElement = getRootElement(businessObject);\r\n\r\n    if (rootElement) {\r\n      descriptor.referencedRootElement = rootElement;\r\n    }\r\n  });\r\n\r\n  eventBus.on('copyPaste.pasteElement', LOW_PRIORITY, function(context) {\r\n    var descriptor = context.descriptor,\r\n        businessObject = descriptor.businessObject;\r\n\r\n    if (!canHaveRootElementReference(businessObject)) {\r\n      return;\r\n    }\r\n\r\n    var referencedRootElement = descriptor.referencedRootElement;\r\n\r\n    if (!referencedRootElement) {\r\n      return;\r\n    }\r\n\r\n    if (!hasRootElement(referencedRootElement)) {\r\n      referencedRootElement = moddleCopy.copyElement(\r\n        referencedRootElement,\r\n        bpmnFactory.create(referencedRootElement.$type)\r\n      );\r\n    }\r\n\r\n    setRootElement(businessObject, referencedRootElement);\r\n  });\r\n}\r\n\r\nRootElementReferenceBehavior.$inject = [\r\n  'bpmnjs',\r\n  'eventBus',\r\n  'injector',\r\n  'moddleCopy',\r\n  'bpmnFactory'\r\n];\r\n\r\ninherits(RootElementReferenceBehavior, CommandInterceptor);\r\n\r\n// helpers //////////\r\n\r\nfunction hasAnyEventDefinition(element, types) {\r\n  if (!isArray(types)) {\r\n    types = [ types ];\r\n  }\r\n\r\n  return some(types, function(type) {\r\n    return hasEventDefinition(element, type);\r\n  });\r\n}","import inherits from 'inherits';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getParent } from '../util/ModelingUtil';\n\n\nexport default function CreateBehavior(injector) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.preExecute('shape.create', 1500, function(event) {\n    var context = event.context,\n        parent = context.parent,\n        shape = context.shape;\n\n    if (is(parent, 'bpmn:Lane') && !is(shape, 'bpmn:Lane')) {\n      context.parent = getParent(parent, 'bpmn:Participant');\n    }\n  });\n\n}\n\n\nCreateBehavior.$inject = [ 'injector' ];\n\ninherits(CreateBehavior, CommandInterceptor);","import { getLanesRoot } from '../util/LaneUtil';\r\n\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\nimport { isAny } from '../util/ModelingUtil';\r\n\r\nvar HIGH_PRIORITY = 1500;\r\nvar HIGHEST_PRIORITY = 2000;\r\n\r\n\r\n/**\r\n * Correct hover targets in certain situations to improve diagram interaction.\r\n *\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {EventBus} eventBus\r\n * @param {Canvas} canvas\r\n */\r\nexport default function FixHoverBehavior(elementRegistry, eventBus, canvas) {\r\n\r\n  eventBus.on([\r\n    'create.hover',\r\n    'create.move',\r\n    'create.end',\r\n    'shape.move.hover',\r\n    'shape.move.move',\r\n    'shape.move.end'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape || event.shape,\r\n        hover = event.hover;\r\n\r\n    // ensure elements are not dropped onto a bpmn:Lane but onto\r\n    // the underlying bpmn:Participant\r\n    if (is(hover, 'bpmn:Lane') && !isAny(shape, [ 'bpmn:Lane', 'bpmn:Participant' ])) {\r\n      event.hover = getLanesRoot(hover);\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n\r\n    var rootElement = canvas.getRootElement();\r\n\r\n    // ensure bpmn:Group and label elements are dropped\r\n    // always onto the root\r\n    if (hover !== rootElement && (shape.labelTarget || is(shape, 'bpmn:Group'))) {\r\n      event.hover = rootElement;\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n  });\r\n\r\n\r\n  eventBus.on([\r\n    'connect.hover',\r\n    'connect.out',\r\n    'connect.end',\r\n    'connect.cleanup',\r\n    'global-connect.hover',\r\n    'global-connect.out',\r\n    'global-connect.end',\r\n    'global-connect.cleanup'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var hover = event.hover;\r\n\r\n    // ensure connections start/end on bpmn:Participant,\r\n    // not the underlying bpmn:Lane\r\n    if (is(hover, 'bpmn:Lane')) {\r\n      event.hover = getLanesRoot(hover) || hover;\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n  });\r\n\r\n\r\n  eventBus.on([\r\n    'bendpoint.move.hover'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        hover = event.hover,\r\n        type = context.type;\r\n\r\n    // ensure reconnect start/end on bpmn:Participant,\r\n    // not the underlying bpmn:Lane\r\n    if (is(hover, 'bpmn:Lane') && /reconnect/.test(type)) {\r\n      event.hover = getLanesRoot(hover) || hover;\r\n      event.hoverGfx = elementRegistry.getGraphics(event.hover);\r\n    }\r\n  });\r\n\r\n\r\n  eventBus.on([\r\n    'connect.start'\r\n  ], HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        start = context.start;\r\n\r\n    // ensure connect start on bpmn:Participant,\r\n    // not the underlying bpmn:Lane\r\n    if (is(start, 'bpmn:Lane')) {\r\n      context.start = getLanesRoot(start) || start;\r\n    }\r\n  });\r\n\r\n\r\n  // allow movement of participants from lanes\r\n  eventBus.on('shape.move.start', HIGHEST_PRIORITY, function(event) {\r\n    var shape = event.shape;\r\n\r\n    if (is(shape, 'bpmn:Lane')) {\r\n      event.shape = getLanesRoot(shape) || shape;\r\n    }\r\n  });\r\n\r\n}\r\n\r\nFixHoverBehavior.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'canvas'\r\n];","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n\n/**\n * BPMN specific create data object behavior\n */\nexport default function CreateDataObjectBehavior(eventBus, bpmnFactory, moddle) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this.preExecute('shape.create', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:DataObjectReference') && shape.type !== 'label') {\n\n      // create a DataObject every time a DataObjectReference is created\n      var dataObject = bpmnFactory.create('bpmn:DataObject');\n\n      // set the reference to the DataObject\n      shape.businessObject.dataObjectRef = dataObject;\n    }\n  });\n\n}\n\nCreateDataObjectBehavior.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'moddle'\n];\n\ninherits(CreateDataObjectBehavior, CommandInterceptor);","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n\nimport {\n  assign,\n  find\n} from 'min-dash';\n\nimport { asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\n\nvar HORIZONTAL_PARTICIPANT_PADDING = 20,\n    VERTICAL_PARTICIPANT_PADDING = 20;\n\nexport var PARTICIPANT_BORDER_WIDTH = 30;\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * BPMN-specific behavior for creating participants.\n */\nexport default function CreateParticipantBehavior(canvas, eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  // fit participant\n  eventBus.on([\n    'create.start',\n    'shape.move.start'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement();\n\n    if (!is(shape, 'bpmn:Participant') ||\n      !is(rootElement, 'bpmn:Process') ||\n      !rootElement.children.length) {\n      return;\n    }\n\n    // ignore connections, groups and labels\n    var children = rootElement.children.filter(function(element) {\n      return !is(element, 'bpmn:Group') &&\n        !isLabel(element) &&\n        !isConnection(element);\n    });\n\n    // ensure for available children to calculate bounds\n    if (!children.length) {\n      return;\n    }\n\n    var childrenBBox = getBBox(children);\n\n    var participantBounds = getParticipantBounds(shape, childrenBBox);\n\n    // assign width and height\n    assign(shape, participantBounds);\n\n    // assign create constraints\n    context.createConstraints = getParticipantCreateConstraints(shape, childrenBBox);\n  });\n\n  // force hovering process when creating first participant\n  eventBus.on('create.start', HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement(),\n        rootElementGfx = canvas.getGraphics(rootElement);\n\n    function ensureHoveringProcess(event) {\n      event.element = rootElement;\n      event.gfx = rootElementGfx;\n    }\n\n    if (is(shape, 'bpmn:Participant') && is(rootElement, 'bpmn:Process')) {\n      eventBus.on('element.hover', HIGH_PRIORITY, ensureHoveringProcess);\n\n      eventBus.once('create.cleanup', function() {\n        eventBus.off('element.hover', ensureHoveringProcess);\n      });\n    }\n  });\n\n  function ensureCollaboration(context) {\n    var parent = context.parent,\n        collaboration;\n\n    var rootElement = canvas.getRootElement();\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      collaboration = rootElement;\n    } else {\n\n      // update root element by making collaboration\n      collaboration = modeling.makeCollaboration();\n\n      // re-use process when creating first participant\n      context.process = parent;\n    }\n\n    context.parent = collaboration;\n  }\n\n  // turn process into collaboration before adding participant\n  this.preExecute('shape.create', function(context) {\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Participant') && is(parent, 'bpmn:Process')) {\n      ensureCollaboration(context);\n    }\n  }, true);\n\n  this.execute('shape.create', function(context) {\n    var process = context.process,\n        shape = context.shape;\n\n    if (process) {\n      context.oldProcessRef = shape.businessObject.processRef;\n\n      // re-use process when creating first participant\n      shape.businessObject.processRef = process.businessObject;\n    }\n  }, true);\n\n  this.revert('shape.create', function(context) {\n    var process = context.process,\n        shape = context.shape;\n\n    if (process) {\n\n      // re-use process when creating first participant\n      shape.businessObject.processRef = context.oldProcessRef;\n    }\n  }, true);\n\n  this.postExecute('shape.create', function(context) {\n    var process = context.process,\n        shape = context.shape;\n\n    if (process) {\n\n      // move children from process to participant\n      var processChildren = process.children.slice();\n\n      modeling.moveElements(processChildren, { x: 0, y: 0 }, shape);\n    }\n\n  }, true);\n\n  // turn process into collaboration when creating participants\n  this.preExecute('elements.create', HIGH_PRIORITY, function(context) {\n    var elements = context.elements,\n        parent = context.parent,\n        participant;\n\n    var hasParticipants = findParticipant(elements);\n\n    if (hasParticipants && is(parent, 'bpmn:Process')) {\n      ensureCollaboration(context);\n\n      participant = findParticipant(elements);\n\n      context.oldProcessRef = participant.businessObject.processRef;\n\n      // re-use process when creating first participant\n      participant.businessObject.processRef = parent.businessObject;\n    }\n  }, true);\n\n  this.revert('elements.create', function(context) {\n    var elements = context.elements,\n        process = context.process,\n        participant;\n\n    if (process) {\n      participant = findParticipant(elements);\n\n      // re-use process when creating first participant\n      participant.businessObject.processRef = context.oldProcessRef;\n    }\n  }, true);\n\n  this.postExecute('elements.create', function(context) {\n    var elements = context.elements,\n        process = context.process,\n        participant;\n\n    if (process) {\n      participant = findParticipant(elements);\n\n      // move children from process to first participant\n      var processChildren = process.children.slice();\n\n      modeling.moveElements(processChildren, { x: 0, y: 0 }, participant);\n    }\n\n  }, true);\n\n}\n\nCreateParticipantBehavior.$inject = [\n  'canvas',\n  'eventBus',\n  'modeling'\n];\n\ninherits(CreateParticipantBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getParticipantBounds(shape, childrenBBox) {\n  childrenBBox = {\n    width: childrenBBox.width + HORIZONTAL_PARTICIPANT_PADDING * 2 + PARTICIPANT_BORDER_WIDTH,\n    height: childrenBBox.height + VERTICAL_PARTICIPANT_PADDING * 2\n  };\n\n  var width = Math.max(shape.width, childrenBBox.width),\n      height = Math.max(shape.height, childrenBBox.height);\n\n  return {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getParticipantCreateConstraints(shape, childrenBBox) {\n  childrenBBox = asTRBL(childrenBBox);\n\n  return {\n    bottom: childrenBBox.top + shape.height / 2 - VERTICAL_PARTICIPANT_PADDING,\n    left: childrenBBox.right - shape.width / 2 + HORIZONTAL_PARTICIPANT_PADDING,\n    top: childrenBBox.bottom - shape.height / 2 + VERTICAL_PARTICIPANT_PADDING,\n    right: childrenBBox.left + shape.width / 2 - HORIZONTAL_PARTICIPANT_PADDING - PARTICIPANT_BORDER_WIDTH\n  };\n}\n\nfunction isConnection(element) {\n  return !!element.waypoints;\n}\n\nfunction findParticipant(elements) {\n  return find(elements, function(element) {\n    return is(element, 'bpmn:Participant');\n  });\n}","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  find\n} from 'min-dash';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\nvar TARGET_REF_PLACEHOLDER_NAME = '__targetRef_placeholder';\n\n\n/**\n * This behavior makes sure we always set a fake\n * DataInputAssociation#targetRef as demanded by the BPMN 2.0\n * XSD schema.\n *\n * The reference is set to a bpmn:Property{ name: '__targetRef_placeholder' }\n * which is created on the fly and cleaned up afterwards if not needed\n * anymore.\n *\n * @param {EventBus} eventBus\n * @param {BpmnFactory} bpmnFactory\n */\nexport default function DataInputAssociationBehavior(eventBus, bpmnFactory) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  this.executed([\n    'connection.create',\n    'connection.delete',\n    'connection.move',\n    'connection.reconnect'\n  ], ifDataInputAssociation(fixTargetRef));\n\n  this.reverted([\n    'connection.create',\n    'connection.delete',\n    'connection.move',\n    'connection.reconnect'\n  ], ifDataInputAssociation(fixTargetRef));\n\n\n  function usesTargetRef(element, targetRef, removedConnection) {\n\n    var inputAssociations = element.get('dataInputAssociations');\n\n    return find(inputAssociations, function(association) {\n      return association !== removedConnection &&\n             association.targetRef === targetRef;\n    });\n  }\n\n  function getTargetRef(element, create) {\n\n    var properties = element.get('properties');\n\n    var targetRefProp = find(properties, function(p) {\n      return p.name === TARGET_REF_PLACEHOLDER_NAME;\n    });\n\n    if (!targetRefProp && create) {\n      targetRefProp = bpmnFactory.create('bpmn:Property', {\n        name: TARGET_REF_PLACEHOLDER_NAME\n      });\n\n      collectionAdd(properties, targetRefProp);\n    }\n\n    return targetRefProp;\n  }\n\n  function cleanupTargetRef(element, connection) {\n\n    var targetRefProp = getTargetRef(element);\n\n    if (!targetRefProp) {\n      return;\n    }\n\n    if (!usesTargetRef(element, targetRefProp, connection)) {\n      collectionRemove(element.get('properties'), targetRefProp);\n    }\n  }\n\n  /**\n   * Make sure targetRef is set to a valid property or\n   * `null` if the connection is detached.\n   *\n   * @param {Event} event\n   */\n  function fixTargetRef(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        connectionBo = connection.businessObject,\n        target = connection.target,\n        targetBo = target && target.businessObject,\n        newTarget = context.newTarget,\n        newTargetBo = newTarget && newTarget.businessObject,\n        oldTarget = context.oldTarget || context.target,\n        oldTargetBo = oldTarget && oldTarget.businessObject;\n\n    var dataAssociation = connection.businessObject,\n        targetRefProp;\n\n    if (oldTargetBo && oldTargetBo !== targetBo) {\n      cleanupTargetRef(oldTargetBo, connectionBo);\n    }\n\n    if (newTargetBo && newTargetBo !== targetBo) {\n      cleanupTargetRef(newTargetBo, connectionBo);\n    }\n\n    if (targetBo) {\n      targetRefProp = getTargetRef(targetBo, true);\n      dataAssociation.targetRef = targetRefProp;\n    } else {\n      dataAssociation.targetRef = null;\n    }\n  }\n}\n\nDataInputAssociationBehavior.$inject = [\n  'eventBus',\n  'bpmnFactory'\n];\n\ninherits(DataInputAssociationBehavior, CommandInterceptor);\n\n\n/**\n * Only call the given function when the event\n * touches a bpmn:DataInputAssociation.\n *\n * @param {Function} fn\n * @return {Function}\n */\nfunction ifDataInputAssociation(fn) {\n\n  return function(event) {\n    var context = event.context,\n        connection = context.connection;\n\n    if (is(connection, 'bpmn:DataInputAssociation')) {\n      return fn(event);\n    }\n  };\n}","export default function UpdateSemanticParentHandler(bpmnUpdater) {\r\n  this._bpmnUpdater = bpmnUpdater;\r\n}\r\n\r\nUpdateSemanticParentHandler.$inject = [ 'bpmnUpdater' ];\r\n\r\n\r\nUpdateSemanticParentHandler.prototype.execute = function(context) {\r\n  var dataStoreBo = context.dataStoreBo,\r\n      newSemanticParent = context.newSemanticParent,\r\n      newDiParent = context.newDiParent;\r\n\r\n  context.oldSemanticParent = dataStoreBo.$parent;\r\n  context.oldDiParent = dataStoreBo.di.$parent;\r\n\r\n  // update semantic parent\r\n  this._bpmnUpdater.updateSemanticParent(dataStoreBo, newSemanticParent);\r\n\r\n  // update DI parent\r\n  this._bpmnUpdater.updateDiParent(dataStoreBo.di, newDiParent);\r\n};\r\n\r\nUpdateSemanticParentHandler.prototype.revert = function(context) {\r\n  var dataStoreBo = context.dataStoreBo,\r\n      oldSemanticParent = context.oldSemanticParent,\r\n      oldDiParent = context.oldDiParent;\r\n\r\n  // update semantic parent\r\n  this._bpmnUpdater.updateSemanticParent(dataStoreBo, oldSemanticParent);\r\n\r\n  // update DI parent\r\n  this._bpmnUpdater.updateDiParent(dataStoreBo.di, oldDiParent);\r\n};\r\n\r\n","import inherits from 'inherits';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\nimport { isAny } from '../util/ModelingUtil';\r\n\r\nimport UpdateSemanticParentHandler from '../cmd/UpdateSemanticParentHandler';\r\n\r\n\r\n/**\r\n * BPMN specific data store behavior\r\n */\r\nexport default function DataStoreBehavior(\r\n    canvas, commandStack, elementRegistry,\r\n    eventBus) {\r\n\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  commandStack.registerHandler('dataStore.updateContainment', UpdateSemanticParentHandler);\r\n\r\n  function getFirstParticipant() {\r\n    return elementRegistry.filter(function(element) {\r\n      return is(element, 'bpmn:Participant');\r\n    })[0];\r\n  }\r\n\r\n  function getDataStores(element) {\r\n    return element.children.filter(function(child) {\r\n      return is(child, 'bpmn:DataStoreReference') && !child.labelTarget;\r\n    });\r\n  }\r\n\r\n  function updateDataStoreParent(dataStore, newDataStoreParent) {\r\n    var dataStoreBo = dataStore.businessObject || dataStore;\r\n\r\n    newDataStoreParent = newDataStoreParent || getFirstParticipant();\r\n\r\n    if (newDataStoreParent) {\r\n      var newDataStoreParentBo = newDataStoreParent.businessObject || newDataStoreParent;\r\n\r\n      commandStack.execute('dataStore.updateContainment', {\r\n        dataStoreBo: dataStoreBo,\r\n        newSemanticParent: newDataStoreParentBo.processRef || newDataStoreParentBo,\r\n        newDiParent: newDataStoreParentBo.di\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  // disable auto-resize for data stores\r\n  this.preExecute('shape.create', function(event) {\r\n\r\n    var context = event.context,\r\n        shape = context.shape;\r\n\r\n    if (is(shape, 'bpmn:DataStoreReference') &&\r\n        shape.type !== 'label') {\r\n\r\n      if (!context.hints) {\r\n        context.hints = {};\r\n      }\r\n\r\n      // prevent auto resizing\r\n      context.hints.autoResize = false;\r\n    }\r\n  });\r\n\r\n\r\n  // disable auto-resize for data stores\r\n  this.preExecute('elements.move', function(event) {\r\n    var context = event.context,\r\n        shapes = context.shapes;\r\n\r\n    var dataStoreReferences = shapes.filter(function(shape) {\r\n      return is(shape, 'bpmn:DataStoreReference');\r\n    });\r\n\r\n    if (dataStoreReferences.length) {\r\n      if (!context.hints) {\r\n        context.hints = {};\r\n      }\r\n\r\n      // prevent auto resizing for data store references\r\n      context.hints.autoResize = shapes.filter(function(shape) {\r\n        return !is(shape, 'bpmn:DataStoreReference');\r\n      });\r\n    }\r\n  });\r\n\r\n\r\n  // update parent on data store created\r\n  this.postExecute('shape.create', function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        parent = shape.parent;\r\n\r\n\r\n    if (is(shape, 'bpmn:DataStoreReference') &&\r\n        shape.type !== 'label' &&\r\n        is(parent, 'bpmn:Collaboration')) {\r\n\r\n      updateDataStoreParent(shape);\r\n    }\r\n  });\r\n\r\n\r\n  // update parent on data store moved\r\n  this.postExecute('shape.move', function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        oldParent = context.oldParent,\r\n        parent = shape.parent;\r\n\r\n    if (is(oldParent, 'bpmn:Collaboration')) {\r\n\r\n      // do nothing if not necessary\r\n      return;\r\n    }\r\n\r\n    if (is(shape, 'bpmn:DataStoreReference') &&\r\n        shape.type !== 'label' &&\r\n        is(parent, 'bpmn:Collaboration')) {\r\n\r\n      var participant = is(oldParent, 'bpmn:Participant') ?\r\n        oldParent :\r\n        getAncestor(oldParent, 'bpmn:Participant');\r\n\r\n      updateDataStoreParent(shape, participant);\r\n    }\r\n  });\r\n\r\n\r\n  // update data store parents on participant or subprocess deleted\r\n  this.postExecute('shape.delete', function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        rootElement = canvas.getRootElement();\r\n\r\n    if (isAny(shape, [ 'bpmn:Participant', 'bpmn:SubProcess' ])\r\n        && is(rootElement, 'bpmn:Collaboration')) {\r\n      getDataStores(rootElement)\r\n        .filter(function(dataStore) {\r\n          return isDescendant(dataStore, shape);\r\n        })\r\n        .forEach(function(dataStore) {\r\n          updateDataStoreParent(dataStore);\r\n        });\r\n    }\r\n  });\r\n\r\n  // update data store parents on collaboration -> process\r\n  this.postExecute('canvas.updateRoot', function(event) {\r\n    var context = event.context,\r\n        oldRoot = context.oldRoot,\r\n        newRoot = context.newRoot;\r\n\r\n    var dataStores = getDataStores(oldRoot);\r\n\r\n    dataStores.forEach(function(dataStore) {\r\n\r\n      if (is(newRoot, 'bpmn:Process')) {\r\n        updateDataStoreParent(dataStore, newRoot);\r\n      }\r\n\r\n    });\r\n  });\r\n}\r\n\r\nDataStoreBehavior.$inject = [\r\n  'canvas',\r\n  'commandStack',\r\n  'elementRegistry',\r\n  'eventBus',\r\n];\r\n\r\ninherits(DataStoreBehavior, CommandInterceptor);\r\n\r\n\r\n// helpers //////////\r\n\r\nfunction isDescendant(descendant, ancestor) {\r\n  var descendantBo = descendant.businessObject || descendant,\r\n      ancestorBo = ancestor.businessObject || ancestor;\r\n\r\n  while (descendantBo.$parent) {\r\n    if (descendantBo.$parent === ancestorBo.processRef || ancestorBo) {\r\n      return true;\r\n    }\r\n\r\n    descendantBo = descendantBo.$parent;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction getAncestor(element, type) {\r\n\r\n  while (element.parent) {\r\n    if (is(element.parent, type)) {\r\n      return element.parent;\r\n    }\r\n\r\n    element = element.parent;\r\n  }\r\n}","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport {\n  getChildLanes\n} from '../util/LaneUtil';\n\nimport {\n  eachElement\n} from 'diagram-js/lib/util/Elements';\n\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * BPMN specific delete lane behavior\n */\nexport default function DeleteLaneBehavior(eventBus, modeling, spaceTool) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  function compensateLaneDelete(shape, oldParent) {\n\n    var siblings = getChildLanes(oldParent);\n\n    var topAffected = [];\n    var bottomAffected = [];\n\n    eachElement(siblings, function(element) {\n\n      if (element.y > shape.y) {\n        bottomAffected.push(element);\n      } else {\n        topAffected.push(element);\n      }\n\n      return element.children;\n    });\n\n    if (!siblings.length) {\n      return;\n    }\n\n    var offset;\n\n    if (bottomAffected.length && topAffected.length) {\n      offset = shape.height / 2;\n    } else {\n      offset = shape.height;\n    }\n\n    var topAdjustments,\n        bottomAdjustments;\n\n    if (topAffected.length) {\n      topAdjustments = spaceTool.calculateAdjustments(\n        topAffected, 'y', offset, shape.y - 10);\n\n      spaceTool.makeSpace(\n        topAdjustments.movingShapes,\n        topAdjustments.resizingShapes,\n        { x: 0, y: offset }, 's');\n    }\n\n    if (bottomAffected.length) {\n      bottomAdjustments = spaceTool.calculateAdjustments(\n        bottomAffected, 'y', -offset, shape.y + shape.height + 10);\n\n      spaceTool.makeSpace(\n        bottomAdjustments.movingShapes,\n        bottomAdjustments.resizingShapes,\n        { x: 0, y: -offset }, 'n');\n    }\n  }\n\n\n  /**\n   * Adjust sizes of other lanes after lane deletion\n   */\n  this.postExecuted('shape.delete', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        hints = context.hints,\n        shape = context.shape,\n        oldParent = context.oldParent;\n\n    // only compensate lane deletes\n    if (!is(shape, 'bpmn:Lane')) {\n      return;\n    }\n\n    // compensate root deletes only\n    if (hints && hints.nested) {\n      return;\n    }\n\n    compensateLaneDelete(shape, oldParent);\n  });\n}\n\nDeleteLaneBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'spaceTool'\n];\n\ninherits(DeleteLaneBehavior, CommandInterceptor);","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Replace boundary event with intermediate event when creating or moving results in detached event.\n */\nexport default function DetachEventBehavior(bpmnReplace, injector) {\n  injector.invoke(CommandInterceptor, this);\n\n  this._bpmnReplace = bpmnReplace;\n\n  var self = this;\n\n  this.postExecuted('elements.create', LOW_PRIORITY, function(context) {\n    var elements = context.elements;\n\n    elements.filter(function(shape) {\n      var host = shape.host;\n\n      return shouldReplace(shape, host);\n    }).map(function(shape) {\n      return elements.indexOf(shape);\n    }).forEach(function(index) {\n      context.elements[ index ] = self.replaceShape(elements[ index ]);\n    });\n  }, true);\n\n  this.preExecute('elements.move', LOW_PRIORITY, function(context) {\n    var shapes = context.shapes,\n        newHost = context.newHost;\n\n    shapes.forEach(function(shape, index) {\n      var host = shape.host;\n\n      if (shouldReplace(shape, includes(shapes, host) ? host : newHost)) {\n        shapes[ index ] = self.replaceShape(shape);\n      }\n    });\n  }, true);\n}\n\nDetachEventBehavior.$inject = [\n  'bpmnReplace',\n  'injector'\n];\n\ninherits(DetachEventBehavior, CommandInterceptor);\n\nDetachEventBehavior.prototype.replaceShape = function(shape) {\n  var eventDefinition = getEventDefinition(shape),\n      intermediateEvent;\n\n  if (eventDefinition) {\n    intermediateEvent = {\n      type: 'bpmn:IntermediateCatchEvent',\n      eventDefinitionType: eventDefinition.$type\n    };\n  } else {\n    intermediateEvent = {\n      type: 'bpmn:IntermediateThrowEvent'\n    };\n  }\n\n  return this._bpmnReplace.replaceElement(shape, intermediateEvent, { layoutConnection: false });\n};\n\n\n// helpers //////////\n\nfunction getEventDefinition(element) {\n  var businessObject = getBusinessObject(element),\n      eventDefinitions = businessObject.eventDefinitions;\n\n  return eventDefinitions && eventDefinitions[0];\n}\n\nfunction shouldReplace(shape, host) {\n  return !isLabel(shape) && is(shape, 'bpmn:BoundaryEvent') && !host;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}","import inherits from 'inherits';\n\nimport {\n  assign,\n  filter,\n  find,\n  isNumber\n} from 'min-dash';\n\nimport { getMid } from 'diagram-js/lib/layout/LayoutUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getApproxIntersection\n} from 'diagram-js/lib/util/LineIntersection';\n\n\nexport default function DropOnFlowBehavior(eventBus, bpmnRules, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Reconnect start / end of a connection after\n   * dropping an element on a flow.\n   */\n\n  function insertShape(shape, targetFlow, positionOrBounds) {\n    var waypoints = targetFlow.waypoints,\n        waypointsBefore,\n        waypointsAfter,\n        dockingPoint,\n        source,\n        target,\n        incomingConnection,\n        outgoingConnection,\n        oldOutgoing = shape.outgoing.slice(),\n        oldIncoming = shape.incoming.slice();\n\n    var mid;\n\n    if (isNumber(positionOrBounds.width)) {\n      mid = getMid(positionOrBounds);\n    } else {\n      mid = positionOrBounds;\n    }\n\n    var intersection = getApproxIntersection(waypoints, mid);\n\n    if (intersection) {\n      waypointsBefore = waypoints.slice(0, intersection.index);\n      waypointsAfter = waypoints.slice(intersection.index + (intersection.bendpoint ? 1 : 0));\n\n      // due to inaccuracy intersection might have been found\n      if (!waypointsBefore.length || !waypointsAfter.length) {\n        return;\n      }\n\n      dockingPoint = intersection.bendpoint ? waypoints[intersection.index] : mid;\n\n      // if last waypointBefore is inside shape's bounds, ignore docking point\n      if (!isPointInsideBBox(shape, waypointsBefore[waypointsBefore.length-1])) {\n        waypointsBefore.push(copy(dockingPoint));\n      }\n\n      // if first waypointAfter is inside shape's bounds, ignore docking point\n      if (!isPointInsideBBox(shape, waypointsAfter[0])) {\n        waypointsAfter.unshift(copy(dockingPoint));\n      }\n    }\n\n    source = targetFlow.source;\n    target = targetFlow.target;\n\n    if (bpmnRules.canConnect(source, shape, targetFlow)) {\n\n      // reconnect source -> inserted shape\n      modeling.reconnectEnd(targetFlow, shape, waypointsBefore || mid);\n\n      incomingConnection = targetFlow;\n    }\n\n    if (bpmnRules.canConnect(shape, target, targetFlow)) {\n\n      if (!incomingConnection) {\n\n        // reconnect inserted shape -> end\n        modeling.reconnectStart(targetFlow, shape, waypointsAfter || mid);\n\n        outgoingConnection = targetFlow;\n      } else {\n        outgoingConnection = modeling.connect(\n          shape, target, { type: targetFlow.type, waypoints: waypointsAfter }\n        );\n      }\n    }\n\n    var duplicateConnections = [].concat(\n\n      incomingConnection && filter(oldIncoming, function(connection) {\n        return connection.source === incomingConnection.source;\n      }) || [],\n\n      outgoingConnection && filter(oldOutgoing, function(connection) {\n        return connection.target === outgoingConnection.target;\n      }) || []\n    );\n\n    if (duplicateConnections.length) {\n      modeling.removeElements(duplicateConnections);\n    }\n  }\n\n  this.preExecute('elements.move', function(context) {\n\n    var newParent = context.newParent,\n        shapes = context.shapes,\n        delta = context.delta,\n        shape = shapes[0];\n\n    if (!shape || !newParent) {\n      return;\n    }\n\n    // if the new parent is a connection,\n    // change it to the new parent's parent\n    if (newParent && newParent.waypoints) {\n      context.newParent = newParent = newParent.parent;\n    }\n\n    var shapeMid = getMid(shape);\n    var newShapeMid = {\n      x: shapeMid.x + delta.x,\n      y: shapeMid.y + delta.y\n    };\n\n    // find a connection which intersects with the\n    // element's mid point\n    var connection = find(newParent.children, function(element) {\n      var canInsert = bpmnRules.canInsert(shapes, element);\n\n      return canInsert && getApproxIntersection(element.waypoints, newShapeMid);\n    });\n\n    if (connection) {\n      context.targetFlow = connection;\n      context.position = newShapeMid;\n    }\n\n  }, true);\n\n  this.postExecuted('elements.move', function(context) {\n\n    var shapes = context.shapes,\n        targetFlow = context.targetFlow,\n        position = context.position;\n\n    if (targetFlow) {\n      insertShape(shapes[0], targetFlow, position);\n    }\n\n  }, true);\n\n  this.preExecute('shape.create', function(context) {\n\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (bpmnRules.canInsert(shape, parent)) {\n      context.targetFlow = parent;\n      context.parent = parent.parent;\n    }\n  }, true);\n\n  this.postExecuted('shape.create', function(context) {\n\n    var shape = context.shape,\n        targetFlow = context.targetFlow,\n        positionOrBounds = context.position;\n\n    if (targetFlow) {\n      insertShape(shape, targetFlow, positionOrBounds);\n    }\n  }, true);\n}\n\ninherits(DropOnFlowBehavior, CommandInterceptor);\n\nDropOnFlowBehavior.$inject = [\n  'eventBus',\n  'bpmnRules',\n  'modeling'\n];\n\n\n// helpers /////////////////////\n\nfunction isPointInsideBBox(bbox, point) {\n  var x = point.x,\n      y = point.y;\n\n  return x >= bbox.x &&\n    x <= bbox.x + bbox.width &&\n    y >= bbox.y &&\n    y <= bbox.y + bbox.height;\n}\n\nfunction copy(obj) {\n  return assign({}, obj);\n}\n\n","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nexport default function EventBasedGatewayBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Remove existing sequence flows of event-based target before connecting\n   * from event-based gateway.\n   */\n  this.preExecuted('connection.create', function(event) {\n\n    var context = event.context,\n        source = context.source,\n        target = context.target,\n        existingIncomingConnections = target.incoming.slice();\n\n    if (context.hints && context.hints.createElementsBehavior === false) {\n      return;\n    }\n\n    if (\n      is(source, 'bpmn:EventBasedGateway') &&\n      target.incoming.length\n    ) {\n\n      existingIncomingConnections.filter(isSequenceFlow)\n        .forEach(function(sequenceFlow) {\n          modeling.removeConnection(sequenceFlow);\n        });\n    }\n  });\n\n  /**\n   *  After replacing shape with event-based gateway, remove incoming sequence\n   *  flows of event-based targets which do not belong to event-based gateway\n   *  source.\n   */\n  this.preExecuted('shape.replace', function(event) {\n\n    var newShape = event.context.newShape,\n        newShapeTargets,\n        newShapeTargetsIncomingSequenceFlows;\n\n    if (!is(newShape, 'bpmn:EventBasedGateway')) {\n      return;\n    }\n\n    newShapeTargets = newShape.outgoing.filter(isSequenceFlow)\n      .map(function(sequenceFlow) {\n        return sequenceFlow.target;\n      });\n\n    newShapeTargetsIncomingSequenceFlows = newShapeTargets.reduce(function(sequenceFlows, target) {\n      var incomingSequenceFlows = target.incoming.filter(isSequenceFlow);\n\n      return sequenceFlows.concat(incomingSequenceFlows);\n    }, []);\n\n    newShapeTargetsIncomingSequenceFlows.forEach(function(sequenceFlow) {\n      if (sequenceFlow.source !== newShape) {\n        modeling.removeConnection(sequenceFlow);\n      }\n    });\n  });\n}\n\nEventBasedGatewayBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\ninherits(EventBasedGatewayBehavior, CommandInterceptor);\n\n\n\n// helpers //////////////////////\n\nfunction isSequenceFlow(connection) {\n  return is(connection, 'bpmn:SequenceFlow');\n}\n","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\nimport {\n  createCategoryValue\n} from './util/CategoryUtil';\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * BPMN specific Group behavior\n */\nexport default function GroupBehavior(\n    bpmnFactory,\n    canvas,\n    elementRegistry,\n    eventBus,\n    injector,\n    moddleCopy\n) {\n  injector.invoke(CommandInterceptor, this);\n\n  /**\n   * Gets process definitions\n   *\n   * @return {ModdleElement} definitions\n   */\n  function getDefinitions() {\n    var rootElement = canvas.getRootElement(),\n        businessObject = getBusinessObject(rootElement);\n\n    return businessObject.$parent;\n  }\n\n  /**\n   * Removes a referenced category value for a given group shape\n   *\n   * @param {djs.model.Shape} shape\n   */\n  function removeReferencedCategoryValue(shape) {\n\n    var businessObject = getBusinessObject(shape),\n        categoryValue = businessObject.categoryValueRef;\n\n    if (!categoryValue) {\n      return;\n    }\n\n    var category = categoryValue.$parent;\n\n    if (!categoryValue) {\n      return;\n    }\n\n    collectionRemove(category.categoryValue, categoryValue);\n\n    // cleanup category if it is empty\n    if (category && !category.categoryValue.length) {\n      removeCategory(category);\n    }\n  }\n\n  /**\n   * Removes a given category from the definitions\n   *\n   * @param {ModdleElement} category\n   */\n  function removeCategory(category) {\n\n    var definitions = getDefinitions();\n\n    collectionRemove(definitions.get('rootElements'), category);\n  }\n\n  /**\n   * Returns all group element in the current registry\n   *\n   * @return {Array<djs.model.shape>} a list of group shapes\n   */\n  function getGroupElements() {\n    return elementRegistry.filter(function(e) {\n      return is(e, 'bpmn:Group');\n    });\n  }\n\n  /**\n   * Returns true if given categoryValue is referenced in one of the given elements\n   *\n   * @param {Array<djs.model.shape>} elements\n   * @param {ModdleElement} categoryValue\n   * @return {Boolean}\n   */\n  function isReferenced(elements, categoryValue) {\n    return elements.some(function(e) {\n\n      var businessObject = getBusinessObject(e);\n\n      return businessObject.categoryValueRef\n        && businessObject.categoryValueRef === categoryValue;\n    });\n  }\n\n  /**\n   * remove referenced category + value when group was deleted\n   */\n  this.executed('shape.delete', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Group')) {\n\n      var businessObject = getBusinessObject(shape),\n          categoryValueRef = businessObject.categoryValueRef,\n          groupElements = getGroupElements();\n\n      if (!isReferenced(groupElements, categoryValueRef)) {\n        removeReferencedCategoryValue(shape);\n      }\n    }\n  });\n\n  /**\n   * re-attach removed category\n   */\n  this.reverted('shape.delete', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Group')) {\n\n      var businessObject = getBusinessObject(shape),\n          categoryValueRef = businessObject.categoryValueRef,\n          definitions = getDefinitions(),\n          category = categoryValueRef ? categoryValueRef.$parent : null;\n\n      collectionAdd(category.get('categoryValue'), categoryValueRef);\n      collectionAdd(definitions.get('rootElements'), category);\n    }\n  });\n\n  /**\n   * create new category + value when group was created\n   */\n  this.execute('shape.create', function(event) {\n    var context = event.context,\n        shape = context.shape,\n        businessObject = getBusinessObject(shape);\n\n    if (is(businessObject, 'bpmn:Group') && !businessObject.categoryValueRef) {\n\n      var definitions = getDefinitions(),\n          categoryValue = createCategoryValue(definitions, bpmnFactory);\n\n      // link the reference to the Group\n      businessObject.categoryValueRef = categoryValue;\n    }\n  });\n\n\n  this.revert('shape.create', function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Group')) {\n      removeReferencedCategoryValue(shape);\n\n      delete getBusinessObject(shape).categoryValueRef;\n\n    }\n  });\n\n  // copy bpmn:CategoryValue when copying element\n  eventBus.on('moddleCopy.canCopyProperty', HIGH_PRIORITY, function(context) {\n    var property = context.property,\n        categoryValue;\n\n    if (is(property, 'bpmn:CategoryValue')) {\n      categoryValue = createCategoryValue(getDefinitions(), bpmnFactory);\n\n      // return copy of category\n      return moddleCopy.copyElement(property, categoryValue);\n    }\n  });\n\n}\n\nGroupBehavior.$inject = [\n  'bpmnFactory',\n  'canvas',\n  'elementRegistry',\n  'eventBus',\n  'injector',\n  'moddleCopy'\n];\n\ninherits(GroupBehavior, CommandInterceptor);","/**\n * Returns the intersection between two line segments a and b.\n *\n * @param {Point} l1s\n * @param {Point} l1e\n * @param {Point} l2s\n * @param {Point} l2e\n *\n * @return {Point}\n */\nexport default function lineIntersect(l1s, l1e, l2s, l2e) {\n\n  // if the lines intersect, the result contains the x and y of the\n  // intersection (treating the lines as infinite) and booleans for\n  // whether line segment 1 or line segment 2 contain the point\n  var denominator, a, b, c, numerator;\n\n  denominator = ((l2e.y - l2s.y) * (l1e.x - l1s.x)) - ((l2e.x - l2s.x) * (l1e.y - l1s.y));\n\n  if (denominator == 0) {\n    return null;\n  }\n\n  a = l1s.y - l2s.y;\n  b = l1s.x - l2s.x;\n  numerator = ((l2e.x - l2s.x) * a) - ((l2e.y - l2s.y) * b);\n\n  c = numerator / denominator;\n\n  // if we cast these lines infinitely in\n  // both directions, they intersect here\n  return {\n    x: Math.round(l1s.x + (c * (l1e.x - l1s.x))),\n    y: Math.round(l1s.y + (c * (l1e.y - l1s.y)))\n  };\n}","import {\n  getMid\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport lineIntersect from './util/LineIntersect';\n\n\n/**\n * Fix broken dockings after DI imports.\n *\n * @param {EventBus} eventBus\n */\nexport default function ImportDockingFix(eventBus) {\n\n  function adjustDocking(startPoint, nextPoint, elementMid) {\n\n    var elementTop = {\n      x: elementMid.x,\n      y: elementMid.y - 50\n    };\n\n    var elementLeft = {\n      x: elementMid.x - 50,\n      y: elementMid.y\n    };\n\n    var verticalIntersect = lineIntersect(startPoint, nextPoint, elementMid, elementTop),\n        horizontalIntersect = lineIntersect(startPoint, nextPoint, elementMid, elementLeft);\n\n    // original is horizontal or vertical center cross intersection\n    var centerIntersect;\n\n    if (verticalIntersect && horizontalIntersect) {\n      if (getDistance(verticalIntersect, elementMid) > getDistance(horizontalIntersect, elementMid)) {\n        centerIntersect = horizontalIntersect;\n      } else {\n        centerIntersect = verticalIntersect;\n      }\n    } else {\n      centerIntersect = verticalIntersect || horizontalIntersect;\n    }\n\n    startPoint.original = centerIntersect;\n  }\n\n  function fixDockings(connection) {\n    var waypoints = connection.waypoints;\n\n    adjustDocking(\n      waypoints[0],\n      waypoints[1],\n      getMid(connection.source)\n    );\n\n    adjustDocking(\n      waypoints[waypoints.length - 1],\n      waypoints[waypoints.length - 2],\n      getMid(connection.target)\n    );\n  }\n\n  eventBus.on('bpmnElement.added', function(e) {\n\n    var element = e.element;\n\n    if (element.waypoints) {\n      fixDockings(element);\n    }\n  });\n}\n\nImportDockingFix.$inject = [\n  'eventBus'\n];\n\n\n// helpers //////////////////////\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport {\n  isAny\n} from '../util/ModelingUtil';\n\n/**\n * A component that makes sure that each created or updated\n * Pool and Lane is assigned an isHorizontal property set to true.\n *\n * @param {EventBus} eventBus\n */\nexport default function IsHorizontalFix(eventBus) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var elementTypesToUpdate = [\n    'bpmn:Participant',\n    'bpmn:Lane'\n  ];\n\n  this.executed([ 'shape.move', 'shape.create', 'shape.resize' ], function(event) {\n    var bo = getBusinessObject(event.context.shape);\n\n    if (isAny(bo, elementTypesToUpdate) && !bo.di.get('isHorizontal')) {\n\n      // set attribute directly to avoid modeling#updateProperty side effects\n      bo.di.set('isHorizontal', true);\n    }\n  });\n\n}\n\nIsHorizontalFix.$inject = [ 'eventBus' ];\n\ninherits(IsHorizontalFix, CommandInterceptor);\n","/**\n * Returns the length of a vector\n *\n * @param {Vector}\n * @return {Float}\n */\nexport function vectorLength(v) {\n  return Math.sqrt(Math.pow(v.x, 2) + Math.pow(v.y, 2));\n}\n\n\n/**\n * Calculates the angle between a line a the yAxis\n *\n * @param {Array}\n * @return {Float}\n */\nexport function getAngle(line) {\n\n  // return value is between 0, 180 and -180, -0\n  // @janstuemmel: maybe replace return a/b with b/a\n  return Math.atan((line[1].y - line[0].y) / (line[1].x - line[0].x));\n}\n\n\n/**\n * Rotates a vector by a given angle\n *\n * @param {Vector}\n * @param {Float} Angle in radians\n * @return {Vector}\n */\nexport function rotateVector(vector, angle) {\n  return (!angle) ? vector : {\n    x: Math.cos(angle) * vector.x - Math.sin(angle) * vector.y,\n    y: Math.sin(angle) * vector.x + Math.cos(angle) * vector.y\n  };\n}\n\n\n/**\n * Solves a 2D equation system\n * a + r*b = c, where a,b,c are 2D vectors\n *\n * @param {Vector}\n * @param {Vector}\n * @param {Vector}\n * @return {Float}\n */\nfunction solveLambaSystem(a, b, c) {\n\n  // the 2d system\n  var system = [\n    { n: a[0] - c[0], lambda: b[0] },\n    { n: a[1] - c[1], lambda: b[1] }\n  ];\n\n  // solve\n  var n = system[0].n * b[0] + system[1].n * b[1],\n      l = system[0].lambda * b[0] + system[1].lambda * b[1];\n\n  return -n/l;\n}\n\n\n/**\n * Position of perpendicular foot\n *\n * @param {Point}\n * @param [ {Point}, {Point} ] line defined through two points\n * @return {Point} the perpendicular foot position\n */\nexport function perpendicularFoot(point, line) {\n\n  var a = line[0], b = line[1];\n\n  // relative position of b from a\n  var bd = { x: b.x - a.x, y: b.y - a.y };\n\n  // solve equation system to the parametrized vectors param real value\n  var r = solveLambaSystem([ a.x, a.y ], [ bd.x, bd.y ], [ point.x, point.y ]);\n\n  return { x: a.x + r*bd.x, y: a.y + r*bd.y };\n}\n\n\n/**\n * Calculates the distance between a point and a line\n *\n * @param {Point}\n * @param [ {Point}, {Point} ] line defined through two points\n * @return {Float} distance\n */\nexport function getDistancePointLine(point, line) {\n\n  var pfPoint = perpendicularFoot(point, line);\n\n  // distance vector\n  var connectionVector = {\n    x: pfPoint.x - point.x,\n    y: pfPoint.y - point.y\n  };\n\n  return vectorLength(connectionVector);\n}\n\n\n/**\n * Calculates the distance between two points\n *\n * @param {Point}\n * @param {Point}\n * @return {Float} distance\n */\nexport function getDistancePointPoint(point1, point2) {\n\n  return vectorLength({\n    x: point1.x - point2.x,\n    y: point1.y - point2.y\n  });\n}","var sqrt = Math.sqrt,\n    min = Math.min,\n    max = Math.max,\n    abs = Math.abs;\n\n/**\n * Calculate the square (power to two) of a number.\n *\n * @param {Number} n\n *\n * @return {Number}\n */\nfunction sq(n) {\n  return Math.pow(n, 2);\n}\n\n/**\n * Get distance between two points.\n *\n * @param {Point} p1\n * @param {Point} p2\n *\n * @return {Number}\n */\nfunction getDistance(p1, p2) {\n  return sqrt(sq(p1.x - p2.x) + sq(p1.y - p2.y));\n}\n\n/**\n * Return the attachment of the given point on the specified line.\n *\n * The attachment is either a bendpoint (attached to the given point)\n * or segment (attached to a location on a line segment) attachment:\n *\n * ```javascript\n * var pointAttachment = {\n *   type: 'bendpoint',\n *   bendpointIndex: 3,\n *   position: { x: 10, y: 10 } // the attach point on the line\n * };\n *\n * var segmentAttachment = {\n *   type: 'segment',\n *   segmentIndex: 2,\n *   relativeLocation: 0.31, // attach point location between 0 (at start) and 1 (at end)\n *   position: { x: 10, y: 10 } // the attach point on the line\n * };\n * ```\n *\n * @param {Point} point\n * @param {Array<Point>} line\n *\n * @return {Object} attachment\n */\nexport function getAttachment(point, line) {\n\n  var idx = 0,\n      segmentStart,\n      segmentEnd,\n      segmentStartDistance,\n      segmentEndDistance,\n      attachmentPosition,\n      minDistance,\n      intersections,\n      attachment,\n      attachmentDistance,\n      closestAttachmentDistance,\n      closestAttachment;\n\n  for (idx = 0; idx < line.length - 1; idx++) {\n\n    segmentStart = line[idx];\n    segmentEnd = line[idx + 1];\n\n    if (pointsEqual(segmentStart, segmentEnd)) {\n      intersections = [ segmentStart ];\n    } else {\n      segmentStartDistance = getDistance(point, segmentStart);\n      segmentEndDistance = getDistance(point, segmentEnd);\n\n      minDistance = min(segmentStartDistance, segmentEndDistance);\n\n      intersections = getCircleSegmentIntersections(segmentStart, segmentEnd, point, minDistance);\n    }\n\n    if (intersections.length < 1) {\n      throw new Error('expected between [1, 2] circle -> line intersections');\n    }\n\n    // one intersection -> bendpoint attachment\n    if (intersections.length === 1) {\n      attachment = {\n        type: 'bendpoint',\n        position: intersections[0],\n        segmentIndex: idx,\n        bendpointIndex: pointsEqual(segmentStart, intersections[0]) ? idx : idx + 1\n      };\n    }\n\n    // two intersections -> segment attachment\n    if (intersections.length === 2) {\n\n      attachmentPosition = mid(intersections[0], intersections[1]);\n\n      attachment = {\n        type: 'segment',\n        position: attachmentPosition,\n        segmentIndex: idx,\n        relativeLocation: getDistance(segmentStart, attachmentPosition) / getDistance(segmentStart, segmentEnd)\n      };\n    }\n\n    attachmentDistance = getDistance(attachment.position, point);\n\n    if (!closestAttachment || closestAttachmentDistance > attachmentDistance) {\n      closestAttachment = attachment;\n      closestAttachmentDistance = attachmentDistance;\n    }\n  }\n\n  return closestAttachment;\n}\n\n/**\n * Gets the intersection between a circle and a line segment.\n *\n * @param {Point} s1 segment start\n * @param {Point} s2 segment end\n * @param {Point} cc circle center\n * @param {Number} cr circle radius\n *\n * @return {Array<Point>} intersections\n */\nfunction getCircleSegmentIntersections(s1, s2, cc, cr) {\n\n  var baX = s2.x - s1.x;\n  var baY = s2.y - s1.y;\n  var caX = cc.x - s1.x;\n  var caY = cc.y - s1.y;\n\n  var a = baX * baX + baY * baY;\n  var bBy2 = baX * caX + baY * caY;\n  var c = caX * caX + caY * caY - cr * cr;\n\n  var pBy2 = bBy2 / a;\n  var q = c / a;\n\n  var disc = pBy2 * pBy2 - q;\n\n  // check against negative value to work around\n  // negative, very close to zero results (-4e-15)\n  // being produced in some environments\n  if (disc < 0 && disc > -0.000001) {\n    disc = 0;\n  }\n\n  if (disc < 0) {\n    return [];\n  }\n\n  // if disc == 0 ... dealt with later\n  var tmpSqrt = sqrt(disc);\n  var abScalingFactor1 = -pBy2 + tmpSqrt;\n  var abScalingFactor2 = -pBy2 - tmpSqrt;\n\n  var i1 = {\n    x: s1.x - baX * abScalingFactor1,\n    y: s1.y - baY * abScalingFactor1\n  };\n\n  if (disc === 0) { // abScalingFactor1 == abScalingFactor2\n    return [ i1 ];\n  }\n\n  var i2 = {\n    x: s1.x - baX * abScalingFactor2,\n    y: s1.y - baY * abScalingFactor2\n  };\n\n  // return only points on line segment\n  return [ i1, i2 ].filter(function(p) {\n    return isPointInSegment(p, s1, s2);\n  });\n}\n\n\nfunction isPointInSegment(p, segmentStart, segmentEnd) {\n  return (\n    fenced(p.x, segmentStart.x, segmentEnd.x) &&\n    fenced(p.y, segmentStart.y, segmentEnd.y)\n  );\n}\n\nfunction fenced(n, rangeStart, rangeEnd) {\n\n  // use matching threshold to work around\n  // precision errors in intersection computation\n\n  return (\n    n >= min(rangeStart, rangeEnd) - EQUAL_THRESHOLD &&\n    n <= max(rangeStart, rangeEnd) + EQUAL_THRESHOLD\n  );\n}\n\n/**\n * Calculate mid of two points.\n *\n * @param {Point} p1\n * @param {Point} p2\n *\n * @return {Point}\n */\nfunction mid(p1, p2) {\n\n  return {\n    x: (p1.x + p2.x) / 2,\n    y: (p1.y + p2.y) / 2\n  };\n}\n\nvar EQUAL_THRESHOLD = 0.1;\n\nfunction pointsEqual(p1, p2) {\n\n  return (\n    abs(p1.x - p2.x) <= EQUAL_THRESHOLD &&\n    abs(p1.y - p2.y) <= EQUAL_THRESHOLD\n  );\n}\n","import {\n  getDistancePointPoint,\n  rotateVector,\n  getAngle\n} from './GeometricUtil';\n\nimport {\n  getAttachment\n} from './LineAttachmentUtil';\n\nimport {\n  roundPoint\n} from 'diagram-js/lib/layout/LayoutUtil';\n\n\nexport function findNewLabelLineStartIndex(oldWaypoints, newWaypoints, attachment, hints) {\n\n  var index = attachment.segmentIndex;\n\n  var offset = newWaypoints.length - oldWaypoints.length;\n\n  // segmentMove happened\n  if (hints.segmentMove) {\n\n    var oldSegmentStartIndex = hints.segmentMove.segmentStartIndex,\n        newSegmentStartIndex = hints.segmentMove.newSegmentStartIndex;\n\n    // if label was on moved segment return new segment index\n    if (index === oldSegmentStartIndex) {\n      return newSegmentStartIndex;\n    }\n\n    // label is after new segment index\n    if (index >= newSegmentStartIndex) {\n      return (index+offset < newSegmentStartIndex) ? newSegmentStartIndex : index+offset;\n    }\n\n    // if label is before new segment index\n    return index;\n  }\n\n  // bendpointMove happened\n  if (hints.bendpointMove) {\n\n    var insert = hints.bendpointMove.insert,\n        bendpointIndex = hints.bendpointMove.bendpointIndex,\n        newIndex;\n\n    // waypoints length didnt change\n    if (offset === 0) {\n      return index;\n    }\n\n    // label behind new/removed bendpoint\n    if (index >= bendpointIndex) {\n      newIndex = insert ? index + 1 : index - 1;\n    }\n\n    // label before new/removed bendpoint\n    if (index < bendpointIndex) {\n\n      newIndex = index;\n\n      // decide label should take right or left segment\n      if (insert && attachment.type !== 'bendpoint' && bendpointIndex-1 === index) {\n\n        var rel = relativePositionMidWaypoint(newWaypoints, bendpointIndex);\n\n        if (rel < attachment.relativeLocation) {\n          newIndex++;\n        }\n      }\n    }\n\n    return newIndex;\n  }\n\n  // start/end changed\n  if (offset === 0) {\n    return index;\n  }\n\n  if (hints.connectionStart) {\n    return (index === 0) ? 0 : null;\n  }\n\n  if (hints.connectionEnd) {\n    return (index === oldWaypoints.length - 2) ? newWaypoints.length - 2 : null;\n  }\n\n  // if nothing fits, return null\n  return null;\n}\n\n\n/**\n * Calculate the required adjustment (move delta) for the given label\n * after the connection waypoints got updated.\n *\n * @param {djs.model.Label} label\n * @param {Array<Point>} newWaypoints\n * @param {Array<Point>} oldWaypoints\n * @param {Object} hints\n *\n * @return {Point} delta\n */\nexport function getLabelAdjustment(label, newWaypoints, oldWaypoints, hints) {\n\n  var x = 0,\n      y = 0;\n\n  var labelPosition = getLabelMid(label);\n\n  // get closest attachment\n  var attachment = getAttachment(labelPosition, oldWaypoints),\n      oldLabelLineIndex = attachment.segmentIndex,\n      newLabelLineIndex = findNewLabelLineStartIndex(oldWaypoints, newWaypoints, attachment, hints);\n\n  if (newLabelLineIndex === null) {\n    return { x: x, y: y };\n  }\n\n  // should never happen\n  // TODO(@janstuemmel): throw an error here when connectionSegmentMove is refactored\n  if (newLabelLineIndex < 0 ||\n      newLabelLineIndex > newWaypoints.length - 2) {\n    return { x: x, y: y };\n  }\n\n  var oldLabelLine = getLine(oldWaypoints, oldLabelLineIndex),\n      newLabelLine = getLine(newWaypoints, newLabelLineIndex),\n      oldFoot = attachment.position;\n\n  var relativeFootPosition = getRelativeFootPosition(oldLabelLine, oldFoot),\n      angleDelta = getAngleDelta(oldLabelLine, newLabelLine);\n\n  // special rule if label on bendpoint\n  if (attachment.type === 'bendpoint') {\n\n    var offset = newWaypoints.length - oldWaypoints.length,\n        oldBendpointIndex = attachment.bendpointIndex,\n        oldBendpoint = oldWaypoints[oldBendpointIndex];\n\n    // bendpoint position hasn't changed, return same position\n    if (newWaypoints.indexOf(oldBendpoint) !== -1) {\n      return { x: x, y: y };\n    }\n\n    // new bendpoint and old bendpoint have same index, then just return the offset\n    if (offset === 0) {\n      var newBendpoint = newWaypoints[oldBendpointIndex];\n\n      return {\n        x: newBendpoint.x - attachment.position.x,\n        y: newBendpoint.y - attachment.position.y\n      };\n    }\n\n    // if bendpoints get removed\n    if (offset < 0 && oldBendpointIndex !== 0 && oldBendpointIndex < oldWaypoints.length - 1) {\n      relativeFootPosition = relativePositionMidWaypoint(oldWaypoints, oldBendpointIndex);\n    }\n  }\n\n  var newFoot = {\n    x: (newLabelLine[1].x - newLabelLine[0].x) * relativeFootPosition + newLabelLine[0].x,\n    y: (newLabelLine[1].y - newLabelLine[0].y) * relativeFootPosition + newLabelLine[0].y\n  };\n\n  // the rotated vector to label\n  var newLabelVector = rotateVector({\n    x: labelPosition.x - oldFoot.x,\n    y: labelPosition.y - oldFoot.y\n  }, angleDelta);\n\n  // the new relative position\n  x = newFoot.x + newLabelVector.x - labelPosition.x;\n  y = newFoot.y + newLabelVector.y - labelPosition.y;\n\n  return roundPoint({\n    x: x,\n    y: y\n  });\n}\n\n\n// HELPERS //////////////////////\n\nfunction relativePositionMidWaypoint(waypoints, idx) {\n\n  var distanceSegment1 = getDistancePointPoint(waypoints[idx-1], waypoints[idx]),\n      distanceSegment2 = getDistancePointPoint(waypoints[idx], waypoints[idx+1]);\n\n  var relativePosition = distanceSegment1 / (distanceSegment1 + distanceSegment2);\n\n  return relativePosition;\n}\n\nfunction getLabelMid(label) {\n  return {\n    x: label.x + label.width / 2,\n    y: label.y + label.height / 2\n  };\n}\n\nfunction getAngleDelta(l1, l2) {\n  var a1 = getAngle(l1),\n      a2 = getAngle(l2);\n  return a2 - a1;\n}\n\nfunction getLine(waypoints, idx) {\n  return [ waypoints[idx], waypoints[idx+1] ];\n}\n\nfunction getRelativeFootPosition(line, foot) {\n\n  var length = getDistancePointPoint(line[0], line[1]),\n      lengthToFoot = getDistancePointPoint(line[0], foot);\n\n  return length === 0 ? 0 : lengthToFoot / length;\n}\n","import {\n  roundPoint\n} from '../layout/LayoutUtil';\n\nimport {\n  center,\n  delta\n} from './PositionUtil';\n\n\n/**\n * Calculates the absolute point relative to the new element's position\n *\n * @param {point} point [absolute]\n * @param {bounds} oldBounds\n * @param {bounds} newBounds\n *\n * @return {point} point [absolute]\n */\nexport function getNewAttachPoint(point, oldBounds, newBounds) {\n  var oldCenter = center(oldBounds),\n      newCenter = center(newBounds),\n      oldDelta = delta(point, oldCenter);\n\n  var newDelta = {\n    x: oldDelta.x * (newBounds.width / oldBounds.width),\n    y: oldDelta.y * (newBounds.height / oldBounds.height)\n  };\n\n  return roundPoint({\n    x: newCenter.x + newDelta.x,\n    y: newCenter.y + newDelta.y\n  });\n}\n\n\n/**\n * Calculates the shape's delta relative to a new position\n * of a certain element's bounds\n *\n * @param {djs.model.Shape} point [absolute]\n * @param {bounds} oldBounds\n * @param {bounds} newBounds\n *\n * @return {delta} delta\n */\nexport function getNewAttachShapeDelta(shape, oldBounds, newBounds) {\n  var shapeCenter = center(shape),\n      oldCenter = center(oldBounds),\n      newCenter = center(newBounds),\n      shapeDelta = delta(shape, shapeCenter),\n      oldCenterDelta = delta(shapeCenter, oldCenter);\n\n  var newCenterDelta = {\n    x: oldCenterDelta.x * (newBounds.width / oldBounds.width),\n    y: oldCenterDelta.y * (newBounds.height / oldBounds.height)\n  };\n\n  var newShapeCenter = {\n    x: newCenter.x + newCenterDelta.x,\n    y: newCenter.y + newCenterDelta.y\n  };\n\n  return roundPoint({\n    x: newShapeCenter.x + shapeDelta.x - shape.x,\n    y: newShapeCenter.y + shapeDelta.y - shape.y\n  });\n}","import {\n  assign\n} from 'min-dash';\n\nimport inherits from 'inherits';\n\nimport {\n  is,\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nimport {\n  isLabelExternal,\n  getExternalLabelMid,\n  hasExternalLabel,\n  isLabel\n} from '../../../util/LabelUtil';\n\nimport {\n  getLabel\n} from '../../label-editing/LabelUtil';\n\nimport {\n  getLabelAdjustment\n} from './util/LabelLayoutUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getNewAttachPoint\n} from 'diagram-js/lib/util/AttachUtil';\n\nimport {\n  getMid,\n  roundPoint\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  delta\n} from 'diagram-js/lib/util/PositionUtil';\n\nimport {\n  sortBy\n} from 'min-dash';\n\nimport {\n  getDistancePointLine,\n  perpendicularFoot\n} from './util/GeometricUtil';\n\nvar DEFAULT_LABEL_DIMENSIONS = {\n  width: 90,\n  height: 20\n};\n\nvar NAME_PROPERTY = 'name';\nvar TEXT_PROPERTY = 'text';\n\n/**\n * A component that makes sure that external labels are added\n * together with respective elements and properly updated (DI wise)\n * during move.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {BpmnFactory} bpmnFactory\n * @param {TextRenderer} textRenderer\n */\nexport default function LabelBehavior(\n    eventBus, modeling, bpmnFactory,\n    textRenderer) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  // update label if name property was updated\n  this.postExecute('element.updateProperties', function(e) {\n    var context = e.context,\n        element = context.element,\n        properties = context.properties;\n\n    if (NAME_PROPERTY in properties) {\n      modeling.updateLabel(element, properties[NAME_PROPERTY]);\n    }\n\n    if (TEXT_PROPERTY in properties\n        && is(element, 'bpmn:TextAnnotation')) {\n\n      var newBounds = textRenderer.getTextAnnotationBounds(\n        {\n          x: element.x,\n          y: element.y,\n          width: element.width,\n          height: element.height\n        },\n        properties[TEXT_PROPERTY] || ''\n      );\n\n      modeling.updateLabel(element, properties.text, newBounds);\n    }\n  });\n\n  // create label shape after shape/connection was created\n  this.postExecute([ 'shape.create', 'connection.create' ], function(e) {\n    var context = e.context,\n        hints = context.hints || {};\n\n    if (hints.createElementsBehavior === false) {\n      return;\n    }\n\n    var element = context.shape || context.connection,\n        businessObject = element.businessObject;\n\n    if (isLabel(element) || !isLabelExternal(element)) {\n      return;\n    }\n\n    // only create label if attribute available\n    if (!getLabel(element)) {\n      return;\n    }\n\n    var labelCenter = getExternalLabelMid(element);\n\n    // we don't care about x and y\n    var labelDimensions = textRenderer.getExternalLabelBounds(\n      DEFAULT_LABEL_DIMENSIONS,\n      getLabel(element)\n    );\n\n    modeling.createLabel(element, labelCenter, {\n      id: businessObject.id + '_label',\n      businessObject: businessObject,\n      width: labelDimensions.width,\n      height: labelDimensions.height\n    });\n  });\n\n  // update label after label shape was deleted\n  this.postExecute('shape.delete', function(event) {\n    var context = event.context,\n        labelTarget = context.labelTarget,\n        hints = context.hints || {};\n\n    // check if label\n    if (labelTarget && hints.unsetLabel !== false) {\n      modeling.updateLabel(labelTarget, null, null, { removeShape: false });\n    }\n  });\n\n  // update di information on label creation\n  this.postExecute([ 'label.create' ], function(event) {\n\n    var context = event.context,\n        element = context.shape,\n        businessObject,\n        di;\n\n    // we want to trigger on real labels only\n    if (!element.labelTarget) {\n      return;\n    }\n\n    // we want to trigger on BPMN elements only\n    if (!is(element.labelTarget || element, 'bpmn:BaseElement')) {\n      return;\n    }\n\n    businessObject = element.businessObject,\n    di = businessObject.di;\n\n\n    if (!di.label) {\n      di.label = bpmnFactory.create('bpmndi:BPMNLabel', {\n        bounds: bpmnFactory.create('dc:Bounds')\n      });\n    }\n\n    assign(di.label.bounds, {\n      x: element.x,\n      y: element.y,\n      width: element.width,\n      height: element.height\n    });\n  });\n\n  function getVisibleLabelAdjustment(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        label = connection.label,\n        hints = assign({}, context.hints),\n        newWaypoints = context.newWaypoints || connection.waypoints,\n        oldWaypoints = context.oldWaypoints;\n\n\n    if (typeof hints.startChanged === 'undefined') {\n      hints.startChanged = !!hints.connectionStart;\n    }\n\n    if (typeof hints.endChanged === 'undefined') {\n      hints.endChanged = !!hints.connectionEnd;\n    }\n\n    return getLabelAdjustment(label, newWaypoints, oldWaypoints, hints);\n  }\n\n  this.postExecute([\n    'connection.layout',\n    'connection.updateWaypoints'\n  ], function(event) {\n    var context = event.context,\n        hints = context.hints || {};\n\n    if (hints.labelBehavior === false) {\n      return;\n    }\n\n    var connection = context.connection,\n        label = connection.label,\n        labelAdjustment;\n\n    // handle missing label as well as the case\n    // that the label parent does not exist (yet),\n    // because it is being pasted / created via multi element create\n    //\n    // Cf. https://github.com/bpmn-io/bpmn-js/pull/1227\n    if (!label || !label.parent) {\n      return;\n    }\n\n    labelAdjustment = getVisibleLabelAdjustment(event);\n\n    modeling.moveShape(label, labelAdjustment);\n  });\n\n\n  // keep label position on shape replace\n  this.postExecute([ 'shape.replace' ], function(event) {\n    var context = event.context,\n        newShape = context.newShape,\n        oldShape = context.oldShape;\n\n    var businessObject = getBusinessObject(newShape);\n\n    if (businessObject\n      && isLabelExternal(businessObject)\n      && oldShape.label\n      && newShape.label) {\n      newShape.label.x = oldShape.label.x;\n      newShape.label.y = oldShape.label.y;\n    }\n  });\n\n\n  // move external label after resizing\n  this.postExecute('shape.resize', function(event) {\n\n    var context = event.context,\n        shape = context.shape,\n        newBounds = context.newBounds,\n        oldBounds = context.oldBounds;\n\n    if (hasExternalLabel(shape)) {\n\n      var label = shape.label,\n          labelMid = getMid(label),\n          edges = asEdges(oldBounds);\n\n      // get nearest border point to label as reference point\n      var referencePoint = getReferencePoint(labelMid, edges);\n\n      var delta = getReferencePointDelta(referencePoint, oldBounds, newBounds);\n\n      modeling.moveShape(label, delta);\n\n    }\n\n  });\n\n}\n\ninherits(LabelBehavior, CommandInterceptor);\n\nLabelBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'bpmnFactory',\n  'textRenderer'\n];\n\n// helpers //////////////////////\n\n/**\n * Calculates a reference point delta relative to a new position\n * of a certain element's bounds\n *\n * @param {Point} point\n * @param {Bounds} oldBounds\n * @param {Bounds} newBounds\n *\n * @return {Delta} delta\n */\nexport function getReferencePointDelta(referencePoint, oldBounds, newBounds) {\n\n  var newReferencePoint = getNewAttachPoint(referencePoint, oldBounds, newBounds);\n\n  return roundPoint(delta(newReferencePoint, referencePoint));\n}\n\n/**\n * Generates the nearest point (reference point) for a given point\n * onto given set of lines\n *\n * @param {Array<Point, Point>} lines\n * @param {Point} point\n *\n * @param {Point}\n */\nexport function getReferencePoint(point, lines) {\n\n  if (!lines.length) {\n    return;\n  }\n\n  var nearestLine = getNearestLine(point, lines);\n\n  return perpendicularFoot(point, nearestLine);\n}\n\n/**\n * Convert the given bounds to a lines array containing all edges\n *\n * @param {Bounds|Point} bounds\n *\n * @return Array<Point>\n */\nexport function asEdges(bounds) {\n  return [\n    [ // top\n      {\n        x: bounds.x,\n        y: bounds.y\n      },\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y\n      }\n    ],\n    [ // right\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y\n      },\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y + (bounds.height || 0)\n      }\n    ],\n    [ // bottom\n      {\n        x: bounds.x,\n        y: bounds.y + (bounds.height || 0)\n      },\n      {\n        x: bounds.x + (bounds.width || 0),\n        y: bounds.y + (bounds.height || 0)\n      }\n    ],\n    [ // left\n      {\n        x: bounds.x,\n        y: bounds.y\n      },\n      {\n        x: bounds.x,\n        y: bounds.y + (bounds.height || 0)\n      }\n    ]\n  ];\n}\n\n/**\n * Returns the nearest line for a given point by distance\n * @param {Point} point\n * @param Array<Point> lines\n *\n * @return Array<Point>\n */\nfunction getNearestLine(point, lines) {\n\n  var distances = lines.map(function(l) {\n    return {\n      line: l,\n      distance: getDistancePointLine(point, l)\n    };\n  });\n\n  var sorted = sortBy(distances, 'distance');\n\n  return sorted[0].line;\n}\n","import { is } from '../../../util/ModelUtil';\n\nvar COLLAB_ERR_MSG = 'flow elements must be children of pools/participants',\n    PROCESS_ERR_MSG = 'participants cannot be pasted onto a non-empty process diagram';\n\n\nexport default function ModelingFeedback(eventBus, tooltips, translate) {\n\n  function showError(position, message, timeout) {\n    tooltips.add({\n      position: {\n        x: position.x + 5,\n        y: position.y + 5\n      },\n      type: 'error',\n      timeout: timeout || 2000,\n      html: '<div>' + message + '</div>'\n    });\n  }\n\n  eventBus.on([ 'shape.move.rejected', 'create.rejected' ], function(event) {\n    var context = event.context,\n        shape = context.shape,\n        target = context.target;\n\n    if (is(target, 'bpmn:Collaboration') && is(shape, 'bpmn:FlowNode')) {\n      showError(event, translate(COLLAB_ERR_MSG));\n    }\n  });\n\n  eventBus.on([ 'elements.paste.rejected' ], function(event) {\n    var context = event.context,\n        position = context.position,\n        target = context.target;\n\n    if (is(target, 'bpmn:Collaboration')) {\n      showError(position, translate(COLLAB_ERR_MSG));\n    }\n\n    if (is(target, 'bpmn:Process')) {\n      showError(position, translate(PROCESS_ERR_MSG), 3000);\n    }\n  });\n}\n\nModelingFeedback.$inject = [\n  'eventBus',\n  'tooltips',\n  'translate'\n];\n","import {\n  forEach,\n  find,\n  matchPattern\n} from 'min-dash';\n\nimport inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n\nexport default function ReplaceConnectionBehavior(eventBus, modeling, bpmnRules, injector) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var dragging = injector.get('dragging', false);\n\n  function fixConnection(connection) {\n\n    var source = connection.source,\n        target = connection.target,\n        parent = connection.parent;\n\n    // do not do anything if connection\n    // is already deleted (may happen due to other\n    // behaviors plugged-in before)\n    if (!parent) {\n      return;\n    }\n\n    var replacementType,\n        remove;\n\n    /**\n     * Check if incoming or outgoing connections\n     * can stay or could be substituted with an\n     * appropriate replacement.\n     *\n     * This holds true for SequenceFlow <> MessageFlow.\n     */\n\n    if (is(connection, 'bpmn:SequenceFlow')) {\n      if (!bpmnRules.canConnectSequenceFlow(source, target)) {\n        remove = true;\n      }\n\n      if (bpmnRules.canConnectMessageFlow(source, target)) {\n        replacementType = 'bpmn:MessageFlow';\n      }\n    }\n\n    // transform message flows into sequence flows, if possible\n\n    if (is(connection, 'bpmn:MessageFlow')) {\n\n      if (!bpmnRules.canConnectMessageFlow(source, target)) {\n        remove = true;\n      }\n\n      if (bpmnRules.canConnectSequenceFlow(source, target)) {\n        replacementType = 'bpmn:SequenceFlow';\n      }\n    }\n\n    if (is(connection, 'bpmn:Association') && !bpmnRules.canConnectAssociation(source, target)) {\n      remove = true;\n    }\n\n\n    // remove invalid connection,\n    // unless it has been removed already\n    if (remove) {\n      modeling.removeConnection(connection);\n    }\n\n    // replace SequenceFlow <> MessageFlow\n\n    if (replacementType) {\n      modeling.connect(source, target, {\n        type: replacementType,\n        waypoints: connection.waypoints.slice()\n      });\n    }\n  }\n\n  function replaceReconnectedConnection(event) {\n\n    var context = event.context,\n        connection = context.connection,\n        source = context.newSource || connection.source,\n        target = context.newTarget || connection.target,\n        allowed,\n        replacement;\n\n    allowed = bpmnRules.canConnect(source, target);\n\n    if (!allowed || allowed.type === connection.type) {\n      return;\n    }\n\n    replacement = modeling.connect(source, target, {\n      type: allowed.type,\n      waypoints: connection.waypoints.slice()\n    });\n\n    // remove old connection\n    modeling.removeConnection(connection);\n\n    // replace connection in context to reconnect end/start\n    context.connection = replacement;\n\n    if (dragging) {\n      cleanDraggingSelection(connection, replacement);\n    }\n  }\n\n  // monkey-patch selection saved in dragging in order to re-select it when operation is finished\n  function cleanDraggingSelection(oldConnection, newConnection) {\n    var context = dragging.context(),\n        previousSelection = context && context.payload.previousSelection,\n        index;\n\n    // do nothing if not dragging or no selection was present\n    if (!previousSelection || !previousSelection.length) {\n      return;\n    }\n\n    index = previousSelection.indexOf(oldConnection);\n\n    if (index === -1) {\n      return;\n    }\n\n    previousSelection.splice(index, 1, newConnection);\n  }\n\n  // lifecycle hooks\n\n  this.postExecuted('elements.move', function(context) {\n\n    var closure = context.closure,\n        allConnections = closure.allConnections;\n\n    forEach(allConnections, fixConnection);\n  }, true);\n\n  this.preExecute('connection.reconnect', replaceReconnectedConnection);\n\n  this.postExecuted('element.updateProperties', function(event) {\n    var context = event.context,\n        properties = context.properties,\n        element = context.element,\n        businessObject = element.businessObject,\n        connection;\n\n    // remove condition on change to default\n    if (properties.default) {\n      connection = find(\n        element.outgoing,\n        matchPattern({ id: element.businessObject.default.id })\n      );\n\n      if (connection) {\n        modeling.updateProperties(connection, { conditionExpression: undefined });\n      }\n    }\n\n    // remove default from source on change to conditional\n    if (properties.conditionExpression && businessObject.sourceRef.default === businessObject) {\n      modeling.updateProperties(element.source, { default: undefined });\n    }\n  });\n}\n\ninherits(ReplaceConnectionBehavior, CommandInterceptor);\n\nReplaceConnectionBehavior.$inject = [\n  'eventBus',\n  'modeling',\n  'bpmnRules',\n  'injector'\n];\n","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n\n/**\n * BPMN specific remove behavior\n */\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function(context) {\n\n    var shape = context.shape,\n        parent = shape.parent;\n\n    // activate the behavior if the shape to be removed\n    // is a participant\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n\n  this.postExecute('shape.delete', function(context) {\n\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n\n      // replace empty collaboration with process diagram\n      modeling.makeProcess();\n    }\n  }, true);\n\n}\n\nRemoveParticipantBehavior.$inject = [ 'eventBus', 'modeling' ];\n\ninherits(RemoveParticipantBehavior, CommandInterceptor);","import inherits from 'inherits';\n\nimport { forEach } from 'min-dash';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { isEventSubProcess } from '../../../util/DiUtil';\n\n\n/**\n * BPMN-specific replace behavior.\n */\nexport default function ReplaceElementBehaviour(\n    bpmnReplace,\n    bpmnRules,\n    elementRegistry,\n    injector,\n    modeling,\n    selection\n) {\n  injector.invoke(CommandInterceptor, this);\n\n  this._bpmnReplace = bpmnReplace;\n  this._elementRegistry = elementRegistry;\n  this._selection = selection;\n\n  // replace elements on move\n  this.postExecuted([ 'elements.move' ], 500, function(event) {\n    var context = event.context,\n        target = context.newParent,\n        newHost = context.newHost,\n        elements = [];\n\n    forEach(context.closure.topLevel, function(topLevelElements) {\n      if (isEventSubProcess(topLevelElements)) {\n        elements = elements.concat(topLevelElements.children);\n      } else {\n        elements = elements.concat(topLevelElements);\n      }\n    });\n\n    // set target to host if attaching\n    if (elements.length === 1 && newHost) {\n      target = newHost;\n    }\n\n    var canReplace = bpmnRules.canReplace(elements, target);\n\n    if (canReplace) {\n      this.replaceElements(elements, canReplace.replacements, newHost);\n    }\n  }, this);\n\n  // update attachments on host replace\n  this.postExecute([ 'shape.replace' ], 1500, function(e) {\n    var context = e.context,\n        oldShape = context.oldShape,\n        newShape = context.newShape,\n        attachers = oldShape.attachers,\n        canReplace;\n\n    if (attachers && attachers.length) {\n      canReplace = bpmnRules.canReplace(attachers, newShape);\n\n      this.replaceElements(attachers, canReplace.replacements);\n    }\n\n  }, this);\n\n  // keep ID on shape replace\n  this.postExecuted([ 'shape.replace' ], 1500, function(e) {\n    var context = e.context,\n        oldShape = context.oldShape,\n        newShape = context.newShape;\n\n    modeling.unclaimId(oldShape.businessObject.id, oldShape.businessObject);\n    modeling.updateProperties(newShape, { id: oldShape.id });\n  });\n}\n\ninherits(ReplaceElementBehaviour, CommandInterceptor);\n\nReplaceElementBehaviour.prototype.replaceElements = function(elements, newElements) {\n  var elementRegistry = this._elementRegistry,\n      bpmnReplace = this._bpmnReplace,\n      selection = this._selection;\n\n  forEach(newElements, function(replacement) {\n    var newElement = {\n      type: replacement.newElementType\n    };\n\n    var oldElement = elementRegistry.get(replacement.oldElementId);\n\n    var idx = elements.indexOf(oldElement);\n\n    elements[idx] = bpmnReplace.replaceElement(oldElement, newElement, { select: false });\n  });\n\n  if (newElements) {\n    selection.select(elements);\n  }\n};\n\nReplaceElementBehaviour.$inject = [\n  'bpmnReplace',\n  'bpmnRules',\n  'elementRegistry',\n  'injector',\n  'modeling',\n  'selection'\n];\n","import { is } from '../../../../util/ModelUtil';\r\n\r\nimport {\r\n  asTRBL\r\n} from 'diagram-js/lib/layout/LayoutUtil';\r\n\r\nimport {\r\n  collectLanes,\r\n  getLanesRoot\r\n} from '../../../modeling/util/LaneUtil';\r\n\r\nvar abs = Math.abs,\r\n    min = Math.min,\r\n    max = Math.max;\r\n\r\n\r\nfunction addToTrbl(trbl, attr, value, choice) {\r\n  var current = trbl[attr];\r\n\r\n  // make sure to set the value if it does not exist\r\n  // or apply the correct value by comparing against\r\n  // choice(value, currentValue)\r\n  trbl[attr] = current === undefined ? value : choice(value, current);\r\n}\r\n\r\nfunction addMin(trbl, attr, value) {\r\n  return addToTrbl(trbl, attr, value, min);\r\n}\r\n\r\nfunction addMax(trbl, attr, value) {\r\n  return addToTrbl(trbl, attr, value, max);\r\n}\r\n\r\nvar LANE_MIN_HEIGHT = 60,\r\n    LANE_MIN_WIDTH = 300,\r\n    LANE_RIGHT_PADDING = 20,\r\n    LANE_LEFT_PADDING = 50,\r\n    LANE_TOP_PADDING = 20,\r\n    LANE_BOTTOM_PADDING = 20;\r\n\r\n\r\nexport function getParticipantResizeConstraints(laneShape, resizeDirection, balanced) {\r\n  var lanesRoot = getLanesRoot(laneShape);\r\n\r\n  var isFirst = true,\r\n      isLast = true;\r\n\r\n  // max top/bottom size for lanes\r\n  var allLanes = collectLanes(lanesRoot, [ lanesRoot ]);\r\n\r\n  var laneTrbl = asTRBL(laneShape);\r\n\r\n  var maxTrbl = {},\r\n      minTrbl = {};\r\n\r\n  if (/e/.test(resizeDirection)) {\r\n    minTrbl.right = laneTrbl.left + LANE_MIN_WIDTH;\r\n  } else\r\n  if (/w/.test(resizeDirection)) {\r\n    minTrbl.left = laneTrbl.right - LANE_MIN_WIDTH;\r\n  }\r\n\r\n  allLanes.forEach(function(other) {\r\n\r\n    var otherTrbl = asTRBL(other);\r\n\r\n    if (/n/.test(resizeDirection)) {\r\n\r\n      if (otherTrbl.top < (laneTrbl.top - 10)) {\r\n        isFirst = false;\r\n      }\r\n\r\n      // max top size (based on next element)\r\n      if (balanced && abs(laneTrbl.top - otherTrbl.bottom) < 10) {\r\n        addMax(maxTrbl, 'top', otherTrbl.top + LANE_MIN_HEIGHT);\r\n      }\r\n\r\n      // min top size (based on self or nested element)\r\n      if (abs(laneTrbl.top - otherTrbl.top) < 5) {\r\n        addMin(minTrbl, 'top', otherTrbl.bottom - LANE_MIN_HEIGHT);\r\n      }\r\n    }\r\n\r\n    if (/s/.test(resizeDirection)) {\r\n\r\n      if (otherTrbl.bottom > (laneTrbl.bottom + 10)) {\r\n        isLast = false;\r\n      }\r\n\r\n      // max bottom size (based on previous element)\r\n      if (balanced && abs(laneTrbl.bottom - otherTrbl.top) < 10) {\r\n        addMin(maxTrbl, 'bottom', otherTrbl.bottom - LANE_MIN_HEIGHT);\r\n      }\r\n\r\n      // min bottom size (based on self or nested element)\r\n      if (abs(laneTrbl.bottom - otherTrbl.bottom) < 5) {\r\n        addMax(minTrbl, 'bottom', otherTrbl.top + LANE_MIN_HEIGHT);\r\n      }\r\n    }\r\n  });\r\n\r\n  // max top/bottom/left/right size based on flow nodes\r\n  var flowElements = lanesRoot.children.filter(function(s) {\r\n    return !s.hidden && !s.waypoints && (is(s, 'bpmn:FlowElement') || is(s, 'bpmn:Artifact'));\r\n  });\r\n\r\n  flowElements.forEach(function(flowElement) {\r\n\r\n    var flowElementTrbl = asTRBL(flowElement);\r\n\r\n    if (isFirst && /n/.test(resizeDirection)) {\r\n      addMin(minTrbl, 'top', flowElementTrbl.top - LANE_TOP_PADDING);\r\n    }\r\n\r\n    if (/e/.test(resizeDirection)) {\r\n      addMax(minTrbl, 'right', flowElementTrbl.right + LANE_RIGHT_PADDING);\r\n    }\r\n\r\n    if (isLast && /s/.test(resizeDirection)) {\r\n      addMax(minTrbl, 'bottom', flowElementTrbl.bottom + LANE_BOTTOM_PADDING);\r\n    }\r\n\r\n    if (/w/.test(resizeDirection)) {\r\n      addMin(minTrbl, 'left', flowElementTrbl.left - LANE_LEFT_PADDING);\r\n    }\r\n  });\r\n\r\n  return {\r\n    min: minTrbl,\r\n    max: maxTrbl\r\n  };\r\n}","import { is } from '../../../util/ModelUtil';\r\n\r\nimport { isExpanded } from '../../../util/DiUtil';\r\n\r\nimport { getParticipantResizeConstraints } from './util/ResizeUtil';\r\n\r\nvar HIGH_PRIORITY = 1500;\r\n\r\nexport var PARTICIPANT_MIN_DIMENSIONS = { width: 300, height: 150 };\r\n\r\nexport var SUB_PROCESS_MIN_DIMENSIONS = { width: 140, height: 120 };\r\n\r\nexport var TEXT_ANNOTATION_MIN_DIMENSIONS = { width: 50, height: 30 };\r\n\r\n\r\n/**\r\n * Set minimum bounds/resize constraints on resize.\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nexport default function ResizeBehavior(eventBus) {\r\n  eventBus.on('resize.start', HIGH_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        direction = context.direction,\r\n        balanced = context.balanced;\r\n\r\n    if (is(shape, 'bpmn:Lane') || is(shape, 'bpmn:Participant')) {\r\n      context.resizeConstraints = getParticipantResizeConstraints(shape, direction, balanced);\r\n    }\r\n\r\n    if (is(shape, 'bpmn:Participant')) {\r\n      context.minDimensions = PARTICIPANT_MIN_DIMENSIONS;\r\n    }\r\n\r\n    if (is(shape, 'bpmn:SubProcess') && isExpanded(shape)) {\r\n      context.minDimensions = SUB_PROCESS_MIN_DIMENSIONS;\r\n    }\r\n\r\n    if (is(shape, 'bpmn:TextAnnotation')) {\r\n      context.minDimensions = TEXT_ANNOTATION_MIN_DIMENSIONS;\r\n    }\r\n  });\r\n}\r\n\r\nResizeBehavior.$inject = [ 'eventBus' ];","import { is } from '../../../util/ModelUtil';\n\nimport {\n  roundBounds\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  hasPrimaryModifier\n} from 'diagram-js/lib/util/Mouse';\n\nvar SLIGHTLY_HIGHER_PRIORITY = 1001;\n\n\n/**\n * Invoke {@link Modeling#resizeLane} instead of\n * {@link Modeling#resizeShape} when resizing a Lane\n * or Participant shape.\n */\nexport default function ResizeLaneBehavior(eventBus, modeling) {\n\n  eventBus.on('resize.start', SLIGHTLY_HIGHER_PRIORITY + 500, function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Lane') || is(shape, 'bpmn:Participant')) {\n\n      // should we resize the opposite lane(s) in\n      // order to compensate for the resize operation?\n      context.balanced = !hasPrimaryModifier(event);\n    }\n  });\n\n  /**\n   * Intercept resize end and call resize lane function instead.\n   */\n  eventBus.on('resize.end', SLIGHTLY_HIGHER_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        canExecute = context.canExecute,\n        newBounds = context.newBounds;\n\n    if (is(shape, 'bpmn:Lane') || is(shape, 'bpmn:Participant')) {\n\n      if (canExecute) {\n\n        // ensure we have actual pixel values for new bounds\n        // (important when zoom level was > 1 during move)\n        newBounds = roundBounds(newBounds);\n\n        // perform the actual resize\n        modeling.resizeLane(shape, newBounds, context.balanced);\n      }\n\n      // stop propagation\n      return false;\n    }\n  });\n}\n\nResizeLaneBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n","import inherits from 'inherits';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport lineIntersect from './util/LineIntersect';\n\n\nexport default function RemoveElementBehavior(eventBus, bpmnRules, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Combine sequence flows when deleting an element\n   * if there is one incoming and one outgoing\n   * sequence flow\n   */\n  this.preExecute('shape.delete', function(e) {\n\n    var shape = e.context.shape;\n\n    // only handle [a] -> [shape] -> [b] patterns\n    if (shape.incoming.length !== 1 || shape.outgoing.length !== 1) {\n      return;\n    }\n\n    var inConnection = shape.incoming[0],\n        outConnection = shape.outgoing[0];\n\n    // only handle sequence flows\n    if (!is(inConnection, 'bpmn:SequenceFlow') || !is(outConnection, 'bpmn:SequenceFlow')) {\n      return;\n    }\n\n    if (bpmnRules.canConnect(inConnection.source, outConnection.target, inConnection)) {\n\n      // compute new, combined waypoints\n      var newWaypoints = getNewWaypoints(inConnection.waypoints, outConnection.waypoints);\n\n      modeling.reconnectEnd(inConnection, outConnection.target, newWaypoints);\n    }\n  });\n\n}\n\ninherits(RemoveElementBehavior, CommandInterceptor);\n\nRemoveElementBehavior.$inject = [\n  'eventBus',\n  'bpmnRules',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction getDocking(point) {\n  return point.original || point;\n}\n\n\nfunction getNewWaypoints(inWaypoints, outWaypoints) {\n\n  var intersection = lineIntersect(\n    getDocking(inWaypoints[inWaypoints.length - 2]),\n    getDocking(inWaypoints[inWaypoints.length - 1]),\n    getDocking(outWaypoints[1]),\n    getDocking(outWaypoints[0]));\n\n  if (intersection) {\n    return [].concat(\n      inWaypoints.slice(0, inWaypoints.length - 1),\n      [ intersection ],\n      outWaypoints.slice(1));\n  } else {\n    return [\n      getDocking(inWaypoints[0]),\n      getDocking(outWaypoints[outWaypoints.length - 1])\n    ];\n  }\n}","import { forEach } from 'min-dash';\r\n\r\nimport { is } from '../../../util/ModelUtil';\r\n\r\nimport { isExpanded } from '../../../util/DiUtil';\r\n\r\nimport {\r\n  PARTICIPANT_MIN_DIMENSIONS,\r\n  SUB_PROCESS_MIN_DIMENSIONS,\r\n  TEXT_ANNOTATION_MIN_DIMENSIONS\r\n} from './ResizeBehavior';\r\n\r\nexport default function SpaceToolBehavior(eventBus) {\r\n  eventBus.on('spaceTool.getMinDimensions', function(context) {\r\n    var shapes = context.shapes,\r\n        minDimensions = {};\r\n\r\n    forEach(shapes, function(shape) {\r\n      var id = shape.id;\r\n\r\n      if (is(shape, 'bpmn:Participant')) {\r\n        minDimensions[ id ] = PARTICIPANT_MIN_DIMENSIONS;\r\n      }\r\n\r\n      if (is(shape, 'bpmn:SubProcess') && isExpanded(shape)) {\r\n        minDimensions[ id ] = SUB_PROCESS_MIN_DIMENSIONS;\r\n      }\r\n\r\n      if (is(shape, 'bpmn:TextAnnotation')) {\r\n        minDimensions[ id ] = TEXT_ANNOTATION_MIN_DIMENSIONS;\r\n      }\r\n    });\r\n\r\n    return minDimensions;\r\n  });\r\n}\r\n\r\nSpaceToolBehavior.$inject = [ 'eventBus' ];\r\n","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\nimport { isExpanded } from '../../../util/DiUtil.js';\n\n/**\n * Add start event replacing element with expanded sub process.\n *\n * @param {Injector} injector\n * @param {Modeling} modeling\n */\nexport default function SubProcessStartEventBehavior(injector, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.postExecuted('shape.replace', function(event) {\n    var oldShape = event.context.oldShape,\n        newShape = event.context.newShape;\n\n    if (\n      !is(newShape, 'bpmn:SubProcess') ||\n      !is(oldShape, 'bpmn:Task') ||\n      !isExpanded(newShape)\n    ) {\n      return;\n    }\n\n    var position = getStartEventPosition(newShape);\n\n    modeling.createShape({ type: 'bpmn:StartEvent' }, position, newShape);\n  });\n}\n\nSubProcessStartEventBehavior.$inject = [\n  'injector',\n  'modeling'\n];\n\ninherits(SubProcessStartEventBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getStartEventPosition(shape) {\n  return {\n    x: shape.x + shape.width / 6,\n    y: shape.y + shape.height / 2\n  };\n}\n","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\nimport {\n  computeChildrenBBox\n} from 'diagram-js/lib/features/resize/ResizeUtil';\n\n\nvar LOW_PRIORITY = 500;\n\n\nexport default function ToggleElementCollapseBehaviour(\n    eventBus, elementFactory, modeling,\n    resize) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  function hideEmptyLabels(children) {\n    if (children.length) {\n      children.forEach(function(child) {\n        if (child.type === 'label' && !child.businessObject.name) {\n          child.hidden = true;\n        }\n      });\n    }\n  }\n\n  function expandedBounds(shape, defaultSize) {\n    var children = shape.children,\n        newBounds = defaultSize,\n        visibleElements,\n        visibleBBox;\n\n    visibleElements = filterVisible(children).concat([ shape ]);\n\n    visibleBBox = computeChildrenBBox(visibleElements);\n\n    if (visibleBBox) {\n\n      // center to visibleBBox with max(defaultSize, childrenBounds)\n      newBounds.width = Math.max(visibleBBox.width, newBounds.width);\n      newBounds.height = Math.max(visibleBBox.height, newBounds.height);\n\n      newBounds.x = visibleBBox.x + (visibleBBox.width - newBounds.width) / 2;\n      newBounds.y = visibleBBox.y + (visibleBBox.height - newBounds.height) / 2;\n    } else {\n\n      // center to collapsed shape with defaultSize\n      newBounds.x = shape.x + (shape.width - newBounds.width) / 2;\n      newBounds.y = shape.y + (shape.height - newBounds.height) / 2;\n    }\n\n    return newBounds;\n  }\n\n  function collapsedBounds(shape, defaultSize) {\n\n    return {\n      x: shape.x + (shape.width - defaultSize.width) / 2,\n      y: shape.y + (shape.height - defaultSize.height) / 2,\n      width: defaultSize.width,\n      height: defaultSize.height\n    };\n  }\n\n  this.executed([ 'shape.toggleCollapse' ], LOW_PRIORITY, function(e) {\n\n    var context = e.context,\n        shape = context.shape;\n\n    if (!is(shape, 'bpmn:SubProcess')) {\n      return;\n    }\n\n    if (!shape.collapsed) {\n\n      // all children got made visible through djs, hide empty labels\n      hideEmptyLabels(shape.children);\n\n      // remove collapsed marker\n      getBusinessObject(shape).di.isExpanded = true;\n    } else {\n\n      // place collapsed marker\n      getBusinessObject(shape).di.isExpanded = false;\n    }\n  });\n\n  this.reverted([ 'shape.toggleCollapse' ], LOW_PRIORITY, function(e) {\n\n    var context = e.context;\n    var shape = context.shape;\n\n\n    // revert removing/placing collapsed marker\n    if (!shape.collapsed) {\n      getBusinessObject(shape).di.isExpanded = true;\n\n    } else {\n      getBusinessObject(shape).di.isExpanded = false;\n    }\n  });\n\n  this.postExecuted([ 'shape.toggleCollapse' ], LOW_PRIORITY, function(e) {\n    var shape = e.context.shape,\n        defaultSize = elementFactory._getDefaultSize(shape),\n        newBounds;\n\n    if (shape.collapsed) {\n\n      // resize to default size of collapsed shapes\n      newBounds = collapsedBounds(shape, defaultSize);\n    } else {\n\n      // resize to bounds of max(visible children, defaultSize)\n      newBounds = expandedBounds(shape, defaultSize);\n    }\n\n    modeling.resizeShape(shape, newBounds, null, {\n      autoResize: shape.collapsed ? false : 'nwse'\n    });\n  });\n\n}\n\n\ninherits(ToggleElementCollapseBehaviour, CommandInterceptor);\n\nToggleElementCollapseBehaviour.$inject = [\n  'eventBus',\n  'elementFactory',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction filterVisible(elements) {\n  return elements.filter(function(e) {\n    return !e.hidden;\n  });\n}","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\nimport { isExpanded } from '../../../util/DiUtil';\nimport { isLabel } from '../../../util/LabelUtil';\n\n\n/**\n * Unclaims model IDs on element deletion.\n *\n * @param {Canvas} canvas\n * @param {Injector} injector\n * @param {Moddle} moddle\n * @param {Modeling} modeling\n */\nexport default function UnclaimIdBehavior(canvas, injector, moddle, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.preExecute('shape.delete', function(event) {\n    var context = event.context,\n        shape = context.shape,\n        shapeBo = shape.businessObject;\n\n    if (isLabel(shape)) {\n      return;\n    }\n\n    if (is(shape, 'bpmn:Participant') && isExpanded(shape)) {\n      moddle.ids.unclaim(shapeBo.processRef.id);\n    }\n\n    modeling.unclaimId(shapeBo.id, shapeBo);\n  });\n\n\n  this.preExecute('connection.delete', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        connectionBo = connection.businessObject;\n\n    modeling.unclaimId(connectionBo.id, connectionBo);\n  });\n\n  this.preExecute('canvas.updateRoot', function() {\n    var rootElement = canvas.getRootElement(),\n        rootElementBo = rootElement.businessObject;\n\n    moddle.ids.unclaim(rootElementBo.id);\n  });\n}\n\ninherits(UnclaimIdBehavior, CommandInterceptor);\n\nUnclaimIdBehavior.$inject = [ 'canvas', 'injector', 'moddle', 'modeling' ];","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\nvar LOW_PRIORITY = 500,\n    HIGH_PRIORITY = 5000;\n\n\n/**\n * BPMN specific delete lane behavior\n */\nexport default function UpdateFlowNodeRefsBehavior(eventBus, modeling, translate) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Ok, this is it:\n   *\n   * We have to update the Lane#flowNodeRefs _and_\n   * FlowNode#lanes with every FlowNode move/resize and\n   * Lane move/resize.\n   *\n   * We want to group that stuff to recompute containments\n   * as efficient as possible.\n   *\n   * Yea!\n   */\n\n  // the update context\n  var context;\n\n\n  function initContext() {\n    context = context || new UpdateContext();\n    context.enter();\n\n    return context;\n  }\n\n  function getContext() {\n    if (!context) {\n      throw new Error(translate('out of bounds release'));\n    }\n\n    return context;\n  }\n\n  function releaseContext() {\n\n    if (!context) {\n      throw new Error(translate('out of bounds release'));\n    }\n\n    var triggerUpdate = context.leave();\n\n    if (triggerUpdate) {\n      modeling.updateLaneRefs(context.flowNodes, context.lanes);\n\n      context = null;\n    }\n\n    return triggerUpdate;\n  }\n\n\n  var laneRefUpdateEvents = [\n    'spaceTool',\n    'lane.add',\n    'lane.resize',\n    'lane.split',\n    'elements.create',\n    'elements.delete',\n    'elements.move',\n    'shape.create',\n    'shape.delete',\n    'shape.move',\n    'shape.resize'\n  ];\n\n\n  // listen to a lot of stuff to group lane updates\n\n  this.preExecute(laneRefUpdateEvents, HIGH_PRIORITY, function(event) {\n    initContext();\n  });\n\n  this.postExecuted(laneRefUpdateEvents, LOW_PRIORITY, function(event) {\n    releaseContext();\n  });\n\n\n  // Mark flow nodes + lanes that need an update\n\n  this.preExecute([\n    'shape.create',\n    'shape.move',\n    'shape.delete',\n    'shape.resize'\n  ], function(event) {\n\n    var context = event.context,\n        shape = context.shape;\n\n    var updateContext = getContext();\n\n    // no need to update labels\n    if (shape.labelTarget) {\n      return;\n    }\n\n    if (is(shape, 'bpmn:Lane')) {\n      updateContext.addLane(shape);\n    }\n\n    if (is(shape, 'bpmn:FlowNode')) {\n      updateContext.addFlowNode(shape);\n    }\n  });\n}\n\nUpdateFlowNodeRefsBehavior.$inject = [\n  'eventBus',\n  'modeling' ,\n  'translate'\n];\n\ninherits(UpdateFlowNodeRefsBehavior, CommandInterceptor);\n\n\nfunction UpdateContext() {\n\n  this.flowNodes = [];\n  this.lanes = [];\n\n  this.counter = 0;\n\n  this.addLane = function(lane) {\n    this.lanes.push(lane);\n  };\n\n  this.addFlowNode = function(flowNode) {\n    this.flowNodes.push(flowNode);\n  };\n\n  this.enter = function() {\n    this.counter++;\n  };\n\n  this.leave = function() {\n    this.counter--;\n\n    return !this.counter;\n  };\n}","import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\n\n/**\n * A behavior that unsets the Default property of\n * sequence flow source on element delete, if the\n * removed element is the Gateway or Task's default flow.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function DeleteSequenceFlowBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  this.preExecute('connection.delete', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source;\n\n    if (isDefaultFlow(connection, source)) {\n      modeling.updateProperties(source, {\n        'default': null\n      });\n    }\n  });\n}\n\ninherits(DeleteSequenceFlowBehavior, CommandInterceptor);\n\nDeleteSequenceFlowBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction isDefaultFlow(connection, source) {\n\n  if (!is(connection, 'bpmn:SequenceFlow')) {\n    return false;\n  }\n\n  var sourceBo = getBusinessObject(source),\n      sequenceFlow = getBusinessObject(connection);\n\n  return sourceBo.get('default') === sequenceFlow;\n}","import AdaptiveLabelPositioningBehavior from './AdaptiveLabelPositioningBehavior';\nimport AppendBehavior from './AppendBehavior';\nimport AssociationBehavior from './AssociationBehavior';\nimport AttachEventBehavior from './AttachEventBehavior';\nimport BoundaryEventBehavior from './BoundaryEventBehavior';\nimport RootElementReferenceBehavior from './RootElementReferenceBehavior';\nimport CreateBehavior from './CreateBehavior';\nimport FixHoverBehavior from './FixHoverBehavior';\nimport CreateDataObjectBehavior from './CreateDataObjectBehavior';\nimport CreateParticipantBehavior from './CreateParticipantBehavior';\nimport DataInputAssociationBehavior from './DataInputAssociationBehavior';\nimport DataStoreBehavior from './DataStoreBehavior';\nimport DeleteLaneBehavior from './DeleteLaneBehavior';\nimport DetachEventBehavior from './DetachEventBehavior';\nimport DropOnFlowBehavior from './DropOnFlowBehavior';\nimport EventBasedGatewayBehavior from './EventBasedGatewayBehavior';\nimport GroupBehavior from './GroupBehavior';\nimport ImportDockingFix from './ImportDockingFix';\nimport IsHorizontalFix from './IsHorizontalFix';\nimport LabelBehavior from './LabelBehavior';\nimport ModelingFeedback from './ModelingFeedback';\nimport ReplaceConnectionBehavior from './ReplaceConnectionBehavior';\nimport RemoveParticipantBehavior from './RemoveParticipantBehavior';\nimport ReplaceElementBehaviour from './ReplaceElementBehaviour';\nimport ResizeBehavior from './ResizeBehavior';\nimport ResizeLaneBehavior from './ResizeLaneBehavior';\nimport RemoveElementBehavior from './RemoveElementBehavior';\nimport SpaceToolBehavior from './SpaceToolBehavior';\nimport SubProcessStartEventBehavior from './SubProcessStartEventBehavior';\nimport ToggleElementCollapseBehaviour from './ToggleElementCollapseBehaviour';\nimport UnclaimIdBehavior from './UnclaimIdBehavior';\nimport UpdateFlowNodeRefsBehavior from './UpdateFlowNodeRefsBehavior';\nimport UnsetDefaultFlowBehavior from './UnsetDefaultFlowBehavior';\n\nexport default {\n  __init__: [\n    'adaptiveLabelPositioningBehavior',\n    'appendBehavior',\n    'associationBehavior',\n    'attachEventBehavior',\n    'boundaryEventBehavior',\n    'rootElementReferenceBehavior',\n    'createBehavior',\n    'fixHoverBehavior',\n    'createDataObjectBehavior',\n    'createParticipantBehavior',\n    'dataStoreBehavior',\n    'dataInputAssociationBehavior',\n    'deleteLaneBehavior',\n    'detachEventBehavior',\n    'dropOnFlowBehavior',\n    'eventBasedGatewayBehavior',\n    'groupBehavior',\n    'importDockingFix',\n    'isHorizontalFix',\n    'labelBehavior',\n    'modelingFeedback',\n    'removeElementBehavior',\n    'removeParticipantBehavior',\n    'replaceConnectionBehavior',\n    'replaceElementBehaviour',\n    'resizeBehavior',\n    'resizeLaneBehavior',\n    'toggleElementCollapseBehaviour',\n    'spaceToolBehavior',\n    'subProcessStartEventBehavior',\n    'unclaimIdBehavior',\n    'unsetDefaultFlowBehavior',\n    'updateFlowNodeRefsBehavior'\n  ],\n  adaptiveLabelPositioningBehavior: [ 'type', AdaptiveLabelPositioningBehavior ],\n  appendBehavior: [ 'type', AppendBehavior ],\n  associationBehavior: [ 'type', AssociationBehavior ],\n  attachEventBehavior: [ 'type', AttachEventBehavior ],\n  boundaryEventBehavior: [ 'type', BoundaryEventBehavior ],\n  rootElementReferenceBehavior: [ 'type', RootElementReferenceBehavior ],\n  createBehavior: [ 'type', CreateBehavior ],\n  fixHoverBehavior: [ 'type', FixHoverBehavior ],\n  createDataObjectBehavior: [ 'type', CreateDataObjectBehavior ],\n  createParticipantBehavior: [ 'type', CreateParticipantBehavior ],\n  dataInputAssociationBehavior: [ 'type', DataInputAssociationBehavior ],\n  dataStoreBehavior: [ 'type', DataStoreBehavior ],\n  deleteLaneBehavior: [ 'type', DeleteLaneBehavior ],\n  detachEventBehavior: [ 'type', DetachEventBehavior ],\n  dropOnFlowBehavior: [ 'type', DropOnFlowBehavior ],\n  eventBasedGatewayBehavior: [ 'type', EventBasedGatewayBehavior ],\n  groupBehavior: [ 'type', GroupBehavior ],\n  importDockingFix: [ 'type', ImportDockingFix ],\n  isHorizontalFix: [ 'type', IsHorizontalFix ],\n  labelBehavior: [ 'type', LabelBehavior ],\n  modelingFeedback: [ 'type', ModelingFeedback ],\n  replaceConnectionBehavior: [ 'type', ReplaceConnectionBehavior ],\n  removeParticipantBehavior: [ 'type', RemoveParticipantBehavior ],\n  replaceElementBehaviour: [ 'type', ReplaceElementBehaviour ],\n  resizeBehavior: [ 'type', ResizeBehavior ],\n  resizeLaneBehavior: [ 'type', ResizeLaneBehavior ],\n  removeElementBehavior: [ 'type', RemoveElementBehavior ],\n  toggleElementCollapseBehaviour : [ 'type', ToggleElementCollapseBehaviour ],\n  spaceToolBehavior: [ 'type', SpaceToolBehavior ],\n  subProcessStartEventBehavior: [ 'type', SubProcessStartEventBehavior ],\n  unclaimIdBehavior: [ 'type', UnclaimIdBehavior ],\n  updateFlowNodeRefsBehavior: [ 'type', UpdateFlowNodeRefsBehavior ],\n  unsetDefaultFlowBehavior: [ 'type', UnsetDefaultFlowBehavior ]\n};\n","import { getOrientation } from 'diagram-js/lib/layout/LayoutUtil';\r\n\r\nexport function getBoundaryAttachment(position, targetBounds) {\r\n\r\n  var orientation = getOrientation(position, targetBounds, -15);\r\n\r\n  if (orientation !== 'intersect') {\r\n    return orientation;\r\n  } else {\r\n    return null;\r\n  }\r\n}","import {\n  every,\n  find,\n  forEach,\n  some\n} from 'min-dash';\n\nimport inherits from 'inherits';\n\nimport {\n  is,\n  getBusinessObject\n} from '../../util/ModelUtil';\n\nimport {\n  getParent,\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  isLabel\n} from '../../util/LabelUtil';\n\nimport {\n  isExpanded,\n  isEventSubProcess,\n  isInterrupting,\n  hasErrorEventDefinition,\n  hasEscalationEventDefinition,\n  hasCompensateEventDefinition\n} from '../../util/DiUtil';\n\nimport RuleProvider from 'diagram-js/lib/features/rules/RuleProvider';\n\nimport {\n  getBoundaryAttachment as isBoundaryAttachment\n} from '../snapping/BpmnSnappingUtil';\n\n\n/**\n * BPMN specific modeling rule\n */\nexport default function BpmnRules(eventBus) {\n  RuleProvider.call(this, eventBus);\n}\n\ninherits(BpmnRules, RuleProvider);\n\nBpmnRules.$inject = [ 'eventBus' ];\n\nBpmnRules.prototype.init = function() {\n\n  this.addRule('connection.start', function(context) {\n    var source = context.source;\n\n    return canStartConnection(source);\n  });\n\n  this.addRule('connection.create', function(context) {\n    var source = context.source,\n        target = context.target,\n        hints = context.hints || {},\n        targetParent = hints.targetParent,\n        targetAttach = hints.targetAttach;\n\n    // don't allow incoming connections on\n    // newly created boundary events\n    // to boundary events\n    if (targetAttach) {\n      return false;\n    }\n\n    // temporarily set target parent for scoping\n    // checks to work\n    if (targetParent) {\n      target.parent = targetParent;\n    }\n\n    try {\n      return canConnect(source, target);\n    } finally {\n\n      // unset temporary target parent\n      if (targetParent) {\n        target.parent = null;\n      }\n    }\n  });\n\n  this.addRule('connection.reconnect', function(context) {\n\n    var connection = context.connection,\n        source = context.source,\n        target = context.target;\n\n    return canConnect(source, target, connection);\n  });\n\n  this.addRule('connection.updateWaypoints', function(context) {\n    return {\n      type: context.connection.type\n    };\n  });\n\n  this.addRule('shape.resize', function(context) {\n\n    var shape = context.shape,\n        newBounds = context.newBounds;\n\n    return canResize(shape, newBounds);\n  });\n\n  this.addRule('elements.create', function(context) {\n    var elements = context.elements,\n        position = context.position,\n        target = context.target;\n\n    return every(elements, function(element) {\n      if (isConnection(element)) {\n        return canConnect(element.source, element.target, element);\n      }\n\n      if (element.host) {\n        return canAttach(element, element.host, null, position);\n      }\n\n      return canCreate(element, target, null, position);\n    });\n  });\n\n  this.addRule('elements.move', function(context) {\n\n    var target = context.target,\n        shapes = context.shapes,\n        position = context.position;\n\n    return canAttach(shapes, target, null, position) ||\n           canReplace(shapes, target, position) ||\n           canMove(shapes, target, position) ||\n           canInsert(shapes, target, position);\n  });\n\n  this.addRule('shape.create', function(context) {\n    return canCreate(\n      context.shape,\n      context.target,\n      context.source,\n      context.position\n    );\n  });\n\n  this.addRule('shape.attach', function(context) {\n\n    return canAttach(\n      context.shape,\n      context.target,\n      null,\n      context.position\n    );\n  });\n\n  this.addRule('element.copy', function(context) {\n    var element = context.element,\n        elements = context.elements;\n\n    return canCopy(elements, element);\n  });\n};\n\nBpmnRules.prototype.canConnectMessageFlow = canConnectMessageFlow;\n\nBpmnRules.prototype.canConnectSequenceFlow = canConnectSequenceFlow;\n\nBpmnRules.prototype.canConnectDataAssociation = canConnectDataAssociation;\n\nBpmnRules.prototype.canConnectAssociation = canConnectAssociation;\n\nBpmnRules.prototype.canMove = canMove;\n\nBpmnRules.prototype.canAttach = canAttach;\n\nBpmnRules.prototype.canReplace = canReplace;\n\nBpmnRules.prototype.canDrop = canDrop;\n\nBpmnRules.prototype.canInsert = canInsert;\n\nBpmnRules.prototype.canCreate = canCreate;\n\nBpmnRules.prototype.canConnect = canConnect;\n\nBpmnRules.prototype.canResize = canResize;\n\nBpmnRules.prototype.canCopy = canCopy;\n\n/**\n * Utility functions for rule checking\n */\n\n/**\n * Checks if given element can be used for starting connection.\n *\n * @param  {Element} source\n * @return {Boolean}\n */\nfunction canStartConnection(element) {\n  if (nonExistingOrLabel(element)) {\n    return null;\n  }\n\n  return isAny(element, [\n    'bpmn:FlowNode',\n    'bpmn:InteractionNode',\n    'bpmn:DataObjectReference',\n    'bpmn:DataStoreReference'\n  ]);\n}\n\nfunction nonExistingOrLabel(element) {\n  return !element || isLabel(element);\n}\n\nfunction isSame(a, b) {\n  return a === b;\n}\n\nfunction getOrganizationalParent(element) {\n\n  do {\n    if (is(element, 'bpmn:Process')) {\n      return getBusinessObject(element);\n    }\n\n    if (is(element, 'bpmn:Participant')) {\n      return (\n        getBusinessObject(element).processRef ||\n        getBusinessObject(element)\n      );\n    }\n  } while ((element = element.parent));\n\n}\n\nfunction isTextAnnotation(element) {\n  return is(element, 'bpmn:TextAnnotation');\n}\n\nfunction isGroup(element) {\n  return is(element, 'bpmn:Group') && !element.labelTarget;\n}\n\nfunction isCompensationBoundary(element) {\n  return is(element, 'bpmn:BoundaryEvent') &&\n         hasEventDefinition(element, 'bpmn:CompensateEventDefinition');\n}\n\nfunction isForCompensation(e) {\n  return getBusinessObject(e).isForCompensation;\n}\n\nfunction isSameOrganization(a, b) {\n  var parentA = getOrganizationalParent(a),\n      parentB = getOrganizationalParent(b);\n\n  return parentA === parentB;\n}\n\nfunction isMessageFlowSource(element) {\n  return (\n    is(element, 'bpmn:InteractionNode') && (\n      !is(element, 'bpmn:Event') || (\n        is(element, 'bpmn:ThrowEvent') &&\n        hasEventDefinitionOrNone(element, 'bpmn:MessageEventDefinition')\n      )\n    )\n  );\n}\n\nfunction isMessageFlowTarget(element) {\n  return (\n    is(element, 'bpmn:InteractionNode') &&\n    !isForCompensation(element) && (\n      !is(element, 'bpmn:Event') || (\n        is(element, 'bpmn:CatchEvent') &&\n        hasEventDefinitionOrNone(element, 'bpmn:MessageEventDefinition')\n      )\n    )\n  );\n}\n\nfunction getScopeParent(element) {\n\n  var parent = element;\n\n  while ((parent = parent.parent)) {\n\n    if (is(parent, 'bpmn:FlowElementsContainer')) {\n      return getBusinessObject(parent);\n    }\n\n    if (is(parent, 'bpmn:Participant')) {\n      return getBusinessObject(parent).processRef;\n    }\n  }\n\n  return null;\n}\n\nfunction isSameScope(a, b) {\n  var scopeParentA = getScopeParent(a),\n      scopeParentB = getScopeParent(b);\n\n  return scopeParentA === scopeParentB;\n}\n\nfunction hasEventDefinition(element, eventDefinition) {\n  var bo = getBusinessObject(element);\n\n  return !!find(bo.eventDefinitions || [], function(definition) {\n    return is(definition, eventDefinition);\n  });\n}\n\nfunction hasEventDefinitionOrNone(element, eventDefinition) {\n  var bo = getBusinessObject(element);\n\n  return (bo.eventDefinitions || []).every(function(definition) {\n    return is(definition, eventDefinition);\n  });\n}\n\nfunction isSequenceFlowSource(element) {\n  return (\n    is(element, 'bpmn:FlowNode') &&\n    !is(element, 'bpmn:EndEvent') &&\n    !isEventSubProcess(element) &&\n    !(is(element, 'bpmn:IntermediateThrowEvent') &&\n      hasEventDefinition(element, 'bpmn:LinkEventDefinition')\n    ) &&\n    !isCompensationBoundary(element) &&\n    !isForCompensation(element)\n  );\n}\n\nfunction isSequenceFlowTarget(element) {\n  return (\n    is(element, 'bpmn:FlowNode') &&\n    !is(element, 'bpmn:StartEvent') &&\n    !is(element, 'bpmn:BoundaryEvent') &&\n    !isEventSubProcess(element) &&\n    !(is(element, 'bpmn:IntermediateCatchEvent') &&\n      hasEventDefinition(element, 'bpmn:LinkEventDefinition')\n    ) &&\n    !isForCompensation(element)\n  );\n}\n\nfunction isEventBasedTarget(element) {\n  return (\n    is(element, 'bpmn:ReceiveTask') || (\n      is(element, 'bpmn:IntermediateCatchEvent') && (\n        hasEventDefinition(element, 'bpmn:MessageEventDefinition') ||\n        hasEventDefinition(element, 'bpmn:TimerEventDefinition') ||\n        hasEventDefinition(element, 'bpmn:ConditionalEventDefinition') ||\n        hasEventDefinition(element, 'bpmn:SignalEventDefinition')\n      )\n    )\n  );\n}\n\nfunction isConnection(element) {\n  return element.waypoints;\n}\n\nfunction getParents(element) {\n\n  var parents = [];\n\n  while (element) {\n    element = element.parent;\n\n    if (element) {\n      parents.push(element);\n    }\n  }\n\n  return parents;\n}\n\nfunction isParent(possibleParent, element) {\n  var allParents = getParents(element);\n  return allParents.indexOf(possibleParent) !== -1;\n}\n\nfunction canConnect(source, target, connection) {\n\n  if (nonExistingOrLabel(source) || nonExistingOrLabel(target)) {\n    return null;\n  }\n\n  if (!is(connection, 'bpmn:DataAssociation')) {\n\n    if (canConnectMessageFlow(source, target)) {\n      return { type: 'bpmn:MessageFlow' };\n    }\n\n    if (canConnectSequenceFlow(source, target)) {\n      return { type: 'bpmn:SequenceFlow' };\n    }\n  }\n\n  var connectDataAssociation = canConnectDataAssociation(source, target);\n\n  if (connectDataAssociation) {\n    return connectDataAssociation;\n  }\n\n  if (isCompensationBoundary(source) && isForCompensation(target)) {\n    return {\n      type: 'bpmn:Association',\n      associationDirection: 'One'\n    };\n  }\n\n  if (canConnectAssociation(source, target)) {\n\n    return {\n      type: 'bpmn:Association'\n    };\n  }\n\n  return false;\n}\n\n/**\n * Can an element be dropped into the target element\n *\n * @return {Boolean}\n */\nfunction canDrop(element, target, position) {\n\n  // can move labels and groups everywhere\n  if (isLabel(element) || isGroup(element)) {\n    return true;\n  }\n\n\n  // disallow to create elements on collapsed pools\n  if (is(target, 'bpmn:Participant') && !isExpanded(target)) {\n    return false;\n  }\n\n  // allow to create new participants on\n  // existing collaboration and process diagrams\n  if (is(element, 'bpmn:Participant')) {\n    return is(target, 'bpmn:Process') || is(target, 'bpmn:Collaboration');\n  }\n\n  // allow moving DataInput / DataOutput within its original container only\n  if (isAny(element, [ 'bpmn:DataInput', 'bpmn:DataOutput' ])) {\n\n    if (element.parent) {\n      return target === element.parent;\n    }\n  }\n\n  // allow creating lanes on participants and other lanes only\n  if (is(element, 'bpmn:Lane')) {\n    return is(target, 'bpmn:Participant') || is(target, 'bpmn:Lane');\n  }\n\n  // disallow dropping boundary events which cannot replace with intermediate event\n  if (is(element, 'bpmn:BoundaryEvent') && !isDroppableBoundaryEvent(element)) {\n    return false;\n  }\n\n  // drop flow elements onto flow element containers\n  // and participants\n  if (is(element, 'bpmn:FlowElement') && !is(element, 'bpmn:DataStoreReference')) {\n    if (is(target, 'bpmn:FlowElementsContainer')) {\n      return isExpanded(target);\n    }\n\n    return isAny(target, [ 'bpmn:Participant', 'bpmn:Lane' ]);\n  }\n\n  // account for the fact that data associations are always\n  // rendered and moved to top (Process or Collaboration level)\n  //\n  // artifacts may be placed wherever, too\n  if (isAny(element, [ 'bpmn:Artifact', 'bpmn:DataAssociation', 'bpmn:DataStoreReference' ])) {\n    return isAny(target, [\n      'bpmn:Collaboration',\n      'bpmn:Lane',\n      'bpmn:Participant',\n      'bpmn:Process',\n      'bpmn:SubProcess' ]);\n  }\n\n  if (is(element, 'bpmn:MessageFlow')) {\n    return is(target, 'bpmn:Collaboration')\n      || element.source.parent == target\n      || element.target.parent == target;\n  }\n\n  return false;\n}\n\nfunction isDroppableBoundaryEvent(event) {\n  return getBusinessObject(event).cancelActivity && (\n    hasNoEventDefinition(event) || hasCommonBoundaryIntermediateEventDefinition(event)\n  );\n}\n\nfunction isBoundaryEvent(element) {\n  return !isLabel(element) && is(element, 'bpmn:BoundaryEvent');\n}\n\nfunction isLane(element) {\n  return is(element, 'bpmn:Lane');\n}\n\n/**\n * We treat IntermediateThrowEvents as boundary events during create,\n * this must be reflected in the rules.\n */\nfunction isBoundaryCandidate(element) {\n  if (isBoundaryEvent(element)) {\n    return true;\n  }\n\n  if (is(element, 'bpmn:IntermediateThrowEvent') && hasNoEventDefinition(element)) {\n    return true;\n  }\n\n  return (\n    is(element, 'bpmn:IntermediateCatchEvent') &&\n    hasCommonBoundaryIntermediateEventDefinition(element)\n  );\n}\n\nfunction hasNoEventDefinition(element) {\n  var bo = getBusinessObject(element);\n\n  return bo && !(bo.eventDefinitions && bo.eventDefinitions.length);\n}\n\nfunction hasCommonBoundaryIntermediateEventDefinition(element) {\n  return hasOneOfEventDefinitions(element, [\n    'bpmn:MessageEventDefinition',\n    'bpmn:TimerEventDefinition',\n    'bpmn:SignalEventDefinition',\n    'bpmn:ConditionalEventDefinition'\n  ]);\n}\n\nfunction hasOneOfEventDefinitions(element, eventDefinitions) {\n  return eventDefinitions.some(function(definition) {\n    return hasEventDefinition(element, definition);\n  });\n}\n\nfunction isReceiveTaskAfterEventBasedGateway(element) {\n  return (\n    is(element, 'bpmn:ReceiveTask') &&\n    find(element.incoming, function(incoming) {\n      return is(incoming.source, 'bpmn:EventBasedGateway');\n    })\n  );\n}\n\n\nfunction canAttach(elements, target, source, position) {\n\n  if (!Array.isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  // only (re-)attach one element at a time\n  if (elements.length !== 1) {\n    return false;\n  }\n\n  var element = elements[0];\n\n  // do not attach labels\n  if (isLabel(element)) {\n    return false;\n  }\n\n  // only handle boundary events\n  if (!isBoundaryCandidate(element)) {\n    return false;\n  }\n\n  // disallow drop on event sub processes\n  if (isEventSubProcess(target)) {\n    return false;\n  }\n\n  // only allow drop on non compensation activities\n  if (!is(target, 'bpmn:Activity') || isForCompensation(target)) {\n    return false;\n  }\n\n  // only attach to subprocess border\n  if (position && !isBoundaryAttachment(position, target)) {\n    return false;\n  }\n\n  // do not attach on receive tasks after event based gateways\n  if (isReceiveTaskAfterEventBasedGateway(target)) {\n    return false;\n  }\n\n  return 'attach';\n}\n\n\n/**\n * Defines how to replace elements for a given target.\n *\n * Returns an array containing all elements which will be replaced.\n *\n * @example\n *\n *  [{ id: 'IntermediateEvent_2',\n *     type: 'bpmn:StartEvent'\n *   },\n *   { id: 'IntermediateEvent_5',\n *     type: 'bpmn:EndEvent'\n *   }]\n *\n * @param  {Array} elements\n * @param  {Object} target\n *\n * @return {Object} an object containing all elements which have to be replaced\n */\nfunction canReplace(elements, target, position) {\n\n  if (!target) {\n    return false;\n  }\n\n  var canExecute = {\n    replacements: []\n  };\n\n  forEach(elements, function(element) {\n\n    if (!isEventSubProcess(target)) {\n\n      if (is(element, 'bpmn:StartEvent') &&\n          element.type !== 'label' &&\n          canDrop(element, target)) {\n\n        // replace a non-interrupting start event by a blank interrupting start event\n        // when the target is not an event sub process\n        if (!isInterrupting(element)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:StartEvent'\n          });\n        }\n\n        // replace an error/escalation/compensate start event by a blank interrupting start event\n        // when the target is not an event sub process\n        if (hasErrorEventDefinition(element) ||\n            hasEscalationEventDefinition(element) ||\n            hasCompensateEventDefinition(element)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:StartEvent'\n          });\n        }\n      }\n    }\n\n    if (!is(target, 'bpmn:Transaction')) {\n      if (hasEventDefinition(element, 'bpmn:CancelEventDefinition') &&\n          element.type !== 'label') {\n\n        if (is(element, 'bpmn:EndEvent') && canDrop(element, target)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:EndEvent'\n          });\n        }\n\n        if (is(element, 'bpmn:BoundaryEvent') && canAttach(element, target, null, position)) {\n          canExecute.replacements.push({\n            oldElementId: element.id,\n            newElementType: 'bpmn:BoundaryEvent'\n          });\n        }\n      }\n    }\n  });\n\n  return canExecute.replacements.length ? canExecute : false;\n}\n\nfunction canMove(elements, target) {\n\n  // do not move selection containing lanes\n  if (some(elements, isLane)) {\n    return false;\n  }\n\n  // allow default move check to start move operation\n  if (!target) {\n    return true;\n  }\n\n  return elements.every(function(element) {\n    return canDrop(element, target);\n  });\n}\n\nfunction canCreate(shape, target, source, position) {\n\n  if (!target) {\n    return false;\n  }\n\n  if (isLabel(shape) || isGroup(shape)) {\n    return true;\n  }\n\n  if (isSame(source, target)) {\n    return false;\n  }\n\n  // ensure we do not drop the element\n  // into source\n  if (source && isParent(source, target)) {\n    return false;\n  }\n\n  return canDrop(shape, target, position) || canInsert(shape, target, position);\n}\n\nfunction canResize(shape, newBounds) {\n  if (is(shape, 'bpmn:SubProcess')) {\n    return (\n      isExpanded(shape) && (\n        !newBounds || (newBounds.width >= 100 && newBounds.height >= 80)\n      )\n    );\n  }\n\n  if (is(shape, 'bpmn:Lane')) {\n    return !newBounds || (newBounds.width >= 130 && newBounds.height >= 60);\n  }\n\n  if (is(shape, 'bpmn:Participant')) {\n    return !newBounds || (newBounds.width >= 250 && newBounds.height >= 50);\n  }\n\n  if (isTextAnnotation(shape)) {\n    return true;\n  }\n\n  if (isGroup(shape)) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Check, whether one side of the relationship\n * is a text annotation.\n */\nfunction isOneTextAnnotation(source, target) {\n\n  var sourceTextAnnotation = isTextAnnotation(source),\n      targetTextAnnotation = isTextAnnotation(target);\n\n  return (\n    (sourceTextAnnotation || targetTextAnnotation) &&\n    (sourceTextAnnotation !== targetTextAnnotation)\n  );\n}\n\n\nfunction canConnectAssociation(source, target) {\n\n  // do not connect connections\n  if (isConnection(source) || isConnection(target)) {\n    return false;\n  }\n\n  // compensation boundary events are exception\n  if (isCompensationBoundary(source) && isForCompensation(target)) {\n    return true;\n  }\n\n  // don't connect parent <-> child\n  if (isParent(target, source) || isParent(source, target)) {\n    return false;\n  }\n\n  // allow connection of associations between <!TextAnnotation> and <TextAnnotation>\n  if (isOneTextAnnotation(source, target)) {\n    return true;\n  }\n\n  // can connect associations where we can connect\n  // data associations, too (!)\n  return !!canConnectDataAssociation(source, target);\n}\n\nfunction canConnectMessageFlow(source, target) {\n\n  // during connect user might move mouse out of canvas\n  // https://github.com/bpmn-io/bpmn-js/issues/1033\n  if (getRootElement(source) && !getRootElement(target)) {\n    return false;\n  }\n\n  return (\n    isMessageFlowSource(source) &&\n    isMessageFlowTarget(target) &&\n    !isSameOrganization(source, target)\n  );\n}\n\nfunction canConnectSequenceFlow(source, target) {\n\n  if (\n    isEventBasedTarget(target) &&\n    target.incoming.length > 0 &&\n    areOutgoingEventBasedGatewayConnections(target.incoming) &&\n    !is(source, 'bpmn:EventBasedGateway')\n  ) {\n    return false;\n  }\n\n  return isSequenceFlowSource(source) &&\n         isSequenceFlowTarget(target) &&\n         isSameScope(source, target) &&\n         !(is(source, 'bpmn:EventBasedGateway') && !isEventBasedTarget(target));\n}\n\n\nfunction canConnectDataAssociation(source, target) {\n\n  if (isAny(source, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ]) &&\n      isAny(target, [ 'bpmn:Activity', 'bpmn:ThrowEvent' ])) {\n    return { type: 'bpmn:DataInputAssociation' };\n  }\n\n  if (isAny(target, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ]) &&\n      isAny(source, [ 'bpmn:Activity', 'bpmn:CatchEvent' ])) {\n    return { type: 'bpmn:DataOutputAssociation' };\n  }\n\n  return false;\n}\n\nfunction canInsert(shape, flow, position) {\n\n  if (!flow) {\n    return false;\n  }\n\n  if (Array.isArray(shape)) {\n    if (shape.length !== 1) {\n      return false;\n    }\n\n    shape = shape[0];\n  }\n\n  if (flow.source === shape ||\n      flow.target === shape) {\n    return false;\n  }\n\n  // return true if we can drop on the\n  // underlying flow parent\n  //\n  // at this point we are not really able to talk\n  // about connection rules (yet)\n\n  return (\n    isAny(flow, [ 'bpmn:SequenceFlow', 'bpmn:MessageFlow' ]) &&\n    !isLabel(flow) &&\n    is(shape, 'bpmn:FlowNode') &&\n    !is(shape, 'bpmn:BoundaryEvent') &&\n    canDrop(shape, flow.parent, position));\n}\n\nfunction includes(elements, element) {\n  return (elements && element) && elements.indexOf(element) !== -1;\n}\n\nfunction canCopy(elements, element) {\n  if (isLabel(element)) {\n    return true;\n  }\n\n  if (is(element, 'bpmn:Lane') && !includes(elements, element.parent)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isOutgoingEventBasedGatewayConnection(connection) {\n\n  if (connection && connection.source) {\n    return is(connection.source, 'bpmn:EventBasedGateway');\n  }\n}\n\nfunction areOutgoingEventBasedGatewayConnections(connections) {\n  connections = connections || [];\n\n  return connections.some(isOutgoingEventBasedGatewayConnection);\n}\n\nfunction getRootElement(element) {\n  return getParent(element, 'bpmn:Process') || getParent(element, 'bpmn:Collaboration');\n}\n","import RulesModule from 'diagram-js/lib/features/rules';\n\nimport BpmnRules from './BpmnRules';\n\nexport default {\n  __depends__: [\n    RulesModule\n  ],\n  __init__: [ 'bpmnRules' ],\n  bpmnRules: [ 'type', BpmnRules ]\n};\n","import inherits from 'inherits';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n\n/**\n * An abstract provider that allows modelers to implement a custom\n * ordering of diagram elements on the canvas.\n *\n * It makes sure that the order is always preserved during element\n * creation and move operations.\n *\n * In order to use this behavior, inherit from it and override\n * the method {@link OrderingProvider#getOrdering}.\n *\n * @example\n *\n * ```javascript\n * function CustomOrderingProvider(eventBus) {\n *   OrderingProvider.call(this, eventBus);\n *\n *   this.getOrdering = function(element, newParent) {\n *     // always insert elements at the front\n *     // when moving\n *     return {\n *       index: 0,\n *       parent: newParent\n *     };\n *   };\n * }\n * ```\n *\n * @param {EventBus} eventBus\n */\nexport default function OrderingProvider(eventBus) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  var self = this;\n\n  this.preExecute([ 'shape.create', 'connection.create' ], function(event) {\n\n    var context = event.context,\n        element = context.shape || context.connection,\n        parent = context.parent;\n\n    var ordering = self.getOrdering(element, parent);\n\n    if (ordering) {\n\n      if (ordering.parent !== undefined) {\n        context.parent = ordering.parent;\n      }\n\n      context.parentIndex = ordering.index;\n    }\n  });\n\n  this.preExecute([ 'shape.move', 'connection.move' ], function(event) {\n\n    var context = event.context,\n        element = context.shape || context.connection,\n        parent = context.newParent || element.parent;\n\n    var ordering = self.getOrdering(element, parent);\n\n    if (ordering) {\n\n      if (ordering.parent !== undefined) {\n        context.newParent = ordering.parent;\n      }\n\n      context.newParentIndex = ordering.index;\n    }\n  });\n}\n\n/**\n * Return a custom ordering of the element, both in terms\n * of parent element and index in the new parent.\n *\n * Implementors of this method must return an object with\n * `parent` _and_ `index` in it.\n *\n * @param {djs.model.Base} element\n * @param {djs.model.Shape} newParent\n *\n * @return {Object} ordering descriptor\n */\nOrderingProvider.prototype.getOrdering = function(element, newParent) {\n  return null;\n};\n\ninherits(OrderingProvider, CommandInterceptor);","import inherits from 'inherits';\n\nimport OrderingProvider from 'diagram-js/lib/features/ordering/OrderingProvider';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  findIndex,\n  find\n} from 'min-dash';\n\n\n/**\n * a simple ordering provider that makes sure:\n *\n * (0) labels and groups are rendered always on top\n * (1) elements are ordered by a {level} property\n */\nexport default function BpmnOrderingProvider(eventBus, canvas, translate) {\n\n  OrderingProvider.call(this, eventBus);\n\n  var orders = [\n    { type: 'bpmn:SubProcess', order: { level: 6 } },\n    {\n      type: 'bpmn:SequenceFlow',\n      order: {\n        level: 3,\n        containers: [\n          'bpmn:Participant',\n          'bpmn:FlowElementsContainer'\n        ]\n      }\n    },\n\n    // handle DataAssociation(s) like message flows and render them always on top\n    {\n      type: 'bpmn:DataAssociation',\n      order: {\n        level: 9,\n        containers: [\n          'bpmn:Collaboration',\n          'bpmn:Process'\n        ]\n      }\n    },\n    {\n      type: 'bpmn:MessageFlow', order: {\n        level: 9,\n        containers: [ 'bpmn:Collaboration' ]\n      }\n    },\n    {\n      type: 'bpmn:Association',\n      order: {\n        level: 6,\n        containers: [\n          'bpmn:Participant',\n          'bpmn:FlowElementsContainer',\n          'bpmn:Collaboration'\n        ]\n      }\n    },\n    { type: 'bpmn:BoundaryEvent', order: { level: 8 } },\n    {\n      type: 'bpmn:Group',\n      order: {\n        level: 10,\n        containers: [\n          'bpmn:Collaboration',\n          'bpmn:Process'\n        ]\n      }\n    },\n    { type: 'bpmn:FlowElement', order: { level: 5 } },\n    { type: 'bpmn:Participant', order: { level: -2 } },\n    { type: 'bpmn:Lane', order: { level: -1 } }\n  ];\n\n  function computeOrder(element) {\n    if (element.labelTarget) {\n      return { level: 10 };\n    }\n\n    var entry = find(orders, function(o) {\n      return isAny(element, [ o.type ]);\n    });\n\n    return entry && entry.order || { level: 1 };\n  }\n\n  function getOrder(element) {\n\n    var order = element.order;\n\n    if (!order) {\n      element.order = order = computeOrder(element);\n    }\n\n    return order;\n  }\n\n  function findActualParent(element, newParent, containers) {\n\n    var actualParent = newParent;\n\n    while (actualParent) {\n\n      if (isAny(actualParent, containers)) {\n        break;\n      }\n\n      actualParent = actualParent.parent;\n    }\n\n    if (!actualParent) {\n      throw new Error(translate('no parent for {element} in {parent}', {\n        element: element.id,\n        parent: newParent.id\n      }));\n    }\n\n    return actualParent;\n  }\n\n  this.getOrdering = function(element, newParent) {\n\n    // render labels always on top\n    if (element.labelTarget) {\n      return {\n        parent: canvas.getRootElement(),\n        index: -1\n      };\n    }\n\n    var elementOrder = getOrder(element);\n\n\n    if (elementOrder.containers) {\n      newParent = findActualParent(element, newParent, elementOrder.containers);\n    }\n\n\n    var currentIndex = newParent.children.indexOf(element);\n\n    var insertIndex = findIndex(newParent.children, function(child) {\n\n      // do not compare with labels, they are created\n      // in the wrong order (right after elements) during import and\n      // mess up the positioning.\n      if (!element.labelTarget && child.labelTarget) {\n        return false;\n      }\n\n      return elementOrder.level < getOrder(child).level;\n    });\n\n\n    // if the element is already in the child list at\n    // a smaller index, we need to adjust the insert index.\n    // this takes into account that the element is being removed\n    // before being re-inserted\n    if (insertIndex !== -1) {\n      if (currentIndex !== -1 && currentIndex < insertIndex) {\n        insertIndex -= 1;\n      }\n    }\n\n    return {\n      index: insertIndex,\n      parent: newParent\n    };\n  };\n}\n\nBpmnOrderingProvider.$inject = [ 'eventBus', 'canvas', 'translate' ];\n\ninherits(BpmnOrderingProvider, OrderingProvider);","import translate from 'diagram-js/lib/i18n/translate';\n\nimport BpmnOrderingProvider from './BpmnOrderingProvider';\n\nexport default {\n  __depends__: [\n    translate\n  ],\n  __init__: [ 'bpmnOrderingProvider' ],\n  bpmnOrderingProvider: [ 'type', BpmnOrderingProvider ]\n};","import {\n  uniqueBy,\n  isArray\n} from 'min-dash';\n\n\n/**\n * A service that offers un- and redoable execution of commands.\n *\n * The command stack is responsible for executing modeling actions\n * in a un- and redoable manner. To do this it delegates the actual\n * command execution to {@link CommandHandler}s.\n *\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\n * identified by a command context.\n *\n *\n * ## Life-Cycle events\n *\n * In the process the command stack fires a number of life-cycle events\n * that other components to participate in the command execution.\n *\n *    * preExecute\n *    * preExecuted\n *    * execute\n *    * executed\n *    * postExecute\n *    * postExecuted\n *    * revert\n *    * reverted\n *\n * A special event is used for validating, whether a command can be\n * performed prior to its execution.\n *\n *    * canExecute\n *\n * Each of the events is fired as `commandStack.{eventName}` and\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\n * components fine grained control on where to hook into.\n *\n * The event object fired transports `command`, the name of the\n * command and `context`, the command context.\n *\n *\n * ## Creating Command Handlers\n *\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\n * and {@link CommandHandler#revert(ctx)} methods to implement\n * redoing and undoing of a command.\n *\n * A command handler _must_ ensure undo is performed properly in order\n * not to break the undo chain. It must also return the shapes that\n * got changed during the `execute` and `revert` operations.\n *\n * Command handlers may execute other modeling operations (and thus\n * commands) in their `preExecute` and `postExecute` phases. The command\n * stack will properly group all commands together into a logical unit\n * that may be re- and undone atomically.\n *\n * Command handlers must not execute other commands from within their\n * core implementation (`execute`, `revert`).\n *\n *\n * ## Change Tracking\n *\n * During the execution of the CommandStack it will keep track of all\n * elements that have been touched during the command's execution.\n *\n * At the end of the CommandStack execution it will notify interested\n * components via an 'elements.changed' event with all the dirty\n * elements.\n *\n * The event can be picked up by components that are interested in the fact\n * that elements have been changed. One use case for this is updating\n * their graphical representation after moving / resizing or deletion.\n *\n * @see CommandHandler\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function CommandStack(eventBus, injector) {\n\n  /**\n   * A map of all registered command handlers.\n   *\n   * @type {Object}\n   */\n  this._handlerMap = {};\n\n  /**\n   * A stack containing all re/undoable actions on the diagram\n   *\n   * @type {Array<Object>}\n   */\n  this._stack = [];\n\n  /**\n   * The current index on the stack\n   *\n   * @type {Number}\n   */\n  this._stackIdx = -1;\n\n  /**\n   * Current active commandStack execution\n   *\n   * @type {Object}\n   */\n  this._currentExecution = {\n    actions: [],\n    dirty: []\n  };\n\n\n  this._injector = injector;\n  this._eventBus = eventBus;\n\n  this._uid = 1;\n\n  eventBus.on([\n    'diagram.destroy',\n    'diagram.clear'\n  ], function() {\n    this.clear(false);\n  }, this);\n}\n\nCommandStack.$inject = [ 'eventBus', 'injector' ];\n\n\n/**\n * Execute a command\n *\n * @param {String} command the command to execute\n * @param {Object} context the environment to execute the command in\n */\nCommandStack.prototype.execute = function(command, context) {\n  if (!command) {\n    throw new Error('command required');\n  }\n\n  var action = { command: command, context: context };\n\n  this._pushAction(action);\n  this._internalExecute(action);\n  this._popAction(action);\n};\n\n\n/**\n * Ask whether a given command can be executed.\n *\n * Implementors may hook into the mechanism on two ways:\n *\n *   * in event listeners:\n *\n *     Users may prevent the execution via an event listener.\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\n *\n *   * in command handlers:\n *\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\n *     it will be called to figure out whether the execution is allowed.\n *\n * @param  {String} command the command to execute\n * @param  {Object} context the environment to execute the command in\n *\n * @return {Boolean} true if the command can be executed\n */\nCommandStack.prototype.canExecute = function(command, context) {\n\n  var action = { command: command, context: context };\n\n  var handler = this._getHandler(command);\n\n  var result = this._fire(command, 'canExecute', action);\n\n  // handler#canExecute will only be called if no listener\n  // decided on a result already\n  if (result === undefined) {\n    if (!handler) {\n      return false;\n    }\n\n    if (handler.canExecute) {\n      result = handler.canExecute(context);\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Clear the command stack, erasing all undo / redo history\n */\nCommandStack.prototype.clear = function(emit) {\n  this._stack.length = 0;\n  this._stackIdx = -1;\n\n  if (emit !== false) {\n    this._fire('changed');\n  }\n};\n\n\n/**\n * Undo last command(s)\n */\nCommandStack.prototype.undo = function() {\n  var action = this._getUndoAction(),\n      next;\n\n  if (action) {\n    this._pushAction(action);\n\n    while (action) {\n      this._internalUndo(action);\n      next = this._getUndoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Redo last command(s)\n */\nCommandStack.prototype.redo = function() {\n  var action = this._getRedoAction(),\n      next;\n\n  if (action) {\n    this._pushAction(action);\n\n    while (action) {\n      this._internalExecute(action, true);\n      next = this._getRedoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Register a handler instance with the command stack\n *\n * @param {String} command\n * @param {CommandHandler} handler\n */\nCommandStack.prototype.register = function(command, handler) {\n  this._setHandler(command, handler);\n};\n\n\n/**\n * Register a handler type with the command stack\n * by instantiating it and injecting its dependencies.\n *\n * @param {String} command\n * @param {Function} a constructor for a {@link CommandHandler}\n */\nCommandStack.prototype.registerHandler = function(command, handlerCls) {\n\n  if (!command || !handlerCls) {\n    throw new Error('command and handlerCls must be defined');\n  }\n\n  var handler = this._injector.instantiate(handlerCls);\n  this.register(command, handler);\n};\n\nCommandStack.prototype.canUndo = function() {\n  return !!this._getUndoAction();\n};\n\nCommandStack.prototype.canRedo = function() {\n  return !!this._getRedoAction();\n};\n\n// stack access  //////////////////////\n\nCommandStack.prototype._getRedoAction = function() {\n  return this._stack[this._stackIdx + 1];\n};\n\n\nCommandStack.prototype._getUndoAction = function() {\n  return this._stack[this._stackIdx];\n};\n\n\n// internal functionality //////////////////////\n\nCommandStack.prototype._internalUndo = function(action) {\n  var self = this;\n\n  var command = action.command,\n      context = action.context;\n\n  var handler = this._getHandler(command);\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(function() {\n    self._fire(command, 'revert', action);\n\n    if (handler.revert) {\n      self._markDirty(handler.revert(context));\n    }\n\n    self._revertedAction(action);\n\n    self._fire(command, 'reverted', action);\n  });\n};\n\n\nCommandStack.prototype._fire = function(command, qualifier, event) {\n  if (arguments.length < 3) {\n    event = qualifier;\n    qualifier = null;\n  }\n\n  var names = qualifier ? [ command + '.' + qualifier, qualifier ] : [ command ],\n      i, name, result;\n\n  event = this._eventBus.createEvent(event);\n\n  for (i = 0; (name = names[i]); i++) {\n    result = this._eventBus.fire('commandStack.' + name, event);\n\n    if (event.cancelBubble) {\n      break;\n    }\n  }\n\n  return result;\n};\n\nCommandStack.prototype._createId = function() {\n  return this._uid++;\n};\n\nCommandStack.prototype._atomicDo = function(fn) {\n\n  var execution = this._currentExecution;\n\n  execution.atomic = true;\n\n  try {\n    fn();\n  } finally {\n    execution.atomic = false;\n  }\n};\n\nCommandStack.prototype._internalExecute = function(action, redo) {\n  var self = this;\n\n  var command = action.command,\n      context = action.context;\n\n  var handler = this._getHandler(command);\n\n  if (!handler) {\n    throw new Error('no command handler registered for <' + command + '>');\n  }\n\n  this._pushAction(action);\n\n  if (!redo) {\n    this._fire(command, 'preExecute', action);\n\n    if (handler.preExecute) {\n      handler.preExecute(context);\n    }\n\n    this._fire(command, 'preExecuted', action);\n  }\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(function() {\n\n    self._fire(command, 'execute', action);\n\n    if (handler.execute) {\n\n      // actual execute + mark return results as dirty\n      self._markDirty(handler.execute(context));\n    }\n\n    // log to stack\n    self._executedAction(action, redo);\n\n    self._fire(command, 'executed', action);\n  });\n\n  if (!redo) {\n    this._fire(command, 'postExecute', action);\n\n    if (handler.postExecute) {\n      handler.postExecute(context);\n    }\n\n    this._fire(command, 'postExecuted', action);\n  }\n\n  this._popAction(action);\n};\n\n\nCommandStack.prototype._pushAction = function(action) {\n\n  var execution = this._currentExecution,\n      actions = execution.actions;\n\n  var baseAction = actions[0];\n\n  if (execution.atomic) {\n    throw new Error('illegal invocation in <execute> or <revert> phase (action: ' + action.command + ')');\n  }\n\n  if (!action.id) {\n    action.id = (baseAction && baseAction.id) || this._createId();\n  }\n\n  actions.push(action);\n};\n\n\nCommandStack.prototype._popAction = function() {\n  var execution = this._currentExecution,\n      actions = execution.actions,\n      dirty = execution.dirty;\n\n  actions.pop();\n\n  if (!actions.length) {\n    this._eventBus.fire('elements.changed', { elements: uniqueBy('id', dirty.reverse()) });\n\n    dirty.length = 0;\n\n    this._fire('changed');\n  }\n};\n\n\nCommandStack.prototype._markDirty = function(elements) {\n  var execution = this._currentExecution;\n\n  if (!elements) {\n    return;\n  }\n\n  elements = isArray(elements) ? elements : [ elements ];\n\n  execution.dirty = execution.dirty.concat(elements);\n};\n\n\nCommandStack.prototype._executedAction = function(action, redo) {\n  var stackIdx = ++this._stackIdx;\n\n  if (!redo) {\n    this._stack.splice(stackIdx, this._stack.length, action);\n  }\n};\n\n\nCommandStack.prototype._revertedAction = function(action) {\n  this._stackIdx--;\n};\n\n\nCommandStack.prototype._getHandler = function(command) {\n  return this._handlerMap[command];\n};\n\nCommandStack.prototype._setHandler = function(command, handler) {\n  if (!command || !handler) {\n    throw new Error('command and handler required');\n  }\n\n  if (this._handlerMap[command]) {\n    throw new Error('overriding handler for command <' + command + '>');\n  }\n\n  this._handlerMap[command] = handler;\n};\n","import CommandStack from './CommandStack';\n\nexport default {\n  commandStack: [ 'type', CommandStack ]\n};\n","import {\n  isString,\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  domify,\n  attr as domAttr,\n  classes as domClasses,\n  remove as domRemove,\n  delegate as domDelegate\n} from 'min-dom';\n\nimport Ids from '../../util/IdGenerator';\n\n// document wide unique tooltip ids\nvar ids = new Ids('tt');\n\n\nfunction createRoot(parentNode) {\n  var root = domify(\n    '<div class=\"djs-tooltip-container\" style=\"position: absolute; width: 0; height: 0;\" />'\n  );\n\n  parentNode.insertBefore(root, parentNode.firstChild);\n\n  return root;\n}\n\n\nfunction setPosition(el, x, y) {\n  assign(el.style, { left: x + 'px', top: y + 'px' });\n}\n\nfunction setVisible(el, visible) {\n  el.style.display = visible === false ? 'none' : '';\n}\n\n\nvar tooltipClass = 'djs-tooltip',\n    tooltipSelector = '.' + tooltipClass;\n\n/**\n * A service that allows users to render tool tips on the diagram.\n *\n * The tooltip service will take care of updating the tooltip positioning\n * during navigation + zooming.\n *\n * @example\n *\n * ```javascript\n *\n * // add a pink badge on the top left of the shape\n * tooltips.add({\n *   position: {\n *     x: 50,\n *     y: 100\n *   },\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or with optional life span\n * tooltips.add({\n *   position: {\n *     top: -5,\n *     left: -5\n *   },\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>',\n *   ttl: 2000\n * });\n *\n * // remove a tool tip\n * var id = tooltips.add(...);\n * tooltips.remove(id);\n * ```\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Tooltips(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._ids = ids;\n\n  this._tooltipDefaults = {\n    show: {\n      minZoom: 0.7,\n      maxZoom: 5.0\n    }\n  };\n\n  /**\n   * Mapping tooltipId -> tooltip\n   */\n  this._tooltips = {};\n\n  // root html element for all tooltips\n  this._tooltipRoot = createRoot(canvas.getContainer());\n\n\n  var self = this;\n\n  domDelegate.bind(this._tooltipRoot, tooltipSelector, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  domDelegate.bind(this._tooltipRoot, tooltipSelector, 'mouseover', function(event) {\n    self.trigger('mouseover', event);\n  });\n\n  domDelegate.bind(this._tooltipRoot, tooltipSelector, 'mouseout', function(event) {\n    self.trigger('mouseout', event);\n  });\n\n  this._init();\n}\n\n\nTooltips.$inject = [ 'eventBus', 'canvas' ];\n\n\n/**\n * Adds a HTML tooltip to the diagram\n *\n * @param {Object}               tooltip   the tooltip configuration\n *\n * @param {String|DOMElement}    tooltip.html                 html element to use as an tooltip\n * @param {Object}               [tooltip.show]               show configuration\n * @param {Number}               [tooltip.show.minZoom]       minimal zoom level to show the tooltip\n * @param {Number}               [tooltip.show.maxZoom]       maximum zoom level to show the tooltip\n * @param {Object}               tooltip.position             where to attach the tooltip\n * @param {Number}               [tooltip.position.left]      relative to element bbox left attachment\n * @param {Number}               [tooltip.position.top]       relative to element bbox top attachment\n * @param {Number}               [tooltip.position.bottom]    relative to element bbox bottom attachment\n * @param {Number}               [tooltip.position.right]     relative to element bbox right attachment\n * @param {Number}               [tooltip.timeout=-1]\n *\n * @return {String}              id that may be used to reference the tooltip for update or removal\n */\nTooltips.prototype.add = function(tooltip) {\n\n  if (!tooltip.position) {\n    throw new Error('must specifiy tooltip position');\n  }\n\n  if (!tooltip.html) {\n    throw new Error('must specifiy tooltip html');\n  }\n\n  var id = this._ids.next();\n\n  tooltip = assign({}, this._tooltipDefaults, tooltip, {\n    id: id\n  });\n\n  this._addTooltip(tooltip);\n\n  if (tooltip.timeout) {\n    this.setTimeout(tooltip);\n  }\n\n  return id;\n};\n\nTooltips.prototype.trigger = function(action, event) {\n\n  var node = event.delegateTarget || event.target;\n\n  var tooltip = this.get(domAttr(node, 'data-tooltip-id'));\n\n  if (!tooltip) {\n    return;\n  }\n\n  if (action === 'mouseover' && tooltip.timeout) {\n    this.clearTimeout(tooltip);\n  }\n\n  if (action === 'mouseout' && tooltip.timeout) {\n\n    // cut timeout after mouse out\n    tooltip.timeout = 1000;\n\n    this.setTimeout(tooltip);\n  }\n};\n\n/**\n * Get a tooltip with the given id\n *\n * @param {String} id\n */\nTooltips.prototype.get = function(id) {\n\n  if (typeof id !== 'string') {\n    id = id.id;\n  }\n\n  return this._tooltips[id];\n};\n\nTooltips.prototype.clearTimeout = function(tooltip) {\n\n  tooltip = this.get(tooltip);\n\n  if (!tooltip) {\n    return;\n  }\n\n  var removeTimer = tooltip.removeTimer;\n\n  if (removeTimer) {\n    clearTimeout(removeTimer);\n    tooltip.removeTimer = null;\n  }\n};\n\nTooltips.prototype.setTimeout = function(tooltip) {\n\n  tooltip = this.get(tooltip);\n\n  if (!tooltip) {\n    return;\n  }\n\n  this.clearTimeout(tooltip);\n\n  var self = this;\n\n  tooltip.removeTimer = setTimeout(function() {\n    self.remove(tooltip);\n  }, tooltip.timeout);\n};\n\n/**\n * Remove an tooltip with the given id\n *\n * @param {String} id\n */\nTooltips.prototype.remove = function(id) {\n\n  var tooltip = this.get(id);\n\n  if (tooltip) {\n    domRemove(tooltip.html);\n    domRemove(tooltip.htmlContainer);\n\n    delete tooltip.htmlContainer;\n\n    delete this._tooltips[tooltip.id];\n  }\n};\n\n\nTooltips.prototype.show = function() {\n  setVisible(this._tooltipRoot);\n};\n\n\nTooltips.prototype.hide = function() {\n  setVisible(this._tooltipRoot, false);\n};\n\n\nTooltips.prototype._updateRoot = function(viewbox) {\n  var a = viewbox.scale || 1;\n  var d = viewbox.scale || 1;\n\n  var matrix = 'matrix(' + a + ',0,0,' + d + ',' + (-1 * viewbox.x * a) + ',' + (-1 * viewbox.y * d) + ')';\n\n  this._tooltipRoot.style.transform = matrix;\n  this._tooltipRoot.style['-ms-transform'] = matrix;\n};\n\n\nTooltips.prototype._addTooltip = function(tooltip) {\n\n  var id = tooltip.id,\n      html = tooltip.html,\n      htmlContainer,\n      tooltipRoot = this._tooltipRoot;\n\n  // unwrap jquery (for those who need it)\n  if (html.get && html.constructor.prototype.jquery) {\n    html = html.get(0);\n  }\n\n  // create proper html elements from\n  // tooltip HTML strings\n  if (isString(html)) {\n    html = domify(html);\n  }\n\n  htmlContainer = domify('<div data-tooltip-id=\"' + id + '\" class=\"' + tooltipClass + '\" style=\"position: absolute\">');\n\n  htmlContainer.appendChild(html);\n\n  if (tooltip.type) {\n    domClasses(htmlContainer).add('djs-tooltip-' + tooltip.type);\n  }\n\n  if (tooltip.className) {\n    domClasses(htmlContainer).add(tooltip.className);\n  }\n\n  tooltip.htmlContainer = htmlContainer;\n\n  tooltipRoot.appendChild(htmlContainer);\n\n  this._tooltips[id] = tooltip;\n\n  this._updateTooltip(tooltip);\n};\n\n\nTooltips.prototype._updateTooltip = function(tooltip) {\n\n  var position = tooltip.position,\n      htmlContainer = tooltip.htmlContainer;\n\n  // update overlay html based on tooltip x, y\n\n  setPosition(htmlContainer, position.x, position.y);\n};\n\n\nTooltips.prototype._updateTooltipVisibilty = function(viewbox) {\n\n  forEach(this._tooltips, function(tooltip) {\n    var show = tooltip.show,\n        htmlContainer = tooltip.htmlContainer,\n        visible = true;\n\n    if (show) {\n      if (show.minZoom > viewbox.scale ||\n          show.maxZoom < viewbox.scale) {\n        visible = false;\n      }\n\n      setVisible(htmlContainer, visible);\n    }\n  });\n};\n\nTooltips.prototype._init = function() {\n\n  var self = this;\n\n  // scroll/zoom integration\n\n  function updateViewbox(viewbox) {\n    self._updateRoot(viewbox);\n    self._updateTooltipVisibilty(viewbox);\n\n    self.show();\n  }\n\n  this._eventBus.on('canvas.viewbox.changing', function(event) {\n    self.hide();\n  });\n\n  this._eventBus.on('canvas.viewbox.changed', function(event) {\n    updateViewbox(event.viewbox);\n  });\n};\n","import Tooltips from './Tooltips';\n\nexport default {\n  __init__: [ 'tooltips' ],\n  tooltips: [ 'type', Tooltips ]\n};","/**\n * Remove from the beginning of a collection until it is empty.\n *\n * This is a null-safe operation that ensures elements\n * are being removed from the given collection until the\n * collection is empty.\n *\n * The implementation deals with the fact that a remove operation\n * may touch, i.e. remove multiple elements in the collection\n * at a time.\n *\n * @param {Array<Object>} [collection]\n * @param {Function} removeFn\n *\n * @return {Array<Object>} the cleared collection\n */\nexport function saveClear(collection, removeFn) {\n\n  if (typeof removeFn !== 'function') {\n    throw new Error('removeFn iterator must be a function');\n  }\n\n  if (!collection) {\n    return;\n  }\n\n  var e;\n\n  while ((e = collection[0])) {\n    removeFn(e);\n  }\n\n  return collection;\n}\n","import {\n  forEach,\n  filter\n} from 'min-dash';\n\nimport inherits from 'inherits';\n\nvar LOW_PRIORITY = 250,\n    HIGH_PRIORITY = 1400;\n\nimport {\n  add as collectionAdd,\n  indexOf as collectionIdx\n} from '../../util/Collections';\n\nimport { saveClear } from '../../util/Removal';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\n\n/**\n * A handler that makes sure labels are properly moved with\n * their label targets.\n *\n * @param {didi.Injector} injector\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function LabelSupport(injector, eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var movePreview = injector.get('movePreview', false);\n\n  // remove labels from the collection that are being\n  // moved with other elements anyway\n  eventBus.on('shape.move.start', HIGH_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        validatedShapes = context.validatedShapes;\n\n    context.shapes = removeLabels(shapes);\n    context.validatedShapes = removeLabels(validatedShapes);\n  });\n\n  // add labels to visual's group\n  movePreview && eventBus.on('shape.move.start', LOW_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes;\n\n    var labels = [];\n\n    forEach(shapes, function(element) {\n\n      forEach(element.labels, function(label) {\n\n        if (!label.hidden && context.shapes.indexOf(label) === -1) {\n          labels.push(label);\n        }\n\n        if (element.labelTarget) {\n          labels.push(element);\n        }\n      });\n    });\n\n    forEach(labels, function(label) {\n      movePreview.makeDraggable(context, label, true);\n    });\n\n  });\n\n  // add all labels to move closure\n  this.preExecuted('elements.move', HIGH_PRIORITY, function(e) {\n    var context = e.context,\n        closure = context.closure,\n        enclosedElements = closure.enclosedElements;\n\n    var enclosedLabels = [];\n\n    // find labels that are not part of\n    // move closure yet and add them\n    forEach(enclosedElements, function(element) {\n      forEach(element.labels, function(label) {\n\n        if (!enclosedElements[label.id]) {\n          enclosedLabels.push(label);\n        }\n      });\n    });\n\n    closure.addAll(enclosedLabels);\n  });\n\n\n  this.preExecute([\n    'connection.delete',\n    'shape.delete'\n  ], function(e) {\n\n    var context = e.context,\n        element = context.connection || context.shape;\n\n    saveClear(element.labels, function(label) {\n      modeling.removeShape(label, { nested: true });\n    });\n  });\n\n\n  this.execute('shape.delete', function(e) {\n\n    var context = e.context,\n        shape = context.shape,\n        labelTarget = shape.labelTarget;\n\n    // unset labelTarget\n    if (labelTarget) {\n      context.labelTargetIndex = collectionIdx(labelTarget.labels, shape);\n      context.labelTarget = labelTarget;\n\n      shape.labelTarget = null;\n    }\n  });\n\n  this.revert('shape.delete', function(e) {\n\n    var context = e.context,\n        shape = context.shape,\n        labelTarget = context.labelTarget,\n        labelTargetIndex = context.labelTargetIndex;\n\n    // restore labelTarget\n    if (labelTarget) {\n      collectionAdd(labelTarget.labels, shape, labelTargetIndex);\n\n      shape.labelTarget = labelTarget;\n    }\n  });\n\n}\n\ninherits(LabelSupport, CommandInterceptor);\n\nLabelSupport.$inject = [\n  'injector',\n  'eventBus',\n  'modeling'\n];\n\n\n/**\n * Return a filtered list of elements that do not\n * contain attached elements with hosts being part\n * of the selection.\n *\n * @param  {Array<djs.model.Base>} elements\n *\n * @return {Array<djs.model.Base>} filtered\n */\nfunction removeLabels(elements) {\n\n  return filter(elements, function(element) {\n\n    // filter out labels that are move together\n    // with their label targets\n    return elements.indexOf(element.labelTarget) === -1;\n  });\n}\n","import LabelSupport from './LabelSupport';\n\nexport default {\n  __init__: [ 'labelSupport'],\n  labelSupport: [ 'type', LabelSupport ]\n};\n","import {\n  flatten,\n  filter,\n  forEach,\n  groupBy,\n  map,\n  unionBy\n} from 'min-dash';\n\nimport { saveClear } from '../../util/Removal';\n\nimport { getNewAttachShapeDelta } from '../../util/AttachUtil';\n\nimport inherits from 'inherits';\n\nimport CommandInterceptor from '../../command/CommandInterceptor';\n\nvar LOW_PRIORITY = 251,\n    HIGH_PRIORITY = 1401;\n\nvar MARKER_ATTACH = 'attach-ok';\n\n\n/**\n * Adds the notion of attached elements to the modeler.\n *\n * Optionally depends on `diagram-js/lib/features/move` to render\n * the attached elements during move preview.\n *\n * Optionally depends on `diagram-js/lib/features/label-support`\n * to render attached labels during move preview.\n *\n * @param {didi.Injector} injector\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Rules} rules\n * @param {Modeling} modeling\n */\nexport default function AttachSupport(injector, eventBus, canvas, rules, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  var movePreview = injector.get('movePreview', false);\n\n\n  // remove all the attached elements from the shapes to be validated\n  // add all the attached shapes to the overall list of moved shapes\n  eventBus.on('shape.move.start', HIGH_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        validatedShapes = context.validatedShapes;\n\n    context.shapes = addAttached(shapes);\n\n    context.validatedShapes = removeAttached(validatedShapes);\n  });\n\n  // add attachers to the visual's group\n  movePreview && eventBus.on('shape.move.start', LOW_PRIORITY, function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        attachers = getAttachers(shapes);\n\n    forEach(attachers, function(attacher) {\n      movePreview.makeDraggable(context, attacher, true);\n\n      forEach(attacher.labels, function(label) {\n        movePreview.makeDraggable(context, label, true);\n      });\n    });\n  });\n\n  // add attach-ok marker to current host\n  movePreview && eventBus.on('shape.move.start', function(event) {\n    var context = event.context,\n        shapes = context.shapes;\n\n    if (shapes.length !== 1) {\n      return;\n    }\n\n    var shape = shapes[0];\n\n    var host = shape.host;\n\n    if (host) {\n      canvas.addMarker(host, MARKER_ATTACH);\n\n      eventBus.once([\n        'shape.move.out',\n        'shape.move.cleanup'\n      ], function() {\n        canvas.removeMarker(host, MARKER_ATTACH);\n      });\n    }\n  });\n\n  // add all attachers to move closure\n  this.preExecuted('elements.move', HIGH_PRIORITY, function(e) {\n    var context = e.context,\n        closure = context.closure,\n        shapes = context.shapes,\n        attachers = getAttachers(shapes);\n\n    forEach(attachers, function(attacher) {\n      closure.add(attacher, closure.topLevel[attacher.host.id]);\n    });\n  });\n\n  // perform the attaching after shapes are done moving\n  this.postExecuted('elements.move', function(e) {\n\n    var context = e.context,\n        shapes = context.shapes,\n        newHost = context.newHost,\n        attachers;\n\n    // only single elements can be attached\n    // multiply elements can be detached\n    if (newHost && shapes.length !== 1) {\n      return;\n    }\n\n    if (newHost) {\n      attachers = shapes;\n    } else {\n\n      // find attachers moved without host\n      attachers = filter(shapes, function(shape) {\n        var host = shape.host;\n\n        return isAttacher(shape) && !includes(shapes, host);\n      });\n    }\n\n    forEach(attachers, function(attacher) {\n      modeling.updateAttachment(attacher, newHost);\n    });\n  });\n\n  // ensure invalid attachment connections are removed\n  this.postExecuted('elements.move', function(e) {\n\n    var shapes = e.context.shapes;\n\n    forEach(shapes, function(shape) {\n\n      forEach(shape.attachers, function(attacher) {\n\n        // remove invalid outgoing connections\n        forEach(attacher.outgoing.slice(), function(connection) {\n          var allowed = rules.allowed('connection.reconnect', {\n            connection: connection,\n            source: connection.source,\n            target: connection.target\n          });\n\n          if (!allowed) {\n            modeling.removeConnection(connection);\n          }\n        });\n\n        // remove invalid incoming connections\n        forEach(attacher.incoming.slice(), function(connection) {\n          var allowed = rules.allowed('connection.reconnect', {\n            connection: connection,\n            source: connection.source,\n            target: connection.target\n          });\n\n          if (!allowed) {\n            modeling.removeConnection(connection);\n          }\n        });\n      });\n    });\n  });\n\n  this.postExecute('shape.create', function(e) {\n    var context = e.context,\n        shape = context.shape,\n        host = context.host;\n\n    if (host) {\n      modeling.updateAttachment(shape, host);\n    }\n  });\n\n  // update attachments if the host is replaced\n  this.postExecute('shape.replace', function(e) {\n\n    var context = e.context,\n        oldShape = context.oldShape,\n        newShape = context.newShape;\n\n    // move the attachers to the new host\n    saveClear(oldShape.attachers, function(attacher) {\n      var allowed = rules.allowed('elements.move', {\n        target: newShape,\n        shapes: [attacher]\n      });\n\n      if (allowed === 'attach') {\n        modeling.updateAttachment(attacher, newShape);\n      } else {\n        modeling.removeShape(attacher);\n      }\n    });\n\n    // move attachers if new host has different size\n    if (newShape.attachers.length) {\n\n      forEach(newShape.attachers, function(attacher) {\n        var delta = getNewAttachShapeDelta(attacher, oldShape, newShape);\n        modeling.moveShape(attacher, delta, attacher.parent);\n      });\n    }\n\n  });\n\n  // move shape on host resize\n  this.postExecute('shape.resize', function(event) {\n    var context = event.context,\n        shape = context.shape,\n        oldBounds = context.oldBounds,\n        newBounds = context.newBounds,\n        attachers = shape.attachers,\n        hints = context.hints || {};\n\n    if (hints.attachSupport === false) {\n      return;\n    }\n\n    forEach(attachers, function(attacher) {\n      var delta = getNewAttachShapeDelta(attacher, oldBounds, newBounds);\n\n      modeling.moveShape(attacher, delta, attacher.parent);\n\n      forEach(attacher.labels, function(label) {\n        modeling.moveShape(label, delta, label.parent);\n      });\n    });\n  });\n\n  // remove attachments\n  this.preExecute('shape.delete', function(event) {\n\n    var shape = event.context.shape;\n\n    saveClear(shape.attachers, function(attacher) {\n      modeling.removeShape(attacher);\n    });\n\n    if (shape.host) {\n      modeling.updateAttachment(shape, null);\n    }\n  });\n}\n\ninherits(AttachSupport, CommandInterceptor);\n\nAttachSupport.$inject = [\n  'injector',\n  'eventBus',\n  'canvas',\n  'rules',\n  'modeling'\n];\n\n\n/**\n * Return attachers of the given shapes\n *\n * @param {Array<djs.model.Base>} shapes\n * @return {Array<djs.model.Base>}\n */\nfunction getAttachers(shapes) {\n  return flatten(map(shapes, function(s) {\n    return s.attachers || [];\n  }));\n}\n\n/**\n * Return a combined list of elements and\n * attachers.\n *\n * @param {Array<djs.model.Base>} elements\n * @return {Array<djs.model.Base>} filtered\n */\nfunction addAttached(elements) {\n  var attachers = getAttachers(elements);\n\n  return unionBy('id', elements, attachers);\n}\n\n/**\n * Return a filtered list of elements that do not\n * contain attached elements with hosts being part\n * of the selection.\n *\n * @param  {Array<djs.model.Base>} elements\n *\n * @return {Array<djs.model.Base>} filtered\n */\nfunction removeAttached(elements) {\n\n  var ids = groupBy(elements, 'id');\n\n  return filter(elements, function(element) {\n    while (element) {\n\n      // host in selection\n      if (element.host && ids[element.host.id]) {\n        return false;\n      }\n\n      element = element.parent;\n    }\n\n    return true;\n  });\n}\n\nfunction isAttacher(shape) {\n  return !!shape.host;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}","import RulesModule from '../rules';\n\nimport AttachSupport from './AttachSupport';\n\nexport default {\n  __depends__: [\n    RulesModule\n  ],\n  __init__: [ 'attachSupport' ],\n  attachSupport: [ 'type', AttachSupport ]\n};\n","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  closest as domClosest\n} from 'min-dom';\n\nvar LOW_PRIORITY = 250;\n\n/**\n * The tool manager acts as middle-man between the available tool's and the Palette,\n * it takes care of making sure that the correct active state is set.\n *\n * @param  {Object}    eventBus\n * @param  {Object}    dragging\n */\nexport default function ToolManager(eventBus, dragging) {\n  this._eventBus = eventBus;\n  this._dragging = dragging;\n\n  this._tools = [];\n  this._active = null;\n}\n\nToolManager.$inject = [ 'eventBus', 'dragging' ];\n\nToolManager.prototype.registerTool = function(name, events) {\n  var tools = this._tools;\n\n  if (!events) {\n    throw new Error('A tool has to be registered with it\\'s \"events\"');\n  }\n\n  tools.push(name);\n\n  this.bindEvents(name, events);\n};\n\nToolManager.prototype.isActive = function(tool) {\n  return tool && this._active === tool;\n};\n\nToolManager.prototype.length = function(tool) {\n  return this._tools.length;\n};\n\nToolManager.prototype.setActive = function(tool) {\n  var eventBus = this._eventBus;\n\n  if (this._active !== tool) {\n    this._active = tool;\n\n    eventBus.fire('tool-manager.update', { tool: tool });\n  }\n};\n\nToolManager.prototype.bindEvents = function(name, events) {\n  var eventBus = this._eventBus,\n      dragging = this._dragging;\n\n  var eventsToRegister = [];\n\n  eventBus.on(events.tool + '.init', function(event) {\n    var context = event.context;\n\n    // Active tools that want to reactivate themselves must do this explicitly\n    if (!context.reactivate && this.isActive(name)) {\n      this.setActive(null);\n\n      dragging.cancel();\n      return;\n    }\n\n    this.setActive(name);\n\n  }, this);\n\n  // Todo[ricardo]: add test cases\n  forEach(events, function(event) {\n    eventsToRegister.push(event + '.ended');\n    eventsToRegister.push(event + '.canceled');\n  });\n\n  eventBus.on(eventsToRegister, LOW_PRIORITY, function(event) {\n    var originalEvent = event.originalEvent;\n\n    // We defer the de-activation of the tool to the .activate phase,\n    // so we're able to check if we want to toggle off the current\n    // active tool or switch to a new one\n    if (!this._active) {\n      return;\n    }\n\n    if (originalEvent && domClosest(originalEvent.target, '.group[data-group=\"tools\"]')) {\n      return;\n    }\n\n    this.setActive(null);\n  }, this);\n};\n","import DraggingModule from '../dragging';\n\nimport ToolManager from './ToolManager';\n\nexport default {\n  __depends__: [\n    DraggingModule\n  ],\n  __init__: [ 'toolManager' ],\n  toolManager: [ 'type', ToolManager ]\n};\n","import { forEach } from 'min-dash';\n\n/**\n * Return direction given axis and delta.\n *\n * @param {string} axis\n * @param {number} delta\n *\n * @return {string}\n */\nexport function getDirection(axis, delta) {\n\n  if (axis === 'x') {\n    if (delta > 0) {\n      return 'e';\n    }\n\n    if (delta < 0) {\n      return 'w';\n    }\n  }\n\n  if (axis === 'y') {\n    if (delta > 0) {\n      return 's';\n    }\n\n    if (delta < 0) {\n      return 'n';\n    }\n  }\n\n  return null;\n}\n\n/**\n * Returns connections whose waypoints are to be updated. Waypoints are to be updated if start\n * or end is to be moved or resized.\n *\n * @param {Array<djs.model.Shape} movingShapes\n * @param {Array<djs.model.Shape} resizingShapes\n *\n * @returns {Array<djs.model.Connection>}\n */\nexport function getWaypointsUpdatingConnections(movingShapes, resizingShapes) {\n  var waypointsUpdatingConnections = [];\n\n  forEach(movingShapes, function(shape) {\n    var incoming = shape.incoming,\n        outgoing = shape.outgoing;\n\n    forEach(incoming.concat(outgoing), function(connection) {\n      var source = connection.source,\n          target = connection.target;\n\n      if (includes(movingShapes, source) ||\n        includes(movingShapes, target) ||\n        includes(resizingShapes, source) ||\n        includes(resizingShapes, target)) {\n\n        if (!includes(waypointsUpdatingConnections, connection)) {\n          waypointsUpdatingConnections.push(connection);\n        }\n      }\n    });\n  });\n\n  return waypointsUpdatingConnections;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\n/**\n * Resize bounds.\n *\n * @param {Object} bounds\n * @param {number} bounds.x\n * @param {number} bounds.y\n * @param {number} bounds.width\n * @param {number} bounds.height\n * @param {string} direction\n * @param {Object} delta\n * @param {number} delta.x\n * @param {number} delta.y\n *\n * @return {Object}\n */\nexport function resizeBounds(bounds, direction, delta) {\n  var x = bounds.x,\n      y = bounds.y,\n      width = bounds.width,\n      height = bounds.height,\n      dx = delta.x,\n      dy = delta.y;\n\n  switch (direction) {\n  case 'n':\n    return {\n      x: x,\n      y: y + dy,\n      width: width,\n      height: height - dy\n    };\n  case 's':\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height + dy\n    };\n  case 'w':\n    return {\n      x: x + dx,\n      y: y,\n      width: width - dx,\n      height: height\n    };\n  case 'e':\n    return {\n      x: x,\n      y: y,\n      width: width + dx,\n      height: height\n    };\n  default:\n    throw new Error('unknown direction: ' + direction);\n  }\n}","import {\n  assign,\n  filter,\n  forEach,\n  isNumber\n} from 'min-dash';\n\nimport { asTRBL } from '../../layout/LayoutUtil';\n\nimport { getBBox } from '../../util/Elements';\n\nimport { getDirection } from './SpaceUtil';\n\nimport { hasPrimaryModifier } from '../../util/Mouse';\n\nimport { set as setCursor } from '../../util/Cursor';\n\nimport { selfAndAllChildren } from '../../util/Elements';\n\nvar abs = Math.abs,\n    round = Math.round;\n\nvar AXIS_TO_DIMENSION = {\n  x: 'width',\n  y: 'height'\n};\n\nvar CURSOR_CROSSHAIR = 'crosshair';\n\nvar DIRECTION_TO_TRBL = {\n  n: 'top',\n  w: 'left',\n  s: 'bottom',\n  e: 'right'\n};\n\nvar HIGH_PRIORITY = 1500;\n\nvar DIRECTION_TO_OPPOSITE = {\n  n: 's',\n  w: 'e',\n  s: 'n',\n  e: 'w'\n};\n\nvar PADDING = 20;\n\n\n/**\n * Add or remove space by moving and resizing elements.\n *\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Rules} rules\n * @param {toolManager} toolManager\n */\nexport default function SpaceTool(canvas, dragging, eventBus, modeling, rules, toolManager) {\n  this._canvas = canvas;\n  this._dragging = dragging;\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._rules = rules;\n  this._toolManager = toolManager;\n\n  var self = this;\n\n  toolManager.registerTool('space', {\n    tool: 'spaceTool.selection',\n    dragging: 'spaceTool'\n  });\n\n  eventBus.on('spaceTool.selection.end', function(event) {\n    eventBus.once('spaceTool.selection.ended', function() {\n      self.activateMakeSpace(event.originalEvent);\n    });\n  });\n\n  eventBus.on('spaceTool.move', HIGH_PRIORITY , function(event) {\n    var context = event.context,\n        initialized = context.initialized;\n\n    if (!initialized) {\n      initialized = context.initialized = self.init(event, context);\n    }\n\n    if (initialized) {\n      ensureConstraints(event);\n    }\n  });\n\n  eventBus.on('spaceTool.end', function(event) {\n    var context = event.context,\n        axis = context.axis,\n        direction = context.direction,\n        movingShapes = context.movingShapes,\n        resizingShapes = context.resizingShapes,\n        start = context.start;\n\n    if (!context.initialized) {\n      return;\n    }\n\n    ensureConstraints(event);\n\n    var delta = {\n      x: 0,\n      y: 0\n    };\n\n    delta[ axis ] = round(event[ 'd' + axis ]);\n\n    self.makeSpace(movingShapes, resizingShapes, delta, direction, start);\n\n    eventBus.once('spaceTool.ended', function(event) {\n\n      // activate space tool selection after make space\n      self.activateSelection(event.originalEvent, true, true);\n    });\n  });\n}\n\nSpaceTool.$inject = [\n  'canvas',\n  'dragging',\n  'eventBus',\n  'modeling',\n  'rules',\n  'toolManager'\n];\n\n/**\n * Activate space tool selection.\n *\n * @param {Object} event\n * @param {boolean} autoActivate\n */\nSpaceTool.prototype.activateSelection = function(event, autoActivate, reactivate) {\n  this._dragging.init(event, 'spaceTool.selection', {\n    autoActivate: autoActivate,\n    cursor: CURSOR_CROSSHAIR,\n    data: {\n      context: {\n        reactivate: reactivate\n      }\n    },\n    trapClick: false\n  });\n};\n\n/**\n * Activate space tool make space.\n *\n * @param  {MouseEvent} event\n */\nSpaceTool.prototype.activateMakeSpace = function(event) {\n  this._dragging.init(event, 'spaceTool', {\n    autoActivate: true,\n    cursor: CURSOR_CROSSHAIR,\n    data: {\n      context: {}\n    }\n  });\n};\n\n/**\n * Make space.\n *\n * @param  {Array<djs.model.Shape>} movingShapes\n * @param  {Array<djs.model.Shape>} resizingShapes\n * @param  {Object} delta\n * @param  {number} delta.x\n * @param  {number} delta.y\n * @param  {string} direction\n * @param  {number} start\n */\nSpaceTool.prototype.makeSpace = function(movingShapes, resizingShapes, delta, direction, start) {\n  return this._modeling.createSpace(movingShapes, resizingShapes, delta, direction, start);\n};\n\n/**\n * Initialize make space and return true if that was successful.\n *\n * @param {Object} event\n * @param {Object} context\n *\n * @return {boolean}\n */\nSpaceTool.prototype.init = function(event, context) {\n  var axis = abs(event.dx) > abs(event.dy) ? 'x' : 'y',\n      delta = event[ 'd' + axis ],\n      start = event[ axis ] - delta;\n\n  if (abs(delta) < 5) {\n    return false;\n  }\n\n  // invert delta to remove space when moving left\n  if (delta < 0) {\n    delta *= -1;\n  }\n\n  // invert delta to add/remove space when removing/adding space if modifier key is pressed\n  if (hasPrimaryModifier(event)) {\n    delta *= -1;\n  }\n\n  var direction = getDirection(axis, delta);\n\n  var root = this._canvas.getRootElement();\n\n  var children = selfAndAllChildren(root, true);\n\n  var elements = this.calculateAdjustments(children, axis, delta, start);\n\n  var minDimensions = this._eventBus.fire('spaceTool.getMinDimensions', {\n    shapes: elements.resizingShapes\n  });\n\n  var spaceToolConstraints = getSpaceToolConstraints(elements, axis, direction, start, minDimensions);\n\n  assign(\n    context,\n    elements,\n    {\n      axis: axis,\n      direction: direction,\n      spaceToolConstraints: spaceToolConstraints,\n      start: start\n    }\n  );\n\n  setCursor('resize-' + (axis === 'x' ? 'ew' : 'ns'));\n\n  return true;\n};\n\n/**\n * Get elements to be moved and resized.\n *\n * @param  {Array<djs.model.Shape>} elements\n * @param  {string} axis\n * @param  {number} delta\n * @param  {number} start\n *\n * @return {Object}\n */\nSpaceTool.prototype.calculateAdjustments = function(elements, axis, delta, start) {\n  var rules = this._rules;\n\n  var movingShapes = [],\n      resizingShapes = [];\n\n  forEach(elements, function(element) {\n    if (!element.parent || isConnection(element)) {\n      return;\n    }\n\n    var shapeStart = element[ axis ],\n        shapeEnd = shapeStart + element[ AXIS_TO_DIMENSION[ axis ] ];\n\n    // shape to be moved\n    if ((delta > 0 && shapeStart > start) || (delta < 0 && shapeEnd < start)) {\n      return movingShapes.push(element);\n    }\n\n    // shape to be resized\n    if (shapeStart < start &&\n      shapeEnd > start &&\n      rules.allowed('shape.resize', { shape: element })\n    ) {\n\n      return resizingShapes.push(element);\n    }\n  });\n\n  return {\n    movingShapes: movingShapes,\n    resizingShapes: resizingShapes\n  };\n};\n\nSpaceTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    this._dragging.cancel();\n  } else {\n    this.activateSelection();\n  }\n};\n\nSpaceTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^spaceTool/.test(context.prefix);\n};\n\n// helpers //////////\n\nfunction addPadding(trbl) {\n  return {\n    top: trbl.top - PADDING,\n    right: trbl.right + PADDING,\n    bottom: trbl.bottom + PADDING,\n    left: trbl.left - PADDING\n  };\n}\n\nfunction ensureConstraints(event) {\n  var context = event.context,\n      spaceToolConstraints = context.spaceToolConstraints;\n\n  if (!spaceToolConstraints) {\n    return;\n  }\n\n  var x, y;\n\n  if (spaceToolConstraints.left) {\n    x = Math.max(event.x, spaceToolConstraints.left);\n\n    event.dx = event.dx + x - event.x;\n    event.x = x;\n  }\n\n  if (spaceToolConstraints.right) {\n    x = Math.min(event.x, spaceToolConstraints.right);\n\n    event.dx = event.dx + x - event.x;\n    event.x = x;\n  }\n\n  if (spaceToolConstraints.top) {\n    y = Math.max(event.y, spaceToolConstraints.top);\n\n    event.dy = event.dy + y - event.y;\n    event.y = y;\n  }\n\n  if (spaceToolConstraints.bottom) {\n    y = Math.min(event.y, spaceToolConstraints.bottom);\n\n    event.dy = event.dy + y - event.y;\n    event.y = y;\n  }\n}\n\nfunction getSpaceToolConstraints(elements, axis, direction, start, minDimensions) {\n  var movingShapes = elements.movingShapes,\n      resizingShapes = elements.resizingShapes;\n\n  if (!resizingShapes.length) {\n    return;\n  }\n\n  var spaceToolConstraints = {},\n      min,\n      max;\n\n  forEach(resizingShapes, function(resizingShape) {\n    var resizingShapeBBox = asTRBL(resizingShape);\n\n    // find children that are not moving or resizing\n    var nonMovingResizingChildren = filter(resizingShape.children, function(child) {\n      return !isConnection(child) &&\n        !isLabel(child) &&\n        !includes(movingShapes, child) &&\n        !includes(resizingShapes, child);\n    });\n\n    // find children that are moving\n    var movingChildren = filter(resizingShape.children, function(child) {\n      return !isConnection(child) && !isLabel(child) && includes(movingShapes, child);\n    });\n\n    var minOrMax,\n        nonMovingResizingChildrenBBox,\n        movingChildrenBBox;\n\n    if (nonMovingResizingChildren.length) {\n      nonMovingResizingChildrenBBox = addPadding(asTRBL(getBBox(nonMovingResizingChildren)));\n\n      minOrMax = start -\n        resizingShapeBBox[ DIRECTION_TO_TRBL[ direction ] ] +\n        nonMovingResizingChildrenBBox[ DIRECTION_TO_TRBL[ direction ] ];\n\n      if (direction === 'n') {\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n\n    if (movingChildren.length) {\n      movingChildrenBBox = addPadding(asTRBL(getBBox(movingChildren)));\n\n      minOrMax = start -\n        movingChildrenBBox[ DIRECTION_TO_TRBL[ DIRECTION_TO_OPPOSITE[ direction ] ] ] +\n        resizingShapeBBox[ DIRECTION_TO_TRBL[ DIRECTION_TO_OPPOSITE[ direction ] ] ];\n\n      if (direction === 'n') {\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n\n    var resizingShapeMinDimensions = minDimensions && minDimensions[ resizingShape.id ];\n\n    if (resizingShapeMinDimensions) {\n      if (direction === 'n') {\n        minOrMax = start +\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] -\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.bottom = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 'w') {\n        minOrMax = start +\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] -\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.right = max = isNumber(max) ? Math.min(max, minOrMax) : minOrMax;\n      } else if (direction === 's') {\n        minOrMax = start -\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] +\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.top = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      } else if (direction === 'e') {\n        minOrMax = start -\n          resizingShape[ AXIS_TO_DIMENSION [ axis ] ] +\n          resizingShapeMinDimensions[ AXIS_TO_DIMENSION[ axis ] ];\n\n        spaceToolConstraints.left = min = isNumber(min) ? Math.max(min, minOrMax) : minOrMax;\n      }\n    }\n  });\n\n  return spaceToolConstraints;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nfunction isConnection(element) {\n  return !!element.waypoints;\n}\n\nfunction isLabel(element) {\n  return !!element.labelTarget;\n}","import {\n  forEach\n} from 'min-dash';\n\nvar MARKER_DRAGGING = 'djs-dragging',\n    MARKER_RESIZING = 'djs-resizing';\n\nvar LOW_PRIORITY = 250;\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport {\n  translate\n} from '../../util/SvgTransformUtil';\n\nvar max = Math.max;\n\n\n/**\n * Provides previews for selecting/moving/resizing shapes when creating/removing space.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Canvas} canvas\n * @param {Styles} styles\n */\nexport default function SpaceToolPreview(\n    eventBus, elementRegistry, canvas,\n    styles, previewSupport) {\n\n  function addPreviewGfx(collection, dragGroup) {\n    forEach(collection, function(element) {\n      previewSupport.addDragger(element, dragGroup);\n\n      canvas.addMarker(element, MARKER_DRAGGING);\n    });\n  }\n\n  // add crosshair\n  eventBus.on('spaceTool.selection.start', function(event) {\n    var space = canvas.getLayer('space'),\n        context = event.context;\n\n    var orientation = {\n      x: 'M 0,-10000 L 0,10000',\n      y: 'M -10000,0 L 10000,0'\n    };\n\n    var crosshairGroup = svgCreate('g');\n    svgAttr(crosshairGroup, styles.cls('djs-crosshair-group', [ 'no-events' ]));\n\n    svgAppend(space, crosshairGroup);\n\n    // horizontal path\n    var pathX = svgCreate('path');\n    svgAttr(pathX, 'd', orientation.x);\n    svgClasses(pathX).add('djs-crosshair');\n\n    svgAppend(crosshairGroup, pathX);\n\n    // vertical path\n    var pathY = svgCreate('path');\n    svgAttr(pathY, 'd', orientation.y);\n    svgClasses(pathY).add('djs-crosshair');\n\n    svgAppend(crosshairGroup, pathY);\n\n    context.crosshairGroup = crosshairGroup;\n  });\n\n  // update crosshair\n  eventBus.on('spaceTool.selection.move', function(event) {\n    var crosshairGroup = event.context.crosshairGroup;\n\n    translate(crosshairGroup, event.x, event.y);\n  });\n\n  // remove crosshair\n  eventBus.on('spaceTool.selection.cleanup', function(event) {\n    var context = event.context,\n        crosshairGroup = context.crosshairGroup;\n\n    if (crosshairGroup) {\n      svgRemove(crosshairGroup);\n    }\n  });\n\n  // add and update move/resize previews\n  eventBus.on('spaceTool.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        line = context.line,\n        axis = context.axis,\n        movingShapes = context.movingShapes,\n        resizingShapes = context.resizingShapes;\n\n    if (!context.initialized) {\n      return;\n    }\n\n    if (!context.dragGroup) {\n      var spaceLayer = canvas.getLayer('space');\n\n      line = svgCreate('path');\n      svgAttr(line, 'd', 'M0,0 L0,0');\n      svgClasses(line).add('djs-crosshair');\n\n      svgAppend(spaceLayer, line);\n\n      context.line = line;\n\n      var dragGroup = svgCreate('g');\n      svgAttr(dragGroup, styles.cls('djs-drag-group', [ 'no-events' ]));\n\n      svgAppend(canvas.getDefaultLayer(), dragGroup);\n\n      // shapes\n      addPreviewGfx(movingShapes, dragGroup);\n\n      // connections\n      var movingConnections = context.movingConnections = elementRegistry.filter(function(element) {\n        var sourceIsMoving = false;\n\n        forEach(movingShapes, function(shape) {\n          forEach(shape.outgoing, function(connection) {\n            if (element === connection) {\n              sourceIsMoving = true;\n            }\n          });\n        });\n\n        var targetIsMoving = false;\n\n        forEach(movingShapes, function(shape) {\n          forEach(shape.incoming, function(connection) {\n            if (element === connection) {\n              targetIsMoving = true;\n            }\n          });\n        });\n\n        var sourceIsResizing = false;\n\n        forEach(resizingShapes, function(shape) {\n          forEach(shape.outgoing, function(connection) {\n            if (element === connection) {\n              sourceIsResizing = true;\n            }\n          });\n        });\n\n        var targetIsResizing = false;\n\n        forEach(resizingShapes, function(shape) {\n          forEach(shape.incoming, function(connection) {\n            if (element === connection) {\n              targetIsResizing = true;\n            }\n          });\n        });\n\n        return isConnection(element)\n          && (sourceIsMoving || sourceIsResizing)\n          && (targetIsMoving || targetIsResizing);\n      });\n\n\n      addPreviewGfx(movingConnections, dragGroup);\n\n      context.dragGroup = dragGroup;\n    }\n\n    if (!context.frameGroup) {\n      var frameGroup = svgCreate('g');\n      svgAttr(frameGroup, styles.cls('djs-frame-group', [ 'no-events' ]));\n\n      svgAppend(canvas.getDefaultLayer(), frameGroup);\n\n      var frames = [];\n\n      forEach(resizingShapes, function(shape) {\n        var frame = previewSupport.addFrame(shape, frameGroup);\n\n        var initialBounds = frame.getBBox();\n\n        frames.push({\n          element: frame,\n          initialBounds: initialBounds\n        });\n\n        canvas.addMarker(shape, MARKER_RESIZING);\n      });\n\n      context.frameGroup = frameGroup;\n      context.frames = frames;\n    }\n\n    var orientation = {\n      x: 'M' + event.x + ', -10000 L' + event.x + ', 10000',\n      y: 'M -10000, ' + event.y + ' L 10000, ' + event.y\n    };\n\n    svgAttr(line, { d: orientation[ axis ] });\n\n    var opposite = { x: 'y', y: 'x' };\n    var delta = { x: event.dx, y: event.dy };\n    delta[ opposite[ context.axis ] ] = 0;\n\n    // update move previews\n    translate(context.dragGroup, delta.x, delta.y);\n\n    // update resize previews\n    forEach(context.frames, function(frame) {\n      var element = frame.element,\n          initialBounds = frame.initialBounds,\n          width,\n          height;\n\n      if (context.direction === 'e') {\n        svgAttr(element, {\n          width: max(initialBounds.width + delta.x, 5)\n        });\n      } else {\n        width = max(initialBounds.width - delta.x, 5);\n\n        svgAttr(element, {\n          width: width,\n          x: initialBounds.x + initialBounds.width - width\n        });\n      }\n\n      if (context.direction === 's') {\n        svgAttr(element, {\n          height: max(initialBounds.height + delta.y, 5)\n        });\n      } else {\n        height = max(initialBounds.height - delta.y, 5);\n\n        svgAttr(element, {\n          height: height,\n          y: initialBounds.y + initialBounds.height - height\n        });\n      }\n    });\n\n  });\n\n  // remove move/resize previews\n  eventBus.on('spaceTool.cleanup', function(event) {\n\n    var context = event.context,\n        movingShapes = context.movingShapes,\n        movingConnections = context.movingConnections,\n        resizingShapes = context.resizingShapes,\n        line = context.line,\n        dragGroup = context.dragGroup,\n        frameGroup = context.frameGroup;\n\n    // moving shapes\n    forEach(movingShapes, function(shape) {\n      canvas.removeMarker(shape, MARKER_DRAGGING);\n    });\n\n    // moving connections\n    forEach(movingConnections, function(connection) {\n      canvas.removeMarker(connection, MARKER_DRAGGING);\n    });\n\n    if (dragGroup) {\n      svgRemove(line);\n      svgRemove(dragGroup);\n    }\n\n    forEach(resizingShapes, function(shape) {\n      canvas.removeMarker(shape, MARKER_RESIZING);\n    });\n\n    if (frameGroup) {\n      svgRemove(frameGroup);\n    }\n  });\n}\n\nSpaceToolPreview.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'canvas',\n  'styles',\n  'previewSupport'\n];\n\n\n// helpers //////////////////////\n\n/**\n * Checks if an element is a connection.\n */\nfunction isConnection(element) {\n  return element.waypoints;\n}\n","import DraggingModule from '../dragging';\nimport RulesModule from '../rules';\nimport ToolManagerModule from '../tool-manager';\nimport PreviewSupportModule from '../preview-support';\n\nimport SpaceTool from './SpaceTool';\nimport SpaceToolPreview from './SpaceToolPreview';\n\nexport default {\n  __init__: ['spaceToolPreview'],\n  __depends__: [\n    DraggingModule,\n    RulesModule,\n    ToolManagerModule,\n    PreviewSupportModule\n  ],\n  spaceTool: ['type', SpaceTool ],\n  spaceToolPreview: ['type', SpaceToolPreview ]\n};\n","import {\n  map,\n  assign,\n  pick\n} from 'min-dash';\n\nimport {\n  isAny\n} from './util/ModelingUtil';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\n\nexport default function BpmnFactory(moddle) {\n  this._model = moddle;\n}\n\nBpmnFactory.$inject = [ 'moddle' ];\n\n\nBpmnFactory.prototype._needsId = function(element) {\n  return isAny(element, [\n    'bpmn:RootElement',\n    'bpmn:FlowElement',\n    'bpmn:MessageFlow',\n    'bpmn:DataAssociation',\n    'bpmn:Artifact',\n    'bpmn:Participant',\n    'bpmn:Lane',\n    'bpmn:LaneSet',\n    'bpmn:Process',\n    'bpmn:Collaboration',\n    'bpmndi:BPMNShape',\n    'bpmndi:BPMNEdge',\n    'bpmndi:BPMNDiagram',\n    'bpmndi:BPMNPlane',\n    'bpmn:Property',\n    'bpmn:CategoryValue'\n  ]);\n};\n\nBpmnFactory.prototype._ensureId = function(element) {\n\n  // generate semantic ids for elements\n  // bpmn:SequenceFlow -> SequenceFlow_ID\n  var prefix;\n\n  if (is(element, 'bpmn:Activity')) {\n    prefix = 'Activity';\n  } else if (is(element, 'bpmn:Event')) {\n    prefix = 'Event';\n  } else if (is(element, 'bpmn:Gateway')) {\n    prefix = 'Gateway';\n  } else if (is(element, 'bpmn:FlowElement')) {\n    prefix = 'Flow';\n  } else {\n    prefix = (element.$type || '').replace(/^[^:]*:/g, '');\n  }\n\n  prefix += '_';\n\n  if (!element.id && this._needsId(element)) {\n    element.id = this._model.ids.nextPrefixed(prefix, element);\n  }\n};\n\n\nBpmnFactory.prototype.create = function(type, attrs) {\n  var element = this._model.create(type, attrs || {});\n\n  this._ensureId(element);\n\n  return element;\n};\n\n\nBpmnFactory.prototype.createDiLabel = function() {\n  return this.create('bpmndi:BPMNLabel', {\n    bounds: this.createDiBounds()\n  });\n};\n\n\nBpmnFactory.prototype.createDiShape = function(semantic, bounds, attrs) {\n\n  return this.create('bpmndi:BPMNShape', assign({\n    bpmnElement: semantic,\n    bounds: this.createDiBounds(bounds)\n  }, attrs));\n};\n\n\nBpmnFactory.prototype.createDiBounds = function(bounds) {\n  return this.create('dc:Bounds', bounds);\n};\n\n\nBpmnFactory.prototype.createDiWaypoints = function(waypoints) {\n  var self = this;\n\n  return map(waypoints, function(pos) {\n    return self.createDiWaypoint(pos);\n  });\n};\n\nBpmnFactory.prototype.createDiWaypoint = function(point) {\n  return this.create('dc:Point', pick(point, [ 'x', 'y' ]));\n};\n\n\nBpmnFactory.prototype.createDiEdge = function(semantic, waypoints, attrs) {\n  return this.create('bpmndi:BPMNEdge', assign({\n    bpmnElement: semantic\n  }, attrs));\n};\n\nBpmnFactory.prototype.createDiPlane = function(semantic) {\n  return this.create('bpmndi:BPMNPlane', {\n    bpmnElement: semantic\n  });\n};","import {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport inherits from 'inherits';\n\nimport {\n  remove as collectionRemove,\n  add as collectionAdd\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  Label\n} from 'diagram-js/lib/model';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isAny\n} from './util/ModelingUtil';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\n/**\n * A handler responsible for updating the underlying BPMN 2.0 XML + DI\n * once changes on the diagram happen\n */\nexport default function BpmnUpdater(\n    eventBus, bpmnFactory, connectionDocking,\n    translate) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  this._bpmnFactory = bpmnFactory;\n  this._translate = translate;\n\n  var self = this;\n\n\n\n  // connection cropping //////////////////////\n\n  // crop connection ends during create/update\n  function cropConnection(e) {\n    var context = e.context,\n        hints = context.hints || {},\n        connection;\n\n    if (!context.cropped && hints.createElementsBehavior !== false) {\n      connection = context.connection;\n      connection.waypoints = connectionDocking.getCroppedWaypoints(connection);\n      context.cropped = true;\n    }\n  }\n\n  this.executed([\n    'connection.layout',\n    'connection.create'\n  ], cropConnection);\n\n  this.reverted([ 'connection.layout' ], function(e) {\n    delete e.context.cropped;\n  });\n\n\n\n  // BPMN + DI update //////////////////////\n\n\n  // update parent\n  function updateParent(e) {\n    var context = e.context;\n\n    self.updateParent(context.shape || context.connection, context.oldParent);\n  }\n\n  function reverseUpdateParent(e) {\n    var context = e.context;\n\n    var element = context.shape || context.connection,\n\n        // oldParent is the (old) new parent, because we are undoing\n        oldParent = context.parent || context.newParent;\n\n    self.updateParent(element, oldParent);\n  }\n\n  this.executed([\n    'shape.move',\n    'shape.create',\n    'shape.delete',\n    'connection.create',\n    'connection.move',\n    'connection.delete'\n  ], ifBpmn(updateParent));\n\n  this.reverted([\n    'shape.move',\n    'shape.create',\n    'shape.delete',\n    'connection.create',\n    'connection.move',\n    'connection.delete'\n  ], ifBpmn(reverseUpdateParent));\n\n  /*\n   * ## Updating Parent\n   *\n   * When morphing a Process into a Collaboration or vice-versa,\n   * make sure that both the *semantic* and *di* parent of each element\n   * is updated.\n   *\n   */\n  function updateRoot(event) {\n    var context = event.context,\n        oldRoot = context.oldRoot,\n        children = oldRoot.children;\n\n    forEach(children, function(child) {\n      if (is(child, 'bpmn:BaseElement')) {\n        self.updateParent(child);\n      }\n    });\n  }\n\n  this.executed([ 'canvas.updateRoot' ], updateRoot);\n  this.reverted([ 'canvas.updateRoot' ], updateRoot);\n\n\n  // update bounds\n  function updateBounds(e) {\n    var shape = e.context.shape;\n\n    if (!is(shape, 'bpmn:BaseElement')) {\n      return;\n    }\n\n    self.updateBounds(shape);\n  }\n\n  this.executed([ 'shape.move', 'shape.create', 'shape.resize' ], ifBpmn(function(event) {\n\n    // exclude labels because they're handled separately during shape.changed\n    if (event.context.shape.type === 'label') {\n      return;\n    }\n\n    updateBounds(event);\n  }));\n\n  this.reverted([ 'shape.move', 'shape.create', 'shape.resize' ], ifBpmn(function(event) {\n\n    // exclude labels because they're handled separately during shape.changed\n    if (event.context.shape.type === 'label') {\n      return;\n    }\n\n    updateBounds(event);\n  }));\n\n  // Handle labels separately. This is necessary, because the label bounds have to be updated\n  // every time its shape changes, not only on move, create and resize.\n  eventBus.on('shape.changed', function(event) {\n    if (event.element.type === 'label') {\n      updateBounds({ context: { shape: event.element } });\n    }\n  });\n\n  // attach / detach connection\n  function updateConnection(e) {\n    self.updateConnection(e.context);\n  }\n\n  this.executed([\n    'connection.create',\n    'connection.move',\n    'connection.delete',\n    'connection.reconnect'\n  ], ifBpmn(updateConnection));\n\n  this.reverted([\n    'connection.create',\n    'connection.move',\n    'connection.delete',\n    'connection.reconnect'\n  ], ifBpmn(updateConnection));\n\n\n  // update waypoints\n  function updateConnectionWaypoints(e) {\n    self.updateConnectionWaypoints(e.context.connection);\n  }\n\n  this.executed([\n    'connection.layout',\n    'connection.move',\n    'connection.updateWaypoints',\n  ], ifBpmn(updateConnectionWaypoints));\n\n  this.reverted([\n    'connection.layout',\n    'connection.move',\n    'connection.updateWaypoints',\n  ], ifBpmn(updateConnectionWaypoints));\n\n  // update conditional/default flows\n  this.executed('connection.reconnect', ifBpmn(function(event) {\n    var context = event.context,\n        connection = context.connection,\n        oldSource = context.oldSource,\n        newSource = context.newSource,\n        connectionBo = getBusinessObject(connection),\n        oldSourceBo = getBusinessObject(oldSource),\n        newSourceBo = getBusinessObject(newSource);\n\n    // remove condition from connection on reconnect to new source\n    // if new source can NOT have condional sequence flow\n    if (connectionBo.conditionExpression && !isAny(newSourceBo, [\n      'bpmn:Activity',\n      'bpmn:ExclusiveGateway',\n      'bpmn:InclusiveGateway'\n    ])) {\n      context.oldConditionExpression = connectionBo.conditionExpression;\n\n      delete connectionBo.conditionExpression;\n    }\n\n    // remove default from old source flow on reconnect to new source\n    // if source changed\n    if (oldSource !== newSource && oldSourceBo.default === connectionBo) {\n      context.oldDefault = oldSourceBo.default;\n\n      delete oldSourceBo.default;\n    }\n  }));\n\n  this.reverted('connection.reconnect', ifBpmn(function(event) {\n    var context = event.context,\n        connection = context.connection,\n        oldSource = context.oldSource,\n        newSource = context.newSource,\n        connectionBo = getBusinessObject(connection),\n        oldSourceBo = getBusinessObject(oldSource),\n        newSourceBo = getBusinessObject(newSource);\n\n    // add condition to connection on revert reconnect to new source\n    if (context.oldConditionExpression) {\n      connectionBo.conditionExpression = context.oldConditionExpression;\n    }\n\n    // add default to old source on revert reconnect to new source\n    if (context.oldDefault) {\n      oldSourceBo.default = context.oldDefault;\n\n      delete newSourceBo.default;\n    }\n  }));\n\n  // update attachments\n  function updateAttachment(e) {\n    self.updateAttachment(e.context);\n  }\n\n  this.executed([ 'element.updateAttachment' ], ifBpmn(updateAttachment));\n  this.reverted([ 'element.updateAttachment' ], ifBpmn(updateAttachment));\n}\n\ninherits(BpmnUpdater, CommandInterceptor);\n\nBpmnUpdater.$inject = [\n  'eventBus',\n  'bpmnFactory',\n  'connectionDocking',\n  'translate'\n];\n\n\n// implementation //////////////////////\n\nBpmnUpdater.prototype.updateAttachment = function(context) {\n\n  var shape = context.shape,\n      businessObject = shape.businessObject,\n      host = shape.host;\n\n  businessObject.attachedToRef = host && host.businessObject;\n};\n\nBpmnUpdater.prototype.updateParent = function(element, oldParent) {\n\n  // do not update BPMN 2.0 label parent\n  if (element instanceof Label) {\n    return;\n  }\n\n  // data stores in collaborations are handled separately by DataStoreBehavior\n  if (is(element, 'bpmn:DataStoreReference') &&\n      element.parent &&\n      is(element.parent, 'bpmn:Collaboration')) {\n    return;\n  }\n\n  var parentShape = element.parent;\n\n  var businessObject = element.businessObject,\n      parentBusinessObject = parentShape && parentShape.businessObject,\n      parentDi = parentBusinessObject && parentBusinessObject.di;\n\n  if (is(element, 'bpmn:FlowNode')) {\n    this.updateFlowNodeRefs(businessObject, parentBusinessObject, oldParent && oldParent.businessObject);\n  }\n\n  if (is(element, 'bpmn:DataOutputAssociation')) {\n    if (element.source) {\n      parentBusinessObject = element.source.businessObject;\n    } else {\n      parentBusinessObject = null;\n    }\n  }\n\n  if (is(element, 'bpmn:DataInputAssociation')) {\n    if (element.target) {\n      parentBusinessObject = element.target.businessObject;\n    } else {\n      parentBusinessObject = null;\n    }\n  }\n\n  this.updateSemanticParent(businessObject, parentBusinessObject);\n\n  if (is(element, 'bpmn:DataObjectReference') && businessObject.dataObjectRef) {\n    this.updateSemanticParent(businessObject.dataObjectRef, parentBusinessObject);\n  }\n\n  this.updateDiParent(businessObject.di, parentDi);\n};\n\n\nBpmnUpdater.prototype.updateBounds = function(shape) {\n\n  var di = shape.businessObject.di;\n\n  var target = (shape instanceof Label) ? this._getLabel(di) : di;\n\n  var bounds = target.bounds;\n\n  if (!bounds) {\n    bounds = this._bpmnFactory.createDiBounds();\n    target.set('bounds', bounds);\n  }\n\n  assign(bounds, {\n    x: shape.x,\n    y: shape.y,\n    width: shape.width,\n    height: shape.height\n  });\n};\n\nBpmnUpdater.prototype.updateFlowNodeRefs = function(businessObject, newContainment, oldContainment) {\n\n  if (oldContainment === newContainment) {\n    return;\n  }\n\n  var oldRefs, newRefs;\n\n  if (is (oldContainment, 'bpmn:Lane')) {\n    oldRefs = oldContainment.get('flowNodeRef');\n    collectionRemove(oldRefs, businessObject);\n  }\n\n  if (is(newContainment, 'bpmn:Lane')) {\n    newRefs = newContainment.get('flowNodeRef');\n    collectionAdd(newRefs, businessObject);\n  }\n};\n\n\n// update existing sourceElement and targetElement di information\nBpmnUpdater.prototype.updateDiConnection = function(di, newSource, newTarget) {\n\n  if (di.sourceElement && di.sourceElement.bpmnElement !== newSource) {\n    di.sourceElement = newSource && newSource.di;\n  }\n\n  if (di.targetElement && di.targetElement.bpmnElement !== newTarget) {\n    di.targetElement = newTarget && newTarget.di;\n  }\n\n};\n\n\nBpmnUpdater.prototype.updateDiParent = function(di, parentDi) {\n\n  if (parentDi && !is(parentDi, 'bpmndi:BPMNPlane')) {\n    parentDi = parentDi.$parent;\n  }\n\n  if (di.$parent === parentDi) {\n    return;\n  }\n\n  var planeElements = (parentDi || di.$parent).get('planeElement');\n\n  if (parentDi) {\n    planeElements.push(di);\n    di.$parent = parentDi;\n  } else {\n    collectionRemove(planeElements, di);\n    di.$parent = null;\n  }\n};\n\nfunction getDefinitions(element) {\n  while (element && !is(element, 'bpmn:Definitions')) {\n    element = element.$parent;\n  }\n\n  return element;\n}\n\nBpmnUpdater.prototype.getLaneSet = function(container) {\n\n  var laneSet, laneSets;\n\n  // bpmn:Lane\n  if (is(container, 'bpmn:Lane')) {\n    laneSet = container.childLaneSet;\n\n    if (!laneSet) {\n      laneSet = this._bpmnFactory.create('bpmn:LaneSet');\n      container.childLaneSet = laneSet;\n      laneSet.$parent = container;\n    }\n\n    return laneSet;\n  }\n\n  // bpmn:Participant\n  if (is(container, 'bpmn:Participant')) {\n    container = container.processRef;\n  }\n\n  // bpmn:FlowElementsContainer\n  laneSets = container.get('laneSets');\n  laneSet = laneSets[0];\n\n  if (!laneSet) {\n    laneSet = this._bpmnFactory.create('bpmn:LaneSet');\n    laneSet.$parent = container;\n    laneSets.push(laneSet);\n  }\n\n  return laneSet;\n};\n\nBpmnUpdater.prototype.updateSemanticParent = function(businessObject, newParent, visualParent) {\n\n  var containment,\n      translate = this._translate;\n\n  if (businessObject.$parent === newParent) {\n    return;\n  }\n\n  if (is(businessObject, 'bpmn:DataInput') || is(businessObject, 'bpmn:DataOutput')) {\n\n    if (is(newParent, 'bpmn:Participant') && 'processRef' in newParent) {\n      newParent = newParent.processRef;\n    }\n\n    // already in correct ioSpecification\n    if ('ioSpecification' in newParent && newParent.ioSpecification === businessObject.$parent) {\n      return;\n    }\n  }\n\n  if (is(businessObject, 'bpmn:Lane')) {\n\n    if (newParent) {\n      newParent = this.getLaneSet(newParent);\n    }\n\n    containment = 'lanes';\n  } else\n\n  if (is(businessObject, 'bpmn:FlowElement')) {\n\n    if (newParent) {\n\n      if (is(newParent, 'bpmn:Participant')) {\n        newParent = newParent.processRef;\n      } else\n\n      if (is(newParent, 'bpmn:Lane')) {\n        do {\n\n          // unwrap Lane -> LaneSet -> (Lane | FlowElementsContainer)\n          newParent = newParent.$parent.$parent;\n        } while (is(newParent, 'bpmn:Lane'));\n\n      }\n    }\n\n    containment = 'flowElements';\n\n  } else\n\n  if (is(businessObject, 'bpmn:Artifact')) {\n\n    while (newParent &&\n           !is(newParent, 'bpmn:Process') &&\n           !is(newParent, 'bpmn:SubProcess') &&\n           !is(newParent, 'bpmn:Collaboration')) {\n\n      if (is(newParent, 'bpmn:Participant')) {\n        newParent = newParent.processRef;\n        break;\n      } else {\n        newParent = newParent.$parent;\n      }\n    }\n\n    containment = 'artifacts';\n  } else\n\n  if (is(businessObject, 'bpmn:MessageFlow')) {\n    containment = 'messageFlows';\n\n  } else\n\n  if (is(businessObject, 'bpmn:Participant')) {\n    containment = 'participants';\n\n    // make sure the participants process is properly attached / detached\n    // from the XML document\n\n    var process = businessObject.processRef,\n        definitions;\n\n    if (process) {\n      definitions = getDefinitions(businessObject.$parent || newParent);\n\n      if (businessObject.$parent) {\n        collectionRemove(definitions.get('rootElements'), process);\n        process.$parent = null;\n      }\n\n      if (newParent) {\n        collectionAdd(definitions.get('rootElements'), process);\n        process.$parent = definitions;\n      }\n    }\n  } else\n\n  if (is(businessObject, 'bpmn:DataOutputAssociation')) {\n    containment = 'dataOutputAssociations';\n  } else\n\n  if (is(businessObject, 'bpmn:DataInputAssociation')) {\n    containment = 'dataInputAssociations';\n  }\n\n  if (!containment) {\n    throw new Error(translate(\n      'no parent for {element} in {parent}',\n      {\n        element: businessObject.id,\n        parent: newParent.id\n      }\n    ));\n  }\n\n  var children;\n\n  if (businessObject.$parent) {\n\n    // remove from old parent\n    children = businessObject.$parent.get(containment);\n    collectionRemove(children, businessObject);\n  }\n\n  if (!newParent) {\n    businessObject.$parent = null;\n  } else {\n\n    // add to new parent\n    children = newParent.get(containment);\n    children.push(businessObject);\n    businessObject.$parent = newParent;\n  }\n\n  if (visualParent) {\n    var diChildren = visualParent.get(containment);\n\n    collectionRemove(children, businessObject);\n\n    if (newParent) {\n\n      if (!diChildren) {\n        diChildren = [];\n        newParent.set(containment, diChildren);\n      }\n\n      diChildren.push(businessObject);\n    }\n  }\n};\n\n\nBpmnUpdater.prototype.updateConnectionWaypoints = function(connection) {\n  connection.businessObject.di.set('waypoint', this._bpmnFactory.createDiWaypoints(connection.waypoints));\n};\n\n\nBpmnUpdater.prototype.updateConnection = function(context) {\n\n  var connection = context.connection,\n      businessObject = getBusinessObject(connection),\n      newSource = getBusinessObject(connection.source),\n      newTarget = getBusinessObject(connection.target),\n      visualParent;\n\n  if (!is(businessObject, 'bpmn:DataAssociation')) {\n\n    var inverseSet = is(businessObject, 'bpmn:SequenceFlow');\n\n    if (businessObject.sourceRef !== newSource) {\n      if (inverseSet) {\n        collectionRemove(businessObject.sourceRef && businessObject.sourceRef.get('outgoing'), businessObject);\n\n        if (newSource && newSource.get('outgoing')) {\n          newSource.get('outgoing').push(businessObject);\n        }\n      }\n\n      businessObject.sourceRef = newSource;\n    }\n\n    if (businessObject.targetRef !== newTarget) {\n      if (inverseSet) {\n        collectionRemove(businessObject.targetRef && businessObject.targetRef.get('incoming'), businessObject);\n\n        if (newTarget && newTarget.get('incoming')) {\n          newTarget.get('incoming').push(businessObject);\n        }\n      }\n\n      businessObject.targetRef = newTarget;\n    }\n  } else\n\n  if (is(businessObject, 'bpmn:DataInputAssociation')) {\n\n    // handle obnoxious isMsome sourceRef\n    businessObject.get('sourceRef')[0] = newSource;\n\n    visualParent = context.parent || context.newParent || newTarget;\n\n    this.updateSemanticParent(businessObject, newTarget, visualParent);\n  } else\n\n  if (is(businessObject, 'bpmn:DataOutputAssociation')) {\n    visualParent = context.parent || context.newParent || newSource;\n\n    this.updateSemanticParent(businessObject, newSource, visualParent);\n\n    // targetRef = new target\n    businessObject.targetRef = newTarget;\n  }\n\n  this.updateConnectionWaypoints(connection);\n\n  this.updateDiConnection(businessObject.di, newSource, newTarget);\n};\n\n\n// helpers //////////////////////\n\nBpmnUpdater.prototype._getLabel = function(di) {\n  if (!di.label) {\n    di.label = this._bpmnFactory.createDiLabel();\n  }\n\n  return di.label;\n};\n\n\n/**\n * Make sure the event listener is only called\n * if the touched element is a BPMN element.\n *\n * @param  {Function} fn\n * @return {Function} guarded function\n */\nfunction ifBpmn(fn) {\n\n  return function(event) {\n\n    var context = event.context,\n        element = context.shape || context.connection;\n\n    if (is(element, 'bpmn:BaseElement')) {\n      fn(event);\n    }\n  };\n}\n","import {\n  assign,\n  forEach,\n  isObject\n} from 'min-dash';\n\nimport inherits from 'inherits';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  isExpanded\n} from '../../util/DiUtil';\n\nimport BaseElementFactory from 'diagram-js/lib/core/ElementFactory';\n\nimport {\n  DEFAULT_LABEL_SIZE\n} from '../../util/LabelUtil';\n\n\n/**\n * A bpmn-aware factory for diagram-js shapes\n */\nexport default function ElementFactory(bpmnFactory, moddle, translate) {\n  BaseElementFactory.call(this);\n\n  this._bpmnFactory = bpmnFactory;\n  this._moddle = moddle;\n  this._translate = translate;\n}\n\ninherits(ElementFactory, BaseElementFactory);\n\nElementFactory.$inject = [\n  'bpmnFactory',\n  'moddle',\n  'translate'\n];\n\nElementFactory.prototype.baseCreate = BaseElementFactory.prototype.create;\n\nElementFactory.prototype.create = function(elementType, attrs) {\n\n  // no special magic for labels,\n  // we assume their businessObjects have already been created\n  // and wired via attrs\n  if (elementType === 'label') {\n    return this.baseCreate(elementType, assign({ type: 'label' }, DEFAULT_LABEL_SIZE, attrs));\n  }\n\n  return this.createBpmnElement(elementType, attrs);\n};\n\nElementFactory.prototype.createBpmnElement = function(elementType, attrs) {\n  var size,\n      translate = this._translate;\n\n  attrs = attrs || {};\n\n  var businessObject = attrs.businessObject;\n\n  if (!businessObject) {\n    if (!attrs.type) {\n      throw new Error(translate('no shape type specified'));\n    }\n\n    businessObject = this._bpmnFactory.create(attrs.type);\n  }\n\n  if (!businessObject.di) {\n    if (elementType === 'root') {\n      businessObject.di = this._bpmnFactory.createDiPlane(businessObject, [], {\n        id: businessObject.id + '_di'\n      });\n    } else\n    if (elementType === 'connection') {\n      businessObject.di = this._bpmnFactory.createDiEdge(businessObject, [], {\n        id: businessObject.id + '_di'\n      });\n    } else {\n      businessObject.di = this._bpmnFactory.createDiShape(businessObject, {}, {\n        id: businessObject.id + '_di'\n      });\n    }\n  }\n\n  if (is(businessObject, 'bpmn:Group')) {\n    attrs = assign({\n      isFrame: true\n    }, attrs);\n  }\n\n  if (attrs.di) {\n    assign(businessObject.di, attrs.di);\n\n    delete attrs.di;\n  }\n\n  applyAttributes(businessObject, attrs, [\n    'processRef',\n    'isInterrupting',\n    'associationDirection',\n    'isForCompensation'\n  ]);\n\n  if (attrs.isExpanded) {\n    applyAttribute(businessObject.di, attrs, 'isExpanded');\n  }\n\n  if (is(businessObject, 'bpmn:ExclusiveGateway')) {\n    businessObject.di.isMarkerVisible = true;\n  }\n\n  var eventDefinitions,\n      newEventDefinition;\n\n  if (attrs.eventDefinitionType) {\n    eventDefinitions = businessObject.get('eventDefinitions') || [];\n    newEventDefinition = this._bpmnFactory.create(attrs.eventDefinitionType);\n\n    if (attrs.eventDefinitionType === 'bpmn:ConditionalEventDefinition') {\n      newEventDefinition.condition = this._bpmnFactory.create('bpmn:FormalExpression');\n    }\n\n    eventDefinitions.push(newEventDefinition);\n\n    newEventDefinition.$parent = businessObject;\n    businessObject.eventDefinitions = eventDefinitions;\n\n    delete attrs.eventDefinitionType;\n  }\n\n  size = this._getDefaultSize(businessObject);\n\n  attrs = assign({\n    businessObject: businessObject,\n    id: businessObject.id\n  }, size, attrs);\n\n  return this.baseCreate(elementType, attrs);\n};\n\n\nElementFactory.prototype._getDefaultSize = function(semantic) {\n\n  if (is(semantic, 'bpmn:SubProcess')) {\n\n    if (isExpanded(semantic)) {\n      return { width: 350, height: 200 };\n    } else {\n      return { width: 100, height: 80 };\n    }\n  }\n\n  if (is(semantic, 'bpmn:Task')) {\n    return { width: 100, height: 80 };\n  }\n\n  if (is(semantic, 'bpmn:Gateway')) {\n    return { width: 50, height: 50 };\n  }\n\n  if (is(semantic, 'bpmn:Event')) {\n    return { width: 36, height: 36 };\n  }\n\n  if (is(semantic, 'bpmn:Participant')) {\n    if (isExpanded(semantic)) {\n      return { width: 600, height: 250 };\n    } else {\n      return { width: 400, height: 60 };\n    }\n  }\n\n  if (is(semantic, 'bpmn:Lane')) {\n    return { width: 400, height: 100 };\n  }\n\n  if (is(semantic, 'bpmn:DataObjectReference')) {\n    return { width: 36, height: 50 };\n  }\n\n  if (is(semantic, 'bpmn:DataStoreReference')) {\n    return { width: 50, height: 50 };\n  }\n\n  if (is(semantic, 'bpmn:TextAnnotation')) {\n    return { width: 100, height: 30 };\n  }\n\n  if (is(semantic, 'bpmn:Group')) {\n    return { width: 300, height: 300 };\n  }\n\n  return { width: 100, height: 80 };\n};\n\n\n/**\n * Create participant.\n *\n * @param {boolean|Object} [attrs] attrs\n *\n * @returns {djs.model.Shape}\n */\nElementFactory.prototype.createParticipantShape = function(attrs) {\n\n  if (!isObject(attrs)) {\n    attrs = { isExpanded: attrs };\n  }\n\n  attrs = assign({ type: 'bpmn:Participant' }, attrs || {});\n\n  // participants are expanded by default\n  if (attrs.isExpanded !== false) {\n    attrs.processRef = this._bpmnFactory.create('bpmn:Process');\n  }\n\n  return this.createShape(attrs);\n};\n\n\n// helpers //////////////////////\n\n/**\n * Apply attributes from a map to the given element,\n * remove attribute from the map on application.\n *\n * @param {Base} element\n * @param {Object} attrs (in/out map of attributes)\n * @param {Array<String>} attributeNames name of attributes to apply\n */\nfunction applyAttributes(element, attrs, attributeNames) {\n\n  forEach(attributeNames, function(property) {\n    if (attrs[property] !== undefined) {\n      applyAttribute(element, attrs, property);\n    }\n  });\n}\n\n/**\n * Apply named property to element and drain it from the attrs\n * collection.\n *\n * @param {Base} element\n * @param {Object} attrs (in/out map of attributes)\n * @param {String} attributeName to apply\n */\nfunction applyAttribute(element, attrs, attributeName) {\n  element[attributeName] = attrs[attributeName];\n\n  delete attrs[attributeName];\n}","import { forEach } from 'min-dash';\n\n/**\n * A handler that align elements in a certain way.\n *\n */\nexport default function AlignElements(modeling, canvas) {\n  this._modeling = modeling;\n  this._canvas = canvas;\n}\n\nAlignElements.$inject = [ 'modeling', 'canvas' ];\n\n\nAlignElements.prototype.preExecute = function(context) {\n  var modeling = this._modeling;\n\n  var elements = context.elements,\n      alignment = context.alignment;\n\n\n  forEach(elements, function(element) {\n    var delta = {\n      x: 0,\n      y: 0\n    };\n\n    if (alignment.left) {\n      delta.x = alignment.left - element.x;\n\n    } else if (alignment.right) {\n      delta.x = (alignment.right - element.width) - element.x;\n\n    } else if (alignment.center) {\n      delta.x = (alignment.center - Math.round(element.width / 2)) - element.x;\n\n    } else if (alignment.top) {\n      delta.y = alignment.top - element.y;\n\n    } else if (alignment.bottom) {\n      delta.y = (alignment.bottom - element.height) - element.y;\n\n    } else if (alignment.middle) {\n      delta.y = (alignment.middle - Math.round(element.height / 2)) - element.y;\n    }\n\n    modeling.moveElements([ element ], delta, element.parent);\n  });\n};\n\nAlignElements.prototype.postExecute = function(context) {\n\n};\n","import { some } from 'min-dash';\n\n\n/**\n * A handler that implements reversible appending of shapes\n * to a source shape.\n *\n * @param {canvas} Canvas\n * @param {elementFactory} ElementFactory\n * @param {modeling} Modeling\n */\nexport default function AppendShapeHandler(modeling) {\n  this._modeling = modeling;\n}\n\nAppendShapeHandler.$inject = [ 'modeling' ];\n\n\n// api //////////////////////\n\n\n/**\n * Creates a new shape\n *\n * @param {Object} context\n * @param {ElementDescriptor} context.shape the new shape\n * @param {ElementDescriptor} context.source the source object\n * @param {ElementDescriptor} context.parent the parent object\n * @param {Point} context.position position of the new element\n */\nAppendShapeHandler.prototype.preExecute = function(context) {\n\n  var source = context.source;\n\n  if (!source) {\n    throw new Error('source required');\n  }\n\n  var target = context.target || source.parent,\n      shape = context.shape;\n\n  shape = context.shape =\n    this._modeling.createShape(\n      shape,\n      context.position,\n      target, { attach: context.attach });\n\n  context.shape = shape;\n};\n\nAppendShapeHandler.prototype.postExecute = function(context) {\n  var parent = context.connectionParent || context.shape.parent;\n\n  if (!existsConnection(context.source, context.shape)) {\n\n    // create connection\n    this._modeling.connect(context.source, context.shape, context.connection, parent);\n  }\n};\n\n\nfunction existsConnection(source, target) {\n  return some(source.outgoing, function(c) {\n    return c.target === target;\n  });\n}","export default function CreateConnectionHandler(canvas, layouter) {\n  this._canvas = canvas;\n  this._layouter = layouter;\n}\n\nCreateConnectionHandler.$inject = [ 'canvas', 'layouter' ];\n\n\n// api //////////////////////\n\n\n/**\n * Appends a shape to a target shape\n *\n * @param {Object} context\n * @param {djs.element.Base} context.source the source object\n * @param {djs.element.Base} context.target the parent object\n * @param {Point} context.position position of the new element\n */\nCreateConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      source = context.source,\n      target = context.target,\n      parent = context.parent,\n      parentIndex = context.parentIndex,\n      hints = context.hints;\n\n  if (!source || !target) {\n    throw new Error('source and target required');\n  }\n\n  if (!parent) {\n    throw new Error('parent required');\n  }\n\n  connection.source = source;\n  connection.target = target;\n\n  if (!connection.waypoints) {\n    connection.waypoints = this._layouter.layoutConnection(connection, hints);\n  }\n\n  // add connection\n  this._canvas.addConnection(connection, parent, parentIndex);\n\n  return connection;\n};\n\nCreateConnectionHandler.prototype.revert = function(context) {\n  var connection = context.connection;\n\n  this._canvas.removeConnection(connection);\n\n  connection.source = null;\n  connection.target = null;\n\n  return connection;\n};","import {\r\n  assign,\r\n  forEach,\r\n  isNumber,\r\n  map,\r\n  pick,\r\n  values\r\n} from 'min-dash';\r\n\r\nimport {\r\n  getBBox,\r\n  getParents\r\n} from '../../../util/Elements';\r\n\r\nvar round = Math.round;\r\n\r\nexport default function CreateElementsHandler(modeling) {\r\n  this._modeling = modeling;\r\n}\r\n\r\nCreateElementsHandler.$inject = [\r\n  'modeling'\r\n];\r\n\r\nCreateElementsHandler.prototype.preExecute = function(context) {\r\n  var elements = context.elements,\r\n      parent = context.parent,\r\n      parentIndex = context.parentIndex,\r\n      position = context.position,\r\n      hints = context.hints;\r\n\r\n  var modeling = this._modeling;\r\n\r\n  // make sure each element has x and y\r\n  forEach(elements, function(element) {\r\n    if (!isNumber(element.x)) {\r\n      element.x = 0;\r\n    }\r\n\r\n    if (!isNumber(element.y)) {\r\n      element.y = 0;\r\n    }\r\n  });\r\n\r\n  var bbox = getBBox(elements);\r\n\r\n  // center elements around position\r\n  forEach(elements, function(element) {\r\n    if (isConnection(element)) {\r\n      element.waypoints = map(element.waypoints, function(waypoint) {\r\n        return {\r\n          x: round(waypoint.x - bbox.x - bbox.width / 2 + position.x),\r\n          y: round(waypoint.y - bbox.y - bbox.height / 2 + position.y)\r\n        };\r\n      });\r\n    }\r\n\r\n    assign(element, {\r\n      x: round(element.x - bbox.x - bbox.width / 2 + position.x),\r\n      y: round(element.y - bbox.y - bbox.height / 2 + position.y)\r\n    });\r\n  });\r\n\r\n  var parents = getParents(elements);\r\n\r\n  var cache = {};\r\n\r\n  forEach(elements, function(element) {\r\n    if (isConnection(element)) {\r\n      cache[ element.id ] = isNumber(parentIndex) ?\r\n        modeling.createConnection(\r\n          cache[ element.source.id ],\r\n          cache[ element.target.id ],\r\n          parentIndex,\r\n          element,\r\n          element.parent || parent,\r\n          hints\r\n        ) :\r\n        modeling.createConnection(\r\n          cache[ element.source.id ],\r\n          cache[ element.target.id ],\r\n          element,\r\n          element.parent || parent,\r\n          hints\r\n        );\r\n\r\n      return;\r\n    }\r\n\r\n    var createShapeHints = assign({}, hints);\r\n\r\n    if (parents.indexOf(element) === -1) {\r\n      createShapeHints.autoResize = false;\r\n    }\r\n\r\n    cache[ element.id ] = isNumber(parentIndex) ?\r\n      modeling.createShape(\r\n        element,\r\n        pick(element, [ 'x', 'y', 'width', 'height' ]),\r\n        element.parent || parent,\r\n        parentIndex,\r\n        createShapeHints\r\n      ) :\r\n      modeling.createShape(\r\n        element,\r\n        pick(element, [ 'x', 'y', 'width', 'height' ]),\r\n        element.parent || parent,\r\n        createShapeHints\r\n      );\r\n  });\r\n\r\n  context.elements = values(cache);\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction isConnection(element) {\r\n  return !!element.waypoints;\r\n}","import { assign } from 'min-dash';\n\nvar round = Math.round;\n\n\n/**\n * A handler that implements reversible addition of shapes.\n *\n * @param {canvas} Canvas\n */\nexport default function CreateShapeHandler(canvas) {\n  this._canvas = canvas;\n}\n\nCreateShapeHandler.$inject = [ 'canvas' ];\n\n\n// api //////////////////////\n\n\n/**\n * Appends a shape to a target shape\n *\n * @param {Object} context\n * @param {djs.model.Base} context.parent the parent object\n * @param {Point} context.position position of the new element\n */\nCreateShapeHandler.prototype.execute = function(context) {\n\n  var shape = context.shape,\n      positionOrBounds = context.position,\n      parent = context.parent,\n      parentIndex = context.parentIndex;\n\n  if (!parent) {\n    throw new Error('parent required');\n  }\n\n  if (!positionOrBounds) {\n    throw new Error('position required');\n  }\n\n  // (1) add at event center position _or_ at given bounds\n  if (positionOrBounds.width !== undefined) {\n    assign(shape, positionOrBounds);\n  } else {\n    assign(shape, {\n      x: positionOrBounds.x - round(shape.width / 2),\n      y: positionOrBounds.y - round(shape.height / 2)\n    });\n  }\n\n  // (2) add to canvas\n  this._canvas.addShape(shape, parent, parentIndex);\n\n  return shape;\n};\n\n\n/**\n * Undo append by removing the shape\n */\nCreateShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape;\n\n  // (3) remove form canvas\n  this._canvas.removeShape(shape);\n\n  return shape;\n};","import inherits from 'inherits';\n\nimport CreateShapeHandler from './CreateShapeHandler';\n\n\n/**\n * A handler that attaches a label to a given target shape.\n *\n * @param {Canvas} canvas\n */\nexport default function CreateLabelHandler(canvas) {\n  CreateShapeHandler.call(this, canvas);\n}\n\ninherits(CreateLabelHandler, CreateShapeHandler);\n\nCreateLabelHandler.$inject = [ 'canvas' ];\n\n\n// api //////////////////////\n\n\nvar originalExecute = CreateShapeHandler.prototype.execute;\n\n/**\n * Appends a label to a target shape.\n *\n * @method CreateLabelHandler#execute\n *\n * @param {Object} context\n * @param {ElementDescriptor} context.target the element the label is attached to\n * @param {ElementDescriptor} context.parent the parent object\n * @param {Point} context.position position of the new element\n */\nCreateLabelHandler.prototype.execute = function(context) {\n\n  var label = context.shape;\n\n  ensureValidDimensions(label);\n\n  label.labelTarget = context.labelTarget;\n\n  return originalExecute.call(this, context);\n};\n\nvar originalRevert = CreateShapeHandler.prototype.revert;\n\n/**\n * Undo append by removing the shape\n */\nCreateLabelHandler.prototype.revert = function(context) {\n  context.shape.labelTarget = null;\n\n  return originalRevert.call(this, context);\n};\n\n\n// helpers //////////////////////\n\nfunction ensureValidDimensions(label) {\n\n  // make sure a label has valid { width, height } dimensions\n  [ 'width', 'height' ].forEach(function(prop) {\n    if (typeof label[prop] === 'undefined') {\n      label[prop] = 0;\n    }\n  });\n}","import {\n  add as collectionAdd,\n  indexOf as collectionIdx\n} from '../../../util/Collections';\n\n\n/**\n * A handler that implements reversible deletion of Connections.\n */\nexport default function DeleteConnectionHandler(canvas, modeling) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n}\n\nDeleteConnectionHandler.$inject = [\n  'canvas',\n  'modeling'\n];\n\n\nDeleteConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      parent = connection.parent;\n\n  context.parent = parent;\n\n  // remember containment\n  context.parentIndex = collectionIdx(parent.children, connection);\n\n  context.source = connection.source;\n  context.target = connection.target;\n\n  this._canvas.removeConnection(connection);\n\n  connection.source = null;\n  connection.target = null;\n\n  return connection;\n};\n\n/**\n * Command revert implementation.\n */\nDeleteConnectionHandler.prototype.revert = function(context) {\n\n  var connection = context.connection,\n      parent = context.parent,\n      parentIndex = context.parentIndex;\n\n  connection.source = context.source;\n  connection.target = context.target;\n\n  // restore containment\n  collectionAdd(parent.children, connection, parentIndex);\n\n  this._canvas.addConnection(connection, parent);\n\n  return connection;\n};\n","import { forEach } from 'min-dash';\n\n\nexport default function DeleteElementsHandler(modeling, elementRegistry) {\n  this._modeling = modeling;\n  this._elementRegistry = elementRegistry;\n}\n\nDeleteElementsHandler.$inject = [\n  'modeling',\n  'elementRegistry'\n];\n\n\nDeleteElementsHandler.prototype.postExecute = function(context) {\n\n  var modeling = this._modeling,\n      elementRegistry = this._elementRegistry,\n      elements = context.elements;\n\n  forEach(elements, function(element) {\n\n    // element may have been removed with previous\n    // remove operations already (e.g. in case of nesting)\n    if (!elementRegistry.get(element.id)) {\n      return;\n    }\n\n    if (element.waypoints) {\n      modeling.removeConnection(element);\n    } else {\n      modeling.removeShape(element);\n    }\n  });\n};","import {\n  add as collectionAdd,\n  indexOf as collectionIdx\n} from '../../../util/Collections';\n\nimport { saveClear } from '../../../util/Removal';\n\n\n/**\n * A handler that implements reversible deletion of shapes.\n *\n */\nexport default function DeleteShapeHandler(canvas, modeling) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n}\n\nDeleteShapeHandler.$inject = [ 'canvas', 'modeling' ];\n\n\n/**\n * - Remove connections\n * - Remove all direct children\n */\nDeleteShapeHandler.prototype.preExecute = function(context) {\n\n  var modeling = this._modeling;\n\n  var shape = context.shape;\n\n  // remove connections\n  saveClear(shape.incoming, function(connection) {\n\n    // To make sure that the connection isn't removed twice\n    // For example if a container is removed\n    modeling.removeConnection(connection, { nested: true });\n  });\n\n  saveClear(shape.outgoing, function(connection) {\n    modeling.removeConnection(connection, { nested: true });\n  });\n\n  // remove child shapes and connections\n  saveClear(shape.children, function(child) {\n    if (isConnection(child)) {\n      modeling.removeConnection(child, { nested: true });\n    } else {\n      modeling.removeShape(child, { nested: true });\n    }\n  });\n};\n\n/**\n * Remove shape and remember the parent\n */\nDeleteShapeHandler.prototype.execute = function(context) {\n  var canvas = this._canvas;\n\n  var shape = context.shape,\n      oldParent = shape.parent;\n\n  context.oldParent = oldParent;\n\n  // remove containment\n  context.oldParentIndex = collectionIdx(oldParent.children, shape);\n\n  // remove shape\n  canvas.removeShape(shape);\n\n  return shape;\n};\n\n\n/**\n * Command revert implementation\n */\nDeleteShapeHandler.prototype.revert = function(context) {\n\n  var canvas = this._canvas;\n\n  var shape = context.shape,\n      oldParent = context.oldParent,\n      oldParentIndex = context.oldParentIndex;\n\n  // restore containment\n  collectionAdd(oldParent.children, shape, oldParentIndex);\n\n  canvas.addShape(shape, oldParent);\n\n  return shape;\n};\n\nfunction isConnection(element) {\n  return element.waypoints;\n}\n","import {\n  forEach,\n  sortBy\n} from 'min-dash';\n\n\n/**\n * A handler that distributes elements evenly.\n */\nexport default function DistributeElements(modeling) {\n  this._modeling = modeling;\n}\n\nDistributeElements.$inject = [ 'modeling' ];\n\nvar OFF_AXIS = {\n  x: 'y',\n  y: 'x'\n};\n\nDistributeElements.prototype.preExecute = function(context) {\n  var modeling = this._modeling;\n\n  var groups = context.groups,\n      axis = context.axis,\n      dimension = context.dimension;\n\n  function updateRange(group, element) {\n    group.range.min = Math.min(element[axis], group.range.min);\n    group.range.max = Math.max(element[axis] + element[dimension], group.range.max);\n  }\n\n  function center(element) {\n    return element[axis] + element[dimension] / 2;\n  }\n\n  function lastIdx(arr) {\n    return arr.length - 1;\n  }\n\n  function rangeDiff(range) {\n    return range.max - range.min;\n  }\n\n  function centerElement(refCenter, element) {\n    var delta = { y: 0 };\n\n    delta[axis] = refCenter - center(element);\n\n    if (delta[axis]) {\n\n      delta[OFF_AXIS[axis]] = 0;\n\n      modeling.moveElements([ element ], delta, element.parent);\n    }\n  }\n\n  var firstGroup = groups[0],\n      lastGroupIdx = lastIdx(groups),\n      lastGroup = groups[ lastGroupIdx ];\n\n  var margin,\n      spaceInBetween,\n      groupsSize = 0; // the size of each range\n\n  forEach(groups, function(group, idx) {\n    var sortedElements,\n        refElem,\n        refCenter;\n\n    if (group.elements.length < 2) {\n      if (idx && idx !== groups.length - 1) {\n        updateRange(group, group.elements[0]);\n\n        groupsSize += rangeDiff(group.range);\n      }\n      return;\n    }\n\n    sortedElements = sortBy(group.elements, axis);\n\n    refElem = sortedElements[0];\n\n    if (idx === lastGroupIdx) {\n      refElem = sortedElements[lastIdx(sortedElements)];\n    }\n\n    refCenter = center(refElem);\n\n    // wanna update the ranges after the shapes have been centered\n    group.range = null;\n\n    forEach(sortedElements, function(element) {\n\n      centerElement(refCenter, element);\n\n      if (group.range === null) {\n        group.range = {\n          min: element[axis],\n          max: element[axis] + element[dimension]\n        };\n\n        return;\n      }\n\n      // update group's range after centering the range elements\n      updateRange(group, element);\n    });\n\n    if (idx && idx !== groups.length - 1) {\n      groupsSize += rangeDiff(group.range);\n    }\n  });\n\n  spaceInBetween = Math.abs(lastGroup.range.min - firstGroup.range.max);\n\n  margin = Math.round((spaceInBetween - groupsSize) / (groups.length - 1));\n\n  if (margin < groups.length - 1) {\n    return;\n  }\n\n  forEach(groups, function(group, groupIdx) {\n    var delta = {},\n        prevGroup;\n\n    if (group === firstGroup || group === lastGroup) {\n      return;\n    }\n\n    prevGroup = groups[groupIdx - 1];\n\n    group.range.max = 0;\n\n    forEach(group.elements, function(element, idx) {\n      delta[OFF_AXIS[axis]] = 0;\n      delta[axis] = (prevGroup.range.max - element[axis]) + margin;\n\n      if (group.range.min !== element[axis]) {\n        delta[axis] += element[axis] - group.range.min;\n      }\n\n      if (delta[axis]) {\n        modeling.moveElements([ element ], delta, element.parent);\n      }\n\n      group.range.max = Math.max(element[axis] + element[dimension], idx ? group.range.max : 0);\n    });\n  });\n};\n\nDistributeElements.prototype.postExecute = function(context) {\n\n};\n","import { assign } from 'min-dash';\n\n\n/**\n * A handler that implements reversible moving of shapes.\n */\nexport default function LayoutConnectionHandler(layouter, canvas) {\n  this._layouter = layouter;\n  this._canvas = canvas;\n}\n\nLayoutConnectionHandler.$inject = [ 'layouter', 'canvas' ];\n\nLayoutConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection;\n\n  var oldWaypoints = connection.waypoints;\n\n  assign(context, {\n    oldWaypoints: oldWaypoints\n  });\n\n  connection.waypoints = this._layouter.layoutConnection(connection, context.hints);\n\n  return connection;\n};\n\nLayoutConnectionHandler.prototype.revert = function(context) {\n\n  var connection = context.connection;\n\n  connection.waypoints = context.oldWaypoints;\n\n  return connection;\n};\n","import { forEach } from 'min-dash';\n\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../../../util/Collections';\n\n\n/**\n * A handler that implements reversible moving of connections.\n *\n * The handler differs from the layout connection handler in a sense\n * that it preserves the connection layout.\n */\nexport default function MoveConnectionHandler() { }\n\n\nMoveConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      delta = context.delta;\n\n  var newParent = context.newParent || connection.parent,\n      newParentIndex = context.newParentIndex,\n      oldParent = connection.parent;\n\n  // save old parent in context\n  context.oldParent = oldParent;\n  context.oldParentIndex = collectionRemove(oldParent.children, connection);\n\n  // add to new parent at position\n  collectionAdd(newParent.children, connection, newParentIndex);\n\n  // update parent\n  connection.parent = newParent;\n\n  // update waypoint positions\n  forEach(connection.waypoints, function(p) {\n    p.x += delta.x;\n    p.y += delta.y;\n\n    if (p.original) {\n      p.original.x += delta.x;\n      p.original.y += delta.y;\n    }\n  });\n\n  return connection;\n};\n\nMoveConnectionHandler.prototype.revert = function(context) {\n\n  var connection = context.connection,\n      newParent = connection.parent,\n      oldParent = context.oldParent,\n      oldParentIndex = context.oldParentIndex,\n      delta = context.delta;\n\n  // remove from newParent\n  collectionRemove(newParent.children, connection);\n\n  // restore previous location in old parent\n  collectionAdd(oldParent.children, connection, oldParentIndex);\n\n  // restore parent\n  connection.parent = oldParent;\n\n  // revert to old waypoint positions\n  forEach(connection.waypoints, function(p) {\n    p.x -= delta.x;\n    p.y -= delta.y;\n\n    if (p.original) {\n      p.original.x -= delta.x;\n      p.original.y -= delta.y;\n    }\n  });\n\n  return connection;\n};","import {\n  getNewAttachPoint\n} from '../../../../util/AttachUtil';\n\n\nexport function getResizedSourceAnchor(connection, shape, oldBounds) {\n\n  var waypoints = safeGetWaypoints(connection),\n      oldAnchor = waypoints[0];\n\n  return getNewAttachPoint(oldAnchor.original || oldAnchor, oldBounds, shape);\n}\n\n\nexport function getResizedTargetAnchor(connection, shape, oldBounds) {\n\n  var waypoints = safeGetWaypoints(connection),\n      oldAnchor = waypoints[waypoints.length - 1];\n\n  return getNewAttachPoint(oldAnchor.original || oldAnchor, oldBounds, shape);\n}\n\n\nexport function getMovedSourceAnchor(connection, source, moveDelta) {\n  return getResizedSourceAnchor(connection, source, substractPosition(source, moveDelta));\n}\n\n\nexport function getMovedTargetAnchor(connection, target, moveDelta) {\n  return getResizedTargetAnchor(connection, target, substractPosition(target, moveDelta));\n}\n\n\n// helpers //////////////////////\n\nfunction substractPosition(bounds, delta) {\n  return {\n    x: bounds.x - delta.x,\n    y: bounds.y - delta.y,\n    width: bounds.width,\n    height: bounds.height\n  };\n}\n\n\n/**\n * Return waypoints of given connection; throw if non exists (should not happen!!).\n *\n * @param {Connection} connection\n *\n * @return {Array<Point>}\n */\nfunction safeGetWaypoints(connection) {\n\n  var waypoints = connection.waypoints;\n\n  if (!waypoints.length) {\n    throw new Error('connection#' + connection.id + ': no waypoints');\n  }\n\n  return waypoints;\n}\n","import {\n  assign\n} from 'min-dash';\n\nimport {\n  getClosure\n} from '../../../../util/Elements';\n\n\nexport default function MoveClosure() {\n\n  this.allShapes = {};\n  this.allConnections = {};\n\n  this.enclosedElements = {};\n  this.enclosedConnections = {};\n\n  this.topLevel = {};\n}\n\n\nMoveClosure.prototype.add = function(element, isTopLevel) {\n  return this.addAll([ element ], isTopLevel);\n};\n\n\nMoveClosure.prototype.addAll = function(elements, isTopLevel) {\n\n  var newClosure = getClosure(elements, !!isTopLevel, this);\n\n  assign(this, newClosure);\n\n  return this;\n};","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  getMovedSourceAnchor,\n  getMovedTargetAnchor\n} from './AnchorsHelper';\n\nimport MoveClosure from './MoveClosure';\n\n\n/**\n * A helper that is able to carry out serialized move\n * operations on multiple elements.\n *\n * @param {Modeling} modeling\n */\nexport default function MoveHelper(modeling) {\n  this._modeling = modeling;\n}\n\n/**\n * Move the specified elements and all children by the given delta.\n *\n * This moves all enclosed connections, too and layouts all affected\n * external connections.\n *\n * @param  {Array<djs.model.Base>} elements\n * @param  {Point} delta\n * @param  {djs.model.Base} newParent applied to the first level of shapes\n *\n * @return {Array<djs.model.Base>} list of touched elements\n */\nMoveHelper.prototype.moveRecursive = function(elements, delta, newParent) {\n  if (!elements) {\n    return [];\n  } else {\n    return this.moveClosure(this.getClosure(elements), delta, newParent);\n  }\n};\n\n/**\n * Move the given closure of elmements.\n *\n * @param {Object} closure\n * @param {Point} delta\n * @param {djs.model.Base} [newParent]\n * @param {djs.model.Base} [newHost]\n */\nMoveHelper.prototype.moveClosure = function(closure, delta, newParent, newHost, primaryShape) {\n  var modeling = this._modeling;\n\n  var allShapes = closure.allShapes,\n      allConnections = closure.allConnections,\n      enclosedConnections = closure.enclosedConnections,\n      topLevel = closure.topLevel,\n      keepParent = false;\n\n  if (primaryShape && primaryShape.parent === newParent) {\n    keepParent = true;\n  }\n\n  // move all shapes\n  forEach(allShapes, function(shape) {\n\n    // move the element according to the given delta\n    modeling.moveShape(shape, delta, topLevel[shape.id] && !keepParent && newParent, {\n      recurse: false,\n      layout: false\n    });\n  });\n\n  // move all child connections / layout external connections\n  forEach(allConnections, function(c) {\n\n    var sourceMoved = !!allShapes[c.source.id],\n        targetMoved = !!allShapes[c.target.id];\n\n    if (enclosedConnections[c.id] && sourceMoved && targetMoved) {\n      modeling.moveConnection(c, delta, topLevel[c.id] && !keepParent && newParent);\n    } else {\n      modeling.layoutConnection(c, {\n        connectionStart: sourceMoved && getMovedSourceAnchor(c, c.source, delta),\n        connectionEnd: targetMoved && getMovedTargetAnchor(c, c.target, delta)\n      });\n    }\n  });\n};\n\n/**\n * Returns the closure for the selected elements\n *\n * @param  {Array<djs.model.Base>} elements\n * @return {MoveClosure} closure\n */\nMoveHelper.prototype.getClosure = function(elements) {\n  return new MoveClosure().addAll(elements, true);\n};","import MoveHelper from './helper/MoveHelper';\n\n\n/**\n * A handler that implements reversible moving of shapes.\n */\nexport default function MoveElementsHandler(modeling) {\n  this._helper = new MoveHelper(modeling);\n}\n\nMoveElementsHandler.$inject = [ 'modeling' ];\n\nMoveElementsHandler.prototype.preExecute = function(context) {\n  context.closure = this._helper.getClosure(context.shapes);\n};\n\nMoveElementsHandler.prototype.postExecute = function(context) {\n\n  var hints = context.hints,\n      primaryShape;\n\n  if (hints && hints.primaryShape) {\n    primaryShape = hints.primaryShape;\n    hints.oldParent = primaryShape.parent;\n  }\n\n  this._helper.moveClosure(\n    context.closure,\n    context.delta,\n    context.newParent,\n    context.newHost,\n    primaryShape\n  );\n};","import {\n  assign,\n  forEach,\n  pick\n} from 'min-dash';\n\nimport MoveHelper from './helper/MoveHelper';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../../../util/Collections';\n\nimport {\n  getMovedSourceAnchor,\n  getMovedTargetAnchor\n} from './helper/AnchorsHelper';\n\n\n/**\n * A handler that implements reversible moving of shapes.\n */\nexport default function MoveShapeHandler(modeling) {\n  this._modeling = modeling;\n\n  this._helper = new MoveHelper(modeling);\n}\n\nMoveShapeHandler.$inject = [ 'modeling' ];\n\n\nMoveShapeHandler.prototype.execute = function(context) {\n\n  var shape = context.shape,\n      delta = context.delta,\n      newParent = context.newParent || shape.parent,\n      newParentIndex = context.newParentIndex,\n      oldParent = shape.parent;\n\n  context.oldBounds = pick(shape, [ 'x', 'y', 'width', 'height']);\n\n  // save old parent in context\n  context.oldParent = oldParent;\n  context.oldParentIndex = collectionRemove(oldParent.children, shape);\n\n  // add to new parent at position\n  collectionAdd(newParent.children, shape, newParentIndex);\n\n  // update shape parent + position\n  assign(shape, {\n    parent: newParent,\n    x: shape.x + delta.x,\n    y: shape.y + delta.y\n  });\n\n  return shape;\n};\n\nMoveShapeHandler.prototype.postExecute = function(context) {\n\n  var shape = context.shape,\n      delta = context.delta,\n      hints = context.hints;\n\n  var modeling = this._modeling;\n\n  if (hints.layout !== false) {\n\n    forEach(shape.incoming, function(c) {\n      modeling.layoutConnection(c, {\n        connectionEnd: getMovedTargetAnchor(c, shape, delta)\n      });\n    });\n\n    forEach(shape.outgoing, function(c) {\n      modeling.layoutConnection(c, {\n        connectionStart: getMovedSourceAnchor(c, shape, delta)\n      });\n    });\n  }\n\n  if (hints.recurse !== false) {\n    this.moveChildren(context);\n  }\n};\n\nMoveShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldParent = context.oldParent,\n      oldParentIndex = context.oldParentIndex,\n      delta = context.delta;\n\n  // restore previous location in old parent\n  collectionAdd(oldParent.children, shape, oldParentIndex);\n\n  // revert to old position and parent\n  assign(shape, {\n    parent: oldParent,\n    x: shape.x - delta.x,\n    y: shape.y - delta.y\n  });\n\n  return shape;\n};\n\nMoveShapeHandler.prototype.moveChildren = function(context) {\n\n  var delta = context.delta,\n      shape = context.shape;\n\n  this._helper.moveRecursive(shape.children, delta, null);\n};\n\nMoveShapeHandler.prototype.getNewParent = function(context) {\n  return context.newParent || context.shape.parent;\n};\n","import { isArray } from 'min-dash';\n\n\n/**\n * Reconnect connection handler\n */\nexport default function ReconnectConnectionHandler(modeling) {\n  this._modeling = modeling;\n}\n\nReconnectConnectionHandler.$inject = [ 'modeling' ];\n\nReconnectConnectionHandler.prototype.execute = function(context) {\n  var newSource = context.newSource,\n      newTarget = context.newTarget,\n      connection = context.connection,\n      dockingOrPoints = context.dockingOrPoints;\n\n  if (!newSource && !newTarget) {\n    throw new Error('newSource or newTarget required');\n  }\n\n  if (isArray(dockingOrPoints)) {\n    context.oldWaypoints = connection.waypoints;\n    connection.waypoints = dockingOrPoints;\n  }\n\n  if (newSource) {\n    context.oldSource = connection.source;\n    connection.source = newSource;\n  }\n\n  if (newTarget) {\n    context.oldTarget = connection.target;\n    connection.target = newTarget;\n  }\n\n  return connection;\n};\n\nReconnectConnectionHandler.prototype.postExecute = function(context) {\n  var connection = context.connection,\n      newSource = context.newSource,\n      newTarget = context.newTarget,\n      dockingOrPoints = context.dockingOrPoints,\n      hints = context.hints || {};\n\n  if (hints.layoutConnection === false) {\n    return;\n  }\n\n  var layoutConnectionHints = {};\n\n  if (newSource && (!newTarget || hints.docking === 'source')) {\n    layoutConnectionHints.connectionStart = getDocking(isArray(dockingOrPoints) ? dockingOrPoints[ 0 ] : dockingOrPoints);\n  }\n\n  if (newTarget && (!newSource || hints.docking === 'target')) {\n    layoutConnectionHints.connectionEnd = getDocking(isArray(dockingOrPoints) ? dockingOrPoints[ dockingOrPoints.length - 1 ] : dockingOrPoints);\n  }\n\n  if (hints.newWaypoints) {\n    layoutConnectionHints.waypoints = hints.newWaypoints;\n  }\n\n  this._modeling.layoutConnection(connection, layoutConnectionHints);\n};\n\nReconnectConnectionHandler.prototype.revert = function(context) {\n  var oldSource = context.oldSource,\n      oldTarget = context.oldTarget,\n      oldWaypoints = context.oldWaypoints,\n      connection = context.connection;\n\n  if (oldSource) {\n    connection.source = oldSource;\n  }\n\n  if (oldTarget) {\n    connection.target = oldTarget;\n  }\n\n  if (oldWaypoints) {\n    connection.waypoints = oldWaypoints;\n  }\n\n  return connection;\n};\n\n\n\n// helpers //////////\n\nfunction getDocking(point) {\n  return point.original || point;\n}","import { forEach } from 'min-dash';\n\nimport {\n  getResizedSourceAnchor,\n  getResizedTargetAnchor\n} from './helper/AnchorsHelper';\n\n/**\n * Replace shape by adding new shape and removing old shape. Incoming and outgoing connections will\n * be kept if possible.\n *\n * @class\n * @constructor\n *\n * @param {Modeling} modeling\n * @param {Rules} rules\n */\nexport default function ReplaceShapeHandler(modeling, rules) {\n  this._modeling = modeling;\n  this._rules = rules;\n}\n\nReplaceShapeHandler.$inject = [ 'modeling', 'rules' ];\n\n\n/**\n * Add new shape.\n *\n * @param {Object} context\n * @param {djs.model.Shape} context.oldShape\n * @param {Object} context.newData\n * @param {string} context.newData.type\n * @param {number} context.newData.x\n * @param {number} context.newData.y\n * @param {Object} [hints]\n */\nReplaceShapeHandler.prototype.preExecute = function(context) {\n  var self = this,\n      modeling = this._modeling,\n      rules = this._rules;\n\n  var oldShape = context.oldShape,\n      newData = context.newData,\n      hints = context.hints || {},\n      newShape;\n\n  function canReconnect(source, target, connection) {\n    return rules.allowed('connection.reconnect', {\n      connection: connection,\n      source: source,\n      target: target\n    });\n  }\n\n  // (1) add new shape at given position\n  var position = {\n    x: newData.x,\n    y: newData.y\n  };\n\n  var oldBounds = {\n    x: oldShape.x,\n    y: oldShape.y,\n    width: oldShape.width,\n    height: oldShape.height\n  };\n\n  newShape = context.newShape =\n    context.newShape ||\n    self.createShape(newData, position, oldShape.parent, hints);\n\n  // (2) update host\n  if (oldShape.host) {\n    modeling.updateAttachment(newShape, oldShape.host);\n  }\n\n  // (3) adopt all children from old shape\n  var children;\n\n  if (hints.moveChildren !== false) {\n    children = oldShape.children.slice();\n\n    modeling.moveElements(children, { x: 0, y: 0 }, newShape, hints);\n  }\n\n  // (4) reconnect connections to new shape if possible\n  var incoming = oldShape.incoming.slice(),\n      outgoing = oldShape.outgoing.slice();\n\n  forEach(incoming, function(connection) {\n    var source = connection.source,\n        allowed = canReconnect(source, newShape, connection);\n\n    if (allowed) {\n      self.reconnectEnd(\n        connection, newShape,\n        getResizedTargetAnchor(connection, newShape, oldBounds),\n        hints\n      );\n    }\n  });\n\n  forEach(outgoing, function(connection) {\n    var target = connection.target,\n        allowed = canReconnect(newShape, target, connection);\n\n    if (allowed) {\n      self.reconnectStart(\n        connection, newShape,\n        getResizedSourceAnchor(connection, newShape, oldBounds),\n        hints\n      );\n    }\n  });\n};\n\n\n/**\n * Remove old shape.\n */\nReplaceShapeHandler.prototype.postExecute = function(context) {\n  var oldShape = context.oldShape;\n\n  this._modeling.removeShape(oldShape);\n};\n\n\nReplaceShapeHandler.prototype.execute = function(context) {};\n\n\nReplaceShapeHandler.prototype.revert = function(context) {};\n\n\nReplaceShapeHandler.prototype.createShape = function(shape, position, target, hints) {\n  return this._modeling.createShape(shape, position, target, hints);\n};\n\n\nReplaceShapeHandler.prototype.reconnectStart = function(connection, newSource, dockingPoint, hints) {\n  this._modeling.reconnectStart(connection, newSource, dockingPoint, hints);\n};\n\n\nReplaceShapeHandler.prototype.reconnectEnd = function(connection, newTarget, dockingPoint, hints) {\n  this._modeling.reconnectEnd(connection, newTarget, dockingPoint, hints);\n};\n","import {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  getResizedSourceAnchor,\n  getResizedTargetAnchor\n} from './helper/AnchorsHelper';\n\n\n/**\n * A handler that implements reversible resizing of shapes.\n *\n * @param {Modeling} modeling\n */\nexport default function ResizeShapeHandler(modeling) {\n  this._modeling = modeling;\n}\n\nResizeShapeHandler.$inject = [ 'modeling' ];\n\n/**\n * {\n *   shape: {....}\n *   newBounds: {\n *     width:  20,\n *     height: 40,\n *     x:       5,\n *     y:      10\n *   }\n *\n * }\n */\nResizeShapeHandler.prototype.execute = function(context) {\n  var shape = context.shape,\n      newBounds = context.newBounds,\n      minBounds = context.minBounds;\n\n  if (newBounds.x === undefined || newBounds.y === undefined ||\n      newBounds.width === undefined || newBounds.height === undefined) {\n    throw new Error('newBounds must have {x, y, width, height} properties');\n  }\n\n  if (minBounds && (newBounds.width < minBounds.width\n    || newBounds.height < minBounds.height)) {\n    throw new Error('width and height cannot be less than minimum height and width');\n  } else if (!minBounds\n    && newBounds.width < 10 || newBounds.height < 10) {\n    throw new Error('width and height cannot be less than 10px');\n  }\n\n  // save old bbox in context\n  context.oldBounds = {\n    width:  shape.width,\n    height: shape.height,\n    x:      shape.x,\n    y:      shape.y\n  };\n\n  // update shape\n  assign(shape, {\n    width:  newBounds.width,\n    height: newBounds.height,\n    x:      newBounds.x,\n    y:      newBounds.y\n  });\n\n  return shape;\n};\n\nResizeShapeHandler.prototype.postExecute = function(context) {\n  var modeling = this._modeling;\n\n  var shape = context.shape,\n      oldBounds = context.oldBounds,\n      hints = context.hints || {};\n\n  if (hints.layout === false) {\n    return;\n  }\n\n  forEach(shape.incoming, function(c) {\n    modeling.layoutConnection(c, {\n      connectionEnd: getResizedTargetAnchor(c, shape, oldBounds)\n    });\n  });\n\n  forEach(shape.outgoing, function(c) {\n    modeling.layoutConnection(c, {\n      connectionStart: getResizedSourceAnchor(c, shape, oldBounds)\n    });\n  });\n\n};\n\nResizeShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldBounds = context.oldBounds;\n\n  // restore previous bbox\n  assign(shape, {\n    width:  oldBounds.width,\n    height: oldBounds.height,\n    x:      oldBounds.x,\n    y:      oldBounds.y\n  });\n\n  return shape;\n};\n","import {\n  assign,\n  forEach,\n  map\n} from 'min-dash';\n\nimport {\n  getWaypointsUpdatingConnections,\n  resizeBounds\n} from '../../space-tool/SpaceUtil';\n\n\n/**\n * Add or remove space by moving and resizing shapes and updating connection waypoints.\n */\nexport default function SpaceToolHandler(modeling) {\n  this._modeling = modeling;\n}\n\nSpaceToolHandler.$inject = [ 'modeling' ];\n\nSpaceToolHandler.prototype.preExecute = function(context) {\n  var delta = context.delta,\n      direction = context.direction,\n      movingShapes = context.movingShapes,\n      resizingShapes = context.resizingShapes,\n      start = context.start;\n\n  // (1) move shapes\n  this.moveShapes(movingShapes, delta);\n\n  // (2) resize shapes\n  this.resizeShapes(resizingShapes, delta, direction);\n\n  // (3) update connection waypoints\n  this.updateConnectionWaypoints(\n    getWaypointsUpdatingConnections(movingShapes, resizingShapes),\n    delta,\n    direction,\n    start,\n    movingShapes,\n    resizingShapes\n  );\n};\n\nSpaceToolHandler.prototype.execute = function() {};\nSpaceToolHandler.prototype.revert = function() {};\n\nSpaceToolHandler.prototype.moveShapes = function(shapes, delta) {\n  var self = this;\n\n  forEach(shapes, function(element) {\n    self._modeling.moveShape(element, delta, null, {\n      autoResize: false,\n      layout: false,\n      recurse: false\n    });\n  });\n};\n\nSpaceToolHandler.prototype.resizeShapes = function(shapes, delta, direction) {\n  var self = this;\n\n  forEach(shapes, function(shape) {\n    var newBounds = resizeBounds(shape, direction, delta);\n\n    self._modeling.resizeShape(shape, newBounds, null, {\n      attachSupport: false,\n      autoResize: false,\n      layout: false\n    });\n  });\n};\n\nSpaceToolHandler.prototype.updateConnectionWaypoints = function(\n    connections,\n    delta,\n    direction,\n    start,\n    movingShapes,\n    resizingShapes\n) {\n  var self = this;\n\n  forEach(connections, function(connection) {\n    var source = connection.source,\n        target = connection.target,\n        waypoints = copyWaypoints(connection);\n\n    var axis = getAxisFromDirection(direction);\n\n    // move waypoints\n    waypoints = map(waypoints, function(waypoint, index) {\n      var isFirstWaypoint = index === 0,\n          isLastWaypoint = index === waypoints.length - 1;\n\n      // do NOT move first/last waypoint if source/target NOT moving or resizing\n      if ((isFirstWaypoint && !includes(movingShapes.concat(resizingShapes), source)) ||\n        (isLastWaypoint && !includes(movingShapes.concat(resizingShapes), target))) {\n\n        return waypoint;\n      }\n\n      if ((waypoint[ axis ] > start && /e|s/.test(direction)) ||\n        (waypoint[ axis ] < start) && /n|w/.test(direction)) {\n\n        // move waypoint\n        waypoint[ axis ] = waypoint[ axis ] + delta[ axis ];\n      }\n\n      if (waypoint.original) {\n        if ((waypoint.original[ axis ] > start && /e|s/.test(direction)) ||\n          (waypoint.original[ axis ] < start) && /n|w/.test(direction)) {\n\n          // move waypoint original\n          waypoint.original[ axis ] = waypoint.original[ axis ] + delta[ axis ];\n        }\n      }\n\n      return waypoint;\n    });\n\n    self._modeling.updateWaypoints(connection, waypoints, {\n      labelBehavior: false\n    });\n  });\n};\n\n\n// helpers //////////\n\nfunction copyWaypoint(waypoint) {\n  return assign({}, waypoint);\n}\n\nfunction copyWaypoints(connection) {\n  return map(connection.waypoints, function(waypoint) {\n\n    waypoint = copyWaypoint(waypoint);\n\n    if (waypoint.original) {\n      waypoint.original = copyWaypoint(waypoint.original);\n    }\n\n    return waypoint;\n  });\n}\n\nfunction getAxisFromDirection(direction) {\n  switch (direction) {\n  case 'n':\n    return 'y';\n  case 'w':\n    return 'x';\n  case 's':\n    return 'y';\n  case 'e':\n    return 'x';\n  }\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}","import {\n  assign,\n  forEach\n} from 'min-dash';\n\n/**\n * A handler that toggles the collapsed state of an element\n * and the visibility of all its children.\n *\n * @param {Modeling} modeling\n */\nexport default function ToggleShapeCollapseHandler(modeling) {\n  this._modeling = modeling;\n}\n\nToggleShapeCollapseHandler.$inject = [ 'modeling' ];\n\n\nToggleShapeCollapseHandler.prototype.execute = function(context) {\n\n  var shape = context.shape,\n      children = shape.children;\n\n  // recursively remember previous visibility of children\n  context.oldChildrenVisibility = getElementsVisibilityRecursive(children);\n\n  // toggle state\n  shape.collapsed = !shape.collapsed;\n\n  // recursively hide/show children\n  var result = setHiddenRecursive(children, shape.collapsed);\n\n  return [shape].concat(result);\n};\n\n\nToggleShapeCollapseHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldChildrenVisibility = context.oldChildrenVisibility;\n\n  var children = shape.children;\n\n  // recursively set old visability of children\n  var result = restoreVisibilityRecursive(children, oldChildrenVisibility);\n\n  // retoggle state\n  shape.collapsed = !shape.collapsed;\n\n  return [shape].concat(result);\n};\n\n\n// helpers //////////////////////\n\n/**\n * Return a map { elementId -> hiddenState}.\n *\n * @param {Array<djs.model.Shape>} elements\n *\n * @return {Object}\n */\nfunction getElementsVisibilityRecursive(elements) {\n\n  var result = {};\n\n  forEach(elements, function(element) {\n    result[element.id] = element.hidden;\n\n    if (element.children) {\n      result = assign({}, result, getElementsVisibilityRecursive(element.children));\n    }\n  });\n\n  return result;\n}\n\n\nfunction setHiddenRecursive(elements, newHidden) {\n  var result = [];\n  forEach(elements, function(element) {\n    element.hidden = newHidden;\n\n    result = result.concat(element);\n\n    if (element.children) {\n      result = result.concat(setHiddenRecursive(element.children, element.collapsed || newHidden));\n    }\n  });\n\n  return result;\n}\n\nfunction restoreVisibilityRecursive(elements, lastState) {\n  var result = [];\n  forEach(elements, function(element) {\n    element.hidden = lastState[element.id];\n\n    result = result.concat(element);\n\n    if (element.children) {\n      result = result.concat(restoreVisibilityRecursive(element.children, lastState));\n    }\n  });\n\n  return result;\n}\n","import {\n  add as collectionAdd,\n  remove as collectionRemove\n} from '../../../util/Collections';\n\n/**\n * A handler that implements reversible attaching/detaching of shapes.\n */\nexport default function UpdateAttachmentHandler(modeling) {\n  this._modeling = modeling;\n}\n\nUpdateAttachmentHandler.$inject = [ 'modeling' ];\n\n\nUpdateAttachmentHandler.prototype.execute = function(context) {\n  var shape = context.shape,\n      newHost = context.newHost,\n      oldHost = shape.host;\n\n  // (0) detach from old host\n  context.oldHost = oldHost;\n  context.attacherIdx = removeAttacher(oldHost, shape);\n\n  // (1) attach to new host\n  addAttacher(newHost, shape);\n\n  // (2) update host\n  shape.host = newHost;\n\n  return shape;\n};\n\nUpdateAttachmentHandler.prototype.revert = function(context) {\n  var shape = context.shape,\n      newHost = context.newHost,\n      oldHost = context.oldHost,\n      attacherIdx = context.attacherIdx;\n\n  // (2) update host\n  shape.host = oldHost;\n\n  // (1) attach to new host\n  removeAttacher(newHost, shape);\n\n  // (0) detach from old host\n  addAttacher(oldHost, shape, attacherIdx);\n\n  return shape;\n};\n\n\nfunction removeAttacher(host, attacher) {\n\n  // remove attacher from host\n  return collectionRemove(host && host.attachers, attacher);\n}\n\nfunction addAttacher(host, attacher, idx) {\n\n  if (!host) {\n    return;\n  }\n\n  var attachers = host.attachers;\n\n  if (!attachers) {\n    host.attachers = attachers = [];\n  }\n\n  collectionAdd(attachers, attacher, idx);\n}\n","export default function UpdateWaypointsHandler() { }\n\nUpdateWaypointsHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      newWaypoints = context.newWaypoints;\n\n  context.oldWaypoints = connection.waypoints;\n\n  connection.waypoints = newWaypoints;\n\n  return connection;\n};\n\nUpdateWaypointsHandler.prototype.revert = function(context) {\n\n  var connection = context.connection,\n      oldWaypoints = context.oldWaypoints;\n\n  connection.waypoints = oldWaypoints;\n\n  return connection;\n};","import {\n  assign,\n  forEach,\n  isArray\n} from 'min-dash';\n\nimport {\n  Base\n} from '../../model';\n\nimport AlignElementsHandler from './cmd/AlignElementsHandler';\nimport AppendShapeHandler from './cmd/AppendShapeHandler';\nimport CreateConnectionHandler from './cmd/CreateConnectionHandler';\nimport CreateElementsHandler from './cmd/CreateElementsHandler';\nimport CreateLabelHandler from './cmd/CreateLabelHandler';\nimport CreateShapeHandler from './cmd/CreateShapeHandler';\nimport DeleteConnectionHandler from './cmd/DeleteConnectionHandler';\nimport DeleteElementsHandler from './cmd/DeleteElementsHandler';\nimport DeleteShapeHandler from './cmd/DeleteShapeHandler';\nimport DistributeElementsHandler from './cmd/DistributeElementsHandler';\nimport LayoutConnectionHandler from './cmd/LayoutConnectionHandler';\nimport MoveConnectionHandler from './cmd/MoveConnectionHandler';\nimport MoveElementsHandler from './cmd/MoveElementsHandler';\nimport MoveShapeHandler from './cmd/MoveShapeHandler';\nimport ReconnectConnectionHandler from './cmd/ReconnectConnectionHandler';\nimport ReplaceShapeHandler from './cmd/ReplaceShapeHandler';\nimport ResizeShapeHandler from './cmd/ResizeShapeHandler';\nimport SpaceToolHandler from './cmd/SpaceToolHandler';\nimport ToggleShapeCollapseHandler from './cmd/ToggleShapeCollapseHandler';\nimport UpdateAttachmentHandler from './cmd/UpdateAttachmentHandler';\nimport UpdateWaypointsHandler from './cmd/UpdateWaypointsHandler';\n\n\n/**\n * The basic modeling entry point.\n *\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n */\nexport default function Modeling(eventBus, elementFactory, commandStack) {\n  this._eventBus = eventBus;\n  this._elementFactory = elementFactory;\n  this._commandStack = commandStack;\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n\n    // register modeling handlers\n    self.registerHandlers(commandStack);\n  });\n}\n\nModeling.$inject = [ 'eventBus', 'elementFactory', 'commandStack' ];\n\n\nModeling.prototype.getHandlers = function() {\n  return {\n    'shape.append': AppendShapeHandler,\n    'shape.create': CreateShapeHandler,\n    'shape.delete': DeleteShapeHandler,\n    'shape.move': MoveShapeHandler,\n    'shape.resize': ResizeShapeHandler,\n    'shape.replace': ReplaceShapeHandler,\n    'shape.toggleCollapse': ToggleShapeCollapseHandler,\n\n    'spaceTool': SpaceToolHandler,\n\n    'label.create': CreateLabelHandler,\n\n    'connection.create': CreateConnectionHandler,\n    'connection.delete': DeleteConnectionHandler,\n    'connection.move': MoveConnectionHandler,\n    'connection.layout': LayoutConnectionHandler,\n\n    'connection.updateWaypoints': UpdateWaypointsHandler,\n\n    'connection.reconnect': ReconnectConnectionHandler,\n\n    'elements.create': CreateElementsHandler,\n    'elements.move': MoveElementsHandler,\n    'elements.delete': DeleteElementsHandler,\n\n    'elements.distribute': DistributeElementsHandler,\n    'elements.align': AlignElementsHandler,\n\n    'element.updateAttachment': UpdateAttachmentHandler\n  };\n};\n\n/**\n * Register handlers with the command stack\n *\n * @param {CommandStack} commandStack\n */\nModeling.prototype.registerHandlers = function(commandStack) {\n  forEach(this.getHandlers(), function(handler, id) {\n    commandStack.registerHandler(id, handler);\n  });\n};\n\n\n// modeling helpers //////////////////////\n\nModeling.prototype.moveShape = function(shape, delta, newParent, newParentIndex, hints) {\n\n  if (typeof newParentIndex === 'object') {\n    hints = newParentIndex;\n    newParentIndex = null;\n  }\n\n  var context = {\n    shape: shape,\n    delta:  delta,\n    newParent: newParent,\n    newParentIndex: newParentIndex,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.move', context);\n};\n\n\n/**\n * Update the attachment of the given shape.\n *\n * @param {djs.mode.Base} shape\n * @param {djs.model.Base} [newHost]\n */\nModeling.prototype.updateAttachment = function(shape, newHost) {\n  var context = {\n    shape: shape,\n    newHost: newHost\n  };\n\n  this._commandStack.execute('element.updateAttachment', context);\n};\n\n\n/**\n * Move a number of shapes to a new target, either setting it as\n * the new parent or attaching it.\n *\n * @param {Array<djs.mode.Base>} shapes\n * @param {Point} delta\n * @param {djs.model.Base} [target]\n * @param {Object} [hints]\n * @param {Boolean} [hints.attach=false]\n */\nModeling.prototype.moveElements = function(shapes, delta, target, hints) {\n\n  hints = hints || {};\n\n  var attach = hints.attach;\n\n  var newParent = target,\n      newHost;\n\n  if (attach === true) {\n    newHost = target;\n    newParent = target.parent;\n  } else\n\n  if (attach === false) {\n    newHost = null;\n  }\n\n  var context = {\n    shapes: shapes,\n    delta: delta,\n    newParent: newParent,\n    newHost: newHost,\n    hints: hints\n  };\n\n  this._commandStack.execute('elements.move', context);\n};\n\n\nModeling.prototype.moveConnection = function(connection, delta, newParent, newParentIndex, hints) {\n\n  if (typeof newParentIndex === 'object') {\n    hints = newParentIndex;\n    newParentIndex = undefined;\n  }\n\n  var context = {\n    connection: connection,\n    delta: delta,\n    newParent: newParent,\n    newParentIndex: newParentIndex,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.move', context);\n};\n\n\nModeling.prototype.layoutConnection = function(connection, hints) {\n  var context = {\n    connection: connection,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.layout', context);\n};\n\n\n/**\n * Create connection.\n *\n * @param {djs.model.Base} source\n * @param {djs.model.Base} target\n * @param {Number} [parentIndex]\n * @param {Object|djs.model.Connection} connection\n * @param {djs.model.Base} parent\n * @param {Object} hints\n *\n * @return {djs.model.Connection} the created connection.\n */\nModeling.prototype.createConnection = function(source, target, parentIndex, connection, parent, hints) {\n\n  if (typeof parentIndex === 'object') {\n    hints = parent;\n    parent = connection;\n    connection = parentIndex;\n    parentIndex = undefined;\n  }\n\n  connection = this._create('connection', connection);\n\n  var context = {\n    source: source,\n    target: target,\n    parent: parent,\n    parentIndex: parentIndex,\n    connection: connection,\n    hints: hints\n  };\n\n  this._commandStack.execute('connection.create', context);\n\n  return context.connection;\n};\n\n\n/**\n * Create a shape at the specified position.\n *\n * @param {djs.model.Shape|Object} shape\n * @param {Point} position\n * @param {djs.model.Shape|djs.model.Root} target\n * @param {Number} [parentIndex] position in parents children list\n * @param {Object} [hints]\n * @param {Boolean} [hints.attach] whether to attach to target or become a child\n *\n * @return {djs.model.Shape} the created shape\n */\nModeling.prototype.createShape = function(shape, position, target, parentIndex, hints) {\n\n  if (typeof parentIndex !== 'number') {\n    hints = parentIndex;\n    parentIndex = undefined;\n  }\n\n  hints = hints || {};\n\n  var attach = hints.attach,\n      parent,\n      host;\n\n  shape = this._create('shape', shape);\n\n  if (attach) {\n    parent = target.parent;\n    host = target;\n  } else {\n    parent = target;\n  }\n\n  var context = {\n    position: position,\n    shape: shape,\n    parent: parent,\n    parentIndex: parentIndex,\n    host: host,\n    hints: hints\n  };\n\n  this._commandStack.execute('shape.create', context);\n\n  return context.shape;\n};\n\n\nModeling.prototype.createElements = function(elements, position, parent, parentIndex, hints) {\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  if (typeof parentIndex !== 'number') {\n    hints = parentIndex;\n    parentIndex = undefined;\n  }\n\n  hints = hints || {};\n\n  var context = {\n    position: position,\n    elements: elements,\n    parent: parent,\n    parentIndex: parentIndex,\n    hints: hints\n  };\n\n  this._commandStack.execute('elements.create', context);\n\n  return context.elements;\n};\n\n\nModeling.prototype.createLabel = function(labelTarget, position, label, parent) {\n\n  label = this._create('label', label);\n\n  var context = {\n    labelTarget: labelTarget,\n    position: position,\n    parent: parent || labelTarget.parent,\n    shape: label\n  };\n\n  this._commandStack.execute('label.create', context);\n\n  return context.shape;\n};\n\n\n/**\n * Append shape to given source, drawing a connection\n * between source and the newly created shape.\n *\n * @param {djs.model.Shape} source\n * @param {djs.model.Shape|Object} shape\n * @param {Point} position\n * @param {djs.model.Shape} target\n * @param {Object} [hints]\n * @param {Boolean} [hints.attach]\n * @param {djs.model.Connection|Object} [hints.connection]\n * @param {djs.model.Base} [hints.connectionParent]\n *\n * @return {djs.model.Shape} the newly created shape\n */\nModeling.prototype.appendShape = function(source, shape, position, target, hints) {\n\n  hints = hints || {};\n\n  shape = this._create('shape', shape);\n\n  var context = {\n    source: source,\n    position: position,\n    target: target,\n    shape: shape,\n    connection: hints.connection,\n    connectionParent: hints.connectionParent,\n    attach: hints.attach\n  };\n\n  this._commandStack.execute('shape.append', context);\n\n  return context.shape;\n};\n\n\nModeling.prototype.removeElements = function(elements) {\n  var context = {\n    elements: elements\n  };\n\n  this._commandStack.execute('elements.delete', context);\n};\n\n\nModeling.prototype.distributeElements = function(groups, axis, dimension) {\n  var context = {\n    groups: groups,\n    axis: axis,\n    dimension: dimension\n  };\n\n  this._commandStack.execute('elements.distribute', context);\n};\n\n\nModeling.prototype.removeShape = function(shape, hints) {\n  var context = {\n    shape: shape,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.delete', context);\n};\n\n\nModeling.prototype.removeConnection = function(connection, hints) {\n  var context = {\n    connection: connection,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.delete', context);\n};\n\nModeling.prototype.replaceShape = function(oldShape, newShape, hints) {\n  var context = {\n    oldShape: oldShape,\n    newData: newShape,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.replace', context);\n\n  return context.newShape;\n};\n\nModeling.prototype.alignElements = function(elements, alignment) {\n  var context = {\n    elements: elements,\n    alignment: alignment\n  };\n\n  this._commandStack.execute('elements.align', context);\n};\n\nModeling.prototype.resizeShape = function(shape, newBounds, minBounds, hints) {\n  var context = {\n    shape: shape,\n    newBounds: newBounds,\n    minBounds: minBounds,\n    hints: hints\n  };\n\n  this._commandStack.execute('shape.resize', context);\n};\n\nModeling.prototype.createSpace = function(movingShapes, resizingShapes, delta, direction, start) {\n  var context = {\n    delta: delta,\n    direction: direction,\n    movingShapes: movingShapes,\n    resizingShapes: resizingShapes,\n    start: start\n  };\n\n  this._commandStack.execute('spaceTool', context);\n};\n\nModeling.prototype.updateWaypoints = function(connection, newWaypoints, hints) {\n  var context = {\n    connection: connection,\n    newWaypoints: newWaypoints,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.updateWaypoints', context);\n};\n\nModeling.prototype.reconnect = function(connection, source, target, dockingOrPoints, hints) {\n  var context = {\n    connection: connection,\n    newSource: source,\n    newTarget: target,\n    dockingOrPoints: dockingOrPoints,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('connection.reconnect', context);\n};\n\nModeling.prototype.reconnectStart = function(connection, newSource, dockingOrPoints, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  this.reconnect(connection, newSource, connection.target, dockingOrPoints, assign(hints, {\n    docking: 'source'\n  }));\n};\n\nModeling.prototype.reconnectEnd = function(connection, newTarget, dockingOrPoints, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  this.reconnect(connection, connection.source, newTarget, dockingOrPoints, assign(hints, {\n    docking: 'target'\n  }));\n};\n\nModeling.prototype.connect = function(source, target, attrs, hints) {\n  return this.createConnection(source, target, attrs || {}, source.parent, hints);\n};\n\nModeling.prototype._create = function(type, attrs) {\n  if (attrs instanceof Base) {\n    return attrs;\n  } else {\n    return this._elementFactory.create(type, attrs);\n  }\n};\n\nModeling.prototype.toggleCollapse = function(shape, hints) {\n  var context = {\n    shape: shape,\n    hints: hints || {}\n  };\n\n  this._commandStack.execute('shape.toggleCollapse', context);\n};\n","import {\n  reduce,\n  keys,\n  forEach,\n  assign\n} from 'min-dash';\n\nimport {\n  getBusinessObject\n} from '../../../util/ModelUtil';\n\nvar DEFAULT_FLOW = 'default',\n    ID = 'id',\n    DI = 'di';\n\nvar NULL_DIMENSIONS = {\n  width: 0,\n  height: 0\n};\n\n/**\n * A handler that implements a BPMN 2.0 property update.\n *\n * This should be used to set simple properties on elements with\n * an underlying BPMN business object.\n *\n * Use respective diagram-js provided handlers if you would\n * like to perform automated modeling.\n */\nexport default function UpdatePropertiesHandler(\n    elementRegistry, moddle, translate,\n    modeling, textRenderer) {\n\n  this._elementRegistry = elementRegistry;\n  this._moddle = moddle;\n  this._translate = translate;\n  this._modeling = modeling;\n  this._textRenderer = textRenderer;\n}\n\nUpdatePropertiesHandler.$inject = [\n  'elementRegistry',\n  'moddle',\n  'translate',\n  'modeling',\n  'textRenderer'\n];\n\n\n// api //////////////////////\n\n/**\n * Updates a BPMN element with a list of new properties\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element the element to update\n * @param {Object} context.properties a list of properties to set on the element's\n *                                    businessObject (the BPMN model element)\n *\n * @return {Array<djs.model.Base>} the updated element\n */\nUpdatePropertiesHandler.prototype.execute = function(context) {\n\n  var element = context.element,\n      changed = [ element ],\n      translate = this._translate;\n\n  if (!element) {\n    throw new Error(translate('element required'));\n  }\n\n  var elementRegistry = this._elementRegistry,\n      ids = this._moddle.ids;\n\n  var businessObject = element.businessObject,\n      properties = unwrapBusinessObjects(context.properties),\n      oldProperties = context.oldProperties || getProperties(businessObject, properties);\n\n  if (isIdChange(properties, businessObject)) {\n    ids.unclaim(businessObject[ID]);\n\n    elementRegistry.updateId(element, properties[ID]);\n\n    ids.claim(properties[ID], businessObject);\n  }\n\n  // correctly indicate visual changes on default flow updates\n  if (DEFAULT_FLOW in properties) {\n\n    if (properties[DEFAULT_FLOW]) {\n      changed.push(elementRegistry.get(properties[DEFAULT_FLOW].id));\n    }\n\n    if (businessObject[DEFAULT_FLOW]) {\n      changed.push(elementRegistry.get(businessObject[DEFAULT_FLOW].id));\n    }\n  }\n\n  // update properties\n  setProperties(businessObject, properties);\n\n  // store old values\n  context.oldProperties = oldProperties;\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n\nUpdatePropertiesHandler.prototype.postExecute = function(context) {\n  var element = context.element,\n      label = element.label;\n\n  var text = label && getBusinessObject(label).name;\n\n  if (!text) {\n    return;\n  }\n\n  // get layouted text bounds and resize external\n  // external label accordingly\n  var newLabelBounds = this._textRenderer.getExternalLabelBounds(label, text);\n\n  this._modeling.resizeShape(label, newLabelBounds, NULL_DIMENSIONS);\n};\n\n/**\n * Reverts the update on a BPMN elements properties.\n *\n * @param  {Object} context\n *\n * @return {djs.model.Base} the updated element\n */\nUpdatePropertiesHandler.prototype.revert = function(context) {\n\n  var element = context.element,\n      properties = context.properties,\n      oldProperties = context.oldProperties,\n      businessObject = element.businessObject,\n      elementRegistry = this._elementRegistry,\n      ids = this._moddle.ids;\n\n  // update properties\n  setProperties(businessObject, oldProperties);\n\n  if (isIdChange(properties, businessObject)) {\n    ids.unclaim(properties[ID]);\n\n    elementRegistry.updateId(element, oldProperties[ID]);\n\n    ids.claim(oldProperties[ID], businessObject);\n  }\n\n  return context.changed;\n};\n\n\nfunction isIdChange(properties, businessObject) {\n  return ID in properties && properties[ID] !== businessObject[ID];\n}\n\n\nfunction getProperties(businessObject, properties) {\n  var propertyNames = keys(properties);\n\n  return reduce(propertyNames, function(result, key) {\n\n    // handle DI separately\n    if (key !== DI) {\n      result[key] = businessObject.get(key);\n    } else {\n      result[key] = getDiProperties(businessObject.di, keys(properties.di));\n    }\n\n    return result;\n  }, {});\n}\n\n\nfunction getDiProperties(di, propertyNames) {\n  return reduce(propertyNames, function(result, key) {\n    result[key] = di.get(key);\n\n    return result;\n  }, {});\n}\n\n\nfunction setProperties(businessObject, properties) {\n  forEach(properties, function(value, key) {\n\n    if (key !== DI) {\n      businessObject.set(key, value);\n    } else {\n\n      // only update, if businessObject.di exists\n      if (businessObject.di) {\n        setDiProperties(businessObject.di, value);\n      }\n    }\n  });\n}\n\n\nfunction setDiProperties(di, properties) {\n  forEach(properties, function(value, key) {\n    di.set(key, value);\n  });\n}\n\n\nvar referencePropertyNames = [ 'default' ];\n\n/**\n * Make sure we unwrap the actual business object\n * behind diagram element that may have been\n * passed as arguments.\n *\n * @param  {Object} properties\n *\n * @return {Object} unwrappedProps\n */\nfunction unwrapBusinessObjects(properties) {\n\n  var unwrappedProps = assign({}, properties);\n\n  referencePropertyNames.forEach(function(name) {\n    if (name in properties) {\n      unwrappedProps[name] = getBusinessObject(unwrappedProps[name]);\n    }\n  });\n\n  return unwrappedProps;\n}","import {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\n\nexport default function UpdateCanvasRootHandler(canvas, modeling) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n}\n\nUpdateCanvasRootHandler.$inject = [\n  'canvas',\n  'modeling'\n];\n\n\nUpdateCanvasRootHandler.prototype.execute = function(context) {\n\n  var canvas = this._canvas;\n\n  var newRoot = context.newRoot,\n      newRootBusinessObject = newRoot.businessObject,\n      oldRoot = canvas.getRootElement(),\n      oldRootBusinessObject = oldRoot.businessObject,\n      bpmnDefinitions = oldRootBusinessObject.$parent,\n      diPlane = oldRootBusinessObject.di;\n\n  // (1) replace process old <> new root\n  canvas.setRootElement(newRoot, true);\n\n  // (2) update root elements\n  collectionAdd(bpmnDefinitions.rootElements, newRootBusinessObject);\n  newRootBusinessObject.$parent = bpmnDefinitions;\n\n  collectionRemove(bpmnDefinitions.rootElements, oldRootBusinessObject);\n  oldRootBusinessObject.$parent = null;\n\n  // (3) wire di\n  oldRootBusinessObject.di = null;\n\n  diPlane.bpmnElement = newRootBusinessObject;\n  newRootBusinessObject.di = diPlane;\n\n  context.oldRoot = oldRoot;\n\n  // TODO(nikku): return changed elements?\n  // return [ newRoot, oldRoot ];\n};\n\n\nUpdateCanvasRootHandler.prototype.revert = function(context) {\n\n  var canvas = this._canvas;\n\n  var newRoot = context.newRoot,\n      newRootBusinessObject = newRoot.businessObject,\n      oldRoot = context.oldRoot,\n      oldRootBusinessObject = oldRoot.businessObject,\n      bpmnDefinitions = newRootBusinessObject.$parent,\n      diPlane = newRootBusinessObject.di;\n\n  // (1) replace process old <> new root\n  canvas.setRootElement(oldRoot, true);\n\n  // (2) update root elements\n  collectionRemove(bpmnDefinitions.rootElements, newRootBusinessObject);\n  newRootBusinessObject.$parent = null;\n\n  collectionAdd(bpmnDefinitions.rootElements, oldRootBusinessObject);\n  oldRootBusinessObject.$parent = bpmnDefinitions;\n\n  // (3) wire di\n  newRootBusinessObject.di = null;\n\n  diPlane.bpmnElement = oldRootBusinessObject;\n  oldRootBusinessObject.di = diPlane;\n\n  // TODO(nikku): return changed elements?\n  // return [ newRoot, oldRoot ];\n};","import {\n  filter\n} from 'min-dash';\n\nimport {\n  eachElement\n} from 'diagram-js/lib/util/Elements';\n\nimport {\n  getLanesRoot,\n  getChildLanes,\n  LANE_INDENTATION\n} from '../util/LaneUtil';\n\n\n/**\n * A handler that allows us to add a new lane\n * above or below an existing one.\n *\n * @param {Modeling} modeling\n */\nexport default function AddLaneHandler(modeling, spaceTool) {\n  this._modeling = modeling;\n  this._spaceTool = spaceTool;\n}\n\nAddLaneHandler.$inject = [\n  'modeling',\n  'spaceTool'\n];\n\n\nAddLaneHandler.prototype.preExecute = function(context) {\n\n  var spaceTool = this._spaceTool,\n      modeling = this._modeling;\n\n  var shape = context.shape,\n      location = context.location;\n\n  var lanesRoot = getLanesRoot(shape);\n\n  var isRoot = lanesRoot === shape,\n      laneParent = isRoot ? shape : shape.parent;\n\n  var existingChildLanes = getChildLanes(laneParent);\n\n  // (0) add a lane if we currently got none and are adding to root\n  if (!existingChildLanes.length) {\n    modeling.createShape({ type: 'bpmn:Lane' }, {\n      x: shape.x + LANE_INDENTATION,\n      y: shape.y,\n      width: shape.width - LANE_INDENTATION,\n      height: shape.height\n    }, laneParent);\n  }\n\n  // (1) collect affected elements to create necessary space\n  var allAffected = [];\n\n  eachElement(lanesRoot, function(element) {\n    allAffected.push(element);\n\n    if (element === shape) {\n      return [];\n    }\n\n    return filter(element.children, function(c) {\n      return c !== shape;\n    });\n  });\n\n  var offset = location === 'top' ? -120 : 120,\n      lanePosition = location === 'top' ? shape.y : shape.y + shape.height,\n      spacePos = lanePosition + (location === 'top' ? 10 : -10),\n      direction = location === 'top' ? 'n' : 's';\n\n  var adjustments = spaceTool.calculateAdjustments(allAffected, 'y', offset, spacePos);\n\n  spaceTool.makeSpace(adjustments.movingShapes, adjustments.resizingShapes, { x: 0, y: offset }, direction);\n\n  // (2) create new lane at open space\n  context.newLane = modeling.createShape({ type: 'bpmn:Lane' }, {\n    x: shape.x + (isRoot ? LANE_INDENTATION : 0),\n    y: lanePosition - (location === 'top' ? 120 : 0),\n    width: shape.width - (isRoot ? LANE_INDENTATION : 0),\n    height: 120\n  }, laneParent);\n};\n","import {\n  getChildLanes,\n  LANE_INDENTATION\n} from '../util/LaneUtil';\n\n\n/**\n * A handler that splits a lane into a number of sub-lanes,\n * creating new sub lanes, if necessary.\n *\n * @param {Modeling} modeling\n */\nexport default function SplitLaneHandler(modeling, translate) {\n  this._modeling = modeling;\n  this._translate = translate;\n}\n\nSplitLaneHandler.$inject = [\n  'modeling',\n  'translate'\n];\n\n\nSplitLaneHandler.prototype.preExecute = function(context) {\n\n  var modeling = this._modeling,\n      translate = this._translate;\n\n  var shape = context.shape,\n      newLanesCount = context.count;\n\n  var childLanes = getChildLanes(shape),\n      existingLanesCount = childLanes.length;\n\n  if (existingLanesCount > newLanesCount) {\n    throw new Error(translate('more than {count} child lanes', { count: newLanesCount }));\n  }\n\n  var newLanesHeight = Math.round(shape.height / newLanesCount);\n\n  // Iterate from top to bottom in child lane order,\n  // resizing existing lanes and creating new ones\n  // so that they split the parent proportionally.\n  //\n  // Due to rounding related errors, the bottom lane\n  // needs to take up all the remaining space.\n  var laneY,\n      laneHeight,\n      laneBounds,\n      newLaneAttrs,\n      idx;\n\n  for (idx = 0; idx < newLanesCount; idx++) {\n\n    laneY = shape.y + idx * newLanesHeight;\n\n    // if bottom lane\n    if (idx === newLanesCount - 1) {\n      laneHeight = shape.height - (newLanesHeight * idx);\n    } else {\n      laneHeight = newLanesHeight;\n    }\n\n    laneBounds = {\n      x: shape.x + LANE_INDENTATION,\n      y: laneY,\n      width: shape.width - LANE_INDENTATION,\n      height: laneHeight\n    };\n\n    if (idx < existingLanesCount) {\n\n      // resize existing lane\n      modeling.resizeShape(childLanes[idx], laneBounds);\n    } else {\n\n      // create a new lane at position\n      newLaneAttrs = {\n        type: 'bpmn:Lane'\n      };\n\n      modeling.createShape(newLaneAttrs, laneBounds, shape);\n    }\n  }\n};\n","import { is } from '../../../util/ModelUtil';\n\nimport {\n  getLanesRoot,\n  computeLanesResize\n} from '../util/LaneUtil';\n\nimport {\n  eachElement\n} from 'diagram-js/lib/util/Elements';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  substractTRBL\n} from 'diagram-js/lib/features/resize/ResizeUtil';\n\n\n/**\n * A handler that resizes a lane.\n *\n * @param {Modeling} modeling\n */\nexport default function ResizeLaneHandler(modeling, spaceTool) {\n  this._modeling = modeling;\n  this._spaceTool = spaceTool;\n}\n\nResizeLaneHandler.$inject = [\n  'modeling',\n  'spaceTool'\n];\n\n\nResizeLaneHandler.prototype.preExecute = function(context) {\n\n  var shape = context.shape,\n      newBounds = context.newBounds,\n      balanced = context.balanced;\n\n  if (balanced !== false) {\n    this.resizeBalanced(shape, newBounds);\n  } else {\n    this.resizeSpace(shape, newBounds);\n  }\n};\n\n\n/**\n * Resize balanced, adjusting next / previous lane sizes.\n *\n * @param {djs.model.Shape} shape\n * @param {Bounds} newBounds\n */\nResizeLaneHandler.prototype.resizeBalanced = function(shape, newBounds) {\n\n  var modeling = this._modeling;\n\n  var resizeNeeded = computeLanesResize(shape, newBounds);\n\n  // resize the lane\n  modeling.resizeShape(shape, newBounds);\n\n  // resize other lanes as needed\n  resizeNeeded.forEach(function(r) {\n    modeling.resizeShape(r.shape, r.newBounds);\n  });\n};\n\n\n/**\n * Resize, making actual space and moving below / above elements.\n *\n * @param {djs.model.Shape} shape\n * @param {Bounds} newBounds\n */\nResizeLaneHandler.prototype.resizeSpace = function(shape, newBounds) {\n  var spaceTool = this._spaceTool;\n\n  var shapeTrbl = asTRBL(shape),\n      newTrbl = asTRBL(newBounds);\n\n  var trblDiff = substractTRBL(newTrbl, shapeTrbl);\n\n  var lanesRoot = getLanesRoot(shape);\n\n  var allAffected = [],\n      allLanes = [];\n\n  eachElement(lanesRoot, function(element) {\n    allAffected.push(element);\n\n    if (is(element, 'bpmn:Lane') || is(element, 'bpmn:Participant')) {\n      allLanes.push(element);\n    }\n\n    return element.children;\n  });\n\n  var change,\n      spacePos,\n      direction,\n      offset,\n      adjustments;\n\n  if (trblDiff.bottom || trblDiff.top) {\n\n    change = trblDiff.bottom || trblDiff.top;\n    spacePos = shape.y + (trblDiff.bottom ? shape.height : 0) + (trblDiff.bottom ? -10 : 10);\n    direction = trblDiff.bottom ? 's' : 'n';\n\n    offset = trblDiff.top > 0 || trblDiff.bottom < 0 ? -change : change;\n\n    adjustments = spaceTool.calculateAdjustments(allAffected, 'y', offset, spacePos);\n\n    spaceTool.makeSpace(adjustments.movingShapes, adjustments.resizingShapes, { x: 0, y: change }, direction);\n  }\n\n\n  if (trblDiff.left || trblDiff.right) {\n\n    change = trblDiff.right || trblDiff.left;\n    spacePos = shape.x + (trblDiff.right ? shape.width : 0) + (trblDiff.right ? -10 : 100);\n    direction = trblDiff.right ? 'e' : 'w';\n\n    offset = trblDiff.left > 0 || trblDiff.right < 0 ? -change : change;\n\n    adjustments = spaceTool.calculateAdjustments(allLanes, 'x', offset, spacePos);\n\n    spaceTool.makeSpace(adjustments.movingShapes, adjustments.resizingShapes, { x: change, y: 0 }, direction);\n  }\n};","import {\n  collectLanes,\n  getLanesRoot\n} from '../util/LaneUtil';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove\n} from 'diagram-js/lib/util/Collections';\n\nimport {\n  asTRBL\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nvar FLOW_NODE_REFS_ATTR = 'flowNodeRef',\n    LANES_ATTR = 'lanes';\n\n\n/**\n * A handler that updates lane refs on changed elements\n */\nexport default function UpdateFlowNodeRefsHandler(elementRegistry) {\n  this._elementRegistry = elementRegistry;\n}\n\nUpdateFlowNodeRefsHandler.$inject = [\n  'elementRegistry'\n];\n\n\nUpdateFlowNodeRefsHandler.prototype.computeUpdates = function(flowNodeShapes, laneShapes) {\n\n  var handledNodes = [];\n\n  var updates = [];\n\n  var participantCache = {};\n\n  var allFlowNodeShapes = [];\n\n  function isInLaneShape(element, laneShape) {\n\n    var laneTrbl = asTRBL(laneShape);\n\n    var elementMid = {\n      x: element.x + element.width / 2,\n      y: element.y + element.height / 2\n    };\n\n    return elementMid.x > laneTrbl.left &&\n           elementMid.x < laneTrbl.right &&\n           elementMid.y > laneTrbl.top &&\n           elementMid.y < laneTrbl.bottom;\n  }\n\n  function addFlowNodeShape(flowNodeShape) {\n    if (handledNodes.indexOf(flowNodeShape) === -1) {\n      allFlowNodeShapes.push(flowNodeShape);\n      handledNodes.push(flowNodeShape);\n    }\n  }\n\n  function getAllLaneShapes(flowNodeShape) {\n\n    var root = getLanesRoot(flowNodeShape);\n\n    if (!participantCache[root.id]) {\n      participantCache[root.id] = collectLanes(root);\n    }\n\n    return participantCache[root.id];\n  }\n\n  function getNewLanes(flowNodeShape) {\n    if (!flowNodeShape.parent) {\n      return [];\n    }\n\n    var allLaneShapes = getAllLaneShapes(flowNodeShape);\n\n    return allLaneShapes.filter(function(l) {\n      return isInLaneShape(flowNodeShape, l);\n    }).map(function(shape) {\n      return shape.businessObject;\n    });\n  }\n\n  laneShapes.forEach(function(laneShape) {\n    var root = getLanesRoot(laneShape);\n\n    if (!root || handledNodes.indexOf(root) !== -1) {\n      return;\n    }\n\n    var children = root.children.filter(function(c) {\n      return is(c, 'bpmn:FlowNode');\n    });\n\n    children.forEach(addFlowNodeShape);\n\n    handledNodes.push(root);\n  });\n\n  flowNodeShapes.forEach(addFlowNodeShape);\n\n\n  allFlowNodeShapes.forEach(function(flowNodeShape) {\n\n    var flowNode = flowNodeShape.businessObject;\n\n    var lanes = flowNode.get(LANES_ATTR),\n        remove = lanes.slice(),\n        add = getNewLanes(flowNodeShape);\n\n    updates.push({ flowNode: flowNode, remove: remove, add: add });\n  });\n\n  laneShapes.forEach(function(laneShape) {\n\n    var lane = laneShape.businessObject;\n\n    // lane got removed XX-)\n    if (!laneShape.parent) {\n      lane.get(FLOW_NODE_REFS_ATTR).forEach(function(flowNode) {\n        updates.push({ flowNode: flowNode, remove: [ lane ], add: [] });\n      });\n    }\n  });\n\n  return updates;\n};\n\nUpdateFlowNodeRefsHandler.prototype.execute = function(context) {\n\n  var updates = context.updates;\n\n  if (!updates) {\n    updates = context.updates = this.computeUpdates(context.flowNodeShapes, context.laneShapes);\n  }\n\n\n  updates.forEach(function(update) {\n\n    var flowNode = update.flowNode,\n        lanes = flowNode.get(LANES_ATTR);\n\n    // unwire old\n    update.remove.forEach(function(oldLane) {\n      collectionRemove(lanes, oldLane);\n      collectionRemove(oldLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n\n    // wire new\n    update.add.forEach(function(newLane) {\n      collectionAdd(lanes, newLane);\n      collectionAdd(newLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n  });\n\n  // TODO(nikku): return changed elements\n  // return [ ... ];\n};\n\n\nUpdateFlowNodeRefsHandler.prototype.revert = function(context) {\n\n  var updates = context.updates;\n\n  updates.forEach(function(update) {\n\n    var flowNode = update.flowNode,\n        lanes = flowNode.get(LANES_ATTR);\n\n    // unwire new\n    update.add.forEach(function(newLane) {\n      collectionRemove(lanes, newLane);\n      collectionRemove(newLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n\n    // wire old\n    update.remove.forEach(function(oldLane) {\n      collectionAdd(lanes, oldLane);\n      collectionAdd(oldLane.get(FLOW_NODE_REFS_ATTR), flowNode);\n    });\n  });\n\n  // TODO(nikku): return changed elements\n  // return [ ... ];\n};\n","export default function IdClaimHandler(moddle) {\n  this._moddle = moddle;\n}\n\nIdClaimHandler.$inject = [ 'moddle' ];\n\n\nIdClaimHandler.prototype.execute = function(context) {\n  var ids = this._moddle.ids,\n      id = context.id,\n      element = context.element,\n      claiming = context.claiming;\n\n  if (claiming) {\n    ids.claim(id, element);\n  } else {\n    ids.unclaim(id);\n  }\n};\n\n/**\n * Command revert implementation.\n */\nIdClaimHandler.prototype.revert = function(context) {\n  var ids = this._moddle.ids,\n      id = context.id,\n      element = context.element,\n      claiming = context.claiming;\n\n  if (claiming) {\n    ids.unclaim(id);\n  } else {\n    ids.claim(id, element);\n  }\n};\n\n","import {\r\n  assign,\r\n  forEach\r\n} from 'min-dash';\r\n\r\n\r\nvar DEFAULT_COLORS = {\r\n  fill: undefined,\r\n  stroke: undefined\r\n};\r\n\r\n\r\nexport default function SetColorHandler(commandStack) {\r\n  this._commandStack = commandStack;\r\n}\r\n\r\nSetColorHandler.$inject = [\r\n  'commandStack'\r\n];\r\n\r\n\r\nSetColorHandler.prototype.postExecute = function(context) {\r\n  var elements = context.elements,\r\n      colors = context.colors || DEFAULT_COLORS;\r\n\r\n  var self = this;\r\n\r\n  var di = {};\r\n\r\n  if ('fill' in colors) {\r\n    assign(di, { fill: colors.fill });\r\n  }\r\n\r\n  if ('stroke' in colors) {\r\n    assign(di, { stroke: colors.stroke });\r\n  }\r\n\r\n  forEach(elements, function(element) {\r\n\r\n    self._commandStack.execute('element.updateProperties', {\r\n      element: element,\r\n      properties: {\r\n        di: di\r\n      }\r\n    });\r\n  });\r\n\r\n};","import {\n  setLabel,\n  getLabel\n} from '../LabelUtil';\n\nimport {\n  getExternalLabelMid,\n  isLabelExternal,\n  hasExternalLabel,\n  isLabel\n} from '../../../util/LabelUtil';\n\nimport {\n  is\n} from '../../../util/ModelUtil';\n\nvar NULL_DIMENSIONS = {\n  width: 0,\n  height: 0\n};\n\n\n/**\n * A handler that updates the text of a BPMN element.\n */\nexport default function UpdateLabelHandler(modeling, textRenderer) {\n\n  /**\n   * Set the label and return the changed elements.\n   *\n   * Element parameter can be label itself or connection (i.e. sequence flow).\n   *\n   * @param {djs.model.Base} element\n   * @param {String} text\n   */\n  function setText(element, text) {\n\n    // external label if present\n    var label = element.label || element;\n\n    var labelTarget = element.labelTarget || element;\n\n    setLabel(label, text, labelTarget !== label);\n\n    return [ label, labelTarget ];\n  }\n\n  function preExecute(ctx) {\n    var element = ctx.element,\n        businessObject = element.businessObject,\n        newLabel = ctx.newLabel;\n\n    if (!isLabel(element)\n        && isLabelExternal(element)\n        && !hasExternalLabel(element)\n        && !isEmptyText(newLabel)) {\n\n      // create label\n      var paddingTop = 7;\n\n      var labelCenter = getExternalLabelMid(element);\n\n      labelCenter = {\n        x: labelCenter.x,\n        y: labelCenter.y + paddingTop\n      };\n\n      modeling.createLabel(element, labelCenter, {\n        id: businessObject.id + '_label',\n        businessObject: businessObject\n      });\n    }\n  }\n\n  function execute(ctx) {\n    ctx.oldLabel = getLabel(ctx.element);\n    return setText(ctx.element, ctx.newLabel);\n  }\n\n  function revert(ctx) {\n    return setText(ctx.element, ctx.oldLabel);\n  }\n\n  function postExecute(ctx) {\n    var element = ctx.element,\n        label = element.label || element,\n        newLabel = ctx.newLabel,\n        newBounds = ctx.newBounds,\n        hints = ctx.hints || {};\n\n    if (isLabel(label) && isEmptyText(newLabel)) {\n\n      if (hints.removeShape !== false) {\n        modeling.removeShape(label, { unsetLabel: false });\n      }\n\n      return;\n    }\n\n    // ignore internal labels for elements except text annotations\n    if (!isLabelExternal(element) && !is(element, 'bpmn:TextAnnotation')) {\n      return;\n    }\n\n    var text = getLabel(label);\n\n    // don't resize without text\n    if (!text) {\n      return;\n    }\n\n    // resize element based on label _or_ pre-defined bounds\n    if (typeof newBounds === 'undefined') {\n      newBounds = textRenderer.getExternalLabelBounds(label, text);\n    }\n\n    // setting newBounds to false or _null_ will\n    // disable the postExecute resize operation\n    if (newBounds) {\n      modeling.resizeShape(label, newBounds, NULL_DIMENSIONS);\n    }\n  }\n\n  // API\n\n  this.preExecute = preExecute;\n  this.execute = execute;\n  this.revert = revert;\n  this.postExecute = postExecute;\n}\n\nUpdateLabelHandler.$inject = [\n  'modeling',\n  'textRenderer'\n];\n\n\n// helpers ///////////////////////\n\nfunction isEmptyText(label) {\n  return !label || !label.trim();\n}","import inherits from 'inherits';\n\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\n\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler';\nimport UpdateCanvasRootHandler from './cmd/UpdateCanvasRootHandler';\nimport AddLaneHandler from './cmd/AddLaneHandler';\nimport SplitLaneHandler from './cmd/SplitLaneHandler';\nimport ResizeLaneHandler from './cmd/ResizeLaneHandler';\nimport UpdateFlowNodeRefsHandler from './cmd/UpdateFlowNodeRefsHandler';\nimport IdClaimHandler from './cmd/IdClaimHandler';\nimport SetColorHandler from './cmd/SetColorHandler';\n\nimport UpdateLabelHandler from '../label-editing/cmd/UpdateLabelHandler';\n\n\n/**\n * BPMN 2.0 modeling features activator\n *\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n * @param {BpmnRules} bpmnRules\n */\nexport default function Modeling(\n    eventBus, elementFactory, commandStack,\n    bpmnRules) {\n\n  BaseModeling.call(this, eventBus, elementFactory, commandStack);\n\n  this._bpmnRules = bpmnRules;\n}\n\ninherits(Modeling, BaseModeling);\n\nModeling.$inject = [\n  'eventBus',\n  'elementFactory',\n  'commandStack',\n  'bpmnRules'\n];\n\n\nModeling.prototype.getHandlers = function() {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n  handlers['canvas.updateRoot'] = UpdateCanvasRootHandler;\n  handlers['lane.add'] = AddLaneHandler;\n  handlers['lane.resize'] = ResizeLaneHandler;\n  handlers['lane.split'] = SplitLaneHandler;\n  handlers['lane.updateRefs'] = UpdateFlowNodeRefsHandler;\n  handlers['id.updateClaim'] = IdClaimHandler;\n  handlers['element.setColor'] = SetColorHandler;\n  handlers['element.updateLabel'] = UpdateLabelHandler;\n\n  return handlers;\n};\n\n\nModeling.prototype.updateLabel = function(element, newLabel, newBounds, hints) {\n  this._commandStack.execute('element.updateLabel', {\n    element: element,\n    newLabel: newLabel,\n    newBounds: newBounds,\n    hints: hints || {}\n  });\n};\n\n\nModeling.prototype.connect = function(source, target, attrs, hints) {\n\n  var bpmnRules = this._bpmnRules;\n\n  if (!attrs) {\n    attrs = bpmnRules.canConnect(source, target);\n  }\n\n  if (!attrs) {\n    return;\n  }\n\n  return this.createConnection(source, target, attrs, source.parent, hints);\n};\n\n\nModeling.prototype.updateProperties = function(element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\nModeling.prototype.resizeLane = function(laneShape, newBounds, balanced) {\n  this._commandStack.execute('lane.resize', {\n    shape: laneShape,\n    newBounds: newBounds,\n    balanced: balanced\n  });\n};\n\nModeling.prototype.addLane = function(targetLaneShape, location) {\n  var context = {\n    shape: targetLaneShape,\n    location: location\n  };\n\n  this._commandStack.execute('lane.add', context);\n\n  return context.newLane;\n};\n\nModeling.prototype.splitLane = function(targetLane, count) {\n  this._commandStack.execute('lane.split', {\n    shape: targetLane,\n    count: count\n  });\n};\n\n/**\n * Transform the current diagram into a collaboration.\n *\n * @return {djs.model.Root} the new root element\n */\nModeling.prototype.makeCollaboration = function() {\n\n  var collaborationElement = this._create('root', {\n    type: 'bpmn:Collaboration'\n  });\n\n  var context = {\n    newRoot: collaborationElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n\n  return collaborationElement;\n};\n\nModeling.prototype.updateLaneRefs = function(flowNodeShapes, laneShapes) {\n\n  this._commandStack.execute('lane.updateRefs', {\n    flowNodeShapes: flowNodeShapes,\n    laneShapes: laneShapes\n  });\n};\n\n/**\n * Transform the current diagram into a process.\n *\n * @return {djs.model.Root} the new root element\n */\nModeling.prototype.makeProcess = function() {\n\n  var processElement = this._create('root', {\n    type: 'bpmn:Process'\n  });\n\n  var context = {\n    newRoot: processElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n};\n\n\nModeling.prototype.claimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\n\nModeling.prototype.unclaimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\nModeling.prototype.setColor = function(elements, colors) {\n  if (!elements.length) {\n    elements = [ elements ];\n  }\n\n  this._commandStack.execute('element.setColor', {\n    elements: elements,\n    colors: colors\n  });\n};\n","import {\n  getMid\n} from './LayoutUtil';\n\n\n/**\n * A base connection layouter implementation\n * that layouts the connection by directly connecting\n * mid(source) + mid(target).\n */\nexport default function BaseLayouter() {}\n\n\n/**\n * Return the new layouted waypoints for the given connection.\n *\n * The connection passed is still unchanged; you may figure out about\n * the new connection start / end via the layout hints provided.\n *\n * @param {djs.model.Connection} connection\n * @param {Object} [hints]\n * @param {Point} [hints.connectionStart]\n * @param {Point} [hints.connectionEnd]\n * @param {Point} [hints.source]\n * @param {Point} [hints.target]\n *\n * @return {Array<Point>} the layouted connection waypoints\n */\nBaseLayouter.prototype.layoutConnection = function(connection, hints) {\n\n  hints = hints || {};\n\n  return [\n    hints.connectionStart || getMid(hints.source || connection.source),\n    hints.connectionEnd || getMid(hints.target || connection.target)\n  ];\n};\n","import {\n  assign,\n  find,\n  isArray,\n  without\n} from 'min-dash';\n\nimport {\n  getOrientation,\n  getMid\n} from './LayoutUtil';\n\nimport {\n  pointInRect,\n  pointDistance,\n  pointsAligned,\n  pointsOnLine\n} from '../util/Geometry';\n\nvar MIN_SEGMENT_LENGTH = 20,\n    POINT_ORIENTATION_PADDING = 5;\n\nvar round = Math.round;\n\nvar INTERSECTION_THRESHOLD = 20,\n    ORIENTATION_THRESHOLD = {\n      'h:h': 20,\n      'v:v': 20,\n      'h:v': -10,\n      'v:h': -10\n    };\n\nfunction needsTurn(orientation, startDirection) {\n  return !{\n    t: /top/,\n    r: /right/,\n    b: /bottom/,\n    l: /left/,\n    h: /./,\n    v: /./\n  }[startDirection].test(orientation);\n}\n\nfunction canLayoutStraight(direction, targetOrientation) {\n  return {\n    t: /top/,\n    r: /right/,\n    b: /bottom/,\n    l: /left/,\n    h: /left|right/,\n    v: /top|bottom/\n  }[direction].test(targetOrientation);\n}\n\nfunction getSegmentBendpoints(a, b, directions) {\n  var orientation = getOrientation(b, a, POINT_ORIENTATION_PADDING);\n\n  var startDirection = directions.split(':')[0];\n\n  var xmid = round((b.x - a.x) / 2 + a.x),\n      ymid = round((b.y - a.y) / 2 + a.y);\n\n  var segmentEnd, segmentDirections;\n\n  var layoutStraight = canLayoutStraight(startDirection, orientation),\n      layoutHorizontal = /h|r|l/.test(startDirection),\n      layoutTurn = false;\n\n  var turnNextDirections = false;\n\n  if (layoutStraight) {\n    segmentEnd = layoutHorizontal ? { x: xmid, y: a.y } : { x: a.x, y: ymid };\n\n    segmentDirections = layoutHorizontal ? 'h:h' : 'v:v';\n  } else {\n    layoutTurn = needsTurn(orientation, startDirection);\n\n    segmentDirections = layoutHorizontal ? 'h:v' : 'v:h';\n\n    if (layoutTurn) {\n\n      if (layoutHorizontal) {\n        turnNextDirections = ymid === a.y;\n\n        segmentEnd = {\n          x: a.x + MIN_SEGMENT_LENGTH * (/l/.test(startDirection) ? -1 : 1),\n          y: turnNextDirections ? ymid + MIN_SEGMENT_LENGTH : ymid\n        };\n      } else {\n        turnNextDirections = xmid === a.x;\n\n        segmentEnd = {\n          x: turnNextDirections ? xmid + MIN_SEGMENT_LENGTH : xmid,\n          y: a.y + MIN_SEGMENT_LENGTH * (/t/.test(startDirection) ? -1 : 1)\n        };\n      }\n\n    } else {\n      segmentEnd = {\n        x: xmid,\n        y: ymid\n      };\n    }\n  }\n\n  return {\n    waypoints: getBendpoints(a, segmentEnd, segmentDirections).concat(segmentEnd),\n    directions:  segmentDirections,\n    turnNextDirections: turnNextDirections\n  };\n}\n\nfunction getStartSegment(a, b, directions) {\n  return getSegmentBendpoints(a, b, directions);\n}\n\nfunction getEndSegment(a, b, directions) {\n  var invertedSegment = getSegmentBendpoints(b, a, invertDirections(directions));\n\n  return {\n    waypoints: invertedSegment.waypoints.slice().reverse(),\n    directions: invertDirections(invertedSegment.directions),\n    turnNextDirections: invertedSegment.turnNextDirections\n  };\n}\n\nfunction getMidSegment(startSegment, endSegment) {\n\n  var startDirection = startSegment.directions.split(':')[1],\n      endDirection = endSegment.directions.split(':')[0];\n\n  if (startSegment.turnNextDirections) {\n    startDirection = startDirection == 'h' ? 'v' : 'h';\n  }\n\n  if (endSegment.turnNextDirections) {\n    endDirection = endDirection == 'h' ? 'v' : 'h';\n  }\n\n  var directions = startDirection + ':' + endDirection;\n\n  var bendpoints = getBendpoints(\n    startSegment.waypoints[startSegment.waypoints.length - 1],\n    endSegment.waypoints[0],\n    directions\n  );\n\n  return {\n    waypoints: bendpoints,\n    directions: directions\n  };\n}\n\nfunction invertDirections(directions) {\n  return directions.split(':').reverse().join(':');\n}\n\n/**\n * Handle simple layouts with maximum two bendpoints.\n */\nfunction getSimpleBendpoints(a, b, directions) {\n\n  var xmid = round((b.x - a.x) / 2 + a.x),\n      ymid = round((b.y - a.y) / 2 + a.y);\n\n  // one point, right or left from a\n  if (directions === 'h:v') {\n    return [ { x: b.x, y: a.y } ];\n  }\n\n  // one point, above or below a\n  if (directions === 'v:h') {\n    return [ { x: a.x, y: b.y } ];\n  }\n\n  // vertical segment between a and b\n  if (directions === 'h:h') {\n    return [\n      { x: xmid, y: a.y },\n      { x: xmid, y: b.y }\n    ];\n  }\n\n  // horizontal segment between a and b\n  if (directions === 'v:v') {\n    return [\n      { x: a.x, y: ymid },\n      { x: b.x, y: ymid }\n    ];\n  }\n\n  throw new Error('invalid directions: can only handle varians of [hv]:[hv]');\n}\n\n\n/**\n * Returns the mid points for a manhattan connection between two points.\n *\n * @example h:h (horizontal:horizontal)\n *\n * [a]----[x]\n *         |\n *        [x]----[b]\n *\n * @example h:v (horizontal:vertical)\n *\n * [a]----[x]\n *         |\n *        [b]\n *\n * @example h:r (horizontal:right)\n *\n * [a]----[x]\n *         |\n *    [b]-[x]\n *\n * @param  {Point} a\n * @param  {Point} b\n * @param  {String} directions\n *\n * @return {Array<Point>}\n */\nfunction getBendpoints(a, b, directions) {\n  directions = directions || 'h:h';\n\n  if (!isValidDirections(directions)) {\n    throw new Error(\n      'unknown directions: <' + directions + '>: ' +\n      'must be specified as <start>:<end> ' +\n      'with start/end in { h,v,t,r,b,l }'\n    );\n  }\n\n  // compute explicit directions, involving trbl dockings\n  // using a three segmented layouting algorithm\n  if (isExplicitDirections(directions)) {\n    var startSegment = getStartSegment(a, b, directions),\n        endSegment = getEndSegment(a, b, directions),\n        midSegment = getMidSegment(startSegment, endSegment);\n\n    return [].concat(\n      startSegment.waypoints,\n      midSegment.waypoints,\n      endSegment.waypoints\n    );\n  }\n\n  // handle simple [hv]:[hv] cases that can be easily computed\n  return getSimpleBendpoints(a, b, directions);\n}\n\n/**\n * Create a connection between the two points according\n * to the manhattan layout (only horizontal and vertical) edges.\n *\n * @param {Point} a\n * @param {Point} b\n *\n * @param {String} [directions='h:h'] specifies manhattan directions for each point as {adirection}:{bdirection}.\n                   A directionfor a point is either `h` (horizontal) or `v` (vertical)\n *\n * @return {Array<Point>}\n */\nexport function connectPoints(a, b, directions) {\n\n  var points = getBendpoints(a, b, directions);\n\n  points.unshift(a);\n  points.push(b);\n\n  return withoutRedundantPoints(points);\n}\n\n\n/**\n * Connect two rectangles using a manhattan layouted connection.\n *\n * @param {Bounds} source source rectangle\n * @param {Bounds} target target rectangle\n * @param {Point} [start] source docking\n * @param {Point} [end] target docking\n *\n * @param {Object} [hints]\n * @param {String} [hints.preserveDocking=source] preserve docking on selected side\n * @param {Array<String>} [hints.preferredLayouts]\n * @param {Point|Boolean} [hints.connectionStart] whether the start changed\n * @param {Point|Boolean} [hints.connectionEnd] whether the end changed\n *\n * @return {Array<Point>} connection points\n */\nexport function connectRectangles(source, target, start, end, hints) {\n\n  var preferredLayouts = hints && hints.preferredLayouts || [];\n\n  var preferredLayout = without(preferredLayouts, 'straight')[0] || 'h:h';\n\n  var threshold = ORIENTATION_THRESHOLD[preferredLayout] || 0;\n\n  var orientation = getOrientation(source, target, threshold);\n\n  var directions = getDirections(orientation, preferredLayout);\n\n  start = start || getMid(source);\n  end = end || getMid(target);\n\n  var directionSplit = directions.split(':');\n\n  // compute actual docking points for start / end\n  // this ensures we properly layout only parts of the\n  // connection that lies in between the two rectangles\n  var startDocking = getDockingPoint(start, source, directionSplit[0], invertOrientation(orientation)),\n      endDocking = getDockingPoint(end, target, directionSplit[1], orientation);\n\n  return connectPoints(startDocking, endDocking, directions);\n}\n\n\n/**\n * Repair the connection between two rectangles, of which one has been updated.\n *\n * @param {Bounds} source\n * @param {Bounds} target\n * @param {Point} [start]\n * @param {Point} [end]\n * @param {Array<Point>} [waypoints]\n * @param {Object} [hints]\n * @param {Array<String>} [hints.preferredLayouts] list of preferred layouts\n * @param {Boolean} [hints.connectionStart]\n * @param {Boolean} [hints.connectionEnd]\n *\n * @return {Array<Point>} repaired waypoints\n */\nexport function repairConnection(source, target, start, end, waypoints, hints) {\n\n  if (isArray(start)) {\n    waypoints = start;\n    hints = end;\n\n    start = getMid(source);\n    end = getMid(target);\n  }\n\n  hints = assign({ preferredLayouts: [] }, hints);\n  waypoints = waypoints || [];\n\n  var preferredLayouts = hints.preferredLayouts,\n      preferStraight = preferredLayouts.indexOf('straight') !== -1,\n      repairedWaypoints;\n\n  // just layout non-existing or simple connections\n  // attempt to render straight lines, if required\n\n  // attempt to layout a straight line\n  repairedWaypoints = preferStraight && tryLayoutStraight(source, target, start, end, hints);\n\n  if (repairedWaypoints) {\n    return repairedWaypoints;\n  }\n\n  // try to layout from end\n  repairedWaypoints = hints.connectionEnd && tryRepairConnectionEnd(target, source, end, waypoints);\n\n  if (repairedWaypoints) {\n    return repairedWaypoints;\n  }\n\n  // try to layout from start\n  repairedWaypoints = hints.connectionStart && tryRepairConnectionStart(source, target, start, waypoints);\n\n  if (repairedWaypoints) {\n    return repairedWaypoints;\n  }\n\n  // or whether nothing seems to have changed\n  if (!hints.connectionStart && !hints.connectionEnd && waypoints && waypoints.length) {\n    return waypoints;\n  }\n\n  // simply reconnect if nothing else worked\n  return connectRectangles(source, target, start, end, hints);\n}\n\n\nfunction inRange(a, start, end) {\n  return a >= start && a <= end;\n}\n\nfunction isInRange(axis, a, b) {\n  var size = {\n    x: 'width',\n    y: 'height'\n  };\n\n  return inRange(a[axis], b[axis], b[axis] + b[size[axis]]);\n}\n\n/**\n * Layout a straight connection\n *\n * @param {Bounds} source\n * @param {Bounds} target\n * @param {Point} start\n * @param {Point} end\n * @param {Object} [hints]\n *\n * @return {Array<Point>|null} waypoints if straight layout worked\n */\nexport function tryLayoutStraight(source, target, start, end, hints) {\n  var axis = {},\n      primaryAxis,\n      orientation;\n\n  orientation = getOrientation(source, target);\n\n  // only layout a straight connection if shapes are\n  // horizontally or vertically aligned\n  if (!/^(top|bottom|left|right)$/.test(orientation)) {\n    return null;\n  }\n\n  if (/top|bottom/.test(orientation)) {\n    primaryAxis = 'x';\n  }\n\n  if (/left|right/.test(orientation)) {\n    primaryAxis = 'y';\n  }\n\n  if (hints.preserveDocking === 'target') {\n\n    if (!isInRange(primaryAxis, end, source)) {\n      return null;\n    }\n\n    axis[primaryAxis] = end[primaryAxis];\n\n    return [\n      {\n        x: axis.x !== undefined ? axis.x : start.x,\n        y: axis.y !== undefined ? axis.y : start.y,\n        original: {\n          x: axis.x !== undefined ? axis.x : start.x,\n          y: axis.y !== undefined ? axis.y : start.y\n        }\n      },\n      {\n        x: end.x,\n        y: end.y\n      }\n    ];\n\n  } else {\n\n    if (!isInRange(primaryAxis, start, target)) {\n      return null;\n    }\n\n    axis[primaryAxis] = start[primaryAxis];\n\n    return [\n      {\n        x: start.x,\n        y: start.y\n      },\n      {\n        x: axis.x !== undefined ? axis.x : end.x,\n        y: axis.y !== undefined ? axis.y : end.y,\n        original: {\n          x: axis.x !== undefined ? axis.x : end.x,\n          y: axis.y !== undefined ? axis.y : end.y\n        }\n      }\n    ];\n  }\n\n}\n\n/**\n * Repair a connection from start.\n *\n * @param {Bounds} moved\n * @param {Bounds} other\n * @param {Point} newDocking\n * @param {Array<Point>} points originalPoints from moved to other\n *\n * @return {Array<Point>|null} the repaired points between the two rectangles\n */\nfunction tryRepairConnectionStart(moved, other, newDocking, points) {\n  return _tryRepairConnectionSide(moved, other, newDocking, points);\n}\n\n/**\n * Repair a connection from end.\n *\n * @param {Bounds} moved\n * @param {Bounds} other\n * @param {Point} newDocking\n * @param {Array<Point>} points originalPoints from moved to other\n *\n * @return {Array<Point>|null} the repaired points between the two rectangles\n */\nfunction tryRepairConnectionEnd(moved, other, newDocking, points) {\n  var waypoints = points.slice().reverse();\n\n  waypoints = _tryRepairConnectionSide(moved, other, newDocking, waypoints);\n\n  return waypoints ? waypoints.reverse() : null;\n}\n\n/**\n * Repair a connection from one side that moved.\n *\n * @param {Bounds} moved\n * @param {Bounds} other\n * @param {Point} newDocking\n * @param {Array<Point>} points originalPoints from moved to other\n *\n * @return {Array<Point>} the repaired points between the two rectangles\n */\nfunction _tryRepairConnectionSide(moved, other, newDocking, points) {\n\n  function needsRelayout(points) {\n    if (points.length < 3) {\n      return true;\n    }\n\n    if (points.length > 4) {\n      return false;\n    }\n\n    // relayout if two points overlap\n    // this is most likely due to\n    return !!find(points, function(p, idx) {\n      var q = points[idx - 1];\n\n      return q && pointDistance(p, q) < 3;\n    });\n  }\n\n  function repairBendpoint(candidate, oldPeer, newPeer) {\n\n    var alignment = pointsAligned(oldPeer, candidate);\n\n    switch (alignment) {\n    case 'v':\n\n      // repair horizontal alignment\n      return { x: newPeer.x, y: candidate.y };\n    case 'h':\n\n      // repair vertical alignment\n      return { x: candidate.x, y: newPeer.y };\n    }\n\n    return { x: candidate.x, y: candidate. y };\n  }\n\n  function removeOverlapping(points, a, b) {\n    var i;\n\n    for (i = points.length - 2; i !== 0; i--) {\n\n      // intersects (?) break, remove all bendpoints up to this one and relayout\n      if (pointInRect(points[i], a, INTERSECTION_THRESHOLD) ||\n          pointInRect(points[i], b, INTERSECTION_THRESHOLD)) {\n\n        // return sliced old connection\n        return points.slice(i);\n      }\n    }\n\n    return points;\n  }\n\n  // (0) only repair what has layoutable bendpoints\n\n  // (1) if only one bendpoint and on shape moved onto other shapes axis\n  //     (horizontally / vertically), relayout\n\n  if (needsRelayout(points)) {\n    return null;\n  }\n\n  var oldDocking = points[0],\n      newPoints = points.slice(),\n      slicedPoints;\n\n  // (2) repair only last line segment and only if it was layouted before\n\n  newPoints[0] = newDocking;\n  newPoints[1] = repairBendpoint(newPoints[1], oldDocking, newDocking);\n\n\n  // (3) if shape intersects with any bendpoint after repair,\n  //     remove all segments up to this bendpoint and repair from there\n  slicedPoints = removeOverlapping(newPoints, moved, other);\n\n  if (slicedPoints !== newPoints) {\n    newPoints = _tryRepairConnectionSide(moved, other, newDocking, slicedPoints);\n  }\n\n  // (4) do NOT repair if repaired bendpoints are aligned\n  if (newPoints && pointsAligned(newPoints)) {\n    return null;\n  }\n\n  return newPoints;\n}\n\n\n/**\n * Returns the manhattan directions connecting two rectangles\n * with the given orientation.\n *\n * Will always return the default layout, if it is specific\n * regarding sides already (trbl).\n *\n * @example\n *\n * getDirections('top'); // -> 'v:v'\n * getDirections('intersect'); // -> 't:t'\n *\n * getDirections('top-right', 'v:h'); // -> 'v:h'\n * getDirections('top-right', 'h:h'); // -> 'h:h'\n *\n *\n * @param {String} orientation\n * @param {String} defaultLayout\n *\n * @return {String}\n */\nfunction getDirections(orientation, defaultLayout) {\n\n  // don't override specific trbl directions\n  if (isExplicitDirections(defaultLayout)) {\n    return defaultLayout;\n  }\n\n  switch (orientation) {\n  case 'intersect':\n    return 't:t';\n\n  case 'top':\n  case 'bottom':\n    return 'v:v';\n\n  case 'left':\n  case 'right':\n    return 'h:h';\n\n  // 'top-left'\n  // 'top-right'\n  // 'bottom-left'\n  // 'bottom-right'\n  default:\n    return defaultLayout;\n  }\n}\n\nfunction isValidDirections(directions) {\n  return directions && /^h|v|t|r|b|l:h|v|t|r|b|l$/.test(directions);\n}\n\nfunction isExplicitDirections(directions) {\n  return directions && /t|r|b|l/.test(directions);\n}\n\nfunction invertOrientation(orientation) {\n  return {\n    'top': 'bottom',\n    'bottom': 'top',\n    'left': 'right',\n    'right': 'left',\n    'top-left': 'bottom-right',\n    'bottom-right': 'top-left',\n    'top-right': 'bottom-left',\n    'bottom-left': 'top-right',\n  }[orientation];\n}\n\nfunction getDockingPoint(point, rectangle, dockingDirection, targetOrientation) {\n\n  // ensure we end up with a specific docking direction\n  // based on the targetOrientation, if <h|v> is being passed\n\n  if (dockingDirection === 'h') {\n    dockingDirection = /left/.test(targetOrientation) ? 'l' : 'r';\n  }\n\n  if (dockingDirection === 'v') {\n    dockingDirection = /top/.test(targetOrientation) ? 't' : 'b';\n  }\n\n  if (dockingDirection === 't') {\n    return { original: point, x: point.x, y: rectangle.y };\n  }\n\n  if (dockingDirection === 'r') {\n    return { original: point, x: rectangle.x + rectangle.width, y: point.y };\n  }\n\n  if (dockingDirection === 'b') {\n    return { original: point, x: point.x, y: rectangle.y + rectangle.height };\n  }\n\n  if (dockingDirection === 'l') {\n    return { original: point, x: rectangle.x, y: point.y };\n  }\n\n  throw new Error('unexpected dockingDirection: <' + dockingDirection + '>');\n}\n\n\n/**\n * Return list of waypoints with redundant ones filtered out.\n *\n * @example\n *\n * Original points:\n *\n *   [x] ----- [x] ------ [x]\n *                         |\n *                        [x] ----- [x] - [x]\n *\n * Filtered:\n *\n *   [x] ---------------- [x]\n *                         |\n *                        [x] ----------- [x]\n *\n * @param  {Array<Point>} waypoints\n *\n * @return {Array<Point>}\n */\nexport function withoutRedundantPoints(waypoints) {\n  return waypoints.reduce(function(points, p, idx) {\n\n    var previous = points[points.length - 1],\n        next = waypoints[idx + 1];\n\n    if (!pointsOnLine(previous, next, p, 0)) {\n      points.push(p);\n    }\n\n    return points;\n  }, []);\n}\n","import inherits from 'inherits';\n\nimport {\n  assign\n} from 'min-dash';\n\nimport BaseLayouter from 'diagram-js/lib/layout/BaseLayouter';\n\nimport {\n  repairConnection,\n  withoutRedundantPoints\n} from 'diagram-js/lib/layout/ManhattanLayout';\n\nimport {\n  getMid,\n  getOrientation\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport {\n  isExpanded\n} from '../../util/DiUtil';\n\nimport { is } from '../../util/ModelUtil';\n\nvar ATTACH_ORIENTATION_PADDING = -10,\n    BOUNDARY_TO_HOST_THRESHOLD = 40;\n\nvar oppositeOrientationMapping = {\n  'top': 'bottom',\n  'top-right': 'bottom-left',\n  'top-left': 'bottom-right',\n  'right': 'left',\n  'bottom': 'top',\n  'bottom-right': 'top-left',\n  'bottom-left': 'top-right',\n  'left': 'right'\n};\n\nvar orientationDirectionMapping = {\n  top: 't',\n  right: 'r',\n  bottom: 'b',\n  left: 'l'\n};\n\n\nexport default function BpmnLayouter() {}\n\ninherits(BpmnLayouter, BaseLayouter);\n\n\nBpmnLayouter.prototype.layoutConnection = function(connection, hints) {\n  if (!hints) {\n    hints = {};\n  }\n\n  var source = hints.source || connection.source,\n      target = hints.target || connection.target,\n      waypoints = hints.waypoints || connection.waypoints,\n      connectionStart = hints.connectionStart,\n      connectionEnd = hints.connectionEnd;\n\n  var manhattanOptions,\n      updatedWaypoints;\n\n  if (!connectionStart) {\n    connectionStart = getConnectionDocking(waypoints && waypoints[ 0 ], source);\n  }\n\n  if (!connectionEnd) {\n    connectionEnd = getConnectionDocking(waypoints && waypoints[ waypoints.length - 1 ], target);\n  }\n\n  // TODO(nikku): support vertical modeling\n  // and invert preferredLayouts accordingly\n\n  if (is(connection, 'bpmn:Association') ||\n      is(connection, 'bpmn:DataAssociation')) {\n\n    if (waypoints && !isCompensationAssociation(source, target)) {\n      return [].concat([ connectionStart ], waypoints.slice(1, -1), [ connectionEnd ]);\n    }\n  }\n\n  if (is(connection, 'bpmn:MessageFlow')) {\n    manhattanOptions = getMessageFlowManhattanOptions(source, target);\n  } else if (is(connection, 'bpmn:SequenceFlow') || isCompensationAssociation(source, target)) {\n\n    // layout all connection between flow elements h:h, except for\n    // (1) outgoing of boundary events -> layout based on attach orientation and target orientation\n    // (2) incoming/outgoing of gateways -> v:h for outgoing, h:v for incoming\n    // (3) loops\n    if (source === target) {\n      manhattanOptions = {\n        preferredLayouts: getLoopPreferredLayout(source, connection)\n      };\n    } else if (is(source, 'bpmn:BoundaryEvent')) {\n      manhattanOptions = {\n        preferredLayouts: getBoundaryEventPreferredLayouts(source, target, connectionEnd)\n      };\n    } else if (is(source, 'bpmn:Gateway')) {\n      manhattanOptions = {\n        preferredLayouts: [ 'v:h' ]\n      };\n    } else if (is(target, 'bpmn:Gateway')) {\n      manhattanOptions = {\n        preferredLayouts: [ 'h:v' ]\n      };\n    } else {\n      manhattanOptions = {\n        preferredLayouts: [ 'h:h' ]\n      };\n    }\n  }\n\n  if (manhattanOptions) {\n    manhattanOptions = assign(manhattanOptions, hints);\n\n    updatedWaypoints = withoutRedundantPoints(repairConnection(\n      source,\n      target,\n      connectionStart,\n      connectionEnd,\n      waypoints,\n      manhattanOptions\n    ));\n  }\n\n  return updatedWaypoints || [ connectionStart, connectionEnd ];\n};\n\n\n// helpers //////////\n\nfunction getAttachOrientation(attachedElement) {\n  var hostElement = attachedElement.host;\n\n  return getOrientation(getMid(attachedElement), hostElement, ATTACH_ORIENTATION_PADDING);\n}\n\nfunction getMessageFlowManhattanOptions(source, target) {\n  return {\n    preferredLayouts: [ 'straight', 'v:v' ],\n    preserveDocking: getMessageFlowPreserveDocking(source, target)\n  };\n}\n\nfunction getMessageFlowPreserveDocking(source, target) {\n\n  // (1) docking element connected to participant has precedence\n  if (is(target, 'bpmn:Participant')) {\n    return 'source';\n  }\n\n  if (is(source, 'bpmn:Participant')) {\n    return 'target';\n  }\n\n  // (2) docking element connected to expanded sub-process has precedence\n  if (isExpandedSubProcess(target)) {\n    return 'source';\n  }\n\n  if (isExpandedSubProcess(source)) {\n    return 'target';\n  }\n\n  // (3) docking event has precedence\n  if (is(target, 'bpmn:Event')) {\n    return 'target';\n  }\n\n  if (is(source, 'bpmn:Event')) {\n    return 'source';\n  }\n\n  return null;\n}\n\nfunction getConnectionDocking(point, shape) {\n  return point ? (point.original || point) : getMid(shape);\n}\n\nfunction isCompensationAssociation(source, target) {\n  return is(target, 'bpmn:Activity') &&\n    is(source, 'bpmn:BoundaryEvent') &&\n    target.businessObject.isForCompensation;\n}\n\nfunction isExpandedSubProcess(element) {\n  return is(element, 'bpmn:SubProcess') && isExpanded(element);\n}\n\nfunction isSame(a, b) {\n  return a === b;\n}\n\nfunction isAnyOrientation(orientation, orientations) {\n  return orientations.indexOf(orientation) !== -1;\n}\n\nfunction getHorizontalOrientation(orientation) {\n  var matches = /right|left/.exec(orientation);\n\n  return matches && matches[0];\n}\n\nfunction getVerticalOrientation(orientation) {\n  var matches = /top|bottom/.exec(orientation);\n\n  return matches && matches[0];\n}\n\nfunction isOppositeOrientation(a, b) {\n  return oppositeOrientationMapping[a] === b;\n}\n\nfunction isOppositeHorizontalOrientation(a, b) {\n  var horizontalOrientation = getHorizontalOrientation(a);\n\n  var oppositeHorizontalOrientation = oppositeOrientationMapping[horizontalOrientation];\n\n  return b.indexOf(oppositeHorizontalOrientation) !== -1;\n}\n\nfunction isOppositeVerticalOrientation(a, b) {\n  var verticalOrientation = getVerticalOrientation(a);\n\n  var oppositeVerticalOrientation = oppositeOrientationMapping[verticalOrientation];\n\n  return b.indexOf(oppositeVerticalOrientation) !== -1;\n}\n\nfunction isHorizontalOrientation(orientation) {\n  return orientation === 'right' || orientation === 'left';\n}\n\nfunction getLoopPreferredLayout(source, connection) {\n  var waypoints = connection.waypoints;\n\n  var orientation = waypoints && waypoints.length && getOrientation(waypoints[0], source);\n\n  if (orientation === 'top') {\n    return [ 't:r' ];\n  } else if (orientation === 'right') {\n    return [ 'r:b' ];\n  } else if (orientation === 'left') {\n    return [ 'l:t' ];\n  }\n\n  return [ 'b:l' ];\n}\n\nfunction getBoundaryEventPreferredLayouts(source, target, end) {\n  var sourceMid = getMid(source),\n      targetMid = getMid(target),\n      attachOrientation = getAttachOrientation(source),\n      sourceLayout,\n      targetLayout;\n\n  var isLoop = isSame(source.host, target);\n\n  var attachedToSide = isAnyOrientation(attachOrientation, [ 'top', 'right', 'bottom', 'left' ]);\n\n  var targetOrientation = getOrientation(targetMid, sourceMid, {\n    x: source.width / 2 + target.width / 2,\n    y: source.height / 2 + target.height / 2\n  });\n\n  if (isLoop) {\n    return getBoundaryEventLoopLayout(attachOrientation, attachedToSide, source, target, end);\n  }\n\n  // source layout\n  sourceLayout = getBoundaryEventSourceLayout(attachOrientation, targetOrientation, attachedToSide);\n\n  // target layout\n  targetLayout = getBoundaryEventTargetLayout(attachOrientation, targetOrientation, attachedToSide);\n\n  return [ sourceLayout + ':' + targetLayout ];\n}\n\nfunction getBoundaryEventLoopLayout(attachOrientation, attachedToSide, source, target, end) {\n  var orientation = attachedToSide ? attachOrientation : getVerticalOrientation(attachOrientation),\n      sourceLayout = orientationDirectionMapping[ orientation ],\n      targetLayout;\n\n  if (attachedToSide) {\n    if (isHorizontalOrientation(attachOrientation)) {\n      targetLayout = shouldConnectToSameSide('y', source, target, end) ? 'h' : 'b';\n    } else {\n      targetLayout = shouldConnectToSameSide('x', source, target, end) ? 'v' : 'l';\n    }\n  } else {\n    targetLayout = 'v';\n  }\n\n  return [ sourceLayout + ':' + targetLayout ];\n}\n\nfunction shouldConnectToSameSide(axis, source, target, end) {\n  var threshold = BOUNDARY_TO_HOST_THRESHOLD;\n\n  return !(\n    areCloseOnAxis(axis, end, target, threshold) ||\n    areCloseOnAxis(axis, end, {\n      x: target.x + target.width,\n      y: target.y + target.height\n    }, threshold) ||\n    areCloseOnAxis(axis, end, getMid(source), threshold)\n  );\n}\n\nfunction areCloseOnAxis(axis, a, b, threshold) {\n  return Math.abs(a[ axis ] - b[ axis ]) < threshold;\n}\n\nfunction getBoundaryEventSourceLayout(attachOrientation, targetOrientation, attachedToSide) {\n\n  // attached to either top, right, bottom or left side\n  if (attachedToSide) {\n    return orientationDirectionMapping[ attachOrientation ];\n  }\n\n  // attached to either top-right, top-left, bottom-right or bottom-left corner\n\n  // same vertical or opposite horizontal orientation\n  if (isSame(\n    getVerticalOrientation(attachOrientation), getVerticalOrientation(targetOrientation)\n  ) || isOppositeOrientation(\n    getHorizontalOrientation(attachOrientation), getHorizontalOrientation(targetOrientation)\n  )) {\n    return orientationDirectionMapping[ getVerticalOrientation(attachOrientation) ];\n  }\n\n  // fallback\n  return orientationDirectionMapping[ getHorizontalOrientation(attachOrientation) ];\n}\n\nfunction getBoundaryEventTargetLayout(attachOrientation, targetOrientation, attachedToSide) {\n\n  // attached to either top, right, bottom or left side\n  if (attachedToSide) {\n    if (isHorizontalOrientation(attachOrientation)) {\n\n      // orientation is right or left\n\n      // opposite horizontal orientation or same orientation\n      if (\n        isOppositeHorizontalOrientation(attachOrientation, targetOrientation) ||\n        isSame(attachOrientation, targetOrientation)\n      ) {\n        return 'h';\n      }\n\n      // fallback\n      return 'v';\n    } else {\n\n      // orientation is top or bottom\n\n      // opposite vertical orientation or same orientation\n      if (\n        isOppositeVerticalOrientation(attachOrientation, targetOrientation) ||\n        isSame(attachOrientation, targetOrientation)\n      ) {\n        return 'v';\n      }\n\n      // fallback\n      return 'h';\n    }\n  }\n\n  // attached to either top-right, top-left, bottom-right or bottom-left corner\n\n  // orientation is right, left\n  // or same vertical orientation but also right or left\n  if (isHorizontalOrientation(targetOrientation) ||\n    (isSame(getVerticalOrientation(attachOrientation), getVerticalOrientation(targetOrientation)) &&\n      getHorizontalOrientation(targetOrientation))) {\n    return 'h';\n  } else {\n    return 'v';\n  }\n}\n","import {\n  assign\n} from 'min-dash';\n\nimport {\n  getElementLineIntersection\n} from './LayoutUtil';\n\n\nfunction dockingToPoint(docking) {\n\n  // use the dockings actual point and\n  // retain the original docking\n  return assign({ original: docking.point.original || docking.point }, docking.actual);\n}\n\n\n/**\n * A {@link ConnectionDocking} that crops connection waypoints based on\n * the path(s) of the connection source and target.\n *\n * @param {djs.core.ElementRegistry} elementRegistry\n */\nexport default function CroppingConnectionDocking(elementRegistry, graphicsFactory) {\n  this._elementRegistry = elementRegistry;\n  this._graphicsFactory = graphicsFactory;\n}\n\nCroppingConnectionDocking.$inject = [ 'elementRegistry', 'graphicsFactory' ];\n\n\n/**\n * @inheritDoc ConnectionDocking#getCroppedWaypoints\n */\nCroppingConnectionDocking.prototype.getCroppedWaypoints = function(connection, source, target) {\n\n  source = source || connection.source;\n  target = target || connection.target;\n\n  var sourceDocking = this.getDockingPoint(connection, source, true),\n      targetDocking = this.getDockingPoint(connection, target);\n\n  var croppedWaypoints = connection.waypoints.slice(sourceDocking.idx + 1, targetDocking.idx);\n\n  croppedWaypoints.unshift(dockingToPoint(sourceDocking));\n  croppedWaypoints.push(dockingToPoint(targetDocking));\n\n  return croppedWaypoints;\n};\n\n/**\n * Return the connection docking point on the specified shape\n *\n * @inheritDoc ConnectionDocking#getDockingPoint\n */\nCroppingConnectionDocking.prototype.getDockingPoint = function(connection, shape, dockStart) {\n\n  var waypoints = connection.waypoints,\n      dockingIdx,\n      dockingPoint,\n      croppedPoint;\n\n  dockingIdx = dockStart ? 0 : waypoints.length - 1;\n  dockingPoint = waypoints[dockingIdx];\n\n  croppedPoint = this._getIntersection(shape, connection, dockStart);\n\n  return {\n    point: dockingPoint,\n    actual: croppedPoint || dockingPoint,\n    idx: dockingIdx\n  };\n};\n\n\n// helpers //////////////////////\n\nCroppingConnectionDocking.prototype._getIntersection = function(shape, connection, takeFirst) {\n\n  var shapePath = this._getShapePath(shape),\n      connectionPath = this._getConnectionPath(connection);\n\n  return getElementLineIntersection(shapePath, connectionPath, takeFirst);\n};\n\nCroppingConnectionDocking.prototype._getConnectionPath = function(connection) {\n  return this._graphicsFactory.getConnectionPath(connection);\n};\n\nCroppingConnectionDocking.prototype._getShapePath = function(shape) {\n  return this._graphicsFactory.getShapePath(shape);\n};\n\nCroppingConnectionDocking.prototype._getGfx = function(element) {\n  return this._elementRegistry.getGraphics(element);\n};\n","import BehaviorModule from './behavior';\nimport RulesModule from '../rules';\nimport OrderingModule from '../ordering';\nimport ReplaceModule from '../replace';\n\nimport CommandModule from 'diagram-js/lib/command';\nimport TooltipsModule from 'diagram-js/lib/features/tooltips';\nimport LabelSupportModule from 'diagram-js/lib/features/label-support';\nimport AttachSupportModule from 'diagram-js/lib/features/attach-support';\nimport SelectionModule from 'diagram-js/lib/features/selection';\nimport ChangeSupportModule from 'diagram-js/lib/features/change-support';\nimport SpaceToolModule from 'diagram-js/lib/features/space-tool';\n\nimport BpmnFactory from './BpmnFactory';\nimport BpmnUpdater from './BpmnUpdater';\nimport ElementFactory from './ElementFactory';\nimport Modeling from './Modeling';\nimport BpmnLayouter from './BpmnLayouter';\nimport CroppingConnectionDocking from 'diagram-js/lib/layout/CroppingConnectionDocking';\n\n\nexport default {\n  __init__: [\n    'modeling',\n    'bpmnUpdater'\n  ],\n  __depends__: [\n    BehaviorModule,\n    RulesModule,\n    OrderingModule,\n    ReplaceModule,\n    CommandModule,\n    TooltipsModule,\n    LabelSupportModule,\n    AttachSupportModule,\n    SelectionModule,\n    ChangeSupportModule,\n    SpaceToolModule\n  ],\n  bpmnFactory: [ 'type', BpmnFactory ],\n  bpmnUpdater: [ 'type', BpmnUpdater ],\n  elementFactory: [ 'type', ElementFactory ],\n  modeling: [ 'type', Modeling ],\n  layouter: [ 'type', BpmnLayouter ],\n  connectionDocking: [ 'type', CroppingConnectionDocking ]\n};","import {\n  assign,\n  filter,\n  groupBy,\n  isObject\n} from 'min-dash';\n\nvar LOW_PRIORITY = 500,\n    MEDIUM_PRIORITY = 1250,\n    HIGH_PRIORITY = 1500;\n\nimport { getOriginal as getOriginalEvent } from '../../util/Event';\n\nvar round = Math.round;\n\nfunction mid(element) {\n  return {\n    x: element.x + round(element.width / 2),\n    y: element.y + round(element.height / 2)\n  };\n}\n\n/**\n * A plugin that makes shapes draggable / droppable.\n *\n * @param {EventBus} eventBus\n * @param {Dragging} dragging\n * @param {Modeling} modeling\n * @param {Selection} selection\n * @param {Rules} rules\n */\nexport default function MoveEvents(\n    eventBus, dragging, modeling,\n    selection, rules) {\n\n  // rules\n\n  function canMove(shapes, delta, position, target) {\n\n    return rules.allowed('elements.move', {\n      shapes: shapes,\n      delta: delta,\n      position: position,\n      target: target\n    });\n  }\n\n\n  // move events\n\n  // assign a high priority to this handler to setup the environment\n  // others may hook up later, e.g. at default priority and modify\n  // the move environment.\n  //\n  // This sets up the context with\n  //\n  // * shape: the primary shape being moved\n  // * shapes: a list of shapes to be moved\n  // * validatedShapes: a list of shapes that are being checked\n  //                    against the rules before and during move\n  //\n  eventBus.on('shape.move.start', HIGH_PRIORITY, function(event) {\n\n    var context = event.context,\n        shape = event.shape,\n        shapes = selection.get().slice();\n\n    // move only single shape if the dragged element\n    // is not part of the current selection\n    if (shapes.indexOf(shape) === -1) {\n      shapes = [ shape ];\n    }\n\n    // ensure we remove nested elements in the collection\n    // and add attachers for a proper dragger\n    shapes = removeNested(shapes);\n\n    // attach shapes to drag context\n    assign(context, {\n      shapes: shapes,\n      validatedShapes: shapes,\n      shape: shape\n    });\n  });\n\n\n  // assign a high priority to this handler to setup the environment\n  // others may hook up later, e.g. at default priority and modify\n  // the move environment\n  //\n  eventBus.on('shape.move.start', MEDIUM_PRIORITY, function(event) {\n\n    var context = event.context,\n        validatedShapes = context.validatedShapes,\n        canExecute;\n\n    canExecute = context.canExecute = canMove(validatedShapes);\n\n    // check if we can move the elements\n    if (!canExecute) {\n      return false;\n    }\n  });\n\n  // assign a low priority to this handler\n  // to let others modify the move event before we update\n  // the context\n  //\n  eventBus.on('shape.move.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        validatedShapes = context.validatedShapes,\n        hover = event.hover,\n        delta = { x: event.dx, y: event.dy },\n        position = { x: event.x, y: event.y },\n        canExecute;\n\n    // check if we can move the elements\n    canExecute = canMove(validatedShapes, delta, position, hover);\n\n    context.delta = delta;\n    context.canExecute = canExecute;\n\n    // simply ignore move over\n    if (canExecute === null) {\n      context.target = null;\n\n      return;\n    }\n\n    context.target = hover;\n  });\n\n  eventBus.on('shape.move.end', function(event) {\n\n    var context = event.context;\n\n    var delta = context.delta,\n        canExecute = context.canExecute,\n        isAttach = canExecute === 'attach',\n        shapes = context.shapes;\n\n    if (canExecute === false) {\n      return false;\n    }\n\n    // ensure we have actual pixel values deltas\n    // (important when zoom level was > 1 during move)\n    delta.x = round(delta.x);\n    delta.y = round(delta.y);\n\n    if (delta.x === 0 && delta.y === 0) {\n\n      // didn't move\n      return;\n    }\n\n    modeling.moveElements(shapes, delta, context.target, {\n      primaryShape: context.shape,\n      attach: isAttach\n    });\n  });\n\n\n  // move activation\n\n  eventBus.on('element.mousedown', function(event) {\n\n    var originalEvent = getOriginalEvent(event);\n\n    if (!originalEvent) {\n      throw new Error('must supply DOM mousedown event');\n    }\n\n    return start(originalEvent, event.element);\n  });\n\n  /**\n   * Start move.\n   *\n   * @param {MouseEvent} event\n   * @param {djs.model.Shape} shape\n   * @param {boolean} [activate]\n   * @param {Object} [context]\n   */\n  function start(event, element, activate, context) {\n    if (isObject(activate)) {\n      context = activate;\n      activate = false;\n    }\n\n    // do not move connections or the root element\n    if (element.waypoints || !element.parent) {\n      return;\n    }\n\n    var referencePoint = mid(element);\n\n    dragging.init(event, referencePoint, 'shape.move', {\n      cursor: 'grabbing',\n      autoActivate: activate,\n      data: {\n        shape: element,\n        context: context || {}\n      }\n    });\n\n    // we've handled the event\n    return true;\n  }\n\n  // API\n\n  this.start = start;\n}\n\nMoveEvents.$inject = [\n  'eventBus',\n  'dragging',\n  'modeling',\n  'selection',\n  'rules'\n];\n\n\n/**\n * Return a filtered list of elements that do not contain\n * those nested into others.\n *\n * @param  {Array<djs.model.Base>} elements\n *\n * @return {Array<djs.model.Base>} filtered\n */\nfunction removeNested(elements) {\n\n  var ids = groupBy(elements, 'id');\n\n  return filter(elements, function(element) {\n    while ((element = element.parent)) {\n\n      // parent in selection\n      if (ids[element.id]) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n}\n","import {\n  flatten,\n  forEach,\n  filter,\n  find,\n  groupBy,\n  map,\n  matchPattern,\n  size\n} from 'min-dash';\n\nimport {\n  selfAndAllChildren\n} from '../../util/Elements';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nimport { translate } from '../../util/SvgTransformUtil';\n\nvar LOW_PRIORITY = 499;\n\nvar MARKER_DRAGGING = 'djs-dragging',\n    MARKER_OK = 'drop-ok',\n    MARKER_NOT_OK = 'drop-not-ok',\n    MARKER_NEW_PARENT = 'new-parent',\n    MARKER_ATTACH = 'attach-ok';\n\n\n/**\n * Provides previews for moving shapes when moving.\n *\n * @param {EventBus} eventBus\n * @param {ElementRegistry} elementRegistry\n * @param {Canvas} canvas\n * @param {Styles} styles\n */\nexport default function MovePreview(\n    eventBus, canvas, styles, previewSupport) {\n\n  function getVisualDragShapes(shapes) {\n    var elements = getAllDraggedElements(shapes);\n\n    var filteredElements = removeEdges(elements);\n\n    return filteredElements;\n  }\n\n  function getAllDraggedElements(shapes) {\n    var allShapes = selfAndAllChildren(shapes, true);\n\n    var allConnections = map(allShapes, function(shape) {\n      return (shape.incoming || []).concat(shape.outgoing || []);\n    });\n\n    return flatten(allShapes.concat(allConnections));\n  }\n\n  /**\n   * Sets drop marker on an element.\n   */\n  function setMarker(element, marker) {\n\n    [ MARKER_ATTACH, MARKER_OK, MARKER_NOT_OK, MARKER_NEW_PARENT ].forEach(function(m) {\n\n      if (m === marker) {\n        canvas.addMarker(element, m);\n      } else {\n        canvas.removeMarker(element, m);\n      }\n    });\n  }\n\n  /**\n   * Make an element draggable.\n   *\n   * @param {Object} context\n   * @param {djs.model.Base} element\n   * @param {Boolean} addMarker\n   */\n  function makeDraggable(context, element, addMarker) {\n\n    previewSupport.addDragger(element, context.dragGroup);\n\n    if (addMarker) {\n      canvas.addMarker(element, MARKER_DRAGGING);\n    }\n\n    if (context.allDraggedElements) {\n      context.allDraggedElements.push(element);\n    } else {\n      context.allDraggedElements = [ element ];\n    }\n  }\n\n  // assign a low priority to this handler\n  // to let others modify the move context before\n  // we draw things\n  eventBus.on('shape.move.start', LOW_PRIORITY, function(event) {\n    var context = event.context,\n        dragShapes = context.shapes,\n        allDraggedElements = context.allDraggedElements;\n\n    var visuallyDraggedShapes = getVisualDragShapes(dragShapes);\n\n    if (!context.dragGroup) {\n      var dragGroup = svgCreate('g');\n\n      svgAttr(dragGroup, styles.cls('djs-drag-group', [ 'no-events' ]));\n\n      var defaultLayer = canvas.getDefaultLayer();\n\n      svgAppend(defaultLayer, dragGroup);\n\n      context.dragGroup = dragGroup;\n    }\n\n    // add previews\n    visuallyDraggedShapes.forEach(function(shape) {\n      previewSupport.addDragger(shape, context.dragGroup);\n    });\n\n    // cache all dragged elements / gfx\n    // so that we can quickly undo their state changes later\n    if (!allDraggedElements) {\n      allDraggedElements = getAllDraggedElements(dragShapes);\n    } else {\n      allDraggedElements = flatten([\n        allDraggedElements,\n        getAllDraggedElements(dragShapes)\n      ]);\n    }\n\n    // add dragging marker\n    forEach(allDraggedElements, function(e) {\n      canvas.addMarker(e, MARKER_DRAGGING);\n    });\n\n    context.allDraggedElements = allDraggedElements;\n\n    // determine, if any of the dragged elements have different parents\n    context.differentParents = haveDifferentParents(dragShapes);\n  });\n\n  // update previews\n  eventBus.on('shape.move.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        dragGroup = context.dragGroup,\n        target = context.target,\n        parent = context.shape.parent,\n        canExecute = context.canExecute;\n\n    if (target) {\n      if (canExecute === 'attach') {\n        setMarker(target, MARKER_ATTACH);\n      } else if (context.canExecute && target && target.id !== parent.id) {\n        setMarker(target, MARKER_NEW_PARENT);\n      } else {\n        setMarker(target, context.canExecute ? MARKER_OK : MARKER_NOT_OK);\n      }\n    }\n\n    translate(dragGroup, event.dx, event.dy);\n  });\n\n  eventBus.on([ 'shape.move.out', 'shape.move.cleanup' ], function(event) {\n    var context = event.context,\n        target = context.target;\n\n    if (target) {\n      setMarker(target, null);\n    }\n  });\n\n  // remove previews\n  eventBus.on('shape.move.cleanup', function(event) {\n\n    var context = event.context,\n        allDraggedElements = context.allDraggedElements,\n        dragGroup = context.dragGroup;\n\n\n    // remove dragging marker\n    forEach(allDraggedElements, function(e) {\n      canvas.removeMarker(e, MARKER_DRAGGING);\n    });\n\n    if (dragGroup) {\n      svgRemove(dragGroup);\n    }\n  });\n\n\n  // API //////////////////////\n\n  /**\n   * Make an element draggable.\n   *\n   * @param {Object} context\n   * @param {djs.model.Base} element\n   * @param {Boolean} addMarker\n   */\n  this.makeDraggable = makeDraggable;\n}\n\nMovePreview.$inject = [\n  'eventBus',\n  'canvas',\n  'styles',\n  'previewSupport'\n];\n\n\n// helpers //////////////////////\n\n/**\n * returns elements minus all connections\n * where source or target is not elements\n */\nfunction removeEdges(elements) {\n\n  var filteredElements = filter(elements, function(element) {\n\n    if (!isConnection(element)) {\n      return true;\n    } else {\n\n      return (\n        find(elements, matchPattern({ id: element.source.id })) &&\n        find(elements, matchPattern({ id: element.target.id }))\n      );\n    }\n  });\n\n  return filteredElements;\n}\n\nfunction haveDifferentParents(elements) {\n  return size(groupBy(elements, function(e) { return e.parent && e.parent.id; })) !== 1;\n}\n\n/**\n * Checks if an element is a connection.\n */\nfunction isConnection(element) {\n  return element.waypoints;\n}\n","import InteractionEventsModule from '../interaction-events';\nimport SelectionModule from '../selection';\nimport OutlineModule from '../outline';\nimport RulesModule from '../rules';\nimport DraggingModule from '../dragging';\nimport PreviewSupportModule from '../preview-support';\n\nimport Move from './Move';\nimport MovePreview from './MovePreview';\n\nexport default {\n  __depends__: [\n    InteractionEventsModule,\n    SelectionModule,\n    OutlineModule,\n    RulesModule,\n    DraggingModule,\n    PreviewSupportModule\n  ],\n  __init__: [\n    'move',\n    'movePreview'\n  ],\n  move: [ 'type', Move ],\n  movePreview: [ 'type', MovePreview ]\n};\n","import {\n  isArray,\n  isFunction,\n  forEach\n} from 'min-dash';\n\nimport {\n  domify,\n  query as domQuery,\n  attr as domAttr,\n  clear as domClear,\n  classes as domClasses,\n  matches as domMatches,\n  delegate as domDelegate,\n  event as domEvent\n} from 'min-dom';\n\n\nvar TOGGLE_SELECTOR = '.djs-palette-toggle',\n    ENTRY_SELECTOR = '.entry',\n    ELEMENT_SELECTOR = TOGGLE_SELECTOR + ', ' + ENTRY_SELECTOR;\n\nvar PALETTE_OPEN_CLS = 'open',\n    PALETTE_TWO_COLUMN_CLS = 'two-column';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A palette containing modeling elements.\n */\nexport default function Palette(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  var self = this;\n\n  eventBus.on('tool-manager.update', function(event) {\n    var tool = event.tool;\n\n    self.updateToolHighlight(tool);\n  });\n\n  eventBus.on('i18n.changed', function() {\n    self._update();\n  });\n\n  eventBus.on('diagram.init', function() {\n\n    self._diagramInitialized = true;\n\n    self._rebuild();\n  });\n}\n\nPalette.$inject = [ 'eventBus', 'canvas' ];\n\n\n/**\n * Register a provider with the palette\n *\n * @param  {Number} [priority=1000]\n * @param  {PaletteProvider} provider\n *\n * @example\n * const paletteProvider = {\n *   getPaletteEntries: function() {\n *     return function(entries) {\n *       return {\n *         ...entries,\n *         'entry-1': {\n *           label: 'My Entry',\n *           action: function() { alert(\"I have been clicked!\"); }\n *         }\n *       };\n *     }\n *   }\n * };\n *\n * palette.registerProvider(800, paletteProvider);\n */\nPalette.prototype.registerProvider = function(priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('palette.getProviders', priority, function(event) {\n    event.providers.push(provider);\n  });\n\n  this._rebuild();\n};\n\n\n/**\n * Returns the palette entries\n *\n * @return {Object<string, PaletteEntryDescriptor>} map of entries\n */\nPalette.prototype.getEntries = function() {\n  var providers = this._getProviders();\n\n  return providers.reduce(addPaletteEntries, {});\n};\n\nPalette.prototype._rebuild = function() {\n\n  if (!this._diagramInitialized) {\n    return;\n  }\n\n  var providers = this._getProviders();\n\n  if (!providers.length) {\n    return;\n  }\n\n  if (!this._container) {\n    this._init();\n  }\n\n  this._update();\n};\n\n/**\n * Initialize\n */\nPalette.prototype._init = function() {\n\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var parentContainer = this._getParentContainer();\n\n  var container = this._container = domify(Palette.HTML_MARKUP);\n\n  parentContainer.appendChild(container);\n\n  domDelegate.bind(container, ELEMENT_SELECTOR, 'click', function(event) {\n\n    var target = event.delegateTarget;\n\n    if (domMatches(target, TOGGLE_SELECTOR)) {\n      return self.toggle();\n    }\n\n    self.trigger('click', event);\n  });\n\n  // prevent drag propagation\n  domEvent.bind(container, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  // prevent drag propagation\n  domDelegate.bind(container, ENTRY_SELECTOR, 'dragstart', function(event) {\n    self.trigger('dragstart', event);\n  });\n\n  eventBus.on('canvas.resized', this._layoutChanged, this);\n\n  eventBus.fire('palette.create', {\n    container: container\n  });\n};\n\nPalette.prototype._getProviders = function(id) {\n\n  var event = this._eventBus.createEvent({\n    type: 'palette.getProviders',\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\n/**\n * Update palette state.\n *\n * @param  {Object} [state] { open, twoColumn }\n */\nPalette.prototype._toggleState = function(state) {\n\n  state = state || {};\n\n  var parent = this._getParentContainer(),\n      container = this._container;\n\n  var eventBus = this._eventBus;\n\n  var twoColumn;\n\n  var cls = domClasses(container);\n\n  if ('twoColumn' in state) {\n    twoColumn = state.twoColumn;\n  } else {\n    twoColumn = this._needsCollapse(parent.clientHeight, this._entries || {});\n  }\n\n  // always update two column\n  cls.toggle(PALETTE_TWO_COLUMN_CLS, twoColumn);\n\n  if ('open' in state) {\n    cls.toggle(PALETTE_OPEN_CLS, state.open);\n  }\n\n  eventBus.fire('palette.changed', {\n    twoColumn: twoColumn,\n    open: this.isOpen()\n  });\n};\n\nPalette.prototype._update = function() {\n\n  var entriesContainer = domQuery('.djs-palette-entries', this._container),\n      entries = this._entries = this.getEntries();\n\n  domClear(entriesContainer);\n\n  forEach(entries, function(entry, id) {\n\n    var grouping = entry.group || 'default';\n\n    var container = domQuery('[data-group=' + grouping + ']', entriesContainer);\n    if (!container) {\n      container = domify('<div class=\"group\" data-group=\"' + grouping + '\"></div>');\n      entriesContainer.appendChild(container);\n    }\n\n    var html = entry.html || (\n      entry.separator ?\n        '<hr class=\"separator\" />' :\n        '<div class=\"entry\" draggable=\"true\"></div>');\n\n\n    var control = domify(html);\n    container.appendChild(control);\n\n    if (!entry.separator) {\n      domAttr(control, 'data-action', id);\n\n      if (entry.title) {\n        domAttr(control, 'title', entry.title);\n      }\n\n      if (entry.className) {\n        addClasses(control, entry.className);\n      }\n\n      if (entry.imageUrl) {\n        control.appendChild(domify('<img src=\"' + entry.imageUrl + '\">'));\n      }\n    }\n  });\n\n  // open after update\n  this.open();\n};\n\n\n/**\n * Trigger an action available on the palette\n *\n * @param  {String} action\n * @param  {Event} event\n */\nPalette.prototype.trigger = function(action, event, autoActivate) {\n  var entries = this._entries,\n      entry,\n      handler,\n      originalEvent,\n      button = event.delegateTarget || event.target;\n\n  if (!button) {\n    return event.preventDefault();\n  }\n\n  entry = entries[domAttr(button, 'data-action')];\n\n  // when user clicks on the palette and not on an action\n  if (!entry) {\n    return;\n  }\n\n  handler = entry.action;\n\n  originalEvent = event.originalEvent || event;\n\n  // simple action (via callback function)\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      handler(originalEvent, autoActivate);\n    }\n  } else {\n    if (handler[action]) {\n      handler[action](originalEvent, autoActivate);\n    }\n  }\n\n  // silence other actions\n  event.preventDefault();\n};\n\nPalette.prototype._layoutChanged = function() {\n  this._toggleState({});\n};\n\n/**\n * Do we need to collapse to two columns?\n *\n * @param {Number} availableHeight\n * @param {Object} entries\n *\n * @return {Boolean}\n */\nPalette.prototype._needsCollapse = function(availableHeight, entries) {\n\n  // top margin + bottom toggle + bottom margin\n  // implementors must override this method if they\n  // change the palette styles\n  var margin = 20 + 10 + 20;\n\n  var entriesHeight = Object.keys(entries).length * 46;\n\n  return availableHeight < entriesHeight + margin;\n};\n\n/**\n * Close the palette\n */\nPalette.prototype.close = function() {\n\n  this._toggleState({\n    open: false,\n    twoColumn: false\n  });\n};\n\n\n/**\n * Open the palette\n */\nPalette.prototype.open = function() {\n  this._toggleState({ open: true });\n};\n\n\nPalette.prototype.toggle = function(open) {\n  if (this.isOpen()) {\n    this.close();\n  } else {\n    this.open();\n  }\n};\n\nPalette.prototype.isActiveTool = function(tool) {\n  return tool && this._activeTool === tool;\n};\n\nPalette.prototype.updateToolHighlight = function(name) {\n  var entriesContainer,\n      toolsContainer;\n\n  if (!this._toolsContainer) {\n    entriesContainer = domQuery('.djs-palette-entries', this._container);\n\n    this._toolsContainer = domQuery('[data-group=tools]', entriesContainer);\n  }\n\n  toolsContainer = this._toolsContainer;\n\n  forEach(toolsContainer.children, function(tool) {\n    var actionName = tool.getAttribute('data-action');\n\n    if (!actionName) {\n      return;\n    }\n\n    var toolClasses = domClasses(tool);\n\n    actionName = actionName.replace('-tool', '');\n\n    if (toolClasses.contains('entry') && actionName === name) {\n      toolClasses.add('highlighted-entry');\n    } else {\n      toolClasses.remove('highlighted-entry');\n    }\n  });\n};\n\n\n/**\n * Return true if the palette is opened.\n *\n * @example\n *\n * palette.open();\n *\n * if (palette.isOpen()) {\n *   // yes, we are open\n * }\n *\n * @return {boolean} true if palette is opened\n */\nPalette.prototype.isOpen = function() {\n  return domClasses(this._container).has(PALETTE_OPEN_CLS);\n};\n\n/**\n * Get container the palette lives in.\n *\n * @return {Element}\n */\nPalette.prototype._getParentContainer = function() {\n  return this._canvas.getContainer();\n};\n\n\n/* markup definition */\n\nPalette.HTML_MARKUP =\n  '<div class=\"djs-palette\">' +\n    '<div class=\"djs-palette-entries\"></div>' +\n    '<div class=\"djs-palette-toggle\"></div>' +\n  '</div>';\n\n\n// helpers //////////////////////\n\nfunction addClasses(element, classNames) {\n\n  var classes = domClasses(element);\n\n  var actualClassNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\n  actualClassNames.forEach(function(cls) {\n    classes.add(cls);\n  });\n}\n\nfunction addPaletteEntries(entries, provider) {\n\n  var entriesOrUpdater = provider.getPaletteEntries();\n\n  if (isFunction(entriesOrUpdater)) {\n    return entriesOrUpdater(entries);\n  }\n\n  forEach(entriesOrUpdater, function(entry, id) {\n    entries[id] = entry;\n  });\n\n  return entries;\n}","import Palette from './Palette';\n\nexport default {\n  __init__: [ 'palette' ],\n  palette: [ 'type', Palette ]\n};\n","import { values } from 'min-dash';\n\nimport { getEnclosedElements } from '../../util/Elements';\n\nimport { hasSecondaryModifier } from '../../util/Mouse';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nvar LASSO_TOOL_CURSOR = 'crosshair';\n\n\nexport default function LassoTool(\n    eventBus, canvas, dragging,\n    elementRegistry, selection, toolManager) {\n\n  this._selection = selection;\n  this._dragging = dragging;\n\n  var self = this;\n\n  // lasso visuals implementation\n\n  /**\n  * A helper that realizes the selection box visual\n  */\n  var visuals = {\n\n    create: function(context) {\n      var container = canvas.getDefaultLayer(),\n          frame;\n\n      frame = context.frame = svgCreate('rect');\n      svgAttr(frame, {\n        class: 'djs-lasso-overlay',\n        width:  1,\n        height: 1,\n        x: 0,\n        y: 0\n      });\n\n      svgAppend(container, frame);\n    },\n\n    update: function(context) {\n      var frame = context.frame,\n          bbox = context.bbox;\n\n      svgAttr(frame, {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height\n      });\n    },\n\n    remove: function(context) {\n\n      if (context.frame) {\n        svgRemove(context.frame);\n      }\n    }\n  };\n\n  toolManager.registerTool('lasso', {\n    tool: 'lasso.selection',\n    dragging: 'lasso'\n  });\n\n  eventBus.on('lasso.selection.end', function(event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return;\n    }\n\n    eventBus.once('lasso.selection.ended', function() {\n      self.activateLasso(event.originalEvent, true);\n    });\n  });\n\n  // lasso interaction implementation\n\n  eventBus.on('lasso.end', function(event) {\n\n    var bbox = toBBox(event);\n\n    var elements = elementRegistry.filter(function(element) {\n      return element;\n    });\n\n    self.select(elements, bbox);\n  });\n\n  eventBus.on('lasso.start', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.create(context);\n  });\n\n  eventBus.on('lasso.move', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.update(context);\n  });\n\n  eventBus.on('lasso.cleanup', function(event) {\n\n    var context = event.context;\n\n    visuals.remove(context);\n  });\n\n\n  // event integration\n\n  eventBus.on('element.mousedown', 1500, function(event) {\n\n    if (hasSecondaryModifier(event)) {\n      self.activateLasso(event.originalEvent);\n\n      // we've handled the event\n      return true;\n    }\n  });\n}\n\nLassoTool.$inject = [\n  'eventBus',\n  'canvas',\n  'dragging',\n  'elementRegistry',\n  'selection',\n  'toolManager'\n];\n\n\nLassoTool.prototype.activateLasso = function(event, autoActivate) {\n\n  this._dragging.init(event, 'lasso', {\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\nLassoTool.prototype.activateSelection = function(event) {\n\n  this._dragging.init(event, 'lasso.selection', {\n    trapClick: false,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\nLassoTool.prototype.select = function(elements, bbox) {\n  var selectedElements = getEnclosedElements(elements, bbox);\n\n  this._selection.select(values(selectedElements));\n};\n\nLassoTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    this._dragging.cancel();\n  } else {\n    this.activateSelection();\n  }\n};\n\nLassoTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^lasso/.test(context.prefix);\n};\n\n\n\nfunction toBBox(event) {\n\n  var start = {\n\n    x: event.x - event.dx,\n    y: event.y - event.dy\n  };\n\n  var end = {\n    x: event.x,\n    y: event.y\n  };\n\n  var bbox;\n\n  if ((start.x <= end.x && start.y < end.y) ||\n      (start.x < end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: start.y,\n      width:  end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x >= end.x && start.y < end.y) ||\n             (start.x > end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: start.y,\n      width:  start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x <= end.x && start.y > end.y) ||\n             (start.x < end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: end.y,\n      width:  end.x - start.x,\n      height: start.y - end.y\n    };\n  } else if ((start.x >= end.x && start.y > end.y) ||\n             (start.x > end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  start.x - end.x,\n      height: start.y - end.y\n    };\n  } else {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  0,\n      height: 0\n    };\n  }\n  return bbox;\n}\n","import ToolManagerModule from '../tool-manager';\n\nimport LassoTool from './LassoTool';\n\nexport default {\n  __depends__: [\n    ToolManagerModule\n  ],\n  __init__: [ 'lassoTool' ],\n  lassoTool: [ 'type', LassoTool ]\n};\n","import { hasPrimaryModifier } from '../../util/Mouse';\n\nimport { isKey } from '../../features/keyboard/KeyboardUtil';\n\nvar HIGH_PRIORITY = 1500;\nvar HAND_CURSOR = 'grab';\n\n\nexport default function HandTool(eventBus, canvas, dragging, injector, toolManager) {\n  this._dragging = dragging;\n\n  var self = this,\n      keyboard = injector.get('keyboard', false);\n\n  toolManager.registerTool('hand', {\n    tool: 'hand',\n    dragging: 'hand.move'\n  });\n\n  eventBus.on('element.mousedown', HIGH_PRIORITY, function(event) {\n    if (hasPrimaryModifier(event)) {\n      this.activateMove(event.originalEvent);\n\n      return false;\n    }\n  }, this);\n\n  keyboard && keyboard.addListener(HIGH_PRIORITY, function(e) {\n    if (!isSpace(e.keyEvent)) {\n      return;\n    }\n\n    if (self.isActive()) {\n      return;\n    }\n\n    function activateMove(event) {\n      self.activateMove(event);\n\n      window.removeEventListener('mousemove', activateMove);\n    }\n\n    window.addEventListener('mousemove', activateMove);\n\n    function deactivateMove(e) {\n      if (!isSpace(e.keyEvent)) {\n        return;\n      }\n\n      window.removeEventListener('mousemove', activateMove);\n\n      keyboard.removeListener(deactivateMove, 'keyboard.keyup');\n\n      dragging.cancel();\n    }\n\n    keyboard.addListener(HIGH_PRIORITY, deactivateMove, 'keyboard.keyup');\n  }, 'keyboard.keydown');\n\n  eventBus.on('hand.end', function(event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return false;\n    }\n\n    eventBus.once('hand.ended', function() {\n      this.activateMove(event.originalEvent, { reactivate: true });\n    }, this);\n\n  }, this);\n\n\n  eventBus.on('hand.move.move', function(event) {\n    var scale = canvas.viewbox().scale;\n\n    canvas.scroll({\n      dx: event.dx * scale,\n      dy: event.dy * scale\n    });\n  });\n\n  eventBus.on('hand.move.end', function(event) {\n    var context = event.context,\n        reactivate = context.reactivate;\n\n    // Don't reactivate if the user is using the keyboard keybinding\n    if (!hasPrimaryModifier(event) && reactivate) {\n\n      eventBus.once('hand.move.ended', function(event) {\n        this.activateHand(event.originalEvent, true, true);\n      }, this);\n\n    }\n\n    return false;\n  }, this);\n\n}\n\nHandTool.$inject = [\n  'eventBus',\n  'canvas',\n  'dragging',\n  'injector',\n  'toolManager'\n];\n\n\nHandTool.prototype.activateMove = function(event, autoActivate, context) {\n  if (typeof autoActivate === 'object') {\n    context = autoActivate;\n    autoActivate = false;\n  }\n\n  this._dragging.init(event, 'hand.move', {\n    autoActivate: autoActivate,\n    cursor: HAND_CURSOR,\n    data: {\n      context: context || {}\n    }\n  });\n};\n\nHandTool.prototype.activateHand = function(event, autoActivate, reactivate) {\n  this._dragging.init(event, 'hand', {\n    trapClick: false,\n    autoActivate: autoActivate,\n    cursor: HAND_CURSOR,\n    data: {\n      context: {\n        reactivate: reactivate\n      }\n    }\n  });\n};\n\nHandTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    this._dragging.cancel();\n  } else {\n    this.activateHand();\n  }\n};\n\nHandTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  if (context) {\n    return /^(hand|hand\\.move)$/.test(context.prefix);\n  }\n\n  return false;\n};\n\n// helpers //////////\n\nfunction isSpace(keyEvent) {\n  return isKey(' ', keyEvent);\n}","import ToolManagerModule from '../tool-manager';\n\nimport HandTool from './HandTool';\n\nexport default {\n  __depends__: [\n    ToolManagerModule\n  ],\n  __init__: [ 'handTool' ],\n  handTool: [ 'type', HandTool ]\n};\n","var MARKER_OK = 'connect-ok',\n    MARKER_NOT_OK = 'connect-not-ok';\n\n/**\n * @class\n * @constructor\n *\n * @param {EventBus} eventBus\n * @param {Dragging} dragging\n * @param {Connect} connect\n * @param {Canvas} canvas\n * @param {ToolManager} toolManager\n * @param {Rules} rules\n */\nexport default function GlobalConnect(\n    eventBus, dragging, connect,\n    canvas, toolManager, rules) {\n\n  var self = this;\n\n  this._dragging = dragging;\n  this._rules = rules;\n\n  toolManager.registerTool('global-connect', {\n    tool: 'global-connect',\n    dragging: 'global-connect.drag'\n  });\n\n  eventBus.on('global-connect.hover', function(event) {\n    var context = event.context,\n        startTarget = event.hover;\n\n    var canStartConnect = context.canStartConnect = self.canStartConnect(startTarget);\n\n    // simply ignore hover\n    if (canStartConnect === null) {\n      return;\n    }\n\n    context.startTarget = startTarget;\n\n    canvas.addMarker(startTarget, canStartConnect ? MARKER_OK : MARKER_NOT_OK);\n  });\n\n\n  eventBus.on([ 'global-connect.out', 'global-connect.cleanup' ], function(event) {\n    var startTarget = event.context.startTarget,\n        canStartConnect = event.context.canStartConnect;\n\n    if (startTarget) {\n      canvas.removeMarker(startTarget, canStartConnect ? MARKER_OK : MARKER_NOT_OK);\n    }\n  });\n\n\n  eventBus.on([ 'global-connect.ended' ], function(event) {\n    var context = event.context,\n        startTarget = context.startTarget,\n        startPosition = {\n          x: event.x,\n          y: event.y\n        };\n\n    var canStartConnect = self.canStartConnect(startTarget);\n\n    if (!canStartConnect) {\n      return;\n    }\n\n    eventBus.once('element.out', function() {\n      eventBus.once([ 'connect.ended', 'connect.canceled' ], function() {\n        eventBus.fire('global-connect.drag.ended');\n      });\n\n      connect.start(null, startTarget, startPosition);\n    });\n\n    return false;\n  });\n}\n\nGlobalConnect.$inject = [\n  'eventBus',\n  'dragging',\n  'connect',\n  'canvas',\n  'toolManager',\n  'rules'\n];\n\n/**\n * Initiates tool activity.\n */\nGlobalConnect.prototype.start = function(event) {\n  this._dragging.init(event, 'global-connect', {\n    trapClick: false,\n    data: {\n      context: {}\n    }\n  });\n};\n\nGlobalConnect.prototype.toggle = function() {\n  if (this.isActive()) {\n    this._dragging.cancel();\n  } else {\n    this.start();\n  }\n};\n\nGlobalConnect.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^global-connect/.test(context.prefix);\n};\n\n/**\n * Check if source shape can initiate connection.\n *\n * @param  {Shape} startTarget\n * @return {Boolean}\n */\nGlobalConnect.prototype.canStartConnect = function(startTarget) {\n  return this._rules.allowed('connection.start', { source: startTarget });\n};\n","import ConnectModule from '../connect';\nimport RulesModule from '../rules';\nimport DraggingModule from '../dragging';\nimport ToolManagerModule from '../tool-manager';\n\nimport GlobalConnect from './GlobalConnect';\n\nexport default {\n  __depends__: [\n    ConnectModule,\n    RulesModule,\n    DraggingModule,\n    ToolManagerModule\n  ],\n  globalConnect: [ 'type', GlobalConnect ]\n};\n","import {\n  assign\n} from 'min-dash';\n\n\n/**\n * A palette provider for BPMN 2.0 elements.\n */\nexport default function PaletteProvider(\n    palette, create, elementFactory,\n    spaceTool, lassoTool, handTool,\n    globalConnect, translate) {\n\n  this._palette = palette;\n  this._create = create;\n  this._elementFactory = elementFactory;\n  this._spaceTool = spaceTool;\n  this._lassoTool = lassoTool;\n  this._handTool = handTool;\n  this._globalConnect = globalConnect;\n  this._translate = translate;\n\n  palette.registerProvider(this);\n}\n\nPaletteProvider.$inject = [\n  'palette',\n  'create',\n  'elementFactory',\n  'spaceTool',\n  'lassoTool',\n  'handTool',\n  'globalConnect',\n  'translate'\n];\n\n\nPaletteProvider.prototype.getPaletteEntries = function(element) {\n\n  var actions = {},\n      create = this._create,\n      elementFactory = this._elementFactory,\n      spaceTool = this._spaceTool,\n      lassoTool = this._lassoTool,\n      handTool = this._handTool,\n      globalConnect = this._globalConnect,\n      translate = this._translate;\n\n  function createAction(type, group, className, title, options) {\n\n    function createListener(event) {\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      if (options) {\n        shape.businessObject.di.isExpanded = options.isExpanded;\n      }\n\n      create.start(event, shape);\n    }\n\n    var shortType = type.replace(/^bpmn:/, '');\n\n    return {\n      group: group,\n      className: className,\n      title: title || translate('Create {type}', { type: shortType }),\n      action: {\n        dragstart: createListener,\n        click: createListener\n      }\n    };\n  }\n\n  function createSubprocess(event) {\n    var subProcess = elementFactory.createShape({\n      type: 'bpmn:SubProcess',\n      x: 0,\n      y: 0,\n      isExpanded: true\n    });\n\n    var startEvent = elementFactory.createShape({\n      type: 'bpmn:StartEvent',\n      x: 40,\n      y: 82,\n      parent: subProcess\n    });\n\n    create.start(event, [ subProcess, startEvent ], {\n      hints: {\n        autoSelect: [ startEvent ]\n      }\n    });\n  }\n\n  function createParticipant(event) {\n    create.start(event, elementFactory.createParticipantShape());\n  }\n\n  assign(actions, {\n    'hand-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-hand-tool',\n      title: translate('Activate the hand tool'),\n      action: {\n        click: function(event) {\n          handTool.activateHand(event);\n        }\n      }\n    },\n    'lasso-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-lasso-tool',\n      title: translate('Activate the lasso tool'),\n      action: {\n        click: function(event) {\n          lassoTool.activateSelection(event);\n        }\n      }\n    },\n    'space-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-space-tool',\n      title: translate('Activate the create/remove space tool'),\n      action: {\n        click: function(event) {\n          spaceTool.activateSelection(event);\n        }\n      }\n    },\n    'global-connect-tool': {\n      group: 'tools',\n      className: 'bpmn-icon-connection-multi',\n      title: translate('Activate the global connect tool'),\n      action: {\n        click: function(event) {\n          globalConnect.toggle(event);\n        }\n      }\n    },\n    'tool-separator': {\n      group: 'tools',\n      separator: true\n    },\n    'create.start-event': createAction(\n      'bpmn:StartEvent', 'event', 'bpmn-icon-start-event-none',\n      translate('Create StartEvent')\n    ),\n    'create.intermediate-event': createAction(\n      'bpmn:IntermediateThrowEvent', 'event', 'bpmn-icon-intermediate-event-none',\n      translate('Create Intermediate/Boundary Event')\n    ),\n    'create.end-event': createAction(\n      'bpmn:EndEvent', 'event', 'bpmn-icon-end-event-none',\n      translate('Create EndEvent')\n    ),\n    'create.exclusive-gateway': createAction(\n      'bpmn:ExclusiveGateway', 'gateway', 'bpmn-icon-gateway-none',\n      translate('Create Gateway')\n    ),\n    'create.task': createAction(\n      'bpmn:Task', 'activity', 'bpmn-icon-task',\n      translate('Create Task')\n    ),\n    'create.data-object': createAction(\n      'bpmn:DataObjectReference', 'data-object', 'bpmn-icon-data-object',\n      translate('Create DataObjectReference')\n    ),\n    'create.data-store': createAction(\n      'bpmn:DataStoreReference', 'data-store', 'bpmn-icon-data-store',\n      translate('Create DataStoreReference')\n    ),\n    'create.subprocess-expanded': {\n      group: 'activity',\n      className: 'bpmn-icon-subprocess-expanded',\n      title: translate('Create expanded SubProcess'),\n      action: {\n        dragstart: createSubprocess,\n        click: createSubprocess\n      }\n    },\n    'create.participant-expanded': {\n      group: 'collaboration',\n      className: 'bpmn-icon-participant',\n      title: translate('Create Pool/Participant'),\n      action: {\n        dragstart: createParticipant,\n        click: createParticipant\n      }\n    },\n    'create.group': createAction(\n      'bpmn:Group', 'artifact', 'bpmn-icon-group',\n      translate('Create Group')\n    ),\n  });\n\n  return actions;\n};\n","import PaletteModule from 'diagram-js/lib/features/palette';\nimport CreateModule from 'diagram-js/lib/features/create';\nimport SpaceToolModule from 'diagram-js/lib/features/space-tool';\nimport LassoToolModule from 'diagram-js/lib/features/lasso-tool';\nimport HandToolModule from 'diagram-js/lib/features/hand-tool';\nimport GlobalConnectModule from 'diagram-js/lib/features/global-connect';\nimport translate from 'diagram-js/lib/i18n/translate';\n\nimport PaletteProvider from './PaletteProvider';\n\nexport default {\n  __depends__: [\n    PaletteModule,\n    CreateModule,\n    SpaceToolModule,\n    LassoToolModule,\n    HandToolModule,\n    GlobalConnectModule,\n    translate\n  ],\n  __init__: [ 'paletteProvider' ],\n  paletteProvider: [ 'type', PaletteProvider ]\n};\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport inherits from 'inherits';\n\nimport cssEscape from 'css.escape';\n\nimport {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  attr as svgAttr\n} from 'tiny-svg';\n\nvar LOW_PRIORITY = 250;\n\n\nexport default function BpmnReplacePreview(\n    eventBus, elementRegistry, elementFactory,\n    canvas, previewSupport) {\n\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * Replace the visuals of all elements in the context which can be replaced\n   *\n   * @param  {Object} context\n   */\n  function replaceVisual(context) {\n\n    var replacements = context.canExecute.replacements;\n\n    forEach(replacements, function(replacement) {\n\n      var id = replacement.oldElementId;\n\n      var newElement = {\n        type: replacement.newElementType\n      };\n\n      // if the visual of the element is already replaced\n      if (context.visualReplacements[id]) {\n        return;\n      }\n\n      var element = elementRegistry.get(id);\n\n      assign(newElement, { x: element.x, y: element.y });\n\n      // create a temporary shape\n      var tempShape = elementFactory.createShape(newElement);\n\n      canvas.addShape(tempShape, element.parent);\n\n      // select the original SVG element related to the element and hide it\n      var gfx = domQuery('[data-element-id=\"' + cssEscape(element.id) + '\"]', context.dragGroup);\n\n      if (gfx) {\n        svgAttr(gfx, { display: 'none' });\n      }\n\n      // clone the gfx of the temporary shape and add it to the drag group\n      var dragger = previewSupport.addDragger(tempShape, context.dragGroup);\n\n      context.visualReplacements[id] = dragger;\n\n      canvas.removeShape(tempShape);\n    });\n  }\n\n  /**\n   * Restore the original visuals of the previously replaced elements\n   *\n   * @param  {Object} context\n   */\n  function restoreVisual(context) {\n\n    var visualReplacements = context.visualReplacements;\n\n    forEach(visualReplacements, function(dragger, id) {\n\n      var originalGfx = domQuery('[data-element-id=\"' + cssEscape(id) + '\"]', context.dragGroup);\n\n      if (originalGfx) {\n        svgAttr(originalGfx, { display: 'inline' });\n      }\n\n      dragger.remove();\n\n      if (visualReplacements[id]) {\n        delete visualReplacements[id];\n      }\n    });\n  }\n\n  eventBus.on('shape.move.move', LOW_PRIORITY, function(event) {\n\n    var context = event.context,\n        canExecute = context.canExecute;\n\n    if (!context.visualReplacements) {\n      context.visualReplacements = {};\n    }\n\n    if (canExecute && canExecute.replacements) {\n      replaceVisual(context);\n    } else {\n      restoreVisual(context);\n    }\n  });\n}\n\nBpmnReplacePreview.$inject = [\n  'eventBus',\n  'elementRegistry',\n  'elementFactory',\n  'canvas',\n  'previewSupport'\n];\n\ninherits(BpmnReplacePreview, CommandInterceptor);","import PreviewSupportModule from 'diagram-js/lib/features/preview-support';\n\nimport BpmnReplacePreview from './BpmnReplacePreview';\n\nexport default {\n  __depends__: [\n    PreviewSupportModule\n  ],\n  __init__: [ 'bpmnReplacePreview' ],\n  bpmnReplacePreview: [ 'type', BpmnReplacePreview ]\n};\n","import {\r\n  mid,\r\n  setSnapped\r\n} from 'diagram-js/lib/features/snapping/SnapUtil';\r\n\r\nimport { isCmd } from 'diagram-js/lib/features/keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  getOrientation\r\n} from 'diagram-js/lib/layout/LayoutUtil';\r\n\r\nimport { is } from '../../util/ModelUtil';\r\n\r\nimport { isAny } from '../modeling/util/ModelingUtil';\r\n\r\nimport { some } from 'min-dash';\r\n\r\nvar HIGHER_PRIORITY = 1250;\r\n\r\nvar BOUNDARY_TO_HOST_THRESHOLD = 40;\r\n\r\nvar TARGET_BOUNDS_PADDING = 20,\r\n    TASK_BOUNDS_PADDING = 10;\r\n\r\nvar TARGET_CENTER_PADDING = 20;\r\n\r\nvar AXES = [ 'x', 'y' ];\r\n\r\nvar abs = Math.abs;\r\n\r\n/**\r\n * Snap during connect.\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nexport default function BpmnConnectSnapping(eventBus) {\r\n  eventBus.on([\r\n    'connect.hover',\r\n    'connect.move',\r\n    'connect.end',\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        canExecute = context.canExecute,\r\n        start = context.start,\r\n        hover = context.hover,\r\n        source = context.source,\r\n        target = context.target;\r\n\r\n    // do NOT snap on CMD\r\n    if (event.originalEvent && isCmd(event.originalEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (!context.initialConnectionStart) {\r\n      context.initialConnectionStart = context.connectionStart;\r\n    }\r\n\r\n    // snap hover\r\n    if (canExecute && hover) {\r\n      snapToShape(event, hover, getTargetBoundsPadding(hover));\r\n    }\r\n\r\n    if (hover && isAnyType(canExecute, [\r\n      'bpmn:Association',\r\n      'bpmn:DataInputAssociation',\r\n      'bpmn:DataOutputAssociation',\r\n      'bpmn:SequenceFlow'\r\n    ])) {\r\n      context.connectionStart = mid(start);\r\n\r\n      // snap hover\r\n      if (isAny(hover, [ 'bpmn:Event', 'bpmn:Gateway' ])) {\r\n        snapToPosition(event, mid(hover));\r\n      }\r\n\r\n      // snap hover\r\n      if (isAny(hover, [ 'bpmn:Task', 'bpmn:SubProcess' ])) {\r\n        snapToTargetMid(event, hover);\r\n      }\r\n\r\n      // snap source and target\r\n      if (is(source, 'bpmn:BoundaryEvent') && target === source.host) {\r\n        snapBoundaryEventLoop(event);\r\n      }\r\n\r\n    } else if (isType(canExecute, 'bpmn:MessageFlow')) {\r\n\r\n      if (is(start, 'bpmn:Event')) {\r\n\r\n        // snap start\r\n        context.connectionStart = mid(start);\r\n      }\r\n\r\n      if (is(hover, 'bpmn:Event')) {\r\n\r\n        // snap hover\r\n        snapToPosition(event, mid(hover));\r\n      }\r\n\r\n    } else {\r\n\r\n      // un-snap source\r\n      context.connectionStart = context.initialConnectionStart;\r\n    }\r\n  });\r\n}\r\n\r\nBpmnConnectSnapping.$inject = [ 'eventBus' ];\r\n\r\n\r\n// helpers //////////\r\n\r\n// snap to target if event in target\r\nfunction snapToShape(event, target, padding) {\r\n  AXES.forEach(function(axis) {\r\n    var dimensionForAxis = getDimensionForAxis(axis, target);\r\n\r\n    if (event[ axis ] < target[ axis ] + padding) {\r\n      setSnapped(event, axis, target[ axis ] + padding);\r\n    } else if (event[ axis ] > target[ axis ] + dimensionForAxis - padding) {\r\n      setSnapped(event, axis, target[ axis ] + dimensionForAxis - padding);\r\n    }\r\n  });\r\n}\r\n\r\n// snap to target mid if event in target mid\r\nfunction snapToTargetMid(event, target) {\r\n  var targetMid = mid(target);\r\n\r\n  AXES.forEach(function(axis) {\r\n    if (isMid(event, target, axis)) {\r\n      setSnapped(event, axis, targetMid[ axis ]);\r\n    }\r\n  });\r\n}\r\n\r\n// snap to prevent loop overlapping boundary event\r\nfunction snapBoundaryEventLoop(event) {\r\n  var context = event.context,\r\n      source = context.source,\r\n      target = context.target;\r\n\r\n  if (isReverse(context)) {\r\n    return;\r\n  }\r\n\r\n  var sourceMid = mid(source),\r\n      orientation = getOrientation(sourceMid, target, -10),\r\n      axes = [];\r\n\r\n  if (/top|bottom/.test(orientation)) {\r\n    axes.push('x');\r\n  }\r\n\r\n  if (/left|right/.test(orientation)) {\r\n    axes.push('y');\r\n  }\r\n\r\n  axes.forEach(function(axis) {\r\n    var coordinate = event[ axis ], newCoordinate;\r\n\r\n    if (abs(coordinate - sourceMid[ axis ]) < BOUNDARY_TO_HOST_THRESHOLD) {\r\n      if (coordinate > sourceMid[ axis ]) {\r\n        newCoordinate = sourceMid[ axis ] + BOUNDARY_TO_HOST_THRESHOLD;\r\n      }\r\n      else {\r\n        newCoordinate = sourceMid[ axis ] - BOUNDARY_TO_HOST_THRESHOLD;\r\n      }\r\n\r\n      setSnapped(event, axis, newCoordinate);\r\n    }\r\n  });\r\n}\r\n\r\nfunction snapToPosition(event, position) {\r\n  setSnapped(event, 'x', position.x);\r\n  setSnapped(event, 'y', position.y);\r\n}\r\n\r\nfunction isType(attrs, type) {\r\n  return attrs && attrs.type === type;\r\n}\r\n\r\nfunction isAnyType(attrs, types) {\r\n  return some(types, function(type) {\r\n    return isType(attrs, type);\r\n  });\r\n}\r\n\r\nfunction getDimensionForAxis(axis, element) {\r\n  return axis === 'x' ? element.width : element.height;\r\n}\r\n\r\nfunction getTargetBoundsPadding(target) {\r\n  if (is(target, 'bpmn:Task')) {\r\n    return TASK_BOUNDS_PADDING;\r\n  } else {\r\n    return TARGET_BOUNDS_PADDING;\r\n  }\r\n}\r\n\r\nfunction isMid(event, target, axis) {\r\n  return event[ axis ] > target[ axis ] + TARGET_CENTER_PADDING\r\n    && event[ axis ] < target[ axis ] + getDimensionForAxis(axis, target) - TARGET_CENTER_PADDING;\r\n}\r\n\r\nfunction isReverse(context) {\r\n  var hover = context.hover,\r\n      source = context.source;\r\n\r\n  return hover && source && hover === source;\r\n}","import {\n  forEach\n} from 'min-dash';\n\nimport {\n  snapTo\n} from './SnapUtil';\n\n\n/**\n * A snap context, containing the (possibly incomplete)\n * mappings of drop targets (to identify the snapping)\n * to computed snap points.\n */\nexport default function SnapContext() {\n\n  /**\n   * Map<String, SnapPoints> mapping drop targets to\n   * a list of possible snappings.\n   *\n   * @type {Object}\n   */\n  this._targets = {};\n\n  /**\n   * Map<String, Point> initial positioning of element\n   * regarding various snap directions.\n   *\n   * @type {Object}\n   */\n  this._snapOrigins = {};\n\n  /**\n   * List of snap locations\n   *\n   * @type {Array<String>}\n   */\n  this._snapLocations = [];\n\n  /**\n   * Map<String, Array<Point>> of default snapping locations\n   *\n   * @type {Object}\n   */\n  this._defaultSnaps = {};\n}\n\n\nSnapContext.prototype.getSnapOrigin = function(snapLocation) {\n  return this._snapOrigins[snapLocation];\n};\n\n\nSnapContext.prototype.setSnapOrigin = function(snapLocation, initialValue) {\n  this._snapOrigins[snapLocation] = initialValue;\n\n  if (this._snapLocations.indexOf(snapLocation) === -1) {\n    this._snapLocations.push(snapLocation);\n  }\n};\n\n\nSnapContext.prototype.addDefaultSnap = function(type, point) {\n\n  var snapValues = this._defaultSnaps[type];\n\n  if (!snapValues) {\n    snapValues = this._defaultSnaps[type] = [];\n  }\n\n  snapValues.push(point);\n};\n\n/**\n * Return a number of initialized snaps, i.e. snap locations such as\n * top-left, mid, bottom-right and so forth.\n *\n * @return {Array<String>} snapLocations\n */\nSnapContext.prototype.getSnapLocations = function() {\n  return this._snapLocations;\n};\n\n/**\n * Set the snap locations for this context.\n *\n * The order of locations determines precedence.\n *\n * @param {Array<String>} snapLocations\n */\nSnapContext.prototype.setSnapLocations = function(snapLocations) {\n  this._snapLocations = snapLocations;\n};\n\n/**\n * Get snap points for a given target\n *\n * @param {Element|String} target\n */\nSnapContext.prototype.pointsForTarget = function(target) {\n\n  var targetId = target.id || target;\n\n  var snapPoints = this._targets[targetId];\n\n  if (!snapPoints) {\n    snapPoints = this._targets[targetId] = new SnapPoints();\n    snapPoints.initDefaults(this._defaultSnaps);\n  }\n\n  return snapPoints;\n};\n\n\n/**\n * Creates the snap points and initializes them with the\n * given default values.\n *\n * @param {Object<String, Array<Point>>} [defaultPoints]\n */\nexport function SnapPoints(defaultSnaps) {\n\n  /**\n   * Map<String, Map<(x|y), Array<Number>>> mapping snap locations,\n   * i.e. top-left, bottom-right, center to actual snap values.\n   *\n   * @type {Object}\n   */\n  this._snapValues = {};\n}\n\nSnapPoints.prototype.add = function(snapLocation, point) {\n\n  var snapValues = this._snapValues[snapLocation];\n\n  if (!snapValues) {\n    snapValues = this._snapValues[snapLocation] = { x: [], y: [] };\n  }\n\n  if (snapValues.x.indexOf(point.x) === -1) {\n    snapValues.x.push(point.x);\n  }\n\n  if (snapValues.y.indexOf(point.y) === -1) {\n    snapValues.y.push(point.y);\n  }\n};\n\n\nSnapPoints.prototype.snap = function(point, snapLocation, axis, tolerance) {\n  var snappingValues = this._snapValues[snapLocation];\n\n  return snappingValues && snapTo(point[axis], snappingValues[axis], tolerance);\n};\n\n/**\n * Initialize a number of default snapping points.\n *\n * @param  {Object} defaultSnaps\n */\nSnapPoints.prototype.initDefaults = function(defaultSnaps) {\n\n  var self = this;\n\n  forEach(defaultSnaps || {}, function(snapPoints, snapLocation) {\n    forEach(snapPoints, function(point) {\n      self.add(snapLocation, point);\n    });\n  });\n};","import SnapContext from './SnapContext';\r\n\r\nimport {\r\n  getChildren,\r\n  isSnapped,\r\n  mid\r\n} from './SnapUtil';\r\n\r\nimport { isCmd } from '../keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  forEach,\r\n  isNumber\r\n} from 'min-dash';\r\n\r\nvar HIGHER_PRIORITY = 1250;\r\n\r\n\r\n/**\r\n * Snap during create and move.\r\n *\r\n * @param {EventBus} elementRegistry\r\n * @param {EventBus} eventBus\r\n * @param {Snapping} snapping\r\n */\r\nexport default function CreateMoveSnapping(elementRegistry, eventBus, snapping) {\r\n  var self = this;\r\n\r\n  this._elementRegistry = elementRegistry;\r\n\r\n  eventBus.on([\r\n    'create.start',\r\n    'shape.move.start'\r\n  ], function(event) {\r\n    self.initSnap(event);\r\n  });\r\n\r\n  eventBus.on([\r\n    'create.move',\r\n    'create.end',\r\n    'shape.move.move',\r\n    'shape.move.end'\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        snapContext = context.snapContext,\r\n        target = context.target;\r\n\r\n    if (event.originalEvent && isCmd(event.originalEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (isSnapped(event) || !target) {\r\n      return;\r\n    }\r\n\r\n    var snapPoints = snapContext.pointsForTarget(target);\r\n\r\n    if (!snapPoints.initialized) {\r\n      snapPoints = self.addSnapTargetPoints(snapPoints, shape, target);\r\n\r\n      snapPoints.initialized = true;\r\n    }\r\n\r\n    snapping.snap(event, snapPoints);\r\n  });\r\n\r\n  eventBus.on([\r\n    'create.cleanup',\r\n    'shape.move.cleanup'\r\n  ], function() {\r\n    snapping.hide();\r\n  });\r\n}\r\n\r\nCreateMoveSnapping.$inject = [\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'snapping'\r\n];\r\n\r\nCreateMoveSnapping.prototype.initSnap = function(event) {\r\n  var elementRegistry = this._elementRegistry;\r\n\r\n  var context = event.context,\r\n      shape = context.shape,\r\n      snapContext = context.snapContext;\r\n\r\n  if (!snapContext) {\r\n    snapContext = context.snapContext = new SnapContext();\r\n  }\r\n\r\n  var shapeMid;\r\n\r\n  if (elementRegistry.get(shape.id)) {\r\n\r\n    // move\r\n    shapeMid = mid(shape, event);\r\n  } else {\r\n\r\n    // create\r\n    shapeMid = {\r\n      x: event.x + mid(shape).x,\r\n      y: event.y + mid(shape).y\r\n    };\r\n  }\r\n\r\n  var shapeTopLeft = {\r\n        x: shapeMid.x - shape.width / 2,\r\n        y: shapeMid.y - shape.height / 2\r\n      },\r\n      shapeBottomRight = {\r\n        x: shapeMid.x + shape.width / 2,\r\n        y: shapeMid.y + shape.height / 2\r\n      };\r\n\r\n  snapContext.setSnapOrigin('mid', {\r\n    x: shapeMid.x - event.x,\r\n    y: shapeMid.y - event.y\r\n  });\r\n\r\n  // snap labels to mid only\r\n  if (isLabel(shape)) {\r\n    return snapContext;\r\n  }\r\n\r\n  snapContext.setSnapOrigin('top-left', {\r\n    x: shapeTopLeft.x - event.x,\r\n    y: shapeTopLeft.y - event.y\r\n  });\r\n\r\n  snapContext.setSnapOrigin('bottom-right', {\r\n    x: shapeBottomRight.x - event.x,\r\n    y: shapeBottomRight.y - event.y\r\n  });\r\n\r\n  return snapContext;\r\n};\r\n\r\nCreateMoveSnapping.prototype.addSnapTargetPoints = function(snapPoints, shape, target) {\r\n  var snapTargets = this.getSnapTargets(shape, target);\r\n\r\n  forEach(snapTargets, function(snapTarget) {\r\n\r\n    // handle labels\r\n    if (isLabel(snapTarget)) {\r\n\r\n      if (isLabel(shape)) {\r\n        snapPoints.add('mid', mid(snapTarget));\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    // handle connections\r\n    if (isConnection(snapTarget)) {\r\n\r\n      // ignore single segment connections\r\n      if (snapTarget.waypoints.length < 3) {\r\n        return;\r\n      }\r\n\r\n      // ignore first and last waypoint\r\n      var waypoints = snapTarget.waypoints.slice(1, -1);\r\n\r\n      forEach(waypoints, function(waypoint) {\r\n        snapPoints.add('mid', waypoint);\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    // handle shapes\r\n    snapPoints.add('mid', mid(snapTarget));\r\n  });\r\n\r\n  if (!isNumber(shape.x) || !isNumber(shape.y)) {\r\n    return snapPoints;\r\n  }\r\n\r\n  // snap to original position when moving\r\n  if (this._elementRegistry.get(shape.id)) {\r\n    snapPoints.add('mid', mid(shape));\r\n  }\r\n\r\n  return snapPoints;\r\n};\r\n\r\nCreateMoveSnapping.prototype.getSnapTargets = function(shape, target) {\r\n  return getChildren(target).filter(function(child) {\r\n    return !isHidden(child);\r\n  });\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction isConnection(element) {\r\n  return !!element.waypoints;\r\n}\r\n\r\nfunction isHidden(element) {\r\n  return !!element.hidden;\r\n}\r\n\r\nfunction isLabel(element) {\r\n  return !!element.labelTarget;\r\n}","import inherits from 'inherits';\n\nimport CreateMoveSnapping from 'diagram-js/lib/features/snapping/CreateMoveSnapping';\n\nimport {\n  isSnapped,\n  setSnapped,\n  topLeft,\n  bottomRight\n} from 'diagram-js/lib/features/snapping/SnapUtil';\n\nimport { isExpanded } from '../../util/DiUtil';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  asTRBL,\n  getMid\n} from 'diagram-js/lib/layout/LayoutUtil';\n\nimport { getBoundaryAttachment } from './BpmnSnappingUtil';\n\nimport { forEach } from 'min-dash';\n\nvar HIGH_PRIORITY = 1500;\n\n\n/**\n * Snap during create and move.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function BpmnCreateMoveSnapping(eventBus, injector) {\n  injector.invoke(CreateMoveSnapping, this);\n\n  // creating first participant\n  eventBus.on([ 'create.move', 'create.end' ], HIGH_PRIORITY, setSnappedIfConstrained);\n\n  // snap boundary events\n  eventBus.on([\n    'create.move',\n    'create.end',\n    'shape.move.move',\n    'shape.move.end'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        canExecute = context.canExecute,\n        target = context.target;\n\n    var canAttach = canExecute && (canExecute === 'attach' || canExecute.attach);\n\n    if (canAttach && !isSnapped(event)) {\n      snapBoundaryEvent(event, target);\n    }\n  });\n}\n\ninherits(BpmnCreateMoveSnapping, CreateMoveSnapping);\n\nBpmnCreateMoveSnapping.$inject = [\n  'eventBus',\n  'injector'\n];\n\nBpmnCreateMoveSnapping.prototype.initSnap = function(event) {\n  var snapContext = CreateMoveSnapping.prototype.initSnap.call(this, event);\n\n  var shape = event.shape;\n\n  var isMove = !!this._elementRegistry.get(shape.id);\n\n  // snap to docking points\n  forEach(shape.outgoing, function(connection) {\n    var docking = connection.waypoints[0];\n\n    docking = docking.original || docking;\n\n    snapContext.setSnapOrigin(connection.id + '-docking', getDockingSnapOrigin(docking, isMove, event));\n  });\n\n  forEach(shape.incoming, function(connection) {\n    var docking = connection.waypoints[connection.waypoints.length - 1];\n\n    docking = docking.original || docking;\n\n    snapContext.setSnapOrigin(connection.id + '-docking', getDockingSnapOrigin(docking, isMove, event));\n  });\n\n  if (is(shape, 'bpmn:Participant')) {\n\n    // snap to borders with higher priority\n    snapContext.setSnapLocations([ 'top-left', 'bottom-right', 'mid' ]);\n  }\n\n  return snapContext;\n};\n\nBpmnCreateMoveSnapping.prototype.addSnapTargetPoints = function(snapPoints, shape, target) {\n  CreateMoveSnapping.prototype.addSnapTargetPoints.call(this, snapPoints, shape, target);\n\n  var snapTargets = this.getSnapTargets(shape, target);\n\n  forEach(snapTargets, function(snapTarget) {\n\n    // handle TRBL alignment\n    //\n    // * with container elements\n    // * with text annotations\n    if (isContainer(snapTarget) || areAll([ shape, snapTarget ], 'bpmn:TextAnnotation')) {\n      snapPoints.add('top-left', topLeft(snapTarget));\n      snapPoints.add('bottom-right', bottomRight(snapTarget));\n    }\n  });\n\n  var elementRegistry = this._elementRegistry;\n\n  // snap to docking points if not create mode\n  forEach(shape.incoming, function(connection) {\n    if (elementRegistry.get(shape.id)) {\n\n      if (!includes(snapTargets, connection.source)) {\n        snapPoints.add('mid', getMid(connection.source));\n      }\n\n      var docking = connection.waypoints[0];\n      snapPoints.add(connection.id + '-docking', docking.original || docking);\n    }\n  });\n\n  forEach(shape.outgoing, function(connection) {\n    if (elementRegistry.get(shape.id)) {\n\n      if (!includes(snapTargets, connection.target)) {\n        snapPoints.add('mid', getMid(connection.target));\n      }\n\n      var docking = connection.waypoints[ connection.waypoints.length - 1 ];\n\n      snapPoints.add(connection.id + '-docking', docking.original || docking);\n    }\n  });\n\n  // add sequence flow parents as snap targets\n  if (is(target, 'bpmn:SequenceFlow')) {\n    snapPoints = this.addSnapTargetPoints(snapPoints, shape, target.parent);\n  }\n\n  return snapPoints;\n};\n\nBpmnCreateMoveSnapping.prototype.getSnapTargets = function(shape, target) {\n  return CreateMoveSnapping.prototype.getSnapTargets.call(this, shape, target)\n    .filter(function(snapTarget) {\n\n      // do not snap to lanes\n      return !is(snapTarget, 'bpmn:Lane');\n    });\n};\n\n// helpers //////////\n\nfunction snapBoundaryEvent(event, target) {\n  var targetTRBL = asTRBL(target);\n\n  var direction = getBoundaryAttachment(event, target);\n\n  var context = event.context,\n      shape = context.shape;\n\n  var offset;\n\n  if (shape.parent) {\n    offset = { x: 0, y: 0 };\n  } else {\n    offset = getMid(shape);\n  }\n\n  if (/top/.test(direction)) {\n    setSnapped(event, 'y', targetTRBL.top - offset.y);\n  } else if (/bottom/.test(direction)) {\n    setSnapped(event, 'y', targetTRBL.bottom - offset.y);\n  }\n\n  if (/left/.test(direction)) {\n    setSnapped(event, 'x', targetTRBL.left - offset.x);\n  } else if (/right/.test(direction)) {\n    setSnapped(event, 'x', targetTRBL.right - offset.x);\n  }\n}\n\nfunction areAll(elements, type) {\n  return elements.every(function(el) {\n    return is(el, type);\n  });\n}\n\nfunction isContainer(element) {\n  if (is(element, 'bpmn:SubProcess') && isExpanded(element)) {\n    return true;\n  }\n\n  return is(element, 'bpmn:Participant');\n}\n\n\nfunction setSnappedIfConstrained(event) {\n  var context = event.context,\n      createConstraints = context.createConstraints;\n\n  if (!createConstraints) {\n    return;\n  }\n\n  var top = createConstraints.top,\n      right = createConstraints.right,\n      bottom = createConstraints.bottom,\n      left = createConstraints.left;\n\n  if ((left && left >= event.x) || (right && right <= event.x)) {\n    setSnapped(event, 'x', event.x);\n  }\n\n  if ((top && top >= event.y) || (bottom && bottom <= event.y)) {\n    setSnapped(event, 'y', event.y);\n  }\n}\n\nfunction includes(array, value) {\n  return array.indexOf(value) !== -1;\n}\n\nfunction getDockingSnapOrigin(docking, isMove, event) {\n  return isMove ? (\n    {\n      x: docking.x - event.x,\n      y: docking.y - event.y\n    }\n  ) : {\n    x: docking.x,\n    y: docking.y\n  };\n}\n","import SnapContext from './SnapContext';\r\n\r\nimport {\r\n  bottomRight,\r\n  getChildren,\r\n  isSnapped,\r\n  setSnapped,\r\n  topLeft,\r\n} from './SnapUtil';\r\n\r\nimport { isCmd } from '../keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  asTRBL,\r\n  getMid\r\n} from '../../layout/LayoutUtil';\r\n\r\nimport { forEach } from 'min-dash';\r\n\r\nvar HIGHER_PRIORITY = 1250;\r\n\r\n\r\n/**\r\n * Snap during resize.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Snapping} snapping\r\n */\r\nexport default function ResizeSnapping(eventBus, snapping) {\r\n  var self = this;\r\n\r\n  eventBus.on([ 'resize.start' ], function(event) {\r\n    self.initSnap(event);\r\n  });\r\n\r\n  eventBus.on([\r\n    'resize.move',\r\n    'resize.end',\r\n  ], HIGHER_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        shape = context.shape,\r\n        parent = shape.parent,\r\n        direction = context.direction,\r\n        snapContext = context.snapContext;\r\n\r\n    if (event.originalEvent && isCmd(event.originalEvent)) {\r\n      return;\r\n    }\r\n\r\n    if (isSnapped(event)) {\r\n      return;\r\n    }\r\n\r\n    var snapPoints = snapContext.pointsForTarget(parent);\r\n\r\n    if (!snapPoints.initialized) {\r\n      snapPoints = self.addSnapTargetPoints(snapPoints, shape, parent, direction);\r\n\r\n      snapPoints.initialized = true;\r\n    }\r\n\r\n    if (isHorizontal(direction)) {\r\n      setSnapped(event, 'x', event.x);\r\n    }\r\n\r\n    if (isVertical(direction)) {\r\n      setSnapped(event, 'y', event.y);\r\n    }\r\n\r\n    snapping.snap(event, snapPoints);\r\n  });\r\n\r\n  eventBus.on([ 'resize.cleanup' ], function() {\r\n    snapping.hide();\r\n  });\r\n}\r\n\r\nResizeSnapping.prototype.initSnap = function(event) {\r\n  var context = event.context,\r\n      shape = context.shape,\r\n      direction = context.direction,\r\n      snapContext = context.snapContext;\r\n\r\n  if (!snapContext) {\r\n    snapContext = context.snapContext = new SnapContext();\r\n  }\r\n\r\n  var snapOrigin = getSnapOrigin(shape, direction);\r\n\r\n  snapContext.setSnapOrigin('corner', {\r\n    x: snapOrigin.x - event.x,\r\n    y: snapOrigin.y - event.y\r\n  });\r\n\r\n  return snapContext;\r\n};\r\n\r\nResizeSnapping.prototype.addSnapTargetPoints = function(snapPoints, shape, target, direction) {\r\n  var snapTargets = this.getSnapTargets(shape, target);\r\n\r\n  forEach(snapTargets, function(snapTarget) {\r\n    snapPoints.add('corner', bottomRight(snapTarget));\r\n    snapPoints.add('corner', topLeft(snapTarget));\r\n  });\r\n\r\n  snapPoints.add('corner', getSnapOrigin(shape, direction));\r\n\r\n  return snapPoints;\r\n};\r\n\r\nResizeSnapping.$inject = [\r\n  'eventBus',\r\n  'snapping'\r\n];\r\n\r\nResizeSnapping.prototype.getSnapTargets = function(shape, target) {\r\n  return getChildren(target).filter(function(child) {\r\n    return !isAttached(child, shape)\r\n      && !isConnection(child)\r\n      && !isHidden(child)\r\n      && !isLabel(child);\r\n  });\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction getSnapOrigin(shape, direction) {\r\n  var mid = getMid(shape),\r\n      trbl = asTRBL(shape);\r\n\r\n  var snapOrigin = {\r\n    x: mid.x,\r\n    y: mid.y\r\n  };\r\n\r\n  if (direction.indexOf('n') !== -1) {\r\n    snapOrigin.y = trbl.top;\r\n  } else if (direction.indexOf('s') !== -1) {\r\n    snapOrigin.y = trbl.bottom;\r\n  }\r\n\r\n  if (direction.indexOf('e') !== -1) {\r\n    snapOrigin.x = trbl.right;\r\n  } else if (direction.indexOf('w') !== -1) {\r\n    snapOrigin.x = trbl.left;\r\n  }\r\n\r\n  return snapOrigin;\r\n}\r\n\r\nfunction isAttached(element, host) {\r\n  return element.host === host;\r\n}\r\n\r\nfunction isConnection(element) {\r\n  return !!element.waypoints;\r\n}\r\n\r\nfunction isHidden(element) {\r\n  return !!element.hidden;\r\n}\r\n\r\nfunction isLabel(element) {\r\n  return !!element.labelTarget;\r\n}\r\n\r\nfunction isHorizontal(direction) {\r\n  return direction === 'n' || direction === 's';\r\n}\r\n\r\nfunction isVertical(direction) {\r\n  return direction === 'e' || direction === 'w';\r\n}","import {\n  bind,\n  debounce,\n  forEach,\n  isNumber,\n  isObject\n} from 'min-dash';\n\nimport {\n  isSnapped,\n  setSnapped\n} from './SnapUtil';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate\n} from 'tiny-svg';\n\nvar SNAP_TOLERANCE = 7;\n\nexport var SNAP_LINE_HIDE_DELAY = 1000;\n\n\n/**\n * Generic snapping feature.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Snapping(canvas) {\n  this._canvas = canvas;\n\n  // delay hide by 1000 seconds since last snap\n  this._asyncHide = debounce(bind(this.hide, this), SNAP_LINE_HIDE_DELAY);\n}\n\nSnapping.$inject = [ 'canvas' ];\n\n/**\n * Snap an event to given snap points.\n *\n * @param {Event} event\n * @param {SnapPoints} snapPoints\n */\nSnapping.prototype.snap = function(event, snapPoints) {\n  var context = event.context,\n      snapContext = context.snapContext,\n      snapLocations = snapContext.getSnapLocations();\n\n  var snapping = {\n    x: isSnapped(event, 'x'),\n    y: isSnapped(event, 'y')\n  };\n\n  forEach(snapLocations, function(location) {\n    var snapOrigin = snapContext.getSnapOrigin(location);\n\n    var snapCurrent = {\n      x: event.x + snapOrigin.x,\n      y: event.y + snapOrigin.y\n    };\n\n    // snap both axis if not snapped already\n    forEach([ 'x', 'y' ], function(axis) {\n      var locationSnapping;\n\n      if (!snapping[axis]) {\n        locationSnapping = snapPoints.snap(snapCurrent, location, axis, SNAP_TOLERANCE);\n\n        if (locationSnapping !== undefined) {\n          snapping[axis] = {\n            value: locationSnapping,\n            originValue: locationSnapping - snapOrigin[axis]\n          };\n        }\n      }\n    });\n\n    // no need to continue snapping\n    if (snapping.x && snapping.y) {\n      return false;\n    }\n  });\n\n  // show snap lines\n  this.showSnapLine('vertical', snapping.x && snapping.x.value);\n  this.showSnapLine('horizontal', snapping.y && snapping.y.value);\n\n  // snap event\n  forEach([ 'x', 'y' ], function(axis) {\n    var axisSnapping = snapping[axis];\n\n    if (isObject(axisSnapping)) {\n      setSnapped(event, axis, axisSnapping.originValue);\n    }\n  });\n};\n\nSnapping.prototype._createLine = function(orientation) {\n  var root = this._canvas.getLayer('snap');\n\n  var line = svgCreate('path');\n\n  svgAttr(line, { d: 'M0,0 L0,0' });\n\n  svgClasses(line).add('djs-snap-line');\n\n  svgAppend(root, line);\n\n  return {\n    update: function(position) {\n\n      if (!isNumber(position)) {\n        svgAttr(line, { display: 'none' });\n      } else {\n        if (orientation === 'horizontal') {\n          svgAttr(line, {\n            d: 'M-100000,' + position + ' L+100000,' + position,\n            display: ''\n          });\n        } else {\n          svgAttr(line, {\n            d: 'M ' + position + ',-100000 L ' + position + ', +100000',\n            display: ''\n          });\n        }\n      }\n    }\n  };\n};\n\nSnapping.prototype._createSnapLines = function() {\n  this._snapLines = {\n    horizontal: this._createLine('horizontal'),\n    vertical: this._createLine('vertical')\n  };\n};\n\nSnapping.prototype.showSnapLine = function(orientation, position) {\n\n  var line = this.getSnapLine(orientation);\n\n  if (line) {\n    line.update(position);\n  }\n\n  this._asyncHide();\n};\n\nSnapping.prototype.getSnapLine = function(orientation) {\n  if (!this._snapLines) {\n    this._createSnapLines();\n  }\n\n  return this._snapLines[orientation];\n};\n\nSnapping.prototype.hide = function() {\n  forEach(this._snapLines, function(snapLine) {\n    snapLine.update();\n  });\n};\n","import CreateMoveSnapping from './CreateMoveSnapping';\nimport ResizeSnapping from './ResizeSnapping';\nimport Snapping from './Snapping';\n\nexport default {\n  __init__: [\n    'createMoveSnapping',\n    'resizeSnapping',\n    'snapping'\n  ],\n  createMoveSnapping: [ 'type', CreateMoveSnapping ],\n  resizeSnapping: [ 'type', ResizeSnapping ],\n  snapping: [ 'type', Snapping ]\n};","import BpmnConnectSnapping from './BpmnConnectSnapping';\nimport BpmnCreateMoveSnapping from './BpmnCreateMoveSnapping';\nimport SnappingModule from 'diagram-js/lib/features/snapping';\n\nexport default {\n  __depends__: [ SnappingModule ],\n  __init__: [\n    'connectSnapping',\n    'createMoveSnapping'\n  ],\n  connectSnapping: [ 'type', BpmnConnectSnapping ],\n  createMoveSnapping: [ 'type', BpmnCreateMoveSnapping ]\n};","import {\n  clear as domClear,\n  delegate as domDelegate,\n  query as domQuery,\n  classes as domClasses,\n  attr as domAttr,\n  domify as domify\n} from 'min-dom';\n\nimport {\n  getBBox as getBoundingBox\n} from '../../util/Elements';\n\nimport {\n  escapeHTML\n} from '../../util/EscapeUtil';\n\n/**\n * Provides searching infrastructure\n */\nexport default function SearchPad(canvas, eventBus, overlays, selection) {\n  this._open = false;\n  this._results = [];\n  this._eventMaps = [];\n\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._overlays = overlays;\n  this._selection = selection;\n\n  // setup elements\n  this._container = domify(SearchPad.BOX_HTML);\n  this._searchInput = domQuery(SearchPad.INPUT_SELECTOR, this._container);\n  this._resultsContainer = domQuery(SearchPad.RESULTS_CONTAINER_SELECTOR, this._container);\n\n  // attach search pad\n  this._canvas.getContainer().appendChild(this._container);\n\n  // cleanup on destroy\n  eventBus.on([ 'canvas.destroy', 'diagram.destroy' ], this.close, this);\n}\n\n\nSearchPad.$inject = [\n  'canvas',\n  'eventBus',\n  'overlays',\n  'selection'\n];\n\n\n/**\n * Binds and keeps track of all event listereners\n */\nSearchPad.prototype._bindEvents = function() {\n  var self = this;\n\n  function listen(el, selector, type, fn) {\n    self._eventMaps.push({\n      el: el,\n      type: type,\n      listener: domDelegate.bind(el, selector, type, fn)\n    });\n  }\n\n  // close search on clicking anywhere outside\n  listen(document, 'html', 'click', function(e) {\n    self.close();\n  });\n\n  // stop event from propagating and closing search\n  // focus on input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    e.delegateTarget.focus();\n  });\n\n  // preselect result on hover\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'mouseover', function(e) {\n    e.stopPropagation();\n    self._scrollToNode(e.delegateTarget);\n    self._preselect(e.delegateTarget);\n  });\n\n  // selects desired result on mouse click\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    self._select(e.delegateTarget);\n  });\n\n  // prevent cursor in input from going left and right when using up/down to\n  // navigate results\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keydown', function(e) {\n\n    // up\n    if (e.keyCode === 38) {\n      e.preventDefault();\n    }\n\n    // down\n    if (e.keyCode === 40) {\n      e.preventDefault();\n    }\n  });\n\n  // handle keyboard input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keyup', function(e) {\n\n    // escape\n    if (e.keyCode === 27) {\n      return self.close();\n    }\n\n    // enter\n    if (e.keyCode === 13) {\n      var selected = self._getCurrentResult();\n\n      return selected ? self._select(selected) : self.close();\n    }\n\n    // up\n    if (e.keyCode === 38) {\n      return self._scrollToDirection(true);\n    }\n\n    // down\n    if (e.keyCode === 40) {\n      return self._scrollToDirection();\n    }\n\n    // left && right\n    // do not search while navigating text input\n    if (e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n\n    // anything else\n    self._search(e.delegateTarget.value);\n  });\n};\n\n\n/**\n * Unbinds all previously established listeners\n */\nSearchPad.prototype._unbindEvents = function() {\n  this._eventMaps.forEach(function(m) {\n    domDelegate.unbind(m.el, m.type, m.listener);\n  });\n};\n\n\n/**\n * Performs a search for the given pattern.\n *\n * @param  {String} pattern\n */\nSearchPad.prototype._search = function(pattern) {\n  var self = this;\n\n  this._clearResults();\n\n  // do not search on empty query\n  if (!pattern || pattern === '') {\n    return;\n  }\n\n  var searchResults = this._searchProvider.find(pattern);\n\n  if (!searchResults.length) {\n    return;\n  }\n\n  // append new results\n  searchResults.forEach(function(result) {\n    var id = result.element.id;\n    var node = self._createResultNode(result, id);\n    self._results[id] = {\n      element: result.element,\n      node: node\n    };\n  });\n\n  // preselect first result\n  var node = domQuery(SearchPad.RESULT_SELECTOR, this._resultsContainer);\n  this._scrollToNode(node);\n  this._preselect(node);\n};\n\n\n/**\n * Navigate to the previous/next result. Defaults to next result.\n * @param  {Boolean} previous\n */\nSearchPad.prototype._scrollToDirection = function(previous) {\n  var selected = this._getCurrentResult();\n  if (!selected) {\n    return;\n  }\n\n  var node = previous ? selected.previousElementSibling : selected.nextElementSibling;\n  if (node) {\n    this._scrollToNode(node);\n    this._preselect(node);\n  }\n};\n\n\n/**\n * Scroll to the node if it is not visible.\n *\n * @param  {Element} node\n */\nSearchPad.prototype._scrollToNode = function(node) {\n  if (!node || node === this._getCurrentResult()) {\n    return;\n  }\n\n  var nodeOffset = node.offsetTop;\n  var containerScroll = this._resultsContainer.scrollTop;\n\n  var bottomScroll = nodeOffset - this._resultsContainer.clientHeight + node.clientHeight;\n\n  if (nodeOffset < containerScroll) {\n    this._resultsContainer.scrollTop = nodeOffset;\n  } else if (containerScroll < bottomScroll) {\n    this._resultsContainer.scrollTop = bottomScroll;\n  }\n};\n\n\n/**\n * Clears all results data.\n */\nSearchPad.prototype._clearResults = function() {\n  domClear(this._resultsContainer);\n\n  this._results = [];\n\n  this._resetOverlay();\n\n  this._eventBus.fire('searchPad.cleared');\n};\n\n\n/**\n * Get currently selected result.\n *\n * @return {Element}\n */\nSearchPad.prototype._getCurrentResult = function() {\n  return domQuery(SearchPad.RESULT_SELECTED_SELECTOR, this._resultsContainer);\n};\n\n\n/**\n * Create result DOM element within results container\n * that corresponds to a search result.\n *\n * 'result' : one of the elements returned by SearchProvider\n * 'id' : id attribute value to assign to the new DOM node\n * return : created DOM element\n *\n * @param  {SearchResult} result\n * @param  {String} id\n * @return {Element}\n */\nSearchPad.prototype._createResultNode = function(result, id) {\n  var node = domify(SearchPad.RESULT_HTML);\n\n  // create only if available\n  if (result.primaryTokens.length > 0) {\n    createInnerTextNode(node, result.primaryTokens, SearchPad.RESULT_PRIMARY_HTML);\n  }\n\n  // secondary tokens (represent element ID) are allways available\n  createInnerTextNode(node, result.secondaryTokens, SearchPad.RESULT_SECONDARY_HTML);\n\n  domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE, id);\n\n  this._resultsContainer.appendChild(node);\n\n  return node;\n};\n\n\n/**\n * Register search element provider.\n *\n * SearchProvider.find - provides search function over own elements\n *  (pattern) => [{ text: <String>, element: <Element>}, ...]\n *\n * @param  {SearchProvider} provider\n */\nSearchPad.prototype.registerProvider = function(provider) {\n  this._searchProvider = provider;\n};\n\n\n/**\n * Open search pad.\n */\nSearchPad.prototype.open = function() {\n  if (!this._searchProvider) {\n    throw new Error('no search provider registered');\n  }\n\n  if (this.isOpen()) {\n    return;\n  }\n\n  this._bindEvents();\n\n  this._open = true;\n\n  domClasses(this._container).add('open');\n\n  this._searchInput.focus();\n\n  this._eventBus.fire('searchPad.opened');\n};\n\n\n/**\n * Close search pad.\n */\nSearchPad.prototype.close = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._unbindEvents();\n\n  this._open = false;\n\n  domClasses(this._container).remove('open');\n\n  this._clearResults();\n\n  this._searchInput.value = '';\n  this._searchInput.blur();\n\n  this._resetOverlay();\n\n  this._eventBus.fire('searchPad.closed');\n};\n\n\n/**\n * Toggles search pad on/off.\n */\nSearchPad.prototype.toggle = function() {\n  this.isOpen() ? this.close() : this.open();\n};\n\n\n/**\n * Report state of search pad.\n */\nSearchPad.prototype.isOpen = function() {\n  return this._open;\n};\n\n\n/**\n * Preselect result entry.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._preselect = function(node) {\n  var selectedNode = this._getCurrentResult();\n\n  // already selected\n  if (node === selectedNode) {\n    return;\n  }\n\n  // removing preselection from current node\n  if (selectedNode) {\n    domClasses(selectedNode).remove(SearchPad.RESULT_SELECTED_CLASS);\n  }\n\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  domClasses(node).add(SearchPad.RESULT_SELECTED_CLASS);\n\n  this._resetOverlay(element);\n\n  this._centerViewbox(element);\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.preselected', element);\n};\n\n\n/**\n * Select result node.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._select = function(node) {\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  this.close();\n\n  this._resetOverlay();\n\n  this._centerViewbox(element);\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.selected', element);\n};\n\n\n/**\n * Center viewbox on the element middle point.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._centerViewbox = function(element) {\n  var viewbox = this._canvas.viewbox();\n\n  var box = getBoundingBox(element);\n\n  var newViewbox = {\n    x: (box.x + box.width/2) - viewbox.outer.width/2,\n    y: (box.y + box.height/2) - viewbox.outer.height/2,\n    width: viewbox.outer.width,\n    height: viewbox.outer.height\n  };\n\n  this._canvas.viewbox(newViewbox);\n\n  this._canvas.zoom(viewbox.scale);\n};\n\n\n/**\n * Reset overlay removes and, optionally, set\n * overlay to a new element.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._resetOverlay = function(element) {\n  if (this._overlayId) {\n    this._overlays.remove(this._overlayId);\n  }\n\n  if (element) {\n    var box = getBoundingBox(element);\n    var overlay = constructOverlay(box);\n    this._overlayId = this._overlays.add(element, overlay);\n  }\n};\n\n\n/**\n * Construct overlay object for the given bounding box.\n *\n * @param  {BoundingBox} box\n * @return {Object}\n */\nfunction constructOverlay(box) {\n\n  var offset = 6;\n  var w = box.width + offset * 2;\n  var h = box.height + offset * 2;\n\n  var styles = [\n    'width: '+ w +'px',\n    'height: '+ h + 'px'\n  ].join('; ');\n\n  return {\n    position: {\n      bottom: h - offset,\n      right: w - offset\n    },\n    show: true,\n    html: '<div style=\"' + styles + '\" class=\"' + SearchPad.OVERLAY_CLASS + '\"></div>'\n  };\n}\n\n\n/**\n * Creates and appends child node from result tokens and HTML template.\n *\n * @param  {Element} node\n * @param  {Array<Object>} tokens\n * @param  {String} template\n */\nfunction createInnerTextNode(parentNode, tokens, template) {\n  var text = createHtmlText(tokens);\n  var childNode = domify(template);\n  childNode.innerHTML = text;\n  parentNode.appendChild(childNode);\n}\n\n/**\n * Create internal HTML markup from result tokens.\n * Caters for highlighting pattern matched tokens.\n *\n * @param  {Array<Object>} tokens\n * @return {String}\n */\nfunction createHtmlText(tokens) {\n  var htmlText = '';\n\n  tokens.forEach(function(t) {\n    if (t.matched) {\n      htmlText += '<strong class=\"' + SearchPad.RESULT_HIGHLIGHT_CLASS + '\">' + escapeHTML(t.matched) + '</strong>';\n    } else {\n      htmlText += escapeHTML(t.normal);\n    }\n  });\n\n  return htmlText !== '' ? htmlText : null;\n}\n\n\n/**\n * CONSTANTS\n */\nSearchPad.CONTAINER_SELECTOR = '.djs-search-container';\nSearchPad.INPUT_SELECTOR = '.djs-search-input input';\nSearchPad.RESULTS_CONTAINER_SELECTOR = '.djs-search-results';\nSearchPad.RESULT_SELECTOR = '.djs-search-result';\nSearchPad.RESULT_SELECTED_CLASS = 'djs-search-result-selected';\nSearchPad.RESULT_SELECTED_SELECTOR = '.' + SearchPad.RESULT_SELECTED_CLASS;\nSearchPad.RESULT_ID_ATTRIBUTE = 'data-result-id';\nSearchPad.RESULT_HIGHLIGHT_CLASS = 'djs-search-highlight';\nSearchPad.OVERLAY_CLASS = 'djs-search-overlay';\n\nSearchPad.BOX_HTML =\n  '<div class=\"djs-search-container djs-draggable djs-scrollable\">' +\n    '<div class=\"djs-search-input\">' +\n      '<input type=\"text\"/>' +\n    '</div>' +\n    '<div class=\"djs-search-results\"></div>' +\n  '</div>';\n\nSearchPad.RESULT_HTML =\n  '<div class=\"djs-search-result\"></div>';\n\nSearchPad.RESULT_PRIMARY_HTML =\n  '<div class=\"djs-search-result-primary\"></div>';\n\nSearchPad.RESULT_SECONDARY_HTML =\n  '<p class=\"djs-search-result-secondary\"></p>';\n","import OverlaysModule from '../overlays';\nimport SelectionModule from '../selection';\n\nimport SearchPad from './SearchPad';\n\nexport default {\n  __depends__: [\n    OverlaysModule,\n    SelectionModule\n  ],\n  searchPad: [ 'type', SearchPad ]\n};\n","import {\n  map,\n  filter,\n  sortBy\n} from 'min-dash';\n\nimport {\n  getLabel\n} from '../label-editing/LabelUtil';\n\n\n/**\n * Provides ability to search through BPMN elements\n */\nexport default function BpmnSearchProvider(elementRegistry, searchPad, canvas) {\n\n  this._elementRegistry = elementRegistry;\n  this._canvas = canvas;\n\n  searchPad.registerProvider(this);\n}\n\nBpmnSearchProvider.$inject = [\n  'elementRegistry',\n  'searchPad',\n  'canvas'\n];\n\n\n/**\n * Finds all elements that match given pattern\n *\n * <Result> :\n *  {\n *    primaryTokens: <Array<Token>>,\n *    secondaryTokens: <Array<Token>>,\n *    element: <Element>\n *  }\n *\n * <Token> :\n *  {\n *    normal|matched: <String>\n *  }\n *\n * @param  {String} pattern\n * @return {Array<Result>}\n */\nBpmnSearchProvider.prototype.find = function(pattern) {\n  var rootElement = this._canvas.getRootElement();\n\n  var elements = this._elementRegistry.filter(function(element) {\n    if (element.labelTarget) {\n      return false;\n    }\n    return true;\n  });\n\n  // do not include root element\n  elements = filter(elements, function(element) {\n    return element !== rootElement;\n  });\n\n  elements = map(elements, function(element) {\n    return {\n      primaryTokens: matchAndSplit(getLabel(element), pattern),\n      secondaryTokens: matchAndSplit(element.id, pattern),\n      element: element\n    };\n  });\n\n  // exclude non-matched elements\n  elements = filter(elements, function(element) {\n    return hasMatched(element.primaryTokens) || hasMatched(element.secondaryTokens);\n  });\n\n  elements = sortBy(elements, function(element) {\n    return getLabel(element.element) + element.element.id;\n  });\n\n  return elements;\n};\n\n\nfunction hasMatched(tokens) {\n  var matched = filter(tokens, function(t) {\n    return !!t.matched;\n  });\n\n  return matched.length > 0;\n}\n\n\nfunction matchAndSplit(text, pattern) {\n  var tokens = [],\n      originalText = text;\n\n  if (!text) {\n    return tokens;\n  }\n\n  text = text.toLowerCase();\n  pattern = pattern.toLowerCase();\n\n  var i = text.indexOf(pattern);\n\n  if (i > -1) {\n    if (i !== 0) {\n      tokens.push({\n        normal: originalText.substr(0, i)\n      });\n    }\n\n    tokens.push({\n      matched: originalText.substr(i, pattern.length)\n    });\n\n    if (pattern.length + i < text.length) {\n      tokens.push({\n        normal: originalText.substr(pattern.length + i, text.length)\n      });\n    }\n  } else {\n    tokens.push({\n      normal: originalText\n    });\n  }\n\n  return tokens;\n}","import SearchPadModule from 'diagram-js/lib/features/search-pad';\n\nimport BpmnSearchProvider from './BpmnSearchProvider';\n\n\nexport default {\n  __depends__: [\n    SearchPadModule\n  ],\n  __init__: [ 'bpmnSearch'],\n  bpmnSearch: [ 'type', BpmnSearchProvider ]\n};\n","import inherits from 'inherits';\n\nimport BaseModeler from './BaseModeler';\n\nimport Viewer from './Viewer';\nimport NavigatedViewer from './NavigatedViewer';\n\nimport KeyboardMoveModule from 'diagram-js/lib/navigation/keyboard-move';\nimport MoveCanvasModule from 'diagram-js/lib/navigation/movecanvas';\nimport TouchModule from 'diagram-js/lib/navigation/touch';\nimport ZoomScrollModule from 'diagram-js/lib/navigation/zoomscroll';\n\nimport AlignElementsModule from 'diagram-js/lib/features/align-elements';\nimport AutoPlaceModule from './features/auto-place';\nimport AutoResizeModule from './features/auto-resize';\nimport AutoScrollModule from 'diagram-js/lib/features/auto-scroll';\nimport BendpointsModule from 'diagram-js/lib/features/bendpoints';\nimport ConnectModule from 'diagram-js/lib/features/connect';\nimport ConnectionPreviewModule from 'diagram-js/lib/features/connection-preview';\nimport ContextPadModule from './features/context-pad';\nimport CopyPasteModule from './features/copy-paste';\nimport CreateModule from 'diagram-js/lib/features/create';\nimport DistributeElementsModule from './features/distribute-elements';\nimport EditorActionsModule from './features/editor-actions';\nimport GridSnappingModule from './features/grid-snapping';\nimport InteractionEventsModule from './features/interaction-events';\nimport KeyboardModule from './features/keyboard';\nimport KeyboardMoveSelectionModule from 'diagram-js/lib/features/keyboard-move-selection';\nimport LabelEditingModule from './features/label-editing';\nimport ModelingModule from './features/modeling';\nimport MoveModule from 'diagram-js/lib/features/move';\nimport PaletteModule from './features/palette';\nimport ReplacePreviewModule from './features/replace-preview';\nimport ResizeModule from 'diagram-js/lib/features/resize';\nimport SnappingModule from './features/snapping';\nimport SearchModule from './features/search';\n\n\nvar initialDiagram =\n  '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n  '<bpmn:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\n                    'xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" ' +\n                    'xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" ' +\n                    'xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" ' +\n                    'targetNamespace=\"http://bpmn.io/schema/bpmn\" ' +\n                    'id=\"Definitions_1\">' +\n    '<bpmn:process id=\"Process_1\" isExecutable=\"false\">' +\n      '<bpmn:startEvent id=\"StartEvent_1\"/>' +\n    '</bpmn:process>' +\n    '<bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">' +\n      '<bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\">' +\n        '<bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\">' +\n          '<dc:Bounds height=\"36.0\" width=\"36.0\" x=\"173.0\" y=\"102.0\"/>' +\n        '</bpmndi:BPMNShape>' +\n      '</bpmndi:BPMNPlane>' +\n    '</bpmndi:BPMNDiagram>' +\n  '</bpmn:definitions>';\n\n\n/**\n * A modeler for BPMN 2.0 diagrams.\n *\n *\n * ## Extending the Modeler\n *\n * In order to extend the viewer pass extension modules to bootstrap via the\n * `additionalModules` option. An extension module is an object that exposes\n * named services.\n *\n * The following example depicts the integration of a simple\n * logging component that integrates with interaction events:\n *\n *\n * ```javascript\n *\n * // logging component\n * function InteractionLogger(eventBus) {\n *   eventBus.on('element.hover', function(event) {\n *     console.log()\n *   })\n * }\n *\n * InteractionLogger.$inject = [ 'eventBus' ]; // minification save\n *\n * // extension module\n * var extensionModule = {\n *   __init__: [ 'interactionLogger' ],\n *   interactionLogger: [ 'type', InteractionLogger ]\n * };\n *\n * // extend the viewer\n * var bpmnModeler = new Modeler({ additionalModules: [ extensionModule ] });\n * bpmnModeler.importXML(...);\n * ```\n *\n *\n * ## Customizing / Replacing Components\n *\n * You can replace individual diagram components by redefining them in override modules.\n * This works for all components, including those defined in the core.\n *\n * Pass in override modules via the `options.additionalModules` flag like this:\n *\n * ```javascript\n * function CustomContextPadProvider(contextPad) {\n *\n *   contextPad.registerProvider(this);\n *\n *   this.getContextPadEntries = function(element) {\n *     // no entries, effectively disable the context pad\n *     return {};\n *   };\n * }\n *\n * CustomContextPadProvider.$inject = [ 'contextPad' ];\n *\n * var overrideModule = {\n *   contextPadProvider: [ 'type', CustomContextPadProvider ]\n * };\n *\n * var bpmnModeler = new Modeler({ additionalModules: [ overrideModule ]});\n * ```\n *\n * @param {Object} [options] configuration options to pass to the viewer\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\n * @param {String|Number} [options.width] the width of the viewer\n * @param {String|Number} [options.height] the height of the viewer\n * @param {Object} [options.moddleExtensions] extension packages to provide\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\n */\nexport default function Modeler(options) {\n  BaseModeler.call(this, options);\n}\n\ninherits(Modeler, BaseModeler);\n\n\nModeler.Viewer = Viewer;\nModeler.NavigatedViewer = NavigatedViewer;\n\n/**\n * Create a new diagram to start modeling.\n *\n * @param {Function} [done]\n */\nModeler.prototype.createDiagram = function(done) {\n  return this.importXML(initialDiagram, done);\n};\n\n\nModeler.prototype._interactionModules = [\n\n  // non-modeling components\n  KeyboardMoveModule,\n  MoveCanvasModule,\n  TouchModule,\n  ZoomScrollModule\n];\n\nModeler.prototype._modelingModules = [\n\n  // modeling components\n  AlignElementsModule,\n  AutoPlaceModule,\n  AutoScrollModule,\n  AutoResizeModule,\n  BendpointsModule,\n  ConnectModule,\n  ConnectionPreviewModule,\n  ContextPadModule,\n  CopyPasteModule,\n  CreateModule,\n  DistributeElementsModule,\n  EditorActionsModule,\n  GridSnappingModule,\n  InteractionEventsModule,\n  KeyboardModule,\n  KeyboardMoveSelectionModule,\n  LabelEditingModule,\n  ModelingModule,\n  MoveModule,\n  PaletteModule,\n  ReplacePreviewModule,\n  ResizeModule,\n  SnappingModule,\n  SearchModule\n];\n\n\n// modules the modeler is composed of\n//\n// - viewer modules\n// - interaction modules\n// - modeling modules\n\nModeler.prototype._modules = [].concat(\n  Viewer.prototype._modules,\n  Modeler.prototype._interactionModules,\n  Modeler.prototype._modelingModules\n);\n","'use strict';\r\n\r\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\r\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\r\n\r\nvar tasklist = require('./implementation/Tasklist');\r\n\r\nmodule.exports = function(group, element, bpmnFactory, translate) {\r\n  var businessObject = getBusinessObject(element);\r\n\r\n  if (is(element, 'camunda:Process') ||\r\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\r\n\r\n    group.entries = group.entries.concat(tasklist(element, bpmnFactory, {\r\n      getBusinessObject: function(element) {\r\n        var bo = getBusinessObject(element);\r\n\r\n        if (!is(bo, 'bpmn:Participant')) {\r\n          return bo;\r\n        }\r\n\r\n        return bo.get('processRef');\r\n      }\r\n    }, translate));\r\n\r\n  }\r\n};\r\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nvar forEach = require('lodash/forEach');\n\nfunction getLinkEventDefinition(element) {\n\n  var bo = getBusinessObject(element);\n\n  var linkEventDefinition = null;\n  if (bo.eventDefinitions) {\n    forEach(bo.eventDefinitions, function(eventDefinition) {\n      if (is(eventDefinition, 'bpmn:LinkEventDefinition')) {\n        linkEventDefinition = eventDefinition;\n      }\n    });\n  }\n\n  return linkEventDefinition;\n}\n\nmodule.exports = function(group, element, translate) {\n  var linkEvents = [ 'bpmn:IntermediateThrowEvent', 'bpmn:IntermediateCatchEvent' ];\n\n  forEach(linkEvents, function(event) {\n    if (is(element, event)) {\n\n      var linkEventDefinition = getLinkEventDefinition(element);\n\n      if (linkEventDefinition) {\n        var entry = entryFactory.textField({\n          id: 'link-event',\n          label: translate('Link Name'),\n          modelProperty: 'link-name'\n        });\n\n        entry.get = function() {\n          return { 'link-name': linkEventDefinition.get('name') };\n        };\n\n        entry.set = function(element, values) {\n          var newProperties = {\n            name: values['link-name']\n          };\n          return cmdHelper.updateBusinessObject(element, linkEventDefinition, newProperties);\n        };\n\n        group.entries.push(entry);\n      }\n    }\n  });\n};\n\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","'use strict';\n\nvar Validator = require('./Validator');\n\n/**\n * The guy responsible for template loading.\n *\n * Provide the actual templates via the `config.elementTemplates`.\n *\n * That configuration can either be an array of template\n * descriptors or a node style callback to retrieve\n * the templates asynchronously.\n *\n * @param {Array<TemplateDescriptor>|Function} loadTemplates\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n */\nfunction ElementTemplatesLoader(loadTemplates, eventBus, elementTemplates) {\n  this._loadTemplates = loadTemplates;\n  this._eventBus = eventBus;\n  this._elementTemplates = elementTemplates;\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n    self.reload();\n  });\n}\n\nmodule.exports = ElementTemplatesLoader;\n\nElementTemplatesLoader.$inject = [\n  'config.elementTemplates',\n  'eventBus',\n  'elementTemplates'\n];\n\n\nElementTemplatesLoader.prototype.reload = function() {\n\n  var self = this;\n\n  var loadTemplates = this._loadTemplates;\n\n  // no templates specified\n  if (typeof loadTemplates === 'undefined') {\n    return;\n  }\n\n  // template loader function specified\n  if (typeof loadTemplates === 'function') {\n\n    return loadTemplates(function(err, templates) {\n\n      if (err) {\n        return self.templateErrors([ err ]);\n      }\n\n      self.setTemplates(templates);\n    });\n  }\n\n  // templates array specified\n  if (loadTemplates.length) {\n    return this.setTemplates(loadTemplates);\n  }\n\n};\n\nElementTemplatesLoader.prototype.setTemplates = function(templates) {\n\n  var elementTemplates = this._elementTemplates;\n\n  var validator = new Validator().addAll(templates);\n\n  var errors = validator.getErrors(),\n      validTemplates = validator.getValidTemplates();\n\n  elementTemplates.set(validTemplates);\n\n  if (errors.length) {\n    this.templateErrors(errors);\n  }\n\n  this.templatesChanged();\n};\n\nElementTemplatesLoader.prototype.templatesChanged = function() {\n  this._eventBus.fire('elementTemplates.changed');\n};\n\nElementTemplatesLoader.prototype.templateErrors = function(errors) {\n  this._eventBus.fire('elementTemplates.errors', {\n    errors: errors\n  });\n};","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","'use strict';\n\nvar assign = require('lodash/assign'),\n    find = require('lodash/find');\n\nvar domQuery = require('min-dom').query;\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar selectEntryFactory = require('./SelectEntryFactory'),\n    entryFieldDescription = require('./EntryFieldDescription');\n\n\n/**\n * The combo box is a special implementation of the select entry and adds the option 'custom' to the\n * select box. If 'custom' is selected, an additional text input field is shown which allows to define\n * a custom value.\n *\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} options.label\n * @param  {Array<Object>} options.selectOptions list of name/value pairs\n * @param  {string} options.modelProperty\n * @param  {function} options.get\n * @param  {function} options.set\n * @param  {string} [options.customValue] custom select option value (default: 'custom')\n * @param  {string} [options.customName] custom select option name visible in the select box (default: 'custom')\n *\n * @return {Object}\n */\nvar comboBox = function(options) {\n\n  var selectOptions = options.selectOptions,\n      modelProperty = options.modelProperty,\n      customValue = options.customValue || 'custom',\n      customName = options.customName || 'custom ' + modelProperty,\n      description = options.description;\n\n  // check if a value is not a built in value\n  var isCustomValue = function(value) {\n    if (typeof value[modelProperty] === 'undefined') {\n      return false;\n    }\n\n    var isCustom = !find(selectOptions, function(option) {\n      return value[modelProperty] === option.value;\n    });\n\n    return isCustom;\n  };\n\n  var comboOptions = assign({}, options);\n\n  // true if the selected value in the select box is customValue\n  comboOptions.showCustomInput = function(element, node) {\n    var selectBox = domQuery('[data-entry=\"'+ options.id +'\"] select', node.parentNode);\n\n    if (selectBox) {\n      return selectBox.value === customValue;\n    }\n\n    return false;\n  };\n\n  comboOptions.get = function(element, node) {\n    var value = options.get(element, node);\n\n    var modifiedValues = {};\n\n    if (!isCustomValue(value)) {\n      modifiedValues[modelProperty] = value[modelProperty] || '';\n\n      return modifiedValues;\n    }\n\n    modifiedValues[modelProperty] = customValue;\n    modifiedValues['custom-'+modelProperty] = value[modelProperty];\n\n    return modifiedValues;\n  };\n\n  comboOptions.set = function(element, values, node) {\n    var modifiedValues = {};\n\n    // if the custom select option has been selected\n    // take the value from the text input field\n    if (values[modelProperty] === customValue) {\n      modifiedValues[modelProperty] = values['custom-' + modelProperty] || '';\n    }\n    else if (options.emptyParameter && values[modelProperty] === '') {\n      modifiedValues[modelProperty] = undefined;\n    } else {\n      modifiedValues[modelProperty] = values[modelProperty];\n    }\n    return options.set(element, modifiedValues, node);\n  };\n\n  comboOptions.selectOptions.push({ name: customName, value: customValue });\n\n  var comboBoxEntry = assign({}, selectEntryFactory(comboOptions, comboOptions));\n\n  comboBoxEntry.html += '<div class=\"bpp-field-wrapper bpp-combo-input\" ' +\n    'data-show=\"showCustomInput\"' +\n    '>' +\n    '<input id=\"camunda-' + escapeHTML(options.id) + '-input\" type=\"text\" name=\"custom-' +\n      escapeHTML(modelProperty) + '\" ' +\n    ' />' +\n  '</div>';\n\n  // add description below combo box entry field\n  if (description) {\n    comboBoxEntry.html += entryFieldDescription(description);\n  }\n\n  return comboBoxEntry;\n};\n\nmodule.exports = comboBox;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper');\n\nvar externalTaskPriority = require('./implementation/ExternalTaskPriority');\n\nfunction getServiceTaskLikeBusinessObject(element) {\n  var bo = ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n\n  // if the element is not a serviceTaskLike element, fetch the normal business object\n  // This avoids the loss of the process / participant business object\n  if (!bo) {\n    bo = getBusinessObject(element);\n  }\n\n  return bo;\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var bo = getServiceTaskLikeBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(bo, 'camunda:TaskPriorized') || (is(bo, 'bpmn:Participant')) && bo.get('processRef')) {\n    group.entries = group.entries.concat(externalTaskPriority(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n        return bo.get('processRef');\n      }\n    }, translate));\n  }\n};","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar domQuery = require('min-dom').query,\n    domClosest = require('min-dom').closest,\n    domify = require('min-dom').domify,\n    forEach = require('lodash/forEach');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils'),\n    escapeHTML = utils.escapeHTML;\n\nfunction getSelectBox(node, id) {\n  var currentTab = domClosest(node, 'div.bpp-properties-tab');\n  var query = 'select[name=selectedExtensionElement]' + (id ? '[id=cam-extensionElements-' + id + ']' : '');\n  return domQuery(query, currentTab);\n}\n\nfunction getSelected(node, id) {\n  var selectBox = getSelectBox(node, id);\n  return {\n    value: (selectBox || {}).value,\n    idx: (selectBox || {}).selectedIndex\n  };\n}\n\nfunction generateElementId(prefix) {\n  prefix = prefix + '_';\n  return utils.nextId(prefix);\n}\n\nvar CREATE_EXTENSION_ELEMENT_ACTION = 'create-extension-element',\n    REMOVE_EXTENSION_ELEMENT_ACTION = 'remove-extension-element';\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var id = options.id,\n      prefix = options.prefix || 'elem',\n      label = options.label || id,\n      idGeneration = (options.idGeneration === false) ? options.idGeneration : true,\n      businessObject = options.businessObject || getBusinessObject(element);\n\n  var modelProperty = options.modelProperty || 'id';\n\n  var getElements = options.getExtensionElements;\n\n  var createElement = options.createExtensionElement,\n      canCreate = typeof createElement === 'function';\n\n  var removeElement = options.removeExtensionElement,\n      canRemove = typeof removeElement === 'function';\n\n  var onSelectionChange = options.onSelectionChange;\n\n  var hideElements = options.hideExtensionElements,\n      canBeHidden = typeof hideElements === 'function';\n\n  var setOptionLabelValue = options.setOptionLabelValue;\n\n  var defaultSize = options.size || 5,\n      resizable = options.resizable;\n\n  var reference = options.reference || undefined;\n\n  var selectionChanged = function(element, node, event, scope) {\n    if (typeof onSelectionChange === 'function') {\n      return onSelectionChange(element, node, event, scope);\n    }\n  };\n\n  var createOption = function(value) {\n    return '<option value=\"' + escapeHTML(value) + '\" data-value data-name=\"extensionElementValue\">' + escapeHTML(value) + '</option>';\n  };\n\n  var initSelectionSize = function(selectBox, optionsLength) {\n    if (resizable) {\n      selectBox.size = optionsLength > defaultSize ? optionsLength : defaultSize;\n    }\n  };\n\n  return {\n    id: id,\n    html: '<div class=\"bpp-row bpp-element-list\" ' +\n            (canBeHidden ? 'data-show=\"hideElements\"' : '') + '>' +\n            '<label for=\"cam-extensionElements-' + escapeHTML(id) + '\">' + escapeHTML(label) + '</label>' +\n            '<div class=\"bpp-field-wrapper\">' +\n              '<select id=\"cam-extensionElements-' + escapeHTML(id) + '\"' +\n                      'name=\"selectedExtensionElement\" ' +\n                      'size=\"' + escapeHTML(defaultSize) + '\" ' +\n                      'data-list-entry-container ' +\n                      'data-on-change=\"selectElement\">' +\n              '</select>' +\n              (canCreate ? '<button class=\"add\" ' +\n                                   'id=\"cam-extensionElements-create-' + escapeHTML(id) + '\" ' +\n                                   'data-action=\"createElement\">' +\n                             '<span>+</span>' +\n                           '</button>' : '') +\n              (canRemove ? '<button class=\"clear\" ' +\n                                   'id=\"cam-extensionElements-remove-' + escapeHTML(id) + '\" ' +\n                                   'data-action=\"removeElement\" ' +\n                                   'data-disable=\"disableRemove\">' +\n                             '<span>-</span>' +\n                           '</button>' : '') +\n            '</div>' +\n          '</div>',\n\n    get: function(element, node) {\n      var elements = getElements(element, node);\n\n      var result = [];\n      forEach(elements, function(elem) {\n        result.push({\n          extensionElementValue: elem.get(modelProperty)\n        });\n      });\n\n      var selectBox = getSelectBox(node.parentNode, id);\n      initSelectionSize(selectBox, result.length);\n\n      return result;\n    },\n\n    set: function(element, values, node) {\n      var action = this.__action;\n      delete this.__action;\n\n      businessObject = businessObject || getBusinessObject(element);\n\n      var bo =\n        (reference && businessObject.get(reference))\n          ? businessObject.get(reference)\n          : businessObject;\n\n      var extensionElements = bo.get('extensionElements');\n\n      if (action.id === CREATE_EXTENSION_ELEMENT_ACTION) {\n        var commands = [];\n        if (!extensionElements) {\n          extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n          commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n        }\n        commands.push(createElement(element, extensionElements, action.value, node));\n        return commands;\n\n      }\n      else if (action.id === REMOVE_EXTENSION_ELEMENT_ACTION) {\n        return removeElement(element, extensionElements, action.value, action.idx, node);\n      }\n\n    },\n\n    createListEntryTemplate: function(value, index, selectBox) {\n      initSelectionSize(selectBox, selectBox.options.length + 1);\n      return createOption(value.extensionElementValue);\n    },\n\n    deselect: function(element, node) {\n      var selectBox = getSelectBox(node, id);\n      selectBox.selectedIndex = -1;\n    },\n\n    getSelected: function(element, node) {\n      return getSelected(node, id);\n    },\n\n    setControlValue: function(element, node, option, property, value, idx) {\n      node.value = value;\n\n      if (!setOptionLabelValue) {\n        node.text = value;\n      } else {\n        setOptionLabelValue(element, node, option, property, value, idx);\n      }\n    },\n\n    createElement: function(element, node) {\n      // create option template\n      var generatedId;\n      if (idGeneration) {\n        generatedId = generateElementId(prefix);\n      }\n\n      var selectBox = getSelectBox(node, id);\n      var template = domify(createOption(generatedId));\n\n      // add new empty option as last child element\n      selectBox.appendChild(template);\n\n      // select last child element\n      selectBox.lastChild.selected = 'selected';\n      selectionChanged(element, node);\n\n      // update select box size\n      initSelectionSize(selectBox, selectBox.options.length);\n\n      this.__action = {\n        id: CREATE_EXTENSION_ELEMENT_ACTION,\n        value: generatedId\n      };\n\n      return true;\n    },\n\n    removeElement: function(element, node) {\n      var selection = getSelected(node, id);\n\n      var selectBox = getSelectBox(node, id);\n      selectBox.removeChild(selectBox.options[selection.idx]);\n\n      // update select box size\n      initSelectionSize(selectBox, selectBox.options.length);\n\n      this.__action = {\n        id: REMOVE_EXTENSION_ELEMENT_ACTION,\n        value: selection.value,\n        idx: selection.idx\n      };\n\n      return true;\n    },\n\n    hideElements: function(element, entryNode, node, scopeNode) {\n      return !hideElements(element, entryNode, node, scopeNode);\n    },\n\n    disableRemove: function(element, entryNode, node, scopeNode) {\n      return (getSelected(entryNode, id) || {}).idx < 0;\n    },\n\n    selectElement: selectionChanged\n  };\n\n};\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar extensionElementsEntry = require('./ExtensionElements'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementHelper = require('../../../../helper/ElementHelper'),\n    ImplementationTypeHelper = require('../../../../helper/ImplementationTypeHelper');\n\n\nfunction getListeners(bo, type) {\n  return bo && extensionElementsHelper.getExtensionElements(bo, type) || [];\n}\n\nvar CAMUNDA_EXECUTION_LISTENER_ELEMENT = 'camunda:ExecutionListener';\nvar CAMUNDA_TASK_LISTENER_ELEMENT = 'camunda:TaskListener';\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var LISTENER_TYPE_LABEL = {\n    class: translate('Java Class'),\n    expression: translate('Expression'),\n    delegateExpression: translate('Delegate Expression'),\n    script: translate('Script')\n  };\n\n  var bo;\n\n  var result = {\n    getSelectedListener: getSelectedListener\n  };\n\n  var entries = result.entries = [];\n\n  var isSequenceFlow = ImplementationTypeHelper.isSequenceFlow(element);\n\n  function getSelectedListener(element, node) {\n    var selection = (executionListenerEntry && executionListenerEntry.getSelected(element, node)) || { idx: -1 };\n\n    var listener = getListeners(bo, CAMUNDA_EXECUTION_LISTENER_ELEMENT)[selection.idx];\n    if (!listener && taskListenerEntry) {\n      selection = taskListenerEntry.getSelected(element, node);\n      listener = getListeners(bo, CAMUNDA_TASK_LISTENER_ELEMENT)[selection.idx];\n    }\n    return listener;\n  }\n\n  var setOptionLabelValue = function(type) {\n    return function(element, node, option, property, value, idx) {\n      var listeners = getListeners(bo, type);\n      var listener = listeners[idx];\n      var listenerType = ImplementationTypeHelper.getImplementationType(listener);\n\n      var event = (listener.get('event')) ? listener.get('event') : '<empty>';\n\n      var label = (event || '*') + ' : ' + (LISTENER_TYPE_LABEL[listenerType] || '');\n\n      option.text = label;\n    };\n  };\n\n  var newElement = function(element, type, initialEvent) {\n    return function(element, extensionElements, value) {\n      var props = {\n        event: initialEvent,\n        class: ''\n      };\n\n      var newElem = elementHelper.createElement(type, props, extensionElements, bpmnFactory);\n\n      return cmdHelper.addElementsTolist(element, extensionElements, 'values', [ newElem ]);\n    };\n  };\n\n  var removeElement = function(element, type) {\n    return function(element, extensionElements, value, idx) {\n      var listeners = getListeners(bo, type);\n      var listener = listeners[idx];\n      if (listener) {\n        return extensionElementsHelper.removeEntry(bo, element, listener);\n      }\n    };\n  };\n\n\n  // Execution Listener\n\n  if (is(element, 'bpmn:FlowElement') || is(element, 'bpmn:Process') || is(element, 'bpmn:Participant')) {\n    bo = getBusinessObject(element);\n    if (is(element, 'bpmn:Participant')) {\n      element = element.processRef;\n      bo = bo.get('processRef');\n    }\n\n    if (bo) {\n\n      var executionListenerEntry = extensionElementsEntry(element, bpmnFactory, {\n        id : 'executionListeners',\n        label : translate('Execution Listener'),\n        modelProperty: 'name',\n        idGeneration: 'false',\n        reference: 'processRef',\n\n        createExtensionElement: newElement(element, CAMUNDA_EXECUTION_LISTENER_ELEMENT, (isSequenceFlow) ? 'take' : 'start'),\n        removeExtensionElement: removeElement(element, CAMUNDA_EXECUTION_LISTENER_ELEMENT),\n\n        getExtensionElements: function(element) {\n          return getListeners(bo, CAMUNDA_EXECUTION_LISTENER_ELEMENT);\n        },\n\n        onSelectionChange: function(element, node, event, scope) {\n          taskListenerEntry && taskListenerEntry.deselect(element, node);\n        },\n\n        setOptionLabelValue: setOptionLabelValue(CAMUNDA_EXECUTION_LISTENER_ELEMENT)\n\n      });\n      entries.push(executionListenerEntry);\n\n    }\n  }\n\n\n  // Task Listener\n\n  if (is(element, 'bpmn:UserTask')) {\n    bo = getBusinessObject(element);\n\n    var taskListenerEntry = extensionElementsEntry(element, bpmnFactory, {\n      id : 'taskListeners',\n      label : translate('Task Listener'),\n      modelProperty: 'name',\n      idGeneration: 'false',\n\n      createExtensionElement: newElement(element, CAMUNDA_TASK_LISTENER_ELEMENT, 'create'),\n      removeExtensionElement: removeElement(element, CAMUNDA_TASK_LISTENER_ELEMENT),\n\n      getExtensionElements: function(element) {\n        return getListeners(bo, CAMUNDA_TASK_LISTENER_ELEMENT);\n      },\n\n      onSelectionChange: function(element, node, event, scope) {\n        executionListenerEntry.deselect(element, node);\n      },\n\n      setOptionLabelValue: setOptionLabelValue(CAMUNDA_TASK_LISTENER_ELEMENT)\n\n    });\n    entries.push(taskListenerEntry);\n  }\n\n  return result;\n\n};\n","'use strict';\n\nvar ChangeElementTemplateHandler = require('./ChangeElementTemplateHandler');\n\nvar getTemplate = require('../Helper').getTemplate,\n    getDefaultTemplate = require('../Helper').getDefaultTemplate;\n\nfunction registerHandlers(commandStack, elementTemplates, eventBus, elementRegistry) {\n  commandStack.registerHandler(\n    'propertiesPanel.camunda.changeTemplate',\n    ChangeElementTemplateHandler\n  );\n\n  // apply default element templates on shape creation\n  eventBus.on([ 'commandStack.shape.create.postExecuted' ], function(context) {\n    applyDefaultTemplate(context.context.shape, elementTemplates, commandStack);\n  });\n\n  // apply default element templates on connection creation\n  eventBus.on([ 'commandStack.connection.create.postExecuted' ], function(context) {\n    applyDefaultTemplate(context.context.connection, elementTemplates, commandStack);\n  });\n}\n\nregisterHandlers.$inject = [ 'commandStack', 'elementTemplates', 'eventBus', 'elementRegistry' ];\n\n\nmodule.exports = {\n  __init__: [ registerHandlers ]\n};\n\n\nfunction applyDefaultTemplate(element, elementTemplates, commandStack) {\n\n  if (!getTemplate(element, elementTemplates)\n      && getDefaultTemplate(element, elementTemplates)) {\n\n    var command = 'propertiesPanel.camunda.changeTemplate';\n    var commandContext = {\n      element: element,\n      newTemplate: getDefaultTemplate(element, elementTemplates)\n    };\n\n    commandStack.execute(command, commandContext);\n  }\n}\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","/**\n * Checks whether node is of specific bpmn type.\n *\n * @param {ModdleElement} node\n * @param {String} type\n *\n * @return {Boolean}\n */\nfunction is(node, type) {\n\n  if (type.indexOf(':') === -1) {\n    type = 'bpmn:' + type;\n  }\n\n  return (\n    (typeof node.$instanceOf === 'function')\n      ? node.$instanceOf(type)\n      : node.$type === type\n  );\n}\n\n/**\n * Checks whether node has any of the specified types.\n *\n * @param {ModdleElement} node\n * @param {Array<String>} types\n *\n * @return {Boolean}\n */\nfunction isAny(node, types) {\n  return types.some(function(type) {\n    return is(node, type);\n  });\n}\n\nexport { is, isAny };\n//# sourceMappingURL=index.esm.js.map\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","'use strict';\n\nvar inputOutput = require('./implementation/InputOutput');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var inputOutputEntry = inputOutput(element, bpmnFactory, {}, translate);\n\n  group.entries = group.entries.concat(inputOutputEntry.entries);\n\n  return {\n    getSelectedParameter: inputOutputEntry.getSelectedParameter\n  };\n\n};\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","'use strict';\n\n/**\n * Calculate the selection update for the given\n * current and new input values.\n *\n * @param {Object} currentSelection as {start, end}\n * @param {String} currentValue\n * @param {String} newValue\n *\n * @return {Object} newSelection as {start, end}\n */\nfunction calculateUpdate(currentSelection, currentValue, newValue) {\n\n  var currentCursor = currentSelection.start,\n      newCursor = currentCursor,\n      diff = newValue.length - currentValue.length,\n      idx;\n\n  var lengthDelta = newValue.length - currentValue.length;\n\n  var currentTail = currentValue.substring(currentCursor);\n\n  // check if we can remove common ending from the equation\n  // to be able to properly detect a selection change for\n  // the following scenarios:\n  //\n  //  * (AAATTT|TF) => (AAAT|TF)\n  //  * (AAAT|TF) =>  (AAATTT|TF)\n  //\n  if (newValue.lastIndexOf(currentTail) === newValue.length - currentTail.length) {\n    currentValue = currentValue.substring(0, currentValue.length - currentTail.length);\n    newValue = newValue.substring(0, newValue.length - currentTail.length);\n  }\n\n  // diff\n  var diff = createDiff(currentValue, newValue);\n\n  if (diff) {\n    if (diff.type === 'remove') {\n      newCursor = diff.newStart;\n    } else {\n      newCursor = diff.newEnd;\n    }\n  }\n\n  return range(newCursor);\n}\n\nmodule.exports = calculateUpdate;\n\n\nfunction createDiff(currentValue, newValue) {\n\n  var insert;\n\n  var l_str, l_char, l_idx = 0,\n      s_str, s_char, s_idx = 0;\n\n  if (newValue.length > currentValue.length) {\n    l_str = newValue;\n    s_str = currentValue;\n  } else {\n    l_str = currentValue;\n    s_str = newValue;\n  }\n\n  // assume there will be only one insert / remove and\n  // detect that _first_ edit operation only\n  while (l_idx < l_str.length) {\n\n    l_char = l_str.charAt(l_idx);\n    s_char = s_str.charAt(s_idx);\n\n    // chars no not equal\n    if (l_char !== s_char) {\n\n      if (!insert) {\n        insert = {\n          l_start: l_idx,\n          s_start: s_idx\n        };\n      }\n\n      l_idx++;\n    }\n\n    // chars equal (again?)\n    else {\n\n      if (insert && !insert.complete) {\n        insert.l_end = l_idx;\n        insert.s_end = s_idx;\n        insert.complete = true;\n      }\n\n      s_idx++;\n      l_idx++;\n    }\n  }\n\n  if (insert && !insert.complete) {\n    insert.complete = true;\n    insert.s_end = s_str.length;\n    insert.l_end = l_str.length;\n  }\n\n  // no diff\n  if (!insert) {\n    return;\n  }\n\n  if (newValue.length > currentValue.length) {\n    return {\n      newStart: insert.l_start,\n      newEnd: insert.l_end,\n      type: 'add'\n    };\n  } else {\n    return {\n      newStart: insert.s_start,\n      newEnd: insert.s_end,\n      type: newValue.length < currentValue.length ? 'remove' : 'replace'\n    };\n  }\n}\n\n/**\n * Utility method for creating a new selection range {start, end} object.\n *\n * @param {Number} start\n * @param {Number} [end]\n *\n * @return {Object} selection range as {start, end}\n */\nfunction range(start, end) {\n  return {\n    start: start,\n    end: end === undefined ? start : end\n  };\n}\n\nmodule.exports.range = range;\n\n\nfunction splitStr(str, position) {\n  return {\n    before: str.substring(0, position),\n    after: str.substring(position)\n  };\n}","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var TRAP_PRIORITY = 5000;\n\n/**\n * Installs a click trap that prevents a ghost click following a dragging operation.\n *\n * @return {Function} a function to immediately remove the installed trap.\n */\nexport function install(eventBus, eventName) {\n\n  eventName = eventName || 'element.click';\n\n  function trap() {\n    return false;\n  }\n\n  eventBus.once(eventName, TRAP_PRIORITY, trap);\n\n  return function() {\n    eventBus.off(eventName, trap);\n  };\n}","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","module.exports = {\n  __depends__: [\n    require('./cmd'),\n    require('diagram-js/lib/i18n/translate').default\n  ],\n  __init__: [ 'propertiesPanel' ],\n  propertiesPanel: [ 'type', require('./PropertiesPanel') ]\n};\n","'use strict';\n\nvar inherits = require('inherits');\n\nvar PropertiesActivator = require('../../PropertiesActivator');\n\nvar asyncCapableHelper = require('../../helper/AsyncCapableHelper'),\n    ImplementationTypeHelper = require('../../helper/ImplementationTypeHelper');\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\n// bpmn properties\nvar processProps = require('../bpmn/parts/ProcessProps'),\n    eventProps = require('../bpmn/parts/EventProps'),\n    linkProps = require('../bpmn/parts/LinkProps'),\n    documentationProps = require('../bpmn/parts/DocumentationProps'),\n    idProps = require('../bpmn/parts/IdProps'),\n    nameProps = require('../bpmn/parts/NameProps'),\n    executableProps = require('../bpmn/parts/ExecutableProps');\n\n// camunda properties\nvar serviceTaskDelegateProps = require('./parts/ServiceTaskDelegateProps'),\n    userTaskProps = require('./parts/UserTaskProps'),\n    asynchronousContinuationProps = require('./parts/AsynchronousContinuationProps'),\n    callActivityProps = require('./parts/CallActivityProps'),\n    multiInstanceProps = require('./parts/MultiInstanceLoopProps'),\n    conditionalProps = require('./parts/ConditionalProps'),\n    scriptProps = require('./parts/ScriptTaskProps'),\n    errorProps = require('./parts/ErrorEventProps'),\n    formProps = require('./parts/FormProps'),\n    startEventInitiator = require('./parts/StartEventInitiator'),\n    variableMapping = require('./parts/VariableMappingProps'),\n    versionTag = require('./parts/VersionTagProps');\n\nvar listenerProps = require('./parts/ListenerProps'),\n    listenerDetails = require('./parts/ListenerDetailProps'),\n    listenerFields = require('./parts/ListenerFieldInjectionProps');\n\nvar elementTemplateChooserProps = require('./element-templates/parts/ChooserProps'),\n    elementTemplateCustomProps = require('./element-templates/parts/CustomProps');\n\n// Input/Output\nvar inputOutput = require('./parts/InputOutputProps'),\n    inputOutputParameter = require('./parts/InputOutputParameterProps');\n\n// Connector\nvar connectorDetails = require('./parts/ConnectorDetailProps'),\n    connectorInputOutput = require('./parts/ConnectorInputOutputProps'),\n    connectorInputOutputParameter = require('./parts/ConnectorInputOutputParameterProps');\n\n// properties\nvar properties = require('./parts/PropertiesProps');\n\n// job configuration\nvar jobConfiguration = require('./parts/JobConfigurationProps');\n\n// history time to live\nvar historyTimeToLive = require('./parts/HistoryTimeToLiveProps');\n\n// candidate starter groups/users\nvar candidateStarter = require('./parts/CandidateStarterProps');\n\n// tasklist\nvar tasklist = require('./parts/TasklistProps');\n\n// external task configuration\nvar externalTaskConfiguration = require('./parts/ExternalTaskConfigurationProps');\n\n// field injection\nvar fieldInjections = require('./parts/FieldInjectionProps');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    eventDefinitionHelper = require('../../helper/EventDefinitionHelper'),\n    implementationTypeHelper = require('../../helper/ImplementationTypeHelper');\n\n// helpers ////////////////////////////////////////\n\nvar isExternalTaskPriorityEnabled = function(element) {\n  var businessObject = getBusinessObject(element);\n\n  // show only if element is a process, a participant ...\n  if (is(element, 'bpmn:Process') || is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n    return true;\n  }\n\n  var externalBo = ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element),\n      isExternalTask = ImplementationTypeHelper.getImplementationType(externalBo) === 'external';\n\n  // ... or an external task with selected external implementation type\n  return !!ImplementationTypeHelper.isExternalCapable(externalBo) && isExternalTask;\n};\n\nvar isJobConfigEnabled = function(element) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'bpmn:Process') || is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n    return true;\n  }\n\n  // async behavior\n  var bo = getBusinessObject(element);\n  if (asyncCapableHelper.isAsyncBefore(bo) || asyncCapableHelper.isAsyncAfter(bo)) {\n    return true;\n  }\n\n  // timer definition\n  if (is(element, 'bpmn:Event')) {\n    return !!eventDefinitionHelper.getTimerEventDefinition(element);\n  }\n\n  return false;\n};\n\nvar getInputOutputParameterLabel = function(param, translate) {\n\n  if (is(param, 'camunda:InputParameter')) {\n    return translate('Input Parameter');\n  }\n\n  if (is(param, 'camunda:OutputParameter')) {\n    return translate('Output Parameter');\n  }\n\n  return '';\n};\n\nvar getListenerLabel = function(param, translate) {\n\n  if (is(param, 'camunda:ExecutionListener')) {\n    return translate('Execution Listener');\n  }\n\n  if (is(param, 'camunda:TaskListener')) {\n    return translate('Task Listener');\n  }\n\n  return '';\n};\n\nvar PROCESS_KEY_HINT = 'This maps to the process definition key.';\nvar TASK_KEY_HINT = 'This maps to the task definition key.';\n\nfunction createGeneralTabGroups(\n    element, canvas, bpmnFactory,\n    elementRegistry, elementTemplates, translate) {\n\n  // refer to target element for external labels\n  element = element.labelTarget || element;\n\n  var generalGroup = {\n    id: 'general',\n    label: translate('General'),\n    entries: []\n  };\n\n  var idOptions;\n  var processOptions;\n\n  if (is(element, 'bpmn:Process')) {\n    idOptions = { description: PROCESS_KEY_HINT };\n  }\n\n  if (is(element, 'bpmn:UserTask')) {\n    idOptions = { description: TASK_KEY_HINT };\n  }\n\n  if (is(element, 'bpmn:Participant')) {\n    processOptions = { processIdDescription: PROCESS_KEY_HINT };\n  }\n\n  idProps(generalGroup, element, translate, idOptions);\n  nameProps(generalGroup, element, bpmnFactory, canvas, translate);\n  processProps(generalGroup, element, translate, processOptions);\n  versionTag(generalGroup, element, translate);\n  executableProps(generalGroup, element, translate);\n  elementTemplateChooserProps(generalGroup, element, elementTemplates, translate);\n\n  var customFieldsGroups = elementTemplateCustomProps(element, elementTemplates, bpmnFactory, translate);\n\n  var detailsGroup = {\n    id: 'details',\n    label: translate('Details'),\n    entries: []\n  };\n  serviceTaskDelegateProps(detailsGroup, element, bpmnFactory, translate);\n  userTaskProps(detailsGroup, element, translate);\n  scriptProps(detailsGroup, element, bpmnFactory, translate);\n  linkProps(detailsGroup, element, translate);\n  callActivityProps(detailsGroup, element, bpmnFactory, translate);\n  eventProps(detailsGroup, element, bpmnFactory, elementRegistry, translate);\n  errorProps(detailsGroup, element, bpmnFactory, translate);\n  conditionalProps(detailsGroup, element, bpmnFactory, translate);\n  startEventInitiator(detailsGroup, element, translate); // this must be the last element of the details group!\n\n  var multiInstanceGroup = {\n    id: 'multiInstance',\n    label: translate('Multi Instance'),\n    entries: []\n  };\n  multiInstanceProps(multiInstanceGroup, element, bpmnFactory, translate);\n\n  var asyncGroup = {\n    id : 'async',\n    label: translate('Asynchronous Continuations'),\n    entries : []\n  };\n  asynchronousContinuationProps(asyncGroup, element, bpmnFactory, translate);\n\n  var jobConfigurationGroup = {\n    id : 'jobConfiguration',\n    label : translate('Job Configuration'),\n    entries : [],\n    enabled: isJobConfigEnabled\n  };\n  jobConfiguration(jobConfigurationGroup, element, bpmnFactory, translate);\n\n  var externalTaskGroup = {\n    id : 'externalTaskConfiguration',\n    label : translate('External Task Configuration'),\n    entries : [],\n    enabled: isExternalTaskPriorityEnabled\n  };\n  externalTaskConfiguration(externalTaskGroup, element, bpmnFactory, translate);\n\n\n  var candidateStarterGroup = {\n    id: 'candidateStarterConfiguration',\n    label: translate('Candidate Starter Configuration'),\n    entries: []\n  };\n  candidateStarter(candidateStarterGroup, element, bpmnFactory, translate);\n\n  var historyTimeToLiveGroup = {\n    id: 'historyConfiguration',\n    label: translate('History Configuration'),\n    entries: []\n  };\n  historyTimeToLive(historyTimeToLiveGroup, element, bpmnFactory, translate);\n\n  var tasklistGroup = {\n    id: 'tasklist',\n    label: translate('Tasklist Configuration'),\n    entries: []\n  };\n  tasklist(tasklistGroup, element, bpmnFactory, translate);\n\n  var documentationGroup = {\n    id: 'documentation',\n    label: translate('Documentation'),\n    entries: []\n  };\n  documentationProps(documentationGroup, element, bpmnFactory, translate);\n\n  var groups = [];\n  groups.push(generalGroup);\n  customFieldsGroups.forEach(function(group) {\n    groups.push(group);\n  });\n  groups.push(detailsGroup);\n  groups.push(externalTaskGroup);\n  groups.push(multiInstanceGroup);\n  groups.push(asyncGroup);\n  groups.push(jobConfigurationGroup);\n  groups.push(candidateStarterGroup);\n  groups.push(historyTimeToLiveGroup);\n  groups.push(tasklistGroup);\n  groups.push(documentationGroup);\n\n  return groups;\n}\n\nfunction createVariablesTabGroups(element, bpmnFactory, elementRegistry, translate) {\n  var variablesGroup = {\n    id : 'variables',\n    label : translate('Variables'),\n    entries: []\n  };\n  variableMapping(variablesGroup, element, bpmnFactory, translate);\n\n  return [\n    variablesGroup\n  ];\n}\n\nfunction createFormsTabGroups(element, bpmnFactory, elementRegistry, translate) {\n  var formGroup = {\n    id : 'forms',\n    label : translate('Forms'),\n    entries: []\n  };\n  formProps(formGroup, element, bpmnFactory, translate);\n\n  return [\n    formGroup\n  ];\n}\n\nfunction createListenersTabGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var listenersGroup = {\n    id : 'listeners',\n    label: translate('Listeners'),\n    entries: []\n  };\n\n  var options = listenerProps(listenersGroup, element, bpmnFactory, translate);\n\n  var listenerDetailsGroup = {\n    id: 'listener-details',\n    entries: [],\n    enabled: function(element, node) {\n      return options.getSelectedListener(element, node);\n    },\n    label: function(element, node) {\n      var param = options.getSelectedListener(element, node);\n      return getListenerLabel(param, translate);\n    }\n  };\n\n  listenerDetails(listenerDetailsGroup, element, bpmnFactory, options, translate);\n\n  var listenerFieldsGroup = {\n    id: 'listener-fields',\n    label: translate('Field Injection'),\n    entries: [],\n    enabled: function(element, node) {\n      return options.getSelectedListener(element, node);\n    }\n  };\n\n  listenerFields(listenerFieldsGroup, element, bpmnFactory, options, translate);\n\n  return [\n    listenersGroup,\n    listenerDetailsGroup,\n    listenerFieldsGroup\n  ];\n}\n\nfunction createInputOutputTabGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var inputOutputGroup = {\n    id: 'input-output',\n    label: translate('Parameters'),\n    entries: []\n  };\n\n  var options = inputOutput(inputOutputGroup, element, bpmnFactory, translate);\n\n  var inputOutputParameterGroup = {\n    id: 'input-output-parameter',\n    entries: [],\n    enabled: function(element, node) {\n      return options.getSelectedParameter(element, node);\n    },\n    label: function(element, node) {\n      var param = options.getSelectedParameter(element, node);\n      return getInputOutputParameterLabel(param, translate);\n    }\n  };\n\n  inputOutputParameter(inputOutputParameterGroup, element, bpmnFactory, options, translate);\n\n  return [\n    inputOutputGroup,\n    inputOutputParameterGroup\n  ];\n}\n\nfunction createConnectorTabGroups(element, bpmnFactory, elementRegistry, translate) {\n  var connectorDetailsGroup = {\n    id: 'connector-details',\n    label: translate('Details'),\n    entries: []\n  };\n\n  connectorDetails(connectorDetailsGroup, element, bpmnFactory, translate);\n\n  var connectorInputOutputGroup = {\n    id: 'connector-input-output',\n    label: translate('Input/Output'),\n    entries: []\n  };\n\n  var options = connectorInputOutput(connectorInputOutputGroup, element, bpmnFactory, translate);\n\n  var connectorInputOutputParameterGroup = {\n    id: 'connector-input-output-parameter',\n    entries: [],\n    enabled: function(element, node) {\n      return options.getSelectedParameter(element, node);\n    },\n    label: function(element, node) {\n      var param = options.getSelectedParameter(element, node);\n      return getInputOutputParameterLabel(param, translate);\n    }\n  };\n\n  connectorInputOutputParameter(connectorInputOutputParameterGroup, element, bpmnFactory, options, translate);\n\n  return [\n    connectorDetailsGroup,\n    connectorInputOutputGroup,\n    connectorInputOutputParameterGroup\n  ];\n}\n\nfunction createFieldInjectionsTabGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var fieldGroup = {\n    id: 'field-injections-properties',\n    label: translate('Field Injections'),\n    entries: []\n  };\n\n  fieldInjections(fieldGroup, element, bpmnFactory, translate);\n\n  return [\n    fieldGroup\n  ];\n}\n\nfunction createExtensionElementsGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var propertiesGroup = {\n    id : 'extensionElements-properties',\n    label: translate('Properties'),\n    entries: []\n  };\n  properties(propertiesGroup, element, bpmnFactory, translate);\n\n  return [\n    propertiesGroup\n  ];\n}\n\n// Camunda Properties Provider /////////////////////////////////////\n\n\n/**\n * A properties provider for Camunda related properties.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {BpmnFactory} bpmnFactory\n * @param {ElementRegistry} elementRegistry\n * @param {ElementTemplates} elementTemplates\n * @param {Translate} translate\n */\nfunction CamundaPropertiesProvider(\n    eventBus, canvas, bpmnFactory,\n    elementRegistry, elementTemplates, translate) {\n\n  PropertiesActivator.call(this, eventBus);\n\n  this.getTabs = function(element) {\n\n    var generalTab = {\n      id: 'general',\n      label: translate('General'),\n      groups: createGeneralTabGroups(\n        element, canvas, bpmnFactory,\n        elementRegistry, elementTemplates, translate)\n    };\n\n    var variablesTab = {\n      id: 'variables',\n      label: translate('Variables'),\n      groups: createVariablesTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var formsTab = {\n      id: 'forms',\n      label: translate('Forms'),\n      groups: createFormsTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var listenersTab = {\n      id: 'listeners',\n      label: translate('Listeners'),\n      groups: createListenersTabGroups(element, bpmnFactory, elementRegistry, translate),\n      enabled: function(element) {\n        return !eventDefinitionHelper.getLinkEventDefinition(element)\n          || (!is(element, 'bpmn:IntermediateThrowEvent')\n          && eventDefinitionHelper.getLinkEventDefinition(element));\n      }\n    };\n\n    var inputOutputTab = {\n      id: 'input-output',\n      label: translate('Input/Output'),\n      groups: createInputOutputTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var connectorTab = {\n      id: 'connector',\n      label: translate('Connector'),\n      groups: createConnectorTabGroups(element, bpmnFactory, elementRegistry, translate),\n      enabled: function(element) {\n        var bo = implementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n        return bo && implementationTypeHelper.getImplementationType(bo) === 'connector';\n      }\n    };\n\n    var fieldInjectionsTab = {\n      id: 'field-injections',\n      label: translate('Field Injections'),\n      groups: createFieldInjectionsTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var extensionsTab = {\n      id: 'extensionElements',\n      label: translate('Extensions'),\n      groups: createExtensionElementsGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    return [\n      generalTab,\n      variablesTab,\n      connectorTab,\n      formsTab,\n      listenersTab,\n      inputOutputTab,\n      fieldInjectionsTab,\n      extensionsTab\n    ];\n  };\n\n}\n\nCamundaPropertiesProvider.$inject = [\n  'eventBus',\n  'canvas',\n  'bpmnFactory',\n  'elementRegistry',\n  'elementTemplates',\n  'translate'\n];\n\ninherits(CamundaPropertiesProvider, PropertiesActivator);\n\nmodule.exports = CamundaPropertiesProvider;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","import { assign } from 'min-dash';\n\n\nvar DEFAULT_CONFIG = {\n  moveSpeed: 50,\n  moveSpeedAccelerated: 200\n};\n\n\n/**\n * A feature that allows users to move the canvas using the keyboard.\n *\n * @param {Object} config\n * @param {Number} [config.moveSpeed=50]\n * @param {Number} [config.moveSpeedAccelerated=200]\n * @param {Keyboard} keyboard\n * @param {Canvas} canvas\n */\nexport default function KeyboardMove(\n    config,\n    keyboard,\n    canvas\n) {\n\n  var self = this;\n\n  this._config = assign({}, DEFAULT_CONFIG, config || {});\n\n  keyboard.addListener(arrowsListener);\n\n\n  function arrowsListener(context) {\n\n    var event = context.keyEvent,\n        config = self._config;\n\n    if (!keyboard.isCmd(event)) {\n      return;\n    }\n\n    if (keyboard.isKey([\n      'ArrowLeft', 'Left',\n      'ArrowUp', 'Up',\n      'ArrowDown', 'Down',\n      'ArrowRight', 'Right'\n    ], event)) {\n\n      var speed = (\n        keyboard.isShift(event) ?\n          config.moveSpeedAccelerated :\n          config.moveSpeed\n      );\n\n      var direction;\n\n      switch (event.key) {\n      case 'ArrowLeft':\n      case 'Left':\n        direction = 'left';\n        break;\n      case 'ArrowUp':\n      case 'Up':\n        direction = 'up';\n        break;\n      case 'ArrowRight':\n      case 'Right':\n        direction = 'right';\n        break;\n      case 'ArrowDown':\n      case 'Down':\n        direction = 'down';\n        break;\n      }\n\n      self.moveCanvas({\n        speed: speed,\n        direction: direction\n      });\n\n      return true;\n    }\n  }\n\n  this.moveCanvas = function(opts) {\n\n    var dx = 0,\n        dy = 0,\n        speed = opts.speed;\n\n    var actualSpeed = speed / Math.min(Math.sqrt(canvas.viewbox().scale), 1);\n\n    switch (opts.direction) {\n    case 'left': // Left\n      dx = actualSpeed;\n      break;\n    case 'up': // Up\n      dy = actualSpeed;\n      break;\n    case 'right': // Right\n      dx = -actualSpeed;\n      break;\n    case 'down': // Down\n      dy = -actualSpeed;\n      break;\n    }\n\n    canvas.scroll({\n      dx: dx,\n      dy: dy\n    });\n  };\n\n}\n\n\nKeyboardMove.$inject = [\n  'config.keyboardMove',\n  'keyboard',\n  'canvas'\n];\n","import KeyboardModule from '../../features/keyboard';\n\nimport KeyboardMove from './KeyboardMove';\n\n\nexport default {\n  __depends__: [\n    KeyboardModule\n  ],\n  __init__: [ 'keyboardMove' ],\n  keyboardMove: [ 'type', KeyboardMove ]\n};","'use strict';\n\nvar forEach = require('lodash/forEach');\n\nvar HANDLERS = {\n  'properties-panel.update-businessobject': require('./UpdateBusinessObjectHandler'),\n  'properties-panel.create-and-reference': require('./CreateAndReferenceHandler'),\n  'properties-panel.create-businessobject-list': require('./CreateBusinessObjectListHandler'),\n  'properties-panel.update-businessobject-list': require('./UpdateBusinessObjectListHandler'),\n  'properties-panel.multi-command-executor': require('./MultiCommandHandler')\n};\n\n\nfunction CommandInitializer(eventBus, commandStack) {\n\n  eventBus.on('diagram.init', function() {\n    forEach(HANDLERS, function(handler, id) {\n      commandStack.registerHandler(id, handler);\n    });\n  });\n}\n\nCommandInitializer.$inject = [ 'eventBus', 'commandStack' ];\n\nmodule.exports = {\n  __init__: [ CommandInitializer ]\n};","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\n/**\n * Create a linkified and HTML escaped entry field description.\n *\n * As a special feature, this description may contain both markdown,\n * plain <a href> links and <br />\n *\n * @param {String} description\n */\nmodule.exports = function entryFieldDescription(description) {\n\n  // we tokenize the description to extract text, HTML and markdown links\n  // text, links and new lines are handled seperately\n\n  var escaped = [];\n\n  // match markdown [{TEXT}]({URL}) and HTML links <a href=\"{URL}\">{TEXT}</a>\n  var pattern = /(?:\\[([^\\]]+)\\]\\((https?:\\/\\/[^)]+)\\))|(?:<a href=\"(https?:\\/\\/[^\"]+)\">(.+?(?=<\\/))<\\/a>)/gi;\n\n  var index = 0;\n  var match;\n  var link, text;\n\n  while ((match = pattern.exec(description))) {\n\n    // escape + insert text before match\n    if (match.index > index) {\n      escaped.push(escapeText(description.substring(index, match.index)));\n    }\n\n    link = match[2] && encodeURI(match[2]) || match[3];\n    text = match[1] || match[4];\n\n    // insert safe link\n    escaped.push('<a href=\"' + link + '\" target=\"_blank\">' + escapeText(text) + '</a>');\n\n    index = match.index + match[0].length;\n  }\n\n  // escape and insert text after last match\n  if (index < description.length) {\n    escaped.push(escapeText(description.substring(index)));\n  }\n\n  return '<div class=\"bpp-field-description\">' + escaped.join('') + '</div>';\n};\n\nfunction escapeText(text) {\n  var match, index = 0, escaped = [];\n\n  // match new line <br/> <br /> <br.... /> etc.\n  var pattern = /<br\\s*\\/?>/gi;\n\n  while ((match = pattern.exec(text))) {\n\n    if (match.index > index) {\n      escaped.push(escapeHTML(text.substring(index, match.index)));\n    }\n\n    escaped.push('<br />');\n\n    index = match.index + match[0].length;\n  }\n\n  if (index < text.length) {\n    escaped.push(escapeHTML(text.substring(index)));\n  }\n\n  return escaped.join('');\n}\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    escapeHTML = require('../../../../Utils').escapeHTML;\n\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar domClasses = require('min-dom').classes;\n\n/**\n * Get a property value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n * @param {string} propertyName\n *\n * @return {any} the property value\n */\nfunction getProperty(element, propertyName) {\n  var loopCharacteristics = getLoopCharacteristics(element);\n  return loopCharacteristics && loopCharacteristics.get(propertyName);\n}\n\n/**\n * Get the body of a given expression.\n *\n * @param {ModdleElement<bpmn:FormalExpression>} expression\n *\n * @return {string} the body (value) of the expression\n */\nfunction getBody(expression) {\n  return expression && expression.get('body');\n}\n\n\n/**\n * Get the loop characteristics of an element.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement<bpmn:MultiInstanceLoopCharacteristics>} the loop characteristics\n */\nfunction getLoopCharacteristics(element) {\n  var bo = getBusinessObject(element);\n  return bo.loopCharacteristics;\n}\n\n/**\n * Get the loop cardinality of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement<bpmn:FormalExpression>} an expression representing the loop cardinality\n */\nfunction getLoopCardinality(element) {\n  return getProperty(element, 'loopCardinality');\n}\n\n/**\n * Get the loop cardinality value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the loop cardinality value\n */\nfunction getLoopCardinalityValue(element) {\n  var loopCardinality = getLoopCardinality(element);\n  return getBody(loopCardinality);\n}\n\n/**\n * Get the completion condition of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement<bpmn:FormalExpression>} an expression representing the completion condition\n */\nfunction getCompletionCondition(element) {\n  return getProperty(element, 'completionCondition');\n}\n\n/**\n * Get the completion condition value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the completion condition value\n */\nfunction getCompletionConditionValue(element) {\n  var completionCondition = getCompletionCondition(element);\n  return getBody(completionCondition);\n}\n\n/**\n * Get the 'camunda:collection' attribute value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the 'camunda:collection' value\n */\nfunction getCollection(element) {\n  return getProperty(element, 'camunda:collection');\n}\n\n/**\n * Get the 'camunda:elementVariable' attribute value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the 'camunda:elementVariable' value\n */\nfunction getElementVariable(element) {\n  return getProperty(element, 'camunda:elementVariable');\n}\n\n\n/**\n * Creates 'bpmn:FormalExpression' element.\n *\n * @param {ModdleElement} parent\n * @param {string} body\n * @param {BpmnFactory} bpmnFactory\n *\n * @result {ModdleElement<bpmn:FormalExpression>} a formal expression\n */\nfunction createFormalExpression(parent, body, bpmnFactory) {\n  return elementHelper.createElement('bpmn:FormalExpression', { body: body }, parent, bpmnFactory);\n}\n\n/**\n * Updates a specific formal expression of the loop characteristics.\n *\n * @param {djs.model.Base} element\n * @param {string} propertyName\n * @param {string} newValue\n * @param {BpmnFactory} bpmnFactory\n */\nfunction updateFormalExpression(element, propertyName, newValue, bpmnFactory) {\n  var loopCharacteristics = getLoopCharacteristics(element);\n\n  var expressionProps = {};\n\n  if (!newValue) {\n    // remove formal expression\n    expressionProps[propertyName] = undefined;\n    return cmdHelper.updateBusinessObject(element, loopCharacteristics, expressionProps);\n  }\n\n  var existingExpression = loopCharacteristics.get(propertyName);\n\n  if (!existingExpression) {\n    // add formal expression\n    expressionProps[propertyName] = createFormalExpression(loopCharacteristics, newValue, bpmnFactory);\n    return cmdHelper.updateBusinessObject(element, loopCharacteristics, expressionProps);\n  }\n\n  // edit existing formal expression\n  return cmdHelper.updateBusinessObject(element, existingExpression, {\n    body: newValue\n  });\n}\n\n\nmodule.exports = function(element, bpmnFactory, translate) {\n\n  var entries = [];\n\n  // error message /////////////////////////////////////////////////////////////////\n\n  entries.push({\n    id: 'multiInstance-errorMessage',\n    html: '<div data-show=\"isValid\">' +\n             '<span class=\"bpp-icon-warning\"></span> ' +\n             escapeHTML(translate('Must provide either loop cardinality or collection')) +\n          '</div>',\n\n    isValid: function(element, node, notification, scope) {\n      var loopCharacteristics = getLoopCharacteristics(element);\n\n      var isValid = true;\n      if (loopCharacteristics) {\n        var loopCardinality = getLoopCardinalityValue(element);\n        var collection = getCollection(element);\n\n        isValid = !loopCardinality && !collection;\n      }\n\n      domClasses(node).toggle('bpp-hidden', !isValid);\n      domClasses(notification).toggle('bpp-error-message', isValid);\n\n      return isValid;\n    }\n  });\n\n  // loop cardinality //////////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField({\n    id: 'multiInstance-loopCardinality',\n    label: translate('Loop Cardinality'),\n    modelProperty: 'loopCardinality',\n\n    get: function(element, node) {\n      return {\n        loopCardinality: getLoopCardinalityValue(element)\n      };\n    },\n\n    set: function(element, values) {\n      return updateFormalExpression(element, 'loopCardinality', values.loopCardinality, bpmnFactory);\n    }\n  }));\n\n\n  // collection //////////////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField({\n    id: 'multiInstance-collection',\n    label: translate('Collection'),\n    modelProperty: 'collection',\n\n    get: function(element, node) {\n      return {\n        collection: getCollection(element)\n      };\n    },\n\n    set: function(element, values) {\n      var loopCharacteristics = getLoopCharacteristics(element);\n      return cmdHelper.updateBusinessObject(element, loopCharacteristics, {\n        'camunda:collection': values.collection || undefined\n      });\n    },\n\n    validate: function(element, values, node) {\n      var collection = getCollection(element);\n      var elementVariable = getElementVariable(element);\n\n      if (!collection && elementVariable) {\n        return { collection : 'Must provide a value' };\n      }\n    }\n  }));\n\n\n  // element variable ////////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField({\n    id: 'multiInstance-elementVariable',\n    label: translate('Element Variable'),\n    modelProperty: 'elementVariable',\n\n    get: function(element, node) {\n      return {\n        elementVariable: getElementVariable(element)\n      };\n    },\n\n    set: function(element, values) {\n      var loopCharacteristics = getLoopCharacteristics(element);\n      return cmdHelper.updateBusinessObject(element, loopCharacteristics, {\n        'camunda:elementVariable': values.elementVariable || undefined\n      });\n    }\n  }));\n\n\n  // Completion Condition //////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField({\n    id: 'multiInstance-completionCondition',\n    label: translate('Completion Condition'),\n    modelProperty: 'completionCondition',\n\n    get: function(element) {\n      return {\n        completionCondition: getCompletionConditionValue(element)\n      };\n    },\n\n    set: function(element, values) {\n      return updateFormalExpression(element, 'completionCondition', values.completionCondition, bpmnFactory);\n    }\n  }));\n\n  return entries;\n\n};\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\nmodule.exports = createBind;\n","'use strict';\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, errorEventDefinition, translate) {\n\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, errorEventDefinition, bpmnFactory, {\n    label: translate('Error'),\n    elementName: 'error',\n    elementType: 'bpmn:Error',\n    referenceProperty: 'errorRef',\n    newElementIdPrefix: 'Error_'\n  }));\n\n\n  group.entries = group.entries.concat(elementReferenceProperty(element, errorEventDefinition, bpmnFactory, {\n    id: 'error-element-name',\n    label: translate('Error Name'),\n    referenceProperty: 'errorRef',\n    modelProperty: 'name',\n    shouldValidate: true\n  }));\n\n\n  group.entries = group.entries.concat(elementReferenceProperty(element, errorEventDefinition, bpmnFactory, {\n    id: 'error-element-code',\n    label: translate('Error Code'),\n    referenceProperty: 'errorRef',\n    modelProperty: 'errorCode'\n  }));\n\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('../helper/CmdHelper'),\n    escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar checkbox = function(options, defaultParameters) {\n  var resource = defaultParameters,\n      id = resource.id,\n      label = options.label || id,\n      canBeDisabled = !!options.disabled && typeof options.disabled === 'function',\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      description = options.description;\n\n  resource.html =\n    '<input id=\"camunda-' + escapeHTML(id) + '\" ' +\n         'type=\"checkbox\" ' +\n         'name=\"' + escapeHTML(options.modelProperty) + '\" ' +\n         (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n         (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n         ' />' +\n    '<label for=\"camunda-' + escapeHTML(id) + '\" ' +\n         (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n         (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n         '>' + escapeHTML(label) + '</label>';\n\n  // add description below checkbox entry field\n  if (description) {\n    resource.html += entryFieldDescription(description);\n  }\n\n  resource.get = function(element) {\n    var bo = getBusinessObject(element),\n        res = {};\n\n    res[options.modelProperty] = bo.get(options.modelProperty);\n\n    return res;\n  };\n\n  resource.set = function(element, values) {\n    var res = {};\n\n    res[options.modelProperty] = !!values[options.modelProperty];\n\n    return cmdHelper.updateProperties(element, res);\n  };\n\n  if (typeof options.set === 'function') {\n    resource.set = options.set;\n  }\n\n  if (typeof options.get === 'function') {\n    resource.get = options.get;\n  }\n\n  if (canBeDisabled) {\n    resource.isDisabled = function() {\n      return options.disabled.apply(resource, arguments);\n    };\n  }\n\n  if (canBeHidden) {\n    resource.isHidden = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-checkbox'];\n\n  return resource;\n};\n\nmodule.exports = checkbox;\n","const {\n  is\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that checks, whether a gateway forks and joins\n * at the same time.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!is(node, 'bpmn:Gateway')) {\n      return;\n    }\n\n    const incoming = node.incoming || [];\n    const outgoing = node.outgoing || [];\n\n    if (incoming.length > 1 && outgoing.length > 1) {\n      reporter.report(node.id, 'Gateway forks and joins');\n    }\n  }\n\n  return {\n    check\n  };\n\n};","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    asyncContinuation = require('./implementation/AsyncContinuation');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (is(element, 'camunda:AsyncCapable')) {\n\n    group.entries = group.entries.concat(asyncContinuation(element, bpmnFactory, {\n      getBusinessObject: getBusinessObject\n    }, translate));\n\n  }\n};","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","'use strict';\n\nvar collectionAdd = require('diagram-js/lib/util/Collections').add,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar CategoryHelper = {};\n\nmodule.exports = CategoryHelper;\n\n/**\n * Creates a new bpmn:CategoryValue inside a new bpmn:Category\n *\n * @param {ModdleElement} definitions\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement} categoryValue.\n */\nCategoryHelper.createCategoryValue = function(definitions, bpmnFactory) {\n  var categoryValue = bpmnFactory.create('bpmn:CategoryValue'),\n      category = bpmnFactory.create('bpmn:Category', {\n        categoryValue: [ categoryValue ]\n      });\n\n  // add to correct place\n  collectionAdd(definitions.get('rootElements'), category);\n  getBusinessObject(category).$parent = definitions;\n  getBusinessObject(categoryValue).$parent = category;\n\n  return categoryValue;\n\n};","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    elementHelper = require('../../../../helper/ElementHelper');\n\nvar assign = require('lodash/assign');\nvar map = require('lodash/map');\n\nvar DEFAULT_DELEGATE_PROPS = [ 'class', 'expression', 'delegateExpression' ];\n\nvar DELEGATE_PROPS = {\n  'camunda:class': undefined,\n  'camunda:expression': undefined,\n  'camunda:delegateExpression': undefined,\n  'camunda:resultVariable': undefined\n};\n\nvar DMN_CAPABLE_PROPS = {\n  'camunda:decisionRef': undefined,\n  'camunda:decisionRefBinding': 'latest',\n  'camunda:decisionRefVersion': undefined,\n  'camunda:mapDecisionResult': 'resultList',\n  'camunda:decisionRefTenantId': undefined\n};\n\n\nvar EXTERNAL_CAPABLE_PROPS = {\n  'camunda:type': undefined,\n  'camunda:topic': undefined\n};\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var DEFAULT_OPTIONS = [\n    { value: 'class', name: translate('Java Class') },\n    { value: 'expression', name: translate('Expression') },\n    { value: 'delegateExpression', name: translate('Delegate Expression') }\n  ];\n\n  var DMN_OPTION = [\n    { value: 'dmn', name: translate('DMN') }\n  ];\n\n  var EXTERNAL_OPTION = [\n    { value: 'external', name: translate('External') }\n  ];\n\n  var CONNECTOR_OPTION = [\n    { value: 'connector', name: translate('Connector') }\n  ];\n\n  var SCRIPT_OPTION = [\n    { value: 'script', name: translate('Script') }\n  ];\n\n  var getType = options.getImplementationType,\n      getBusinessObject = options.getBusinessObject;\n\n  var hasDmnSupport = options.hasDmnSupport,\n      hasExternalSupport = options.hasExternalSupport,\n      hasServiceTaskLikeSupport = options.hasServiceTaskLikeSupport,\n      hasScriptSupport = options.hasScriptSupport;\n\n  var entries = [];\n\n  var selectOptions = DEFAULT_OPTIONS.concat([]);\n\n  if (hasDmnSupport) {\n    selectOptions = selectOptions.concat(DMN_OPTION);\n  }\n\n  if (hasExternalSupport) {\n    selectOptions = selectOptions.concat(EXTERNAL_OPTION);\n  }\n\n  if (hasServiceTaskLikeSupport) {\n    selectOptions = selectOptions.concat(CONNECTOR_OPTION);\n  }\n\n  if (hasScriptSupport) {\n    selectOptions = selectOptions.concat(SCRIPT_OPTION);\n  }\n\n  selectOptions.push({ value: '' });\n\n  entries.push(entryFactory.selectBox({\n    id : 'implementation',\n    label: translate('Implementation'),\n    selectOptions: selectOptions,\n    modelProperty: 'implType',\n\n    get: function(element, node) {\n      return {\n        implType: getType(element) || ''\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      var oldType = getType(element);\n      var newType = values.implType;\n\n      var props = assign({}, DELEGATE_PROPS);\n\n      if (DEFAULT_DELEGATE_PROPS.indexOf(newType) !== -1) {\n\n        var newValue = '';\n        if (DEFAULT_DELEGATE_PROPS.indexOf(oldType) !== -1) {\n          newValue = bo.get('camunda:' + oldType);\n        }\n        props['camunda:' + newType] = newValue;\n      }\n\n      if (hasDmnSupport) {\n        props = assign(props, DMN_CAPABLE_PROPS);\n        if (newType === 'dmn') {\n          props['camunda:decisionRef'] = '';\n        }\n      }\n\n      if (hasExternalSupport) {\n        props = assign(props, EXTERNAL_CAPABLE_PROPS);\n        if (newType === 'external') {\n          props['camunda:type'] = 'external';\n          props['camunda:topic'] = '';\n        }\n      }\n\n      if (hasScriptSupport) {\n        props['camunda:script'] = undefined;\n\n        if (newType === 'script') {\n          props['camunda:script'] = elementHelper.createElement('camunda:Script', {}, bo, bpmnFactory);\n        }\n      }\n\n      var commands = [];\n      commands.push(cmdHelper.updateBusinessObject(element, bo, props));\n\n      if (hasServiceTaskLikeSupport) {\n        var connectors = extensionElementsHelper.getExtensionElements(bo, 'camunda:Connector');\n        commands.push(map(connectors, function(connector) {\n          return extensionElementsHelper.removeEntry(bo, element, connector);\n        }));\n\n        if (newType === 'connector') {\n          var extensionElements = bo.get('extensionElements');\n          if (!extensionElements) {\n            extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n            commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n          }\n          var connector = elementHelper.createElement('camunda:Connector', {}, extensionElements, bpmnFactory);\n          commands.push(cmdHelper.addAndRemoveElementsFromList(\n            element,\n            extensionElements,\n            'values',\n            'extensionElements',\n            [ connector ],\n            []\n          ));\n        }\n      }\n\n      return commands;\n\n    }\n  }));\n\n  return entries;\n\n};\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    entryFactory = require('../../../factory/EntryFactory'),\n    participantHelper = require('../../../helper/ParticipantHelper'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    nameEntryFactory = require('./implementation/Name'),\n    utils = require('../../../Utils');\n\nmodule.exports = function(group, element, translate, options) {\n  var businessObject = getBusinessObject(element);\n\n  var processIdDescription = options && options.processIdDescription;\n\n  if (is(element, 'bpmn:Process') || (is(element, 'bpmn:Participant') && businessObject.get('processRef'))) {\n\n    /**\n     * processId\n     */\n    if (is(element, 'bpmn:Participant')) {\n      var idEntry = entryFactory.validationAwareTextField({\n        id: 'process-id',\n        label: translate('Process Id'),\n        description: processIdDescription && translate(processIdDescription),\n        modelProperty: 'processId'\n      });\n\n      // in participants we have to change the default behavior of set and get\n      idEntry.get = function(element) {\n        var properties = participantHelper.getProcessBusinessObject(element, 'id');\n        return { processId: properties.id };\n      };\n\n      idEntry.set = function(element, values) {\n        return participantHelper.modifyProcessBusinessObject(element, 'id', { id: values.processId });\n      };\n\n      idEntry.validate = function(element, values) {\n        var idValue = values.processId;\n\n        var bo = getBusinessObject(element);\n\n        var processIdError = utils.isIdValid(bo.processRef, idValue, translate);\n\n        return processIdError ? { processId: processIdError } : {};\n      };\n\n      group.entries.push(idEntry);\n\n\n      /**\n       * process name\n       */\n      var processNameEntry = nameEntryFactory(element, {\n        id: 'process-name',\n        label: translate('Process Name')\n      })[0];\n\n      // in participants we have to change the default behavior of set and get\n      processNameEntry.get = function(element) {\n        return participantHelper.getProcessBusinessObject(element, 'name');\n      };\n\n      processNameEntry.set = function(element, values) {\n        return participantHelper.modifyProcessBusinessObject(element, 'name', values);\n      };\n\n      group.entries.push(processNameEntry);\n    }\n  }\n};\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","/**\n * Get the logarithm of x with base 10\n * @param  {Integer} value\n */\nexport function log10(x) {\n  return Math.log(x) / Math.log(10);\n}\n\nexport { delta as substract } from './PositionUtil';\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    getExtensionElements = require('./ExtensionElementsHelper').getExtensionElements;\n\nvar FormHelper = {};\n\nmodule.exports = FormHelper;\n\n/**\n * Return form data from business object or undefined if none exist\n *\n * @param  {djs.model.Base} element\n *\n * @return {ModdleElement|undefined} formData\n */\nFormHelper.getFormData = function(element) {\n  var bo = getBusinessObject(element);\n\n  var formData = getExtensionElements(bo, 'camunda:FormData');\n\n  if (typeof formData !== 'undefined') {\n    return formData[0];\n  }\n};\n\n\n/**\n * Return all form fields existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {djs.model.Base} element\n *\n * @return {Array} a list of form field objects\n */\nFormHelper.getFormFields = function(element) {\n  var formData = this.getFormData(element);\n\n  if (typeof formData === 'undefined') {\n    return [];\n  }\n\n  return formData.fields || [];\n};\n\n\n/**\n * Get a form field from the business object at given index\n *\n * @param {djs.model.Base} element\n * @param {number} idx\n *\n * @return {ModdleElement} the form field\n */\nFormHelper.getFormField = function(element, idx) {\n\n  var formFields = this.getFormFields(element);\n\n  return formFields[idx];\n};\n\n\n/**\n * Get all constraints for a specific form field from the business object\n *\n * @param  {ModdleElement} formField\n *\n * @return {Array<ModdleElement>} a list of constraint objects\n */\nFormHelper.getConstraints = function(formField) {\n  if (formField && formField.validation && formField.validation.constraints) {\n    return formField.validation.constraints;\n  }\n  return [];\n};\n\n\n/**\n * Get all camunda:value objects for a specific form field from the business object\n *\n * @param  {ModdleElement} formField\n *\n * @return {Array<ModdleElement>} a list of camunda:value objects\n */\nFormHelper.getEnumValues = function(formField) {\n  if (formField && formField.values) {\n    return formField.values;\n  }\n  return [];\n};\n\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseFlatten = require('./_baseFlatten');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nmodule.exports = flattenDeep;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    getTemplate = require('../Helper').getTemplate,\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementHelper = require('../../../../helper/ElementHelper');\n\nvar findExtension = require('../Helper').findExtension,\n    findExtensions = require('../Helper').findExtensions,\n    findInputParameter = require('../Helper').findInputParameter,\n    findOutputParameter = require('../Helper').findOutputParameter,\n    findCamundaProperty = require('../Helper').findCamundaProperty,\n    findCamundaInOut = require('../Helper').findCamundaInOut;\n\nvar createCamundaProperty = require('../CreateHelper').createCamundaProperty,\n    createInputParameter = require('../CreateHelper').createInputParameter,\n    createOutputParameter = require('../CreateHelper').createOutputParameter,\n    createCamundaIn = require('../CreateHelper').createCamundaIn,\n    createCamundaOut = require('../CreateHelper').createCamundaOut,\n    createCamundaInWithBusinessKey = require('../CreateHelper').createCamundaInWithBusinessKey,\n    createCamundaFieldInjection = require('../CreateHelper').createCamundaFieldInjection;\n\nvar CAMUNDA_PROPERTY_TYPE = 'camunda:property',\n    CAMUNDA_INPUT_PARAMETER_TYPE = 'camunda:inputParameter',\n    CAMUNDA_OUTPUT_PARAMETER_TYPE = 'camunda:outputParameter',\n    CAMUNDA_IN_TYPE = 'camunda:in',\n    CAMUNDA_OUT_TYPE = 'camunda:out',\n    CAMUNDA_IN_BUSINESS_KEY_TYPE = 'camunda:in:businessKey',\n    CAMUNDA_EXECUTION_LISTENER_TYPE = 'camunda:executionListener',\n    CAMUNDA_FIELD = 'camunda:field';\n\nvar BASIC_MODDLE_TYPES = [\n  'Boolean',\n  'Integer',\n  'String'\n];\n\nvar EXTENSION_BINDING_TYPES = [\n  CAMUNDA_PROPERTY_TYPE,\n  CAMUNDA_INPUT_PARAMETER_TYPE,\n  CAMUNDA_OUTPUT_PARAMETER_TYPE,\n  CAMUNDA_IN_TYPE,\n  CAMUNDA_OUT_TYPE,\n  CAMUNDA_IN_BUSINESS_KEY_TYPE,\n  CAMUNDA_FIELD\n];\n\nvar IO_BINDING_TYPES = [\n  CAMUNDA_INPUT_PARAMETER_TYPE,\n  CAMUNDA_OUTPUT_PARAMETER_TYPE\n];\n\nvar IN_OUT_BINDING_TYPES = [\n  CAMUNDA_IN_TYPE,\n  CAMUNDA_OUT_TYPE,\n  CAMUNDA_IN_BUSINESS_KEY_TYPE\n];\n\n/**\n * Injects custom properties into the given group.\n *\n * @param {djs.model.Base} element\n * @param {ElementTemplates} elementTemplates\n * @param {BpmnFactory} bpmnFactory\n * @param {Function} translate\n */\nmodule.exports = function(element, elementTemplates, bpmnFactory, translate) {\n\n  var template = getTemplate(element, elementTemplates);\n\n  if (!template) {\n    return [];\n  }\n\n  var renderCustomField = function(id, p, idx) {\n    var propertyType = p.type;\n\n    var entryOptions = {\n      id: id,\n      description: p.description,\n      label: p.label ? translate(p.label) : p.label,\n      modelProperty: id,\n      get: propertyGetter(id, p),\n      set: propertySetter(id, p, bpmnFactory),\n      validate: propertyValidator(id, p, translate)\n    };\n\n    var entry;\n\n    if (propertyType === 'Boolean') {\n      entry = entryFactory.checkbox(entryOptions);\n    }\n\n    if (propertyType === 'String') {\n      entry = entryFactory.textField(entryOptions);\n    }\n\n    if (propertyType === 'Text') {\n      entry = entryFactory.textBox(entryOptions);\n    }\n\n    if (propertyType === 'Dropdown') {\n      entryOptions.selectOptions = p.choices;\n\n      entry = entryFactory.selectBox(entryOptions);\n    }\n\n    return entry;\n  };\n\n  var groups = [];\n  var id, entry;\n\n  var customFieldsGroup = {\n    id: 'customField',\n    label: translate('Custom Fields'),\n    entries: []\n  };\n  template.properties.forEach(function(p, idx) {\n\n    id = 'custom-' + template.id + '-' + idx;\n\n    entry = renderCustomField(id, p, idx);\n    if (entry) {\n      customFieldsGroup.entries.push(entry);\n    }\n  });\n  if (customFieldsGroup.entries.length > 0) {\n    groups.push(customFieldsGroup);\n  }\n\n  if (template.scopes) {\n    for (var scopeName in template.scopes) {\n\n      var scope = template.scopes[scopeName];\n      var idScopeName = scopeName.replace(/:/g, '_');\n\n      var customScopeFieldsGroup = {\n        id: 'customField-' + idScopeName,\n        label: translate('Custom Fields for scope: ') + scopeName,\n        entries: []\n      };\n\n      scope.properties.forEach(function(p, idx) {\n\n        var propertyId = 'custom-' + template.id + '-' + idScopeName + '-' + idx;\n\n        var scopedProperty = propertyWithScope(p, scopeName);\n\n        entry = renderCustomField(propertyId, scopedProperty, idx);\n        if (entry) {\n          customScopeFieldsGroup.entries.push(entry);\n        }\n      });\n\n      if (customScopeFieldsGroup.entries.length > 0) {\n        groups.push(customScopeFieldsGroup);\n      }\n    }\n  }\n\n  return groups;\n};\n\n\n// getters, setters and validators ///////////////\n\n\n/**\n * Return a getter that retrieves the given property.\n *\n * @param {String} name\n * @param {PropertyDescriptor} property\n *\n * @return {Function}\n */\nfunction propertyGetter(name, property) {\n\n  /* getter */\n  return function get(element) {\n    var value = getPropertyValue(element, property);\n\n    return objectWithKey(name, value);\n  };\n}\n\n/**\n * Return a setter that updates the given property.\n *\n * @param {String} name\n * @param {PropertyDescriptor} property\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {Function}\n */\nfunction propertySetter(name, property, bpmnFactory) {\n\n  /* setter */\n  return function set(element, values) {\n\n    var value = values[name];\n\n    return setPropertyValue(element, property, value, bpmnFactory);\n  };\n}\n\n/**\n * Return a validator that ensures the property is ok.\n *\n * @param {String} name\n * @param {PropertyDescriptor} property\n * @param {Function} translate\n *\n * @return {Function}\n */\nfunction propertyValidator(name, property, translate) {\n\n  /* validator */\n  return function validate(element, values) {\n    var value = values[name];\n\n    var error = validateValue(value, property, translate);\n\n    if (error) {\n      return objectWithKey(name, error);\n    }\n  };\n}\n\n\n// get, set and validate helpers ///////////////////\n\n/**\n * Return the value of the specified property descriptor,\n * on the passed diagram element.\n *\n * @param {djs.model.Base} element\n * @param {PropertyDescriptor} property\n *\n * @return {Any}\n */\nfunction getPropertyValue(element, property) {\n\n  var bo = getBusinessObject(element);\n\n  var binding = property.binding,\n      scope = property.scope;\n\n  var bindingType = binding.type,\n      bindingName = binding.name;\n\n  var propertyValue = property.value || '';\n\n  if (scope) {\n    bo = findExtension(bo, scope.name);\n    if (!bo) {\n      return propertyValue;\n    }\n  }\n\n  // property\n  if (bindingType === 'property') {\n\n    var value = bo.get(bindingName);\n\n    if (bindingName === 'conditionExpression') {\n      if (value) {\n        return value.body;\n      } else {\n        // return defined default\n        return propertyValue;\n      }\n    } else {\n      // return value; default to defined default\n      return typeof value !== 'undefined' ? value : propertyValue;\n    }\n  }\n\n  var camundaProperties,\n      camundaProperty;\n\n  if (bindingType === CAMUNDA_PROPERTY_TYPE) {\n    if (scope) {\n      camundaProperties = bo.get('properties');\n    } else {\n      camundaProperties = findExtension(bo, 'camunda:Properties');\n    }\n\n    if (camundaProperties) {\n      camundaProperty = findCamundaProperty(camundaProperties, binding);\n\n      if (camundaProperty) {\n        return camundaProperty.value;\n      }\n    }\n\n    return propertyValue;\n  }\n\n  var inputOutput,\n      ioParameter;\n\n  if (IO_BINDING_TYPES.indexOf(bindingType) !== -1) {\n\n    if (scope) {\n      inputOutput = bo.get('inputOutput');\n    } else {\n      inputOutput = findExtension(bo, 'camunda:InputOutput');\n    }\n\n    if (!inputOutput) {\n      // ioParameter cannot exist yet, return property value\n      return propertyValue;\n    }\n  }\n\n  // camunda input parameter\n  if (bindingType === CAMUNDA_INPUT_PARAMETER_TYPE) {\n    ioParameter = findInputParameter(inputOutput, binding);\n\n    if (ioParameter) {\n      if (binding.scriptFormat) {\n        if (ioParameter.definition) {\n          return ioParameter.definition.value;\n        }\n      } else {\n        return ioParameter.value || '';\n      }\n    }\n\n    return propertyValue;\n  }\n\n  // camunda output parameter\n  if (binding.type === CAMUNDA_OUTPUT_PARAMETER_TYPE) {\n    ioParameter = findOutputParameter(inputOutput, binding);\n\n    if (ioParameter) {\n      return ioParameter.name;\n    }\n\n    return propertyValue;\n  }\n\n\n  var ioElement;\n\n  if (IN_OUT_BINDING_TYPES.indexOf(bindingType) != -1) {\n    ioElement = findCamundaInOut(bo, binding);\n\n    if (ioElement) {\n      if (bindingType === CAMUNDA_IN_BUSINESS_KEY_TYPE) {\n        return ioElement.businessKey;\n      } else\n      if (bindingType === CAMUNDA_OUT_TYPE) {\n        return ioElement.target;\n      } else\n      if (bindingType === CAMUNDA_IN_TYPE) {\n        return ioElement[binding.expression ? 'sourceExpression' : 'source'];\n      }\n    }\n\n    return propertyValue;\n  }\n\n  if (bindingType === CAMUNDA_EXECUTION_LISTENER_TYPE) {\n    var executionListener;\n    if (scope) {\n      executionListener = bo.get('executionListener');\n    } else {\n      executionListener = findExtension(bo, 'camunda:ExecutionListener');\n    }\n\n    return executionListener.script.value;\n  }\n\n  var fieldInjection;\n  if (CAMUNDA_FIELD === bindingType) {\n    var fieldInjections = findExtensions(bo, [ 'camunda:Field' ]);\n    fieldInjections.forEach(function(item) {\n      if (item.name === binding.name) {\n        fieldInjection = item;\n      }\n    });\n    if (fieldInjection) {\n      return fieldInjection.string || fieldInjection.expression;\n    } else {\n      return '';\n    }\n  }\n\n  throw unknownPropertyBinding(property);\n}\n\nmodule.exports.getPropertyValue = getPropertyValue;\n\n\n/**\n * Return an update operation that changes the diagram\n * element's custom property to the given value.\n *\n * The response of this method will be processed via\n * {@link PropertiesPanel#applyChanges}.\n *\n * @param {djs.model.Base} element\n * @param {PropertyDescriptor} property\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {Object|Array<Object>} results to be processed\n */\nfunction setPropertyValue(element, property, value, bpmnFactory) {\n  var bo = getBusinessObject(element);\n\n  var binding = property.binding,\n      scope = property.scope;\n\n  var bindingType = binding.type,\n      bindingName = binding.name;\n\n  var propertyValue;\n\n  var updates = [];\n\n  var extensionElements;\n\n  if (EXTENSION_BINDING_TYPES.indexOf(bindingType) !== -1) {\n    extensionElements = bo.get('extensionElements');\n\n    // create extension elements, if they do not exist (yet)\n    if (!extensionElements) {\n      extensionElements = elementHelper.createElement('bpmn:ExtensionElements', null, element, bpmnFactory);\n\n      updates.push(cmdHelper.updateBusinessObject(\n        element, bo, objectWithKey('extensionElements', extensionElements)\n      ));\n    }\n  }\n\n  if (scope) {\n    bo = findExtension(bo, scope.name);\n    if (!bo) {\n      bo = elementHelper.createElement(scope.name, null, element, bpmnFactory);\n\n      updates.push(cmdHelper.addElementsTolist(\n        bo, extensionElements, 'values', [ bo ]\n      ));\n    }\n  }\n\n  // property\n  if (bindingType === 'property') {\n\n    if (bindingName === 'conditionExpression') {\n\n      propertyValue = elementHelper.createElement('bpmn:FormalExpression', {\n        body: value,\n        language: binding.scriptFormat\n      }, bo, bpmnFactory);\n    } else {\n\n      var moddlePropertyDescriptor = bo.$descriptor.propertiesByName[bindingName];\n\n      var moddleType = moddlePropertyDescriptor.type;\n\n      // make sure we only update String, Integer, Real and\n      // Boolean properties (do not accidentally override complex objects...)\n      if (BASIC_MODDLE_TYPES.indexOf(moddleType) === -1) {\n        throw new Error('cannot set moddle type <' + moddleType + '>');\n      }\n\n      if (moddleType === 'Boolean') {\n        propertyValue = !!value;\n      } else\n      if (moddleType === 'Integer') {\n        propertyValue = parseInt(value, 10);\n\n        if (isNaN(propertyValue)) {\n          // do not write NaN value\n          propertyValue = undefined;\n        }\n      } else {\n        propertyValue = value;\n      }\n    }\n\n    if (propertyValue !== undefined) {\n      updates.push(cmdHelper.updateBusinessObject(\n        element, bo, objectWithKey(bindingName, propertyValue)\n      ));\n    }\n  }\n\n  // camunda:property\n  var camundaProperties,\n      existingCamundaProperty,\n      newCamundaProperty;\n\n  if (bindingType === CAMUNDA_PROPERTY_TYPE) {\n\n    if (scope) {\n      camundaProperties = bo.get('properties');\n    } else {\n      camundaProperties = findExtension(extensionElements, 'camunda:Properties');\n    }\n\n    if (!camundaProperties) {\n      camundaProperties = elementHelper.createElement('camunda:Properties', null, bo, bpmnFactory);\n\n      if (scope) {\n        updates.push(cmdHelper.updateBusinessObject(\n          element, bo, { properties: camundaProperties }\n        ));\n      }\n      else {\n        updates.push(cmdHelper.addElementsTolist(\n          element, extensionElements, 'values', [ camundaProperties ]\n        ));\n      }\n    }\n\n    existingCamundaProperty = findCamundaProperty(camundaProperties, binding);\n\n    newCamundaProperty = createCamundaProperty(binding, value, bpmnFactory);\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      camundaProperties,\n      'values',\n      null,\n      [ newCamundaProperty ],\n      existingCamundaProperty ? [ existingCamundaProperty ] : []\n    ));\n  }\n\n  // camunda:inputParameter\n  // camunda:outputParameter\n  var inputOutput,\n      existingIoParameter,\n      newIoParameter;\n\n  if (IO_BINDING_TYPES.indexOf(bindingType) !== -1) {\n\n    if (scope) {\n      inputOutput = bo.get('inputOutput');\n    } else {\n      inputOutput = findExtension(extensionElements, 'camunda:InputOutput');\n    }\n\n    // create inputOutput element, if it do not exist (yet)\n    if (!inputOutput) {\n      inputOutput = elementHelper.createElement('camunda:InputOutput', null, bo, bpmnFactory);\n\n      if (scope) {\n        updates.push(cmdHelper.updateBusinessObject(\n          element, bo, { inputOutput: inputOutput }\n        ));\n      }\n      else {\n        updates.push(cmdHelper.addElementsTolist(\n          element, extensionElements, 'values', inputOutput\n        ));\n      }\n    }\n  }\n\n  if (bindingType === CAMUNDA_INPUT_PARAMETER_TYPE) {\n\n    existingIoParameter = findInputParameter(inputOutput, binding);\n\n    newIoParameter = createInputParameter(binding, value, bpmnFactory);\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      inputOutput,\n      'inputParameters',\n      null,\n      [ newIoParameter ],\n      existingIoParameter ? [ existingIoParameter ] : []\n    ));\n  }\n\n  if (bindingType === CAMUNDA_OUTPUT_PARAMETER_TYPE) {\n\n    existingIoParameter = findOutputParameter(inputOutput, binding);\n\n    newIoParameter = createOutputParameter(binding, value, bpmnFactory);\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      inputOutput,\n      'outputParameters',\n      null,\n      [ newIoParameter ],\n      existingIoParameter ? [ existingIoParameter ] : []\n    ));\n  }\n\n\n  // camunda:in\n  // camunda:out\n  // camunda:in:businessKey\n  var existingInOut,\n      newInOut;\n\n  if (IN_OUT_BINDING_TYPES.indexOf(bindingType) !== -1) {\n\n    existingInOut = findCamundaInOut(bo, binding);\n\n    if (bindingType === CAMUNDA_IN_TYPE) {\n      newInOut = createCamundaIn(binding, value, bpmnFactory);\n    } else\n    if (bindingType === CAMUNDA_OUT_TYPE) {\n      newInOut = createCamundaOut(binding, value, bpmnFactory);\n    } else {\n      newInOut = createCamundaInWithBusinessKey(binding, value, bpmnFactory);\n    }\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      extensionElements,\n      'values',\n      null,\n      [ newInOut ],\n      existingInOut ? [ existingInOut ] : []\n    ));\n  }\n\n  if (bindingType === CAMUNDA_FIELD) {\n    var existingFieldInjections = findExtensions(bo, [ 'camunda:Field' ]);\n    var newFieldInjections = [];\n\n    if (existingFieldInjections.length > 0) {\n      existingFieldInjections.forEach(function(item) {\n        if (item.name === binding.name) {\n          newFieldInjections.push(createCamundaFieldInjection(binding, value, bpmnFactory));\n        } else {\n          newFieldInjections.push(item);\n        }\n      });\n    } else {\n      newFieldInjections.push(createCamundaFieldInjection(binding, value, bpmnFactory));\n    }\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      extensionElements,\n      'values',\n      null,\n      newFieldInjections,\n      existingFieldInjections ? existingFieldInjections : []\n    ));\n  }\n\n  if (updates.length) {\n    return updates;\n  }\n\n  // quick warning for better debugging\n  console.warn('no update', element, property, value);\n}\n\nmodule.exports.setPropertyValue = setPropertyValue;\n\n/**\n * Validate value of a given property.\n *\n * @param {String} value\n * @param {PropertyDescriptor} property\n * @param {Function} translate\n *\n * @return {Object} with validation errors\n */\nfunction validateValue(value, property, translate) {\n\n  var constraints = property.constraints || {};\n\n  if (constraints.notEmpty && isEmpty(value)) {\n    return translate('Must not be empty');\n  }\n\n  if (constraints.maxLength && value.length > constraints.maxLength) {\n    return translate('Must have max length {length}', { length: constraints.maxLength });\n  }\n\n  if (constraints.minLength && value.length < constraints.minLength) {\n    return translate('Must have min length {length}', { length: constraints.minLength });\n  }\n\n  var pattern = constraints.pattern,\n      message;\n\n  if (pattern) {\n\n    if (typeof pattern !== 'string') {\n      message = pattern.message;\n      pattern = pattern.value;\n    }\n\n    if (!matchesPattern(value, pattern)) {\n      return message || translate('Must match pattern {pattern}', { pattern: pattern });\n    }\n  }\n}\n\n\n// misc helpers ///////////////////////////////\n\nfunction propertyWithScope(property, scopeName) {\n  if (!scopeName) {\n    return property;\n  }\n\n  return assign({}, property, {\n    scope: {\n      name: scopeName\n    }\n  });\n}\n\n/**\n * Return an object with a single key -> value association.\n *\n * @param {String} key\n * @param {Any} value\n *\n * @return {Object}\n */\nfunction objectWithKey(key, value) {\n  var obj = {};\n\n  obj[key] = value;\n\n  return obj;\n}\n\n/**\n * Does the given string match the specified pattern?\n *\n * @param {String} str\n * @param {String} pattern\n *\n * @return {Boolean}\n */\nfunction matchesPattern(str, pattern) {\n  var regexp = new RegExp(pattern);\n\n  return regexp.test(str);\n}\n\nfunction isEmpty(str) {\n  return !str || /^\\s*$/.test(str);\n}\n\n/**\n * Create a new {@link Error} indicating an unknown\n * property binding.\n *\n * @param {PropertyDescriptor} property\n *\n * @return {Error}\n */\nfunction unknownPropertyBinding(property) {\n  var binding = property.binding;\n\n  return new Error('unknown binding: <' + binding.type + '>');\n}\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar asyncCapableHelper = require('../../../../helper/AsyncCapableHelper');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    eventDefinitionHelper = require('../../../../helper/EventDefinitionHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nfunction isAsyncBefore(bo) {\n  return asyncCapableHelper.isAsyncBefore(bo);\n}\n\nfunction isAsyncAfter(bo) {\n  return asyncCapableHelper.isAsyncAfter(bo);\n}\n\nfunction getFailedJobRetryTimeCycle(bo) {\n  return asyncCapableHelper.getFailedJobRetryTimeCycle(bo);\n}\n\nfunction removeFailedJobRetryTimeCycle(bo, element) {\n  return asyncCapableHelper.removeFailedJobRetryTimeCycle(bo, element);\n}\n\nfunction createExtensionElements(parent, bpmnFactory) {\n  return elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, parent, bpmnFactory);\n}\n\nfunction createFailedJobRetryTimeCycle(parent, bpmnFactory, cycle) {\n  return elementHelper.createElement('camunda:FailedJobRetryTimeCycle', { body: cycle }, parent, bpmnFactory);\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var idPrefix = options.idPrefix || '',\n      labelPrefix = options.labelPrefix || '';\n\n  var retryTimeCycleEntry = entryFactory.textField({\n    id: idPrefix + 'retryTimeCycle',\n    label: labelPrefix + translate('Retry Time Cycle'),\n    modelProperty: 'cycle',\n\n    get: function(element, node) {\n      var retryTimeCycle = getFailedJobRetryTimeCycle(getBusinessObject(element));\n      var value = retryTimeCycle && retryTimeCycle.get('body');\n      return {\n        cycle: value\n      };\n    },\n\n    set: function(element, values, node) {\n      var newCycle = values.cycle;\n      var bo = getBusinessObject(element);\n\n      if (newCycle === '' || typeof newCycle === 'undefined') {\n        // remove retry time cycle element(s)\n        return removeFailedJobRetryTimeCycle(bo, element);\n      }\n\n      var retryTimeCycle = getFailedJobRetryTimeCycle(bo);\n\n      if (!retryTimeCycle) {\n        // add new retry time cycle element\n        var commands = [];\n\n        var extensionElements = bo.get('extensionElements');\n        if (!extensionElements) {\n          extensionElements = createExtensionElements(bo, bpmnFactory);\n          commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n        }\n\n        retryTimeCycle = createFailedJobRetryTimeCycle(extensionElements, bpmnFactory, newCycle);\n        commands.push(cmdHelper.addAndRemoveElementsFromList(\n          element,\n          extensionElements,\n          'values',\n          'extensionElements',\n          [ retryTimeCycle ],\n          []\n        ));\n\n        return commands;\n      }\n\n      // update existing retry time cycle element\n      return cmdHelper.updateBusinessObject(element, retryTimeCycle, { body: newCycle });\n    },\n\n    hidden: function(element) {\n      var bo = getBusinessObject(element);\n\n      if (bo && (isAsyncBefore(bo) || isAsyncAfter(bo))) {\n        return false;\n      }\n\n      if (is(element, 'bpmn:Event')) {\n        return !eventDefinitionHelper.getTimerEventDefinition(element);\n      }\n\n      return true;\n    }\n\n  });\n\n  return [ retryTimeCycleEntry ];\n\n};\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    parameterLimit: 1000,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder);\n        }\n        if (has.call(obj, key)) {\n            obj[key] = [].concat(obj[key]).concat(val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]') {\n            obj = [];\n            obj = obj.concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.decoder !== null && options.decoder !== undefined && typeof options.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    options.ignoreQueryPrefix = options.ignoreQueryPrefix === true;\n    options.delimiter = typeof options.delimiter === 'string' || utils.isRegExp(options.delimiter) ? options.delimiter : defaults.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : defaults.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : defaults.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.decoder = typeof options.decoder === 'function' ? options.decoder : defaults.decoder;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : defaults.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : defaults.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : defaults.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : defaults.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","'use strict';\n\nvar domQuery = require('min-dom').query,\n    escapeHTML = require('../../../../Utils').escapeHTML,\n    utils = require('../../../../Utils');\n\n\nfunction getScriptType(node) {\n  return utils.selectedType('select[name=scriptType]', node.parentElement);\n}\n\n\nmodule.exports = function(scriptLanguagePropName, scriptValuePropName, isFormatRequired, translate) {\n\n  return {\n    template:\n    '<div class=\"bpp-row bpp-textfield\">' +\n      '<label for=\"cam-script-format\">' + escapeHTML(translate('Script Format')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\">' +\n        '<input id=\"cam-script-format\" type=\"text\" name=\"scriptFormat\" />' +\n        '<button class=\"clear\" data-action=\"script.clearScriptFormat\" data-show=\"script.canClearScriptFormat\">' +\n          '<span>X</span>' +\n        '</button>' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"bpp-row\">' +\n      '<label for=\"cam-script-type\">' + escapeHTML(translate('Script Type')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\">' +\n        '<select id=\"cam-script-type\" name=\"scriptType\" data-value>' +\n          '<option value=\"script\" selected>' + escapeHTML(translate('Inline Script')) + '</option>' +\n          '<option value=\"scriptResource\">' + escapeHTML(translate('External Resource')) + '</option>' +\n        '</select>' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"bpp-row bpp-textfield\">' +\n      '<label for=\"cam-script-resource-val\" data-show=\"script.isScriptResource\">' + escapeHTML(translate('Resource')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\" data-show=\"script.isScriptResource\">' +\n        '<input id=\"cam-script-resource-val\" type=\"text\" name=\"scriptResourceValue\" />' +\n        '<button class=\"clear\" data-action=\"script.clearScriptResource\" data-show=\"script.canClearScriptResource\">' +\n          '<span>X</span>' +\n        '</button>' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"bpp-row\">' +\n      '<label for=\"cam-script-val\" data-show=\"script.isScript\">' + escapeHTML(translate('Script')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\" data-show=\"script.isScript\">' +\n        '<textarea id=\"cam-script-val\" type=\"text\" name=\"scriptValue\"></textarea>' +\n      '</div>'+\n    '</div>',\n\n    get: function(element, bo) {\n      var values = {};\n\n      // read values from xml:\n      var boScriptResource = bo.get('camunda:resource'),\n          boScript = bo.get(scriptValuePropName),\n          boScriptFormat = bo.get(scriptLanguagePropName);\n\n      if (typeof boScriptResource !== 'undefined') {\n        values.scriptResourceValue = boScriptResource;\n        values.scriptType = 'scriptResource';\n      } else {\n        values.scriptValue = boScript;\n        values.scriptType = 'script';\n      }\n\n      values.scriptFormat = boScriptFormat;\n\n      return values;\n    },\n\n    set: function(element, values, containerElement) {\n      var scriptFormat = values.scriptFormat,\n          scriptType = values.scriptType,\n          scriptResourceValue = values.scriptResourceValue,\n          scriptValue = values.scriptValue;\n\n      // init update\n      var update = {\n        'camunda:resource': undefined\n      };\n      update[scriptValuePropName] = undefined;\n      update[scriptLanguagePropName] = undefined;\n\n      if (isFormatRequired) {\n        // always set language\n        update[scriptLanguagePropName] = scriptFormat || '';\n      } else\n      // set language only when scriptFormat has a value\n      if (scriptFormat !== '') {\n        update[scriptLanguagePropName] = scriptFormat;\n      }\n\n      // set either inline script or resource\n      if ('scriptResource' === scriptType) {\n        update['camunda:resource'] = scriptResourceValue || '';\n      } else {\n        update[scriptValuePropName] = scriptValue || '';\n      }\n\n      return update;\n    },\n\n    validate: function(element, values) {\n      var validationResult = {};\n\n      if (values.scriptType === 'script' && !values.scriptValue) {\n        validationResult.scriptValue = translate('Must provide a value');\n      }\n\n      if (values.scriptType === 'scriptResource' && !values.scriptResourceValue) {\n        validationResult.scriptResourceValue = translate('Must provide a value');\n      }\n\n      if (isFormatRequired && (!values.scriptFormat || values.scriptFormat.length === 0)) {\n        validationResult.scriptFormat = translate('Must provide a value');\n      }\n\n      return validationResult;\n    },\n\n    clearScriptFormat: function(element, inputNode, btnNode, scopeNode) {\n      domQuery('input[name=scriptFormat]', scopeNode).value='';\n\n      return true;\n    },\n\n    canClearScriptFormat: function(element, inputNode, btnNode, scopeNode) {\n      var input = domQuery('input[name=scriptFormat]', scopeNode);\n\n      return input.value !== '';\n    },\n\n    clearScriptResource: function(element, inputNode, btnNode, scopeNode) {\n      domQuery('input[name=scriptResourceValue]', scopeNode).value='';\n\n      return true;\n    },\n\n    canClearScriptResource: function(element, inputNode, btnNode, scopeNode) {\n      var input = domQuery('input[name=scriptResourceValue]', scopeNode);\n\n      return input.value !== '';\n    },\n\n    clearScript: function(element, inputNode, btnNode, scopeNode) {\n      domQuery('textarea[name=scriptValue]', scopeNode).value='';\n\n      return true;\n    },\n\n    canClearScript: function(element, inputNode, btnNode, scopeNode) {\n      var input = domQuery('textarea[name=scriptValue]', scopeNode);\n\n      return input.value !== '';\n    },\n\n    isScriptResource: function(element, inputNode, btnNode, scopeNode) {\n      var scriptType = getScriptType(scopeNode);\n      return scriptType === 'scriptResource';\n    },\n\n    isScript: function(element, inputNode, btnNode, scopeNode) {\n      var scriptType = getScriptType(scopeNode);\n      return scriptType === 'script';\n    }\n\n  };\n\n};\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","const traverse = require('./traverse');\n\nclass Reporter {\n  constructor({ moddleRoot, rule }) {\n    this.rule = rule;\n    this.moddleRoot = moddleRoot;\n    this.messages = [];\n    this.report = this.report.bind(this);\n  }\n\n  report(id, message) {\n    this.messages.push({ id, message });\n  }\n}\n\nmodule.exports = function testRule({ moddleRoot, rule }) {\n  const reporter = new Reporter({ rule, moddleRoot });\n  traverse(moddleRoot, node => rule.check(node, reporter));\n  return reporter.messages;\n};\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper'),\n    eventDefinitionHelper = require('../../../../helper/EventDefinitionHelper'),\n    utils = require('../../../../Utils');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar forEach = require('lodash/forEach'),\n    find = require('lodash/find'),\n    filter = require('lodash/filter');\n\n\nfunction getContainedActivities(element) {\n  return getFlowElements(element, 'bpmn:Activity');\n}\n\nfunction getContainedBoundaryEvents(element) {\n  return getFlowElements(element, 'bpmn:BoundaryEvent');\n}\n\nfunction getFlowElements(element, type) {\n  return utils.filterElementsByType(element.flowElements, type);\n}\n\nfunction isCompensationEventAttachedToActivity(activity, boundaryEvents) {\n  var activityId = activity.id;\n  var boundaryEvent = find(boundaryEvents, function(boundaryEvent) {\n    var compensateEventDefinition = eventDefinitionHelper.getCompensateEventDefinition(boundaryEvent);\n    var attachedToRef = boundaryEvent.attachedToRef;\n    return compensateEventDefinition && attachedToRef && attachedToRef.id === activityId;\n  });\n  return !!boundaryEvent;\n}\n\n// subprocess: only when it is not triggeredByEvent\n// activity: only when it attach a compensation boundary event\n// callActivity: no limitation\nfunction canActivityBeCompensated(activity, boundaryEvents) {\n  return (is(activity, 'bpmn:SubProcess') && !activity.triggeredByEvent) ||\n          is(activity, 'bpmn:CallActivity') ||\n          isCompensationEventAttachedToActivity(activity, boundaryEvents);\n}\n\nfunction getActivitiesForCompensation(element) {\n  var boundaryEvents = getContainedBoundaryEvents(element);\n  return filter(getContainedActivities(element), function(activity) {\n    return canActivityBeCompensated(activity, boundaryEvents);\n  });\n}\n\nfunction getActivitiesForActivityRef(element) {\n  var bo = getBusinessObject(element);\n  var parent = bo.$parent;\n\n  var activitiesForActivityRef = getActivitiesForCompensation(parent);\n\n  // if throwing compensation event is in an event sub process:\n  // get also all activities outside of the event sub process\n  if (is(parent, 'bpmn:SubProcess') && parent.triggeredByEvent) {\n    parent = parent.$parent;\n    if (parent) {\n      activitiesForActivityRef = activitiesForActivityRef.concat(getActivitiesForCompensation(parent));\n    }\n\n  }\n\n  return activitiesForActivityRef;\n}\n\nfunction createActivityRefOptions(element) {\n  var options = [ { value: '' } ];\n\n  var activities = getActivitiesForActivityRef(element);\n  forEach(activities, function(activity) {\n    var activityId = activity.id;\n    var name = (activity.name ? (activity.name + ' ') : '') + '(id=' + activityId + ')';\n    options.push({ value: activityId, name: name });\n  });\n\n  return options;\n}\n\n\nmodule.exports = function(group, element, bpmnFactory, compensateEventDefinition, elementRegistry, translate) {\n\n  group.entries.push(entryFactory.checkbox({\n    id: 'wait-for-completion',\n    label: translate('Wait for Completion'),\n    modelProperty: 'waitForCompletion',\n\n    get: function(element, node) {\n      return {\n        waitForCompletion: compensateEventDefinition.waitForCompletion\n      };\n    },\n\n    set: function(element, values) {\n      values.waitForCompletion = values.waitForCompletion || false;\n      return cmdHelper.updateBusinessObject(element, compensateEventDefinition, values);\n    }\n  }));\n\n  group.entries.push(entryFactory.selectBox({\n    id: 'activity-ref',\n    label: translate('Activity Ref'),\n    selectOptions: createActivityRefOptions(element),\n    modelProperty: 'activityRef',\n\n    get: function(element, node) {\n      var activityRef = compensateEventDefinition.activityRef;\n      activityRef = activityRef && activityRef.id;\n      return {\n        activityRef: activityRef || ''\n      };\n    },\n\n    set: function(element, values) {\n      var activityRef = values.activityRef || undefined;\n      activityRef = activityRef && getBusinessObject(elementRegistry.get(activityRef));\n      return cmdHelper.updateBusinessObject(element, compensateEventDefinition, {\n        activityRef: activityRef\n      });\n    }\n  }));\n\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar DELEGATE_TYPES = [\n  'class',\n  'expression',\n  'delegateExpression'\n];\n\nvar PROPERTIES = {\n  class: 'camunda:class',\n  expression: 'camunda:expression',\n  delegateExpression: 'camunda:delegateExpression'\n};\n\nfunction isDelegate(type) {\n  return DELEGATE_TYPES.indexOf(type) !== -1;\n}\n\nfunction getAttribute(type) {\n  return PROPERTIES[type];\n}\n\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getImplementationType = options.getImplementationType,\n      getBusinessObject = options.getBusinessObject;\n\n  function getDelegationLabel(type) {\n    switch (type) {\n    case 'class':\n      return translate('Java Class');\n    case 'expression':\n      return translate('Expression');\n    case 'delegateExpression':\n      return translate('Delegate Expression');\n    default:\n      return '';\n    }\n  }\n\n  var delegateEntry = entryFactory.textField({\n    id: 'delegate',\n    label: translate('Value'),\n    dataValueLabel: 'delegationLabel',\n    modelProperty: 'delegate',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var type = getImplementationType(element);\n      var attr = getAttribute(type);\n      var label = getDelegationLabel(type);\n      return {\n        delegate: bo.get(attr),\n        delegationLabel: label\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      var type = getImplementationType(element);\n      var attr = getAttribute(type);\n      var prop = {};\n      prop[attr] = values.delegate || '';\n      return cmdHelper.updateBusinessObject(element, bo, prop);\n    },\n\n    validate: function(element, values, node) {\n      return isDelegate(getImplementationType(element)) && !values.delegate ? { delegate: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isDelegate(getImplementationType(element));\n    }\n\n  });\n\n  return [ delegateEntry ];\n\n};\n","var copyArray = require('./_copyArray'),\n    isIndex = require('./_isIndex');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nmodule.exports = reorder;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\n/**\n * Create an entry to modify a property of an element which\n * is referenced by a event definition.\n *\n * @param  {djs.model.Base} element\n * @param  {ModdleElement} definition\n * @param  {BpmnFactory} bpmnFactory\n * @param  {Object} options\n * @param  {string} options.id the id of the entry\n * @param  {string} options.label the label of the entry\n * @param  {string} options.referenceProperty the name of referencing property\n * @param  {string} options.modelProperty the name of property to modify\n * @param  {string} options.shouldValidate a flag indicate whether to validate or not\n *\n * @return {Array<Object>} return an array containing the entries\n */\nmodule.exports = function(element, definition, bpmnFactory, options) {\n\n  var id = options.id || 'element-property';\n  var label = options.label;\n  var referenceProperty = options.referenceProperty;\n  var modelProperty = options.modelProperty || 'name';\n  var shouldValidate = options.shouldValidate || false;\n\n  var entry = entryFactory.textField({\n    id: id,\n    label: label,\n    modelProperty: modelProperty,\n\n    get: function(element, node) {\n      var reference = definition.get(referenceProperty);\n      var props = {};\n      props[modelProperty] = reference && reference.get(modelProperty);\n      return props;\n    },\n\n    set: function(element, values, node) {\n      var reference = definition.get(referenceProperty);\n      var props = {};\n      props[modelProperty] = values[modelProperty] || undefined;\n      return cmdHelper.updateBusinessObject(element, reference, props);\n    },\n\n    hidden: function(element, node) {\n      return !definition.get(referenceProperty);\n    }\n  });\n\n  if (shouldValidate) {\n    entry.validate = function(element, values, node) {\n      var reference = definition.get(referenceProperty);\n      if (reference && !values[modelProperty]) {\n        var validationErrors = {};\n        validationErrors[modelProperty] = 'Must provide a value';\n        return validationErrors;\n      }\n    };\n  }\n\n  return [ entry ];\n};\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    inputOutputHelper = require('../../../../helper/InputOutputHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils');\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    scriptImplementation = require('./Script');\n\n\nfunction createElement(type, parent, factory, properties) {\n  return elementHelper.createElement(type, properties, parent, factory);\n}\n\nfunction isScript(elem) {\n  return is(elem, 'camunda:Script');\n}\n\nfunction isList(elem) {\n  return is(elem, 'camunda:List');\n}\n\nfunction isMap(elem) {\n  return is(elem, 'camunda:Map');\n}\n\nfunction ensureInputOutputSupported(element, insideConnector) {\n  return inputOutputHelper.isInputOutputSupported(element, insideConnector);\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var typeInfo = {\n    'camunda:Map': {\n      value: 'map',\n      label: translate('Map')\n    },\n    'camunda:List': {\n      value: 'list',\n      label: translate('List')\n    },\n    'camunda:Script': {\n      value: 'script',\n      label: translate('Script')\n    }\n  };\n\n  options = options || {};\n\n  var insideConnector = !!options.insideConnector,\n      idPrefix = options.idPrefix || '';\n\n  var getSelected = options.getSelectedParameter;\n\n  if (!ensureInputOutputSupported(element, insideConnector)) {\n    return [];\n  }\n\n  var entries = [];\n\n  var isSelected = function(element, node) {\n    return getSelected(element, node);\n  };\n\n\n  // parameter name ////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.validationAwareTextField({\n    id: idPrefix + 'parameterName',\n    label: translate('Name'),\n    modelProperty: 'name',\n\n    getProperty: function(element, node) {\n      return (getSelected(element, node) || {}).name;\n    },\n\n    setProperty: function(element, values, node) {\n      var param = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, param, values);\n    },\n\n    validate: function(element, values, node) {\n      var bo = getSelected(element, node);\n\n      var validation = {};\n      if (bo) {\n        var nameValue = values.name;\n\n        if (nameValue) {\n          if (utils.containsSpace(nameValue)) {\n            validation.name = translate('Name must not contain spaces');\n          }\n        } else {\n          validation.name = translate('Parameter must have a name');\n        }\n      }\n\n      return validation;\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n  }));\n\n\n  // parameter type //////////////////////////////////////////////////////\n\n  var selectOptions = [\n    { value: 'text', name: translate('Text') },\n    { value: 'script', name: translate('Script') },\n    { value: 'list', name: translate('List') },\n    { value: 'map', name: translate('Map') }\n  ];\n\n  entries.push(entryFactory.selectBox({\n    id : idPrefix + 'parameterType',\n    label: translate('Type'),\n    selectOptions: selectOptions,\n    modelProperty: 'parameterType',\n\n    get: function(element, node) {\n      var bo = getSelected(element, node);\n\n      var parameterType = 'text';\n\n      if (typeof bo !== 'undefined') {\n        var definition = bo.get('definition');\n        if (typeof definition !== 'undefined') {\n          var type = definition.$type;\n          parameterType = typeInfo[type].value;\n        }\n      }\n\n      return {\n        parameterType: parameterType\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getSelected(element, node);\n\n      var properties = {\n        value: undefined,\n        definition: undefined\n      };\n\n      var createParameterTypeElem = function(type) {\n        return createElement(type, bo, bpmnFactory);\n      };\n\n      var parameterType = values.parameterType;\n\n      if (parameterType === 'script') {\n        properties.definition = createParameterTypeElem('camunda:Script');\n      }\n      else if (parameterType === 'list') {\n        properties.definition = createParameterTypeElem('camunda:List');\n      }\n      else if (parameterType === 'map') {\n        properties.definition = createParameterTypeElem('camunda:Map');\n      }\n\n      return cmdHelper.updateBusinessObject(element, bo, properties);\n    },\n\n    show: function(element, node) {\n      return isSelected(element, node);\n    }\n\n  }));\n\n\n  // parameter value (type = text) ///////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textBox({\n    id : idPrefix + 'parameterType-text',\n    label : translate('Value'),\n    modelProperty: 'value',\n    get: function(element, node) {\n      return {\n        value: (getSelected(element, node) || {}).value\n      };\n    },\n\n    set: function(element, values, node) {\n      var param = getSelected(element, node);\n      values.value = values.value || undefined;\n      return cmdHelper.updateBusinessObject(element, param, values);\n    },\n\n    show: function(element, node) {\n      var bo = getSelected(element, node);\n      return bo && !bo.definition;\n    }\n\n  }));\n\n\n  // parameter value (type = script) ///////////////////////////////////////////////////////\n  var script = scriptImplementation('scriptFormat', 'value', true, translate);\n  entries.push({\n    id: idPrefix + 'parameterType-script',\n    html: '<div data-show=\"isScript\">' +\n            script.template +\n          '</div>',\n    get: function(element, node) {\n      var bo = getSelected(element, node);\n      return bo && isScript(bo.definition) ? script.get(element, bo.definition) : {};\n    },\n\n    set: function(element, values, node) {\n      var bo = getSelected(element, node);\n      var update = script.set(element, values);\n      return cmdHelper.updateBusinessObject(element, bo.definition, update);\n    },\n\n    validate: function(element, values, node) {\n      var bo = getSelected(element, node);\n      return bo && isScript(bo.definition) ? script.validate(element, bo.definition) : {};\n    },\n\n    isScript: function(element, node) {\n      var bo = getSelected(element, node);\n      return bo && isScript(bo.definition);\n    },\n\n    script: script\n\n  });\n\n\n  // parameter value (type = list) ///////////////////////////////////////////////////////\n\n  entries.push(entryFactory.table({\n    id: idPrefix + 'parameterType-list',\n    modelProperties: [ 'value' ],\n    labels: [ translate('Value') ],\n    addLabel: translate('Add Value'),\n\n    getElements: function(element, node) {\n      var bo = getSelected(element, node);\n\n      if (bo && isList(bo.definition)) {\n        return bo.definition.items;\n      }\n\n      return [];\n    },\n\n    updateElement: function(element, values, node, idx) {\n      var bo = getSelected(element, node);\n      var item = bo.definition.items[idx];\n      return cmdHelper.updateBusinessObject(element, item, values);\n    },\n\n    addElement: function(element, node) {\n      var bo = getSelected(element, node);\n      var newValue = createElement('camunda:Value', bo.definition, bpmnFactory, { value: undefined });\n      return cmdHelper.addElementsTolist(element, bo.definition, 'items', [ newValue ]);\n    },\n\n    removeElement: function(element, node, idx) {\n      var bo = getSelected(element, node);\n      return cmdHelper.removeElementsFromList(element, bo.definition, 'items', null, [ bo.definition.items[idx] ]);\n    },\n\n    editable: function(element, node, prop, idx) {\n      var bo = getSelected(element, node);\n      var item = bo.definition.items[idx];\n      return !isMap(item) && !isList(item) && !isScript(item);\n    },\n\n    setControlValue: function(element, node, input, prop, value, idx) {\n      var bo = getSelected(element, node);\n      var item = bo.definition.items[idx];\n\n      if (!isMap(item) && !isList(item) && !isScript(item)) {\n        input.value = value;\n      } else {\n        input.value = typeInfo[item.$type].label;\n      }\n    },\n\n    show: function(element, node) {\n      var bo = getSelected(element, node);\n      return bo && bo.definition && isList(bo.definition);\n    }\n\n  }));\n\n\n  // parameter value (type = map) ///////////////////////////////////////////////////////\n\n  entries.push(entryFactory.table({\n    id: idPrefix + 'parameterType-map',\n    modelProperties: [ 'key', 'value' ],\n    labels: [ translate('Key'), translate('Value') ],\n    addLabel: translate('Add Entry'),\n\n    getElements: function(element, node) {\n      var bo = getSelected(element, node);\n\n      if (bo && isMap(bo.definition)) {\n        return bo.definition.entries;\n      }\n\n      return [];\n    },\n\n    updateElement: function(element, values, node, idx) {\n      var bo = getSelected(element, node);\n      var entry = bo.definition.entries[idx];\n\n      if (isMap(entry.definition) || isList(entry.definition) || isScript(entry.definition)) {\n        values = {\n          key: values.key\n        };\n      }\n\n      return cmdHelper.updateBusinessObject(element, entry, values);\n    },\n\n    addElement: function(element, node) {\n      var bo = getSelected(element, node);\n      var newEntry = createElement('camunda:Entry', bo.definition, bpmnFactory, { key: undefined, value: undefined });\n      return cmdHelper.addElementsTolist(element, bo.definition, 'entries', [ newEntry ]);\n    },\n\n    removeElement: function(element, node, idx) {\n      var bo = getSelected(element, node);\n      return cmdHelper.removeElementsFromList(element, bo.definition, 'entries', null, [ bo.definition.entries[idx] ]);\n    },\n\n    editable: function(element, node, prop, idx) {\n      var bo = getSelected(element, node);\n      var entry = bo.definition.entries[idx];\n      return prop === 'key' || (!isMap(entry.definition) && !isList(entry.definition) && !isScript(entry.definition));\n    },\n\n    setControlValue: function(element, node, input, prop, value, idx) {\n      var bo = getSelected(element, node);\n      var entry = bo.definition.entries[idx];\n\n      if (prop === 'key' || (!isMap(entry.definition) && !isList(entry.definition) && !isScript(entry.definition))) {\n        input.value = value;\n      } else {\n        input.value = typeInfo[entry.definition.$type].label;\n      }\n    },\n\n    show: function(element, node) {\n      var bo = getSelected(element, node);\n      return bo && bo.definition && isMap(bo.definition);\n    }\n\n  }));\n\n  return entries;\n\n};\n","'use strict';\n\nvar inputOutputParameter = require('./implementation/InputOutputParameter');\n\nvar assign = require('lodash/assign');\n\nmodule.exports = function(group, element, bpmnFactory, options, translate) {\n\n  group.entries = group.entries.concat(inputOutputParameter(element, bpmnFactory, assign({}, options), translate));\n\n};\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers used to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and\n * `_.rearg` modify function arguments, making the order in which they are\n * executed important, preventing the merging of metadata. However, we make\n * an exception for a safe combined case where curried functions have `_.ary`\n * and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n  var isCombo =\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n    ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & WRAP_BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = value;\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & WRAP_ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nmodule.exports = mergeData;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","export function center(bounds) {\n  return {\n    x: bounds.x + (bounds.width / 2),\n    y: bounds.y + (bounds.height / 2)\n  };\n}\n\n\nexport function delta(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar assign = require('lodash/assign');\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject,\n      hideResultVariable = options.hideResultVariable,\n      id = options.id || 'resultVariable';\n\n\n  var resultVariableEntry = entryFactory.textField({\n    id: id,\n    label: translate('Result Variable'),\n    modelProperty: 'resultVariable',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return { resultVariable: bo.get('camunda:resultVariable') };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n\n      var resultVariable = values.resultVariable || undefined;\n\n      var props = {\n        'camunda:resultVariable': resultVariable\n      };\n\n      if (is(bo, 'camunda:DmnCapable') && !resultVariable) {\n        props = assign({ 'camunda:mapDecisionResult': 'resultList' }, props);\n      }\n\n      return cmdHelper.updateBusinessObject(element, bo, props);\n    },\n\n    hidden: function(element, node) {\n      if (typeof hideResultVariable === 'function') {\n        return hideResultVariable.apply(resultVariableEntry, arguments);\n      }\n    }\n\n  });\n\n  return [ resultVariableEntry ];\n\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\n\nmodule.exports = function(group, element, translate) {\n\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(element, 'camunda:Initiator') && !is(element.parent, 'bpmn:SubProcess')) {\n    group.entries.push(entryFactory.textField({\n      id: 'initiator',\n      label: translate('Initiator'),\n      modelProperty: 'initiator'\n    }));\n  }\n};\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper'),\n    error = require('./implementation/ErrorEventDefinition');\n\nvar forEach = require('lodash/forEach');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var errorEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:EndEvent'\n  ];\n\n  forEach(errorEvents, function(event) {\n    if (is(element, event)) {\n\n      var errorEventDefinition = eventDefinitionHelper.getErrorEventDefinition(element);\n\n      if (errorEventDefinition) {\n        var isCatchingErrorEvent = is(element, 'bpmn:StartEvent') || is (element, 'bpmn:BoundaryEvent');\n\n        var showErrorCodeVariable = isCatchingErrorEvent,\n            showErrorMessageVariable = isCatchingErrorEvent;\n\n        error(\n          group,\n          element,\n          bpmnFactory,\n          errorEventDefinition,\n          showErrorCodeVariable,\n          showErrorMessageVariable,\n          translate);\n      }\n    }\n  });\n};\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n","var identity = require('./identity'),\n    metaMap = require('./_metaMap');\n\n/**\n * The base implementation of `setData` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nmodule.exports = baseSetData;\n","const {\n  isAny\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that checks that no implicit split is modeled\n * starting from a task.\n *\n * users should model the parallel splitting gateway\n * explicitly instead.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!isAny(node, [\n      'bpmn:Task',\n      'bpmn:Event'\n    ])) {\n      return;\n    }\n\n    const outgoing = node.outgoing || [];\n\n    const outgoingWithoutCondition = outgoing.filter((flow) => {\n      return !hasCondition(flow) && !isDefaultFlow(node, flow);\n    });\n\n    if (outgoingWithoutCondition.length > 1) {\n      reporter.report(node.id, 'Flow splits implicitly');\n    }\n  }\n\n  return {\n    check\n  };\n\n};\n\n\n// helpers /////////////////////////////\n\nfunction hasCondition(flow) {\n  return !!flow.conditionExpression;\n}\n\nfunction isDefaultFlow(node, flow) {\n  return node['default'] === flow;\n}","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      ++result;\n    }\n  }\n  return result;\n}\n\nmodule.exports = countHolders;\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nmodule.exports = function(group, element, translate) {\n\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(element, 'bpmn:Process') || is(element, 'bpmn:Participant') && bo.get('processRef')) {\n    var versionTagEntry = entryFactory.textField({\n      id: 'versionTag',\n      label: translate('Version Tag'),\n      modelProperty: 'versionTag'\n    });\n\n    // in participants we have to change the default behavior of set and get\n    if (is(element, 'bpmn:Participant')) {\n      versionTagEntry.get = function(element) {\n        var processBo = bo.get('processRef');\n\n        return {\n          versionTag: processBo.get('camunda:versionTag')\n        };\n      };\n\n      versionTagEntry.set = function(element, values) {\n        var processBo = bo.get('processRef');\n\n        return cmdHelper.updateBusinessObject(element, processBo, {\n          'camunda:versionTag': values.versionTag || undefined\n        });\n      };\n    }\n\n    group.entries.push(versionTagEntry);\n\n  }\n};\n","'use strict';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A component that decides upon the visibility / editable\n * state of properties in the properties panel.\n *\n * Implementors must subclass this component and override\n * {@link PropertiesActivator#isEntryVisible} and\n * {@link PropertiesActivator#isPropertyEditable} to provide\n * custom behavior.\n *\n * @class\n * @constructor\n *\n * @param {EventBus} eventBus\n * @param {Number} [priority] at which priority to hook into the activation\n */\nfunction PropertiesActivator(eventBus, priority) {\n  var self = this;\n\n  priority = priority || DEFAULT_PRIORITY;\n\n  eventBus.on('propertiesPanel.isEntryVisible', priority, function(e) {\n    return self.isEntryVisible(e.entry, e.element);\n  });\n\n  eventBus.on('propertiesPanel.isPropertyEditable', priority, function(e) {\n    return self.isPropertyEditable(e.entry, e.propertyName, e.element);\n  });\n}\n\nPropertiesActivator.$inject = [ 'eventBus' ];\n\nmodule.exports = PropertiesActivator;\n\n\n/**\n * Should the given entry be visible for the specified element.\n *\n * @method  PropertiesActivator#isEntryVisible\n *\n * @param {EntryDescriptor} entry\n * @param {ModdleElement} element\n *\n * @returns {Boolean}\n */\nPropertiesActivator.prototype.isEntryVisible = function(entry, element) {\n  return true;\n};\n\n/**\n * Should the given property be editable for the specified element\n *\n * @method  PropertiesActivator#isPropertyEditable\n *\n * @param {EntryDescriptor} entry\n * @param {String} propertyName\n * @param {ModdleElement} element\n *\n * @returns {Boolean}\n */\nPropertiesActivator.prototype.isPropertyEditable = function(entry, propertyName, element) {\n  return true;\n};","'use strict';\n\nvar properties = require('./implementation/Properties'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var propertiesEntry = properties(element, bpmnFactory, {\n    id: 'properties',\n    modelProperties: [ 'name', 'value' ],\n    labels: [ translate('Name'), translate('Value') ],\n\n    getParent: function(element, node, bo) {\n      return bo.extensionElements;\n    },\n\n    createParent: function(element, bo) {\n      var parent = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n      var cmd = cmdHelper.updateBusinessObject(element, bo, { extensionElements: parent });\n      return {\n        cmd: cmd,\n        parent: parent\n      };\n    }\n  }, translate);\n\n  if (propertiesEntry) {\n    group.entries.push(propertiesEntry);\n  }\n\n};\n","/** Used to match wrap detail comments. */\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n\nmodule.exports = getWrapDetails;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","const disallowNodeType = require('./helper').disallowNodeType;\n\nmodule.exports = disallowNodeType('bpmn:ComplexGateway');","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var externalTaskPriorityEntry = entryFactory.textField({\n    id: 'externalTaskPriority',\n    label: translate('Task Priority'),\n    modelProperty: 'taskPriority',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        taskPriority: bo.get('camunda:taskPriority')\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:taskPriority': values.taskPriority || undefined\n      });\n    }\n\n  });\n\n  return [ externalTaskPriorityEntry ];\n\n};\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar domQuery = require('min-dom').query;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar textField = function(options, defaultParameters) {\n\n  // Default action for the button next to the input-field\n  var defaultButtonAction = function(element, inputNode) {\n    var input = domQuery('input[name=\"' + options.modelProperty + '\"]', inputNode);\n    input.value = '';\n\n    return true;\n  };\n\n  // default method to determine if the button should be visible\n  var defaultButtonShow = function(element, inputNode) {\n    var input = domQuery('input[name=\"' + options.modelProperty + '\"]', inputNode);\n\n    return input.value !== '';\n  };\n\n\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      dataValueLabel = options.dataValueLabel,\n      buttonLabel = (options.buttonLabel || 'X'),\n      actionName = (typeof options.buttonAction != 'undefined') ? options.buttonAction.name : 'clear',\n      actionMethod = (typeof options.buttonAction != 'undefined') ? options.buttonAction.method : defaultButtonAction,\n      showName = (typeof options.buttonShow != 'undefined') ? options.buttonShow.name : 'canClear',\n      showMethod = (typeof options.buttonShow != 'undefined') ? options.buttonShow.method : defaultButtonShow,\n      canBeDisabled = !!options.disabled && typeof options.disabled === 'function',\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      description = options.description;\n\n  resource.html =\n    '<label for=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n      (canBeDisabled ? 'data-disable=\"isDisabled\" ' : '') +\n      (canBeHidden ? 'data-show=\"isHidden\" ' : '') +\n      (dataValueLabel ? 'data-value=\"' + escapeHTML(dataValueLabel) + '\"' : '') + '>'+ escapeHTML(label) +'</label>' +\n    '<div class=\"bpp-field-wrapper\" ' +\n      (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n      (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n      '>' +\n      '<input id=\"camunda-' + escapeHTML(resource.id) + '\" type=\"text\" name=\"' + escapeHTML(options.modelProperty) + '\" ' +\n        (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n        (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n        ' />' +\n      '<button class=\"' + escapeHTML(actionName) + '\" data-action=\"' + escapeHTML(actionName) + '\" data-show=\"' + escapeHTML(showName) + '\" ' +\n        (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n        (canBeHidden ? ' data-show=\"isHidden\"' : '') + '>' +\n        '<span>' + escapeHTML(buttonLabel) + '</span>' +\n      '</button>' +\n    '</div>';\n\n  // add description below text input entry field\n  if (description) {\n    resource.html += entryFieldDescription(description);\n  }\n\n  resource[actionName] = actionMethod;\n  resource[showName] = showMethod;\n\n  if (canBeDisabled) {\n    resource.isDisabled = function() {\n      return options.disabled.apply(resource, arguments);\n    };\n  }\n\n  if (canBeHidden) {\n    resource.isHidden = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-textfield'];\n\n  return resource;\n};\n\nmodule.exports = textField;\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    is = ModelUtil.is,\n    getBusinessObject = ModelUtil.getBusinessObject;\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var getValue = function(businessObject) {\n    return function(element) {\n      var documentations = businessObject && businessObject.get('documentation'),\n          text = (documentations && documentations.length > 0) ? documentations[0].text : '';\n\n      return { documentation: text };\n    };\n  };\n\n  var setValue = function(businessObject) {\n    return function(element, values) {\n      var newObjectList = [];\n\n      if (typeof values.documentation !== 'undefined' && values.documentation !== '') {\n        newObjectList.push(bpmnFactory.create('bpmn:Documentation', {\n          text: values.documentation\n        }));\n      }\n\n      return cmdHelper.setList(element, businessObject, 'documentation', newObjectList);\n    };\n  };\n\n  // Element Documentation\n  var elementDocuEntry = entryFactory.textBox({\n    id: 'documentation',\n    label: translate('Element Documentation'),\n    modelProperty: 'documentation'\n  });\n\n  elementDocuEntry.set = setValue(getBusinessObject(element));\n\n  elementDocuEntry.get = getValue(getBusinessObject(element));\n\n  group.entries.push(elementDocuEntry);\n\n\n  var processRef;\n\n  // Process Documentation when having a Collaboration Diagram\n  if (is(element, 'bpmn:Participant')) {\n\n    processRef = getBusinessObject(element).processRef;\n\n    // do not show for collapsed Pools/Participants\n    if (processRef) {\n      var processDocuEntry = entryFactory.textBox({\n        id: 'process-documentation',\n        label: translate('Process Documentation'),\n        modelProperty: 'documentation'\n      });\n\n      processDocuEntry.set = setValue(processRef);\n\n      processDocuEntry.get = getValue(processRef);\n\n      group.entries.push(processDocuEntry);\n    }\n  }\n\n};\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isEventSubProcess = require('bpmn-js/lib/util/DiUtil').isEventSubProcess;\n\nmodule.exports = function(group, element, bpmnFactory, conditionalEventDefinition, elementRegistry, translate) {\n\n  var getValue = function(modelProperty) {\n    return function(element) {\n      var modelPropertyValue = conditionalEventDefinition.get('camunda:' + modelProperty);\n      var value = {};\n\n      value[modelProperty] = modelPropertyValue;\n      return value;\n    };\n  };\n\n  var setValue = function(modelProperty) {\n    return function(element, values) {\n      var props = {};\n\n      props['camunda:' + modelProperty] = values[modelProperty] || undefined;\n\n      return cmdHelper.updateBusinessObject(element, conditionalEventDefinition, props);\n    };\n  };\n\n  group.entries.push(entryFactory.textField({\n    id: 'variableName',\n    label: translate('Variable Name'),\n    modelProperty : 'variableName',\n\n    get: getValue('variableName'),\n    set: setValue('variableName')\n  }));\n\n  var isConditionalStartEvent =\n    is(element, 'bpmn:StartEvent') && !isEventSubProcess(element.parent);\n\n  if (!isConditionalStartEvent) {\n    group.entries.push(entryFactory.textField({\n      id: 'variableEvent',\n      label: translate('Variable Event'),\n      description: translate('Specify more than one variable change event as a comma separated list.'),\n      modelProperty : 'variableEvent',\n\n      get: getValue('variableEvent'),\n      set: setValue('variableEvent')\n    }));\n  }\n};\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('el-autocomplete',{staticClass:\"inputBox\",attrs:{\"placeholder\":\"请输入内容\",\"trigger-on-focus\":false},model:{value:(_vm.state),callback:function ($$v) {_vm.state=$$v},expression:\"state\"}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchApi}},[_vm._v(\"确定\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"search\" >\r\n<!--        <el-autocomplete class=\"inputBox\"-->\r\n<!--                         v-model=\"state\"-->\r\n<!--                         :fetch-suggestions=\"querySearchAsync\"-->\r\n<!--                         placeholder=\"请输入内容\"-->\r\n<!--                         :trigger-on-focus=\"false\"-->\r\n<!--                         @select=\"handleSelect\"-->\r\n<!--                         @keyup.enter.native=\"search\"-->\r\n<!--                          >-->\r\n          <el-autocomplete class=\"inputBox\"\r\n                           v-model=\"state\"\r\n                           placeholder=\"请输入内容\"\r\n                           :trigger-on-focus=\"false\"\r\n          >\r\n<!--            <template slot-scope=\"{ item }\">-->\r\n<!--                <div>-->\r\n<!--                    <div class=\"name\"><span>{{ item.value }}</span></div>-->\r\n<!--                    <div class=\"addr\"><span>{{ item.address }}</span></div>-->\r\n<!--                </div>-->\r\n<!--            </template>-->\r\n        </el-autocomplete>\r\n        <el-button type=\"primary\" @click=\"searchApi\">确定</el-button>\r\n      <el-button type=\"primary\" @click=\"cancel\">取消</el-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\";\r\n    import {request} from \"../network/request\";\r\n    export default {\r\n        data() {\r\n            return {\r\n                restaurants: [],\r\n                state: ''\r\n            };\r\n        },\r\n        methods: {\r\n            cancel(){this.$emit('childFn', this.popup);},\r\n            search(){console.log(\"search\")},\r\n            searchApi(){\r\n                console.log(\"输入语义\",this.state)\r\n                this.$emit('wfname',this.state)\r\n              // 通过语义推荐api\r\n              axios({\r\n                url: \"/api/hnust/findByRequest\",\r\n                method: \"get\",\r\n                params: {\r\n                  message: this.state\r\n                }}).then(res => {\r\n                  console.log(res.status)\r\n                  console.log(res.statusText)\r\n                  console.log(\"res is:\",res.data)\r\n                this.recomapi=res.data\r\n                // 向父组件传递数据\r\n                this.$emit('transferapi',this.recomapi)\r\n\r\n\r\n              })\r\n              this.$emit('childFn', this.popup)\r\n            },\r\n            querySearchAsync(queryString, cb) {\r\n                var restaurants = this.restaurants;\r\n                var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\r\n                // 调用 callback 返回建议列表的数据\r\n                //cb(results);\r\n                clearTimeout(this.timeout);\r\n                this.timeout = setTimeout(() => {\r\n                    cb(results);\r\n                }, 3000 * Math.random());\r\n            },\r\n            createFilter(queryString) {\r\n                return (restaurant) => {\r\n                    return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) !== -1);\r\n                };\r\n            },\r\n            loadAll() {\r\n                return [\r\n                    { \"value\": \"三全鲜食（北新泾店）\", \"address\": \"长宁区新渔路144号\" },\r\n                    { \"value\": \"Hot honey 首尔炸鸡（仙霞路）\", \"address\": \"上海市长宁区淞虹路661号\" },\r\n                    { \"value\": \"新旺角茶餐厅\", \"address\": \"上海市普陀区真北路988号创邑金沙谷6号楼113\" },\r\n                    { \"value\": \"泷千家(天山西路店)\", \"address\": \"天山西路438号\" },\r\n                    { \"value\": \"胖仙女纸杯蛋糕（上海凌空店）\", \"address\": \"上海市长宁区金钟路968号1幢18号楼一层商铺18-101\" },\r\n                    { \"value\": \"贡茶\", \"address\": \"上海市长宁区金钟路633号\" },\r\n                    { \"value\": \"豪大大香鸡排超级奶爸\", \"address\": \"上海市嘉定区曹安公路曹安路1685号\" },\r\n                    { \"value\": \"茶芝兰（奶茶，手抓饼）\", \"address\": \"上海市普陀区同普路1435号\" },\r\n                    { \"value\": \"十二泷町\", \"address\": \"上海市北翟路1444弄81号B幢-107\" },\r\n                    { \"value\": \"星移浓缩咖啡\", \"address\": \"上海市嘉定区新郁路817号\" },\r\n                    { \"value\": \"阿姨奶茶/豪大大\", \"address\": \"嘉定区曹安路1611号\" },\r\n                    { \"value\": \"新麦甜四季甜品炸鸡\", \"address\": \"嘉定区曹安公路2383弄55号\" },\r\n                    { \"value\": \"Monica摩托主题咖啡店\", \"address\": \"嘉定区江桥镇曹安公路2409号1F，2383弄62号1F\" },\r\n                    { \"value\": \"浮生若茶（凌空soho店）\", \"address\": \"上海长宁区金钟路968号9号楼地下一层\" },\r\n                    { \"value\": \"NONO JUICE  鲜榨果汁\", \"address\": \"上海市长宁区天山西路119号\" },\r\n                    { \"value\": \"CoCo都可(北新泾店）\", \"address\": \"上海市长宁区仙霞西路\" },\r\n                    { \"value\": \"快乐柠檬（神州智慧店）\", \"address\": \"上海市长宁区天山西路567号1层R117号店铺\" },\r\n                    { \"value\": \"Merci Paul cafe\", \"address\": \"上海市普陀区光复西路丹巴路28弄6号楼819\" },\r\n                    { \"value\": \"猫山王（西郊百联店）\", \"address\": \"上海市长宁区仙霞西路88号第一层G05-F01-1-306\" },\r\n                    { \"value\": \"枪会山\", \"address\": \"上海市普陀区棕榈路\" },\r\n                    { \"value\": \"纵食\", \"address\": \"元丰天山花园(东门) 双流路267号\" },\r\n                    { \"value\": \"钱记\", \"address\": \"上海市长宁区天山西路\" },\r\n                    { \"value\": \"壹杯加\", \"address\": \"上海市长宁区通协路\" },\r\n                    { \"value\": \"唦哇嘀咖\", \"address\": \"上海市长宁区新泾镇金钟路999号2幢（B幢）第01层第1-02A单元\" },\r\n                    { \"value\": \"爱茜茜里(西郊百联)\", \"address\": \"长宁区仙霞西路88号1305室\" },\r\n                    { \"value\": \"爱茜茜里(近铁广场)\", \"address\": \"上海市普陀区真北路818号近铁城市广场北区地下二楼N-B2-O2-C商铺\" },\r\n                    { \"value\": \"鲜果榨汁（金沙江路和美广店）\", \"address\": \"普陀区金沙江路2239号金沙和美广场B1-10-6\" },\r\n                    { \"value\": \"开心丽果（缤谷店）\", \"address\": \"上海市长宁区威宁路天山路341号\" },\r\n                    { \"value\": \"超级鸡车（丰庄路店）\", \"address\": \"上海市嘉定区丰庄路240号\" },\r\n                    { \"value\": \"妙生活果园（北新泾店）\", \"address\": \"长宁区新渔路144号\" },\r\n                    { \"value\": \"香宜度麻辣香锅\", \"address\": \"长宁区淞虹路148号\" },\r\n                    { \"value\": \"凡仔汉堡（老真北路店）\", \"address\": \"上海市普陀区老真北路160号\" },\r\n                    { \"value\": \"港式小铺\", \"address\": \"上海市长宁区金钟路968号15楼15-105室\" },\r\n                    { \"value\": \"蜀香源麻辣香锅（剑河路店）\", \"address\": \"剑河路443-1\" },\r\n                    { \"value\": \"北京饺子馆\", \"address\": \"长宁区北新泾街道天山西路490-1号\" },\r\n                    { \"value\": \"饭典*新简餐（凌空SOHO店）\", \"address\": \"上海市长宁区金钟路968号9号楼地下一层9-83室\" },\r\n                    { \"value\": \"焦耳·川式快餐（金钟路店）\", \"address\": \"上海市金钟路633号地下一层甲部\" },\r\n                    { \"value\": \"动力鸡车\", \"address\": \"长宁区仙霞西路299弄3号101B\" },\r\n                    { \"value\": \"浏阳蒸菜\", \"address\": \"天山西路430号\" },\r\n                    { \"value\": \"四海游龙（天山西路店）\", \"address\": \"上海市长宁区天山西路\" },\r\n                    { \"value\": \"樱花食堂（凌空店）\", \"address\": \"上海市长宁区金钟路968号15楼15-105室\" },\r\n                    { \"value\": \"壹分米客家传统调制米粉(天山店)\", \"address\": \"天山西路428号\" },\r\n                    { \"value\": \"福荣祥烧腊（平溪路店）\", \"address\": \"上海市长宁区协和路福泉路255弄57-73号\" },\r\n                    { \"value\": \"速记黄焖鸡米饭\", \"address\": \"上海市长宁区北新泾街道金钟路180号1层01号摊位\" },\r\n                    { \"value\": \"红辣椒麻辣烫\", \"address\": \"上海市长宁区天山西路492号\" },\r\n                    { \"value\": \"(小杨生煎)西郊百联餐厅\", \"address\": \"长宁区仙霞西路88号百联2楼\" },\r\n                    { \"value\": \"阳阳麻辣烫\", \"address\": \"天山西路389号\" },\r\n                    { \"value\": \"南拳妈妈龙虾盖浇饭\", \"address\": \"普陀区金沙江路1699号鑫乐惠美食广场A13\" }\r\n                ];\r\n            },\r\n            handleSelect(item) {\r\n                console.log(item);\r\n            },\r\n        },\r\n        mounted() {\r\n            this.restaurants = this.loadAll();\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n    .name {\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        float: left;\r\n    }\r\n    .addr {\r\n        font-size: 12px;\r\n        color: red;\r\n        text-align:right;\r\n        float: right;\r\n    }\r\n    .inputBox{\r\n        width:400px\r\n    }\r\n    .search{\r\n        position: fixed;\r\n        border-radius: 0.25rem;\r\n        left: 50%;\r\n        top: 50%;\r\n        transform: translate(-50%, -50%);\r\n        z-index: 1000;\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=9c149b8c&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const {\n  is\n} = require('bpmnlint-utils');\n\n/**\n * Create a checker that disallows the given element type.\n *\n * @param {String} type\n *\n * @return {Function} ruleImpl\n */\nfunction disallowNodeType(type) {\n\n  return function() {\n\n    function check(node, reporter) {\n\n      if (is(node, type)) {\n        reporter.report(node.id, 'Element has disallowed type <' + type + '>');\n      }\n    }\n\n    return {\n      check\n    };\n\n  };\n\n}\n\nmodule.exports.disallowNodeType = disallowNodeType;","'use strict';\n\nvar elementHelper = require('../helper/ElementHelper');\n\n/**\n * A handler capable of creating a new element under a provided parent\n * and updating / creating a reference to it in one atomic action.\n *\n * @class\n * @constructor\n */\nfunction CreateAndReferenceElementHandler(elementRegistry, bpmnFactory) {\n  this._elementRegistry = elementRegistry;\n  this._bpmnFactory = bpmnFactory;\n}\n\nCreateAndReferenceElementHandler.$inject = [ 'elementRegistry', 'bpmnFactory' ];\n\nmodule.exports = CreateAndReferenceElementHandler;\n\n\n// api ////////////////////\n\n/**\n * Creates a new element under a provided parent and updates / creates a reference to it in\n * one atomic action.\n *\n * @method  CreateAndReferenceElementHandler#execute\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element which is the context for the reference\n * @param {moddle.referencingObject} context.referencingObject the object which creates the reference\n * @param {String} context.referenceProperty the property of the referencingObject which makes the reference\n * @param {moddle.newObject} context.newObject the new object to add\n * @param {moddle.newObjectContainer} context.newObjectContainer the container for the new object\n *\n * @returns {Array<djs.mode.Base>} the updated element\n */\nCreateAndReferenceElementHandler.prototype.execute = function(context) {\n\n  var referencingObject = ensureNotNull(context.referencingObject, 'referencingObject'),\n      referenceProperty = ensureNotNull(context.referenceProperty, 'referenceProperty'),\n      newObject = ensureNotNull(context.newObject, 'newObject'),\n      newObjectContainer = ensureNotNull(context.newObjectContainer, 'newObjectContainer'),\n      newObjectParent = ensureNotNull(context.newObjectParent, 'newObjectParent'),\n      changed = [ context.element ]; // this will not change any diagram-js elements\n\n  // create new object\n  var referencedObject = elementHelper\n    .createElement(newObject.type, newObject.properties, newObjectParent, this._bpmnFactory);\n  context.referencedObject = referencedObject;\n\n  // add to containing list\n  newObjectContainer.push(referencedObject);\n\n  // adjust reference attribute\n  context.previousReference = referencingObject[referenceProperty];\n  referencingObject[referenceProperty] = referencedObject;\n\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  CreateAndReferenceElementHandler#revert\n *\n * @param {Object} context\n *\n * @returns {djs.mode.Base} the updated element\n */\nCreateAndReferenceElementHandler.prototype.revert = function(context) {\n\n  var referencingObject = context.referencingObject,\n      referenceProperty = context.referenceProperty,\n      previousReference = context.previousReference,\n      referencedObject = context.referencedObject,\n      newObjectContainer = context.newObjectContainer;\n\n  // reset reference\n  referencingObject.set(referenceProperty, previousReference);\n\n  // remove new element\n  newObjectContainer.splice(newObjectContainer.indexOf(referencedObject), 1);\n\n  return context.changed;\n};\n\n\n\n// helpers //////////////\n\nfunction ensureNotNull(prop, name) {\n  if (!prop) {\n    throw new Error(name + ' required');\n  }\n  return prop;\n}\n","const {\n  is\n} = require('bpmnlint-utils');\n\n/**\n * A rule that checks whether not more than one blank start event\n * exists per scope.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!is(node, 'bpmn:FlowElementsContainer')) {\n      return;\n    }\n\n    const flowElements = node.flowElements || [];\n\n    const blankStartEvents = flowElements.filter(function(flowElement) {\n\n      if (!is(flowElement, 'bpmn:StartEvent')) {\n        return false;\n      }\n\n      const eventDefinitions = flowElement.eventDefinitions || [];\n\n      return eventDefinitions.length === 0;\n    });\n\n    if (blankStartEvents.length > 1) {\n      const type = is(node, 'bpmn:SubProcess') ? 'Sub process' : 'Process';\n\n      reporter.report(node.id, type + ' has multiple blank start events');\n    }\n  }\n\n  return {\n    check\n  };\n\n};","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","\nvar cache = {};\n\n/**\n * A resolver that caches rules and configuration as part of the bundle,\n * making them accessible in the browser.\n *\n * @param {Object} cache\n */\nfunction Resolver() {}\n\nResolver.prototype.resolveRule = function(pkg, ruleName) {\n\n  const rule = cache[pkg + '/' + ruleName];\n\n  if (!rule) {\n    throw new Error('cannot resolve rule <' + pkg + '/' + ruleName + '>');\n  }\n\n  return rule;\n};\n\nResolver.prototype.resolveConfig = function(pkg, configName) {\n  throw new Error(\n    'cannot resolve config <' + configName + '> in <' + pkg +'>'\n  );\n};\n\nvar resolver = new Resolver();\n\nvar rules = {\n  \"conditional-flows\": \"error\",\n  \"end-event-required\": \"error\",\n  \"event-sub-process-typed-start-event\": \"error\",\n  \"fake-join\": \"warn\",\n  \"label-required\": \"error\",\n  \"no-complex-gateway\": \"error\",\n  \"no-disconnected\": \"error\",\n  \"no-duplicate-sequence-flows\": \"error\",\n  \"no-gateway-join-fork\": \"error\",\n  \"no-implicit-split\": \"error\",\n  \"no-inclusive-gateway\": \"error\",\n  \"single-blank-start-event\": \"error\",\n  \"single-event-definition\": \"error\",\n  \"start-event-required\": \"error\",\n  \"sub-process-blank-start-event\": \"error\"\n};\n\nvar config = {\n  rules: rules\n};\n\nvar bundle = {\n  resolver: resolver,\n  config: config\n};\n\nexport { resolver, config };\n\nexport default bundle;\n\n\n\nimport rule_0 from 'bpmnlint/rules/conditional-flows';\ncache['bpmnlint/conditional-flows'] = rule_0;\n\nimport rule_1 from 'bpmnlint/rules/end-event-required';\ncache['bpmnlint/end-event-required'] = rule_1;\n\nimport rule_2 from 'bpmnlint/rules/event-sub-process-typed-start-event';\ncache['bpmnlint/event-sub-process-typed-start-event'] = rule_2;\n\nimport rule_3 from 'bpmnlint/rules/fake-join';\ncache['bpmnlint/fake-join'] = rule_3;\n\nimport rule_4 from 'bpmnlint/rules/label-required';\ncache['bpmnlint/label-required'] = rule_4;\n\nimport rule_5 from 'bpmnlint/rules/no-complex-gateway';\ncache['bpmnlint/no-complex-gateway'] = rule_5;\n\nimport rule_6 from 'bpmnlint/rules/no-disconnected';\ncache['bpmnlint/no-disconnected'] = rule_6;\n\nimport rule_7 from 'bpmnlint/rules/no-duplicate-sequence-flows';\ncache['bpmnlint/no-duplicate-sequence-flows'] = rule_7;\n\nimport rule_8 from 'bpmnlint/rules/no-gateway-join-fork';\ncache['bpmnlint/no-gateway-join-fork'] = rule_8;\n\nimport rule_9 from 'bpmnlint/rules/no-implicit-split';\ncache['bpmnlint/no-implicit-split'] = rule_9;\n\nimport rule_10 from 'bpmnlint/rules/no-inclusive-gateway';\ncache['bpmnlint/no-inclusive-gateway'] = rule_10;\n\nimport rule_11 from 'bpmnlint/rules/single-blank-start-event';\ncache['bpmnlint/single-blank-start-event'] = rule_11;\n\nimport rule_12 from 'bpmnlint/rules/single-event-definition';\ncache['bpmnlint/single-event-definition'] = rule_12;\n\nimport rule_13 from 'bpmnlint/rules/start-event-required';\ncache['bpmnlint/start-event-required'] = rule_13;\n\nimport rule_14 from 'bpmnlint/rules/sub-process-blank-start-event';\ncache['bpmnlint/sub-process-blank-start-event'] = rule_14;","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    copyArray = require('./_copyArray');\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  if (wrapper instanceof LazyWrapper) {\n    return wrapper.clone();\n  }\n  var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n  result.__actions__ = copyArray(wrapper.__actions__);\n  result.__index__  = wrapper.__index__;\n  result.__values__ = wrapper.__values__;\n  return result;\n}\n\nmodule.exports = wrapperClone;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar filter = require('lodash/filter');\n\nvar extensionElementsHelper = require('../../../helper/ExtensionElementsHelper'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper');\n\nvar extensionElementsEntry = require('./implementation/ExtensionElements');\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\n/**\n  * return depend on parameter 'type' camunda:in or camunda:out extension elements\n  */\nfunction getCamundaInOutMappings(element, type) {\n  var bo = getBusinessObject(element);\n\n  var signalEventDefinition = eventDefinitionHelper.getSignalEventDefinition(bo);\n\n  return extensionElementsHelper.getExtensionElements(signalEventDefinition || bo, type) || [];\n}\n\n/**\n  * return depend on parameter 'type' camunda:in or camunda:out extension elements\n  * with source or sourceExpression attribute\n  */\nfunction getVariableMappings(element, type) {\n  var camundaMappings = getCamundaInOutMappings(element, type);\n\n  return filter(camundaMappings, function(mapping) {\n    return !mapping.businessKey;\n  });\n}\n\nfunction getInOutType(mapping) {\n  var inOutType = 'source';\n\n  if (mapping.variables === 'all') {\n    inOutType = 'variables';\n  }\n  else if (typeof mapping.source !== 'undefined') {\n    inOutType = 'source';\n  }\n  else if (typeof mapping.sourceExpression !== 'undefined') {\n    inOutType = 'sourceExpression';\n  }\n\n  return inOutType;\n}\n\nvar CAMUNDA_IN_EXTENSION_ELEMENT = 'camunda:In',\n    CAMUNDA_OUT_EXTENSION_ELEMENT = 'camunda:Out';\n\nvar WHITESPACE_REGEX = /\\s/;\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var inOutTypeOptions = [\n    {\n      name: translate('Source'),\n      value: 'source'\n    },\n    {\n      name: translate('Source Expression'),\n      value: 'sourceExpression'\n    },\n    {\n      name: translate('All'),\n      value: 'variables'\n    }\n  ];\n\n  var signalEventDefinition = eventDefinitionHelper.getSignalEventDefinition(element);\n\n  if (!is(element, 'camunda:CallActivity') && !signalEventDefinition) {\n    return;\n  }\n\n  if (signalEventDefinition && !(isAny(element, [\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:EndEvent'\n  ]))) {\n    return;\n  }\n\n  var isSelected = function(element, node) {\n    return !!getSelected(element, node);\n  };\n\n  var getSelected = function(element, node) {\n    var parentNode = node.parentNode;\n    var selection = inEntry.getSelected(element, parentNode);\n\n    var parameter = getVariableMappings(element, CAMUNDA_IN_EXTENSION_ELEMENT)[selection.idx];\n\n    if (!parameter && outEntry) {\n      selection = outEntry.getSelected(element, parentNode);\n      parameter = getVariableMappings(element, CAMUNDA_OUT_EXTENSION_ELEMENT)[selection.idx];\n    }\n\n    return parameter;\n  };\n\n  var setOptionLabelValue = function(type) {\n    return function(element, node, option, property, value, idx) {\n      var variableMappings = getVariableMappings(element, type);\n      var mappingValue = variableMappings[idx];\n      var label = (mappingValue.target || '<undefined>') + ' := ';\n      var mappingType = getInOutType(mappingValue);\n\n      if (mappingType === 'variables') {\n        label = 'all';\n      }\n      else if (mappingType === 'source') {\n        label = label + (mappingValue.source || '<empty>');\n      }\n      else if (mappingType === 'sourceExpression') {\n        label = label + (mappingValue.sourceExpression || '<empty>');\n      } else {\n        label = label + '<empty>';\n      }\n\n      option.text = label;\n    };\n  };\n\n  var newElement = function(type) {\n    return function(element, extensionElements, value) {\n      var newElem = elementHelper.createElement(type, { source: '' }, extensionElements, bpmnFactory);\n\n      return cmdHelper.addElementsTolist(element, extensionElements, 'values', [ newElem ]);\n    };\n  };\n\n  var removeElement = function(type) {\n    return function(element, extensionElements, value, idx) {\n      var variablesMappings= getVariableMappings(element, type);\n      var mapping = variablesMappings[idx];\n\n      if (mapping) {\n        return extensionElementsHelper\n          .removeEntry(signalEventDefinition || getBusinessObject(element), element, mapping);\n      }\n    };\n  };\n\n  // in mapping for source and sourceExpression ///////////////////////////////////////////////////////////////\n\n  var inEntry = extensionElementsEntry(element, bpmnFactory, {\n    id: 'variableMapping-in',\n    label: translate('In Mapping'),\n    modelProperty: 'source',\n    prefix: 'In',\n    idGeneration: false,\n    resizable: true,\n    businessObject: signalEventDefinition || getBusinessObject(element),\n\n    createExtensionElement: newElement(CAMUNDA_IN_EXTENSION_ELEMENT),\n    removeExtensionElement: removeElement(CAMUNDA_IN_EXTENSION_ELEMENT),\n\n    getExtensionElements: function(element) {\n      return getVariableMappings(element, CAMUNDA_IN_EXTENSION_ELEMENT);\n    },\n\n    onSelectionChange: function(element, node, event, scope) {\n      outEntry && outEntry.deselect(element, node.parentNode);\n    },\n\n    setOptionLabelValue: setOptionLabelValue(CAMUNDA_IN_EXTENSION_ELEMENT)\n  });\n  group.entries.push(inEntry);\n\n  // out mapping for source and sourceExpression ///////////////////////////////////////////////////////\n\n  if (!signalEventDefinition) {\n    var outEntry = extensionElementsEntry(element, bpmnFactory, {\n      id: 'variableMapping-out',\n      label: translate('Out Mapping'),\n      modelProperty: 'source',\n      prefix: 'Out',\n      idGeneration: false,\n      resizable: true,\n\n      createExtensionElement: newElement(CAMUNDA_OUT_EXTENSION_ELEMENT),\n      removeExtensionElement: removeElement(CAMUNDA_OUT_EXTENSION_ELEMENT),\n\n      getExtensionElements: function(element) {\n        return getVariableMappings(element, CAMUNDA_OUT_EXTENSION_ELEMENT);\n      },\n\n      onSelectionChange: function(element, node, event, scope) {\n        inEntry.deselect(element, node.parentNode);\n      },\n\n      setOptionLabelValue: setOptionLabelValue(CAMUNDA_OUT_EXTENSION_ELEMENT)\n    });\n    group.entries.push(outEntry);\n  }\n\n  // label for selected mapping ///////////////////////////////////////////////////////\n\n  group.entries.push(entryFactory.label({\n    id: 'variableMapping-typeLabel',\n    get: function(element, node) {\n      var mapping = getSelected(element, node);\n\n      var value = '';\n      if (is(mapping, CAMUNDA_IN_EXTENSION_ELEMENT)) {\n        value = translate('In Mapping');\n      }\n      else if (is(mapping, CAMUNDA_OUT_EXTENSION_ELEMENT)) {\n        value = translate('Out Mapping');\n      }\n\n      return {\n        label: value\n      };\n    },\n\n    showLabel: function(element, node) {\n      return isSelected(element, node);\n    }\n  }));\n\n\n  group.entries.push(entryFactory.selectBox({\n    id: 'variableMapping-inOutType',\n    label: translate('Type'),\n    selectOptions: inOutTypeOptions,\n    modelProperty: 'inOutType',\n    get: function(element, node) {\n      var mapping = getSelected(element, node) || {};\n      return {\n        inOutType: getInOutType(mapping)\n      };\n    },\n    set: function(element, values, node) {\n      var inOutType = values.inOutType;\n\n      var props = {\n        'source' : undefined,\n        'sourceExpression' : undefined,\n        'variables' : undefined\n      };\n\n      if (inOutType === 'source') {\n        props.source = '';\n      }\n      else if (inOutType === 'sourceExpression') {\n        props.sourceExpression = '';\n      }\n      else if (inOutType === 'variables') {\n        props.variables = 'all';\n        props.target = undefined;\n      }\n\n      var mapping = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, mapping, props);\n    },\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  group.entries.push(entryFactory.textField({\n    id: 'variableMapping-source',\n    dataValueLabel: 'sourceLabel',\n    modelProperty: 'source',\n    get: function(element, node) {\n      var mapping = getSelected(element, node) || {};\n\n      var label = '';\n      var inOutType = getInOutType(mapping);\n      if (inOutType === 'source') {\n        label = translate('Source');\n      }\n      else if (inOutType === 'sourceExpression') {\n        label = translate('Source Expression');\n      }\n\n      return {\n        source: mapping[inOutType],\n        sourceLabel: label\n      };\n    },\n    set: function(element, values, node) {\n      values.source = values.source || undefined;\n\n      var mapping = getSelected(element, node);\n      var inOutType = getInOutType(mapping);\n\n      var props = {};\n      props[inOutType] = values.source || '';\n\n      return cmdHelper.updateBusinessObject(element, mapping, props);\n    },\n    // one of both (source or sourceExpression) must have a value to make\n    // the configuration easier and more understandable\n    // it is not engine conform\n    validate: function(element, values, node) {\n      var mapping = getSelected(element, node);\n\n      var validation = {};\n      if (mapping) {\n        if (!values.source) {\n          validation.source =\n          validation.source = values.sourceLabel ?\n            translate('Mapping must have a {value}', { value: values.sourceLabel.toLowerCase() }) :\n            translate('Mapping must have a value');\n        }\n\n        var inOutType = getInOutType(mapping);\n\n        if (WHITESPACE_REGEX.test(values.source) && inOutType !== 'sourceExpression') {\n          validation.source = translate('{label} must not contain whitespace', { label: values.sourceLabel });\n        }\n      }\n\n      return validation;\n    },\n    hidden: function(element, node) {\n      var selectedMapping = getSelected(element, node);\n      return !selectedMapping || (selectedMapping && selectedMapping.variables);\n    }\n  }));\n\n\n  group.entries.push(entryFactory.textField({\n    id: 'variableMapping-target',\n    label: translate('Target'),\n    modelProperty: 'target',\n    get: function(element, node) {\n      return {\n        target: (getSelected(element, node) || {}).target\n      };\n    },\n    set: function(element, values, node) {\n      values.target = values.target || undefined;\n      var mapping = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, mapping, values);\n    },\n    validate: function(element, values, node) {\n      var mapping = getSelected(element, node);\n\n      var validation = {};\n      if (mapping) {\n        var mappingType = getInOutType(mapping);\n\n        if (!values.target && mappingType !== 'variables') {\n          validation.target = translate('Mapping must have a target');\n        }\n\n        if (values.target\n          && WHITESPACE_REGEX.test(values.target)\n          && mappingType !== 'variables') {\n          validation.target = translate('Target must not contain whitespace');\n        }\n      }\n\n      return validation;\n    },\n    hidden: function(element, node) {\n      var selectedMapping = getSelected(element, node);\n      return !selectedMapping || (selectedMapping && selectedMapping.variables);\n    }\n  }));\n\n\n  group.entries.push(entryFactory.checkbox({\n    id: 'variableMapping-local',\n    label: translate('Local'),\n    modelProperty: 'local',\n    get: function(element, node) {\n      return {\n        local: (getSelected(element, node) || {}).local\n      };\n    },\n    set: function(element, values, node) {\n      values.local = values.local || false;\n      var mapping = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, mapping, values);\n    },\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n  }));\n\n};\n","const {\n  isAny\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that verifies that there exists no disconnected\n * flow elements, i.e. elements without incoming\n * _or_ outgoing sequence flows\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!isAny(node, [\n      'bpmn:Task',\n      'bpmn:Gateway',\n      'bpmn:SubProcess',\n      'bpmn:Event'\n    ]) || node.triggeredByEvent) {\n      return;\n    }\n\n    const incoming = node.incoming || [];\n    const outgoing = node.outgoing || [];\n\n    if (!incoming.length && !outgoing.length) {\n      reporter.report(node.id, 'Element is not connected');\n    }\n  }\n\n  return {\n    check\n  };\n\n};\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","const {\n  is,\n  isAny\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that checks the presence of a label.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (isAny(node, [\n      'bpmn:ParallelGateway',\n      'bpmn:EventBasedGateway'\n    ])) {\n      return;\n    }\n\n    // ignore joining gateways\n    if (is(node, 'bpmn:Gateway') && !isForking(node)) {\n      return;\n    }\n\n    if (is(node, 'bpmn:BoundaryEvent')) {\n      return;\n    }\n\n    // ignore sub-processes\n    if (is(node, 'bpmn:SubProcess')) {\n      // TODO(nikku): better ignore expanded sub-processes only\n      return;\n    }\n\n    // ignore sequence flow without condition\n    if (is(node, 'bpmn:SequenceFlow') && !hasCondition(node)) {\n      return;\n    }\n\n    // ignore data objects and artifacts for now\n    if (isAny(node, [\n      'bpmn:FlowNode',\n      'bpmn:SequenceFlow',\n      'bpmn:Participant',\n      'bpmn:Lane'\n    ])) {\n\n      const name = (node.name || '').trim();\n\n      if (name.length === 0) {\n        reporter.report(node.id, 'Element is missing label/name');\n      }\n    }\n  }\n\n  return { check };\n};\n\n\n// helpers ////////////////////////\n\nfunction isForking(node) {\n  const outgoing = node.outgoing || [];\n\n  return outgoing.length > 1;\n}\n\nfunction hasCondition(node) {\n  return node.conditionExpression;\n}","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nmodule.exports = composeArgs;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createPartial;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","'use strict';\n\nvar escapeHTML = require('./Utils').escapeHTML;\n\nvar domify = require('min-dom').domify,\n    domQuery = require('min-dom').query,\n    domQueryAll = require('min-dom').queryAll,\n    domRemove = require('min-dom').remove,\n    domClasses = require('min-dom').classes,\n    domClosest = require('min-dom').closest,\n    domAttr = require('min-dom').attr,\n    domDelegate = require('min-dom').delegate,\n    domMatches = require('min-dom').matches;\n\nvar forEach = require('lodash/forEach'),\n    filter = require('lodash/filter'),\n    get = require('lodash/get'),\n    keys = require('lodash/keys'),\n    isEmpty = require('lodash/isEmpty'),\n    isArray = require('lodash/isArray'),\n    xor = require('lodash/xor'),\n    debounce = require('lodash/debounce');\n\nvar updateSelection = require('selection-update');\n\nvar scrollTabs = require('scroll-tabs').default;\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar HIDE_CLASS = 'bpp-hidden';\nvar DEBOUNCE_DELAY = 300;\n\n\nfunction isToggle(node) {\n  return node.type === 'checkbox' || node.type === 'radio';\n}\n\nfunction isSelect(node) {\n  return node.type === 'select-one';\n}\n\nfunction isContentEditable(node) {\n  return domAttr(node, 'contenteditable');\n}\n\nfunction getPropertyPlaceholders(node) {\n  var selector = 'input[name], textarea[name], [data-value], [contenteditable]';\n  var placeholders = domQueryAll(selector, node);\n  if ((!placeholders || !placeholders.length) && domMatches(node, selector)) {\n    placeholders = [ node ];\n  }\n  return placeholders;\n}\n\n/**\n * Return all active form controls.\n * This excludes the invisible controls unless all is true\n *\n * @param {Element} node\n * @param {Boolean} [all=false]\n */\nfunction getFormControls(node, all) {\n  var controls = domQueryAll('input[name], textarea[name], select[name], [contenteditable]', node);\n\n  if (!controls || !controls.length) {\n    controls = domMatches(node, 'option') ? [ node ] : controls;\n  }\n\n  if (!all) {\n    controls = filter(controls, function(node) {\n      return !domClosest(node, '.' + HIDE_CLASS);\n    });\n  }\n\n  return controls;\n}\n\nfunction getFormControlValuesInScope(entryNode) {\n  var values = {};\n\n  var controlNodes = getFormControls(entryNode);\n\n  forEach(controlNodes, function(controlNode) {\n    var value = controlNode.value;\n\n    var name = domAttr(controlNode, 'name') || domAttr(controlNode, 'data-name');\n\n    // take toggle state into account for radio / checkboxes\n    if (isToggle(controlNode)) {\n      if (controlNode.checked) {\n        if (!domAttr(controlNode, 'value')) {\n          value = true;\n        } else {\n          value = controlNode.value;\n        }\n      } else {\n        value = null;\n      }\n    } else\n    if (isContentEditable(controlNode)) {\n      value = controlNode.innerText;\n    }\n\n    if (value !== null) {\n      // return the actual value\n      // handle serialization in entry provider\n      // (ie. if empty string should be serialized or not)\n      values[name] = value;\n    }\n  });\n\n  return values;\n\n}\n\n/**\n * Extract input values from entry node\n *\n * @param  {DOMElement} entryNode\n * @returns {Object}\n */\nfunction getFormControlValues(entryNode) {\n\n  var values;\n\n  var listContainer = domQuery('[data-list-entry-container]', entryNode);\n  if (listContainer) {\n    values = [];\n    var listNodes = listContainer.children || [];\n    forEach(listNodes, function(listNode) {\n      values.push(getFormControlValuesInScope(listNode));\n    });\n  } else {\n    values = getFormControlValuesInScope(entryNode);\n  }\n\n  return values;\n}\n\n/**\n * Return true if the given form extracted value equals\n * to an old cached version.\n *\n * @param {Object} value\n * @param {Object} oldValue\n * @return {Boolean}\n */\nfunction valueEqual(value, oldValue) {\n\n  if (value && !oldValue) {\n    return false;\n  }\n\n  var allKeys = keys(value).concat(keys(oldValue));\n\n  return allKeys.every(function(key) {\n    return value[key] === oldValue[key];\n  });\n}\n\n/**\n * Return true if the given form extracted value(s)\n * equal an old cached version.\n *\n * @param {Array<Object>|Object} values\n * @param {Array<Object>|Object} oldValues\n * @return {Boolean}\n */\nfunction valuesEqual(values, oldValues) {\n\n  if (isArray(values)) {\n\n    if (values.length !== oldValues.length) {\n      return false;\n    }\n\n    return values.every(function(v, idx) {\n      return valueEqual(v, oldValues[idx]);\n    });\n  }\n\n  return valueEqual(values, oldValues);\n}\n\n/**\n * Return a mapping of { id: entry } for all entries in the given groups in the given tabs.\n *\n * @param {Object} tabs\n * @return {Object}\n */\nfunction extractEntries(tabs) {\n  return keyBy(flattenDeep(map(flattenDeep(map(tabs, 'groups')), 'entries')), 'id');\n}\n\n/**\n * Return a mapping of { id: group } for all groups in the given tabs.\n *\n * @param {Object} tabs\n * @return {Object}\n */\nfunction extractGroups(tabs) {\n  return keyBy(flattenDeep(map(tabs, 'groups')), 'id');\n}\n\n/**\n * A properties panel implementation.\n *\n * To use it provide a `propertiesProvider` component that knows\n * about which properties to display.\n *\n * Properties edit state / visibility can be intercepted\n * via a custom {@link PropertiesActivator}.\n *\n * @class\n * @constructor\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {PropertiesProvider} propertiesProvider\n * @param {Canvas} canvas\n * @param {CommandStack} commandStack\n */\nfunction PropertiesPanel(config, eventBus, modeling, propertiesProvider, commandStack, canvas) {\n\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._commandStack = commandStack;\n  this._canvas = canvas;\n  this._propertiesProvider = propertiesProvider;\n\n  this._init(config);\n}\n\nPropertiesPanel.$inject = [\n  'config.propertiesPanel',\n  'eventBus',\n  'modeling',\n  'propertiesProvider',\n  'commandStack',\n  'canvas'\n];\n\nmodule.exports = PropertiesPanel;\n\n\nPropertiesPanel.prototype._init = function(config) {\n\n  var canvas = this._canvas,\n      eventBus = this._eventBus;\n\n  var self = this;\n\n  /**\n   * Select the root element once it is added to the canvas\n   */\n  eventBus.on('root.added', function(e) {\n    var element = e.element;\n\n    if (isImplicitRoot(element)) {\n      return;\n    }\n\n    self.update(element);\n  });\n\n  eventBus.on('selection.changed', function(e) {\n    var newElement = e.newSelection[0];\n\n    var rootElement = canvas.getRootElement();\n\n    if (isImplicitRoot(rootElement)) {\n      return;\n    }\n\n    self.update(newElement);\n  });\n\n  // add / update tab-bar scrolling\n  eventBus.on([\n    'propertiesPanel.changed',\n    'propertiesPanel.resized'\n  ], function(event) {\n\n    var tabBarNode = domQuery('.bpp-properties-tab-bar', self._container);\n\n    if (!tabBarNode) {\n      return;\n    }\n\n    var scroller = scrollTabs.get(tabBarNode);\n\n    if (!scroller) {\n\n      // we did not initialize yet, do that\n      // now and make sure we select the active\n      // tab on scroll update\n      scroller = scrollTabs(tabBarNode, {\n        selectors: {\n          tabsContainer: '.bpp-properties-tabs-links',\n          tab: '.bpp-properties-tabs-links li',\n          ignore: '.bpp-hidden',\n          active: '.bpp-active'\n        }\n      });\n\n\n      scroller.on('scroll', function(newActiveNode, oldActiveNode, direction) {\n\n        var linkNode = domQuery('[data-tab-target]', newActiveNode);\n\n        var tabId = domAttr(linkNode, 'data-tab-target');\n\n        self.activateTab(tabId);\n      });\n    }\n\n    // react on tab changes and or tabContainer resize\n    // and make sure the active tab is shown completely\n    scroller.update();\n  });\n\n  eventBus.on('elements.changed', function(e) {\n\n    var current = self._current;\n    var element = current && current.element;\n\n    if (element) {\n      if (e.elements.indexOf(element) !== -1) {\n        self.update(element);\n      }\n    }\n  });\n\n  eventBus.on('elementTemplates.changed', function() {\n    var current = self._current;\n    var element = current && current.element;\n\n    if (element) {\n      self.update(element);\n    }\n  });\n\n  eventBus.on('diagram.destroy', function() {\n    self.detach();\n  });\n\n  this._container = domify('<div class=\"bpp-properties-panel\"></div>');\n\n  this._bindListeners(this._container);\n\n  if (config && config.parent) {\n    this.attachTo(config.parent);\n  }\n};\n\n\nPropertiesPanel.prototype.attachTo = function(parentNode) {\n\n  if (!parentNode) {\n    throw new Error('parentNode required');\n  }\n\n  // ensure we detach from the\n  // previous, old parent\n  this.detach();\n\n  // unwrap jQuery if provided\n  if (parentNode.get && parentNode.constructor.prototype.jquery) {\n    parentNode = parentNode.get(0);\n  }\n\n  if (typeof parentNode === 'string') {\n    parentNode = domQuery(parentNode);\n  }\n\n  var container = this._container;\n\n  parentNode.appendChild(container);\n\n  this._emit('attach');\n};\n\nPropertiesPanel.prototype.detach = function() {\n\n  var container = this._container,\n      parentNode = container.parentNode;\n\n  if (!parentNode) {\n    return;\n  }\n\n  this._emit('detach');\n\n  parentNode.removeChild(container);\n};\n\n\n/**\n * Select the given tab within the properties panel.\n *\n * @param {Object|String} tab\n */\nPropertiesPanel.prototype.activateTab = function(tab) {\n\n  var tabId = typeof tab === 'string' ? tab : tab.id;\n\n  var current = this._current;\n\n  var panelNode = current.panel;\n\n  var allTabNodes = domQueryAll('.bpp-properties-tab', panelNode),\n      allTabLinkNodes = domQueryAll('.bpp-properties-tab-link', panelNode);\n\n  forEach(allTabNodes, function(tabNode) {\n\n    var currentTabId = domAttr(tabNode, 'data-tab');\n\n    domClasses(tabNode).toggle('bpp-active', tabId === currentTabId);\n  });\n\n  forEach(allTabLinkNodes, function(tabLinkNode) {\n\n    var tabLink = domQuery('[data-tab-target]', tabLinkNode),\n        currentTabId = domAttr(tabLink, 'data-tab-target');\n\n    domClasses(tabLinkNode).toggle('bpp-active', tabId === currentTabId);\n  });\n};\n\n/**\n * Update the DOM representation of the properties panel\n */\nPropertiesPanel.prototype.update = function(element) {\n  var current = this._current;\n\n  // no actual selection change\n  var needsCreate = true;\n\n  if (typeof element === 'undefined') {\n\n    // use RootElement of BPMN diagram to generate properties panel if no element is selected\n    element = this._canvas.getRootElement();\n  }\n\n  var newTabs = this._propertiesProvider.getTabs(element);\n\n  if (current && current.element === element) {\n    // see if we can reuse the existing panel\n\n    needsCreate = this._entriesChanged(current, newTabs);\n  }\n\n  if (needsCreate) {\n\n    if (current) {\n\n      // get active tab from the existing panel before remove it\n      var activeTabNode = domQuery('.bpp-properties-tab.bpp-active', current.panel);\n\n      var activeTabId;\n      if (activeTabNode) {\n        activeTabId = domAttr(activeTabNode, 'data-tab');\n      }\n\n      // remove old panel\n      domRemove(current.panel);\n    }\n\n    this._current = this._create(element, newTabs);\n\n    // activate the saved active tab from the remove panel or the first tab\n    (activeTabId) ? this.activateTab(activeTabId) : this.activateTab(this._current.tabs[0]);\n\n  }\n\n  if (this._current) {\n    // make sure correct tab contents are visible\n    this._updateActivation(this._current);\n\n  }\n\n  this._emit('changed');\n};\n\n\n/**\n * Returns true if one of two groups has different entries than the other.\n *\n * @param  {Object} current\n * @param  {Object} newTabs\n * @return {Boolean}\n */\nPropertiesPanel.prototype._entriesChanged = function(current, newTabs) {\n\n  var oldEntryIds = keys(current.entries),\n      newEntryIds = keys(extractEntries(newTabs));\n\n  return !isEmpty(xor(oldEntryIds, newEntryIds));\n};\n\nPropertiesPanel.prototype._emit = function(event) {\n  this._eventBus.fire('propertiesPanel.' + event, { panel: this, current: this._current });\n};\n\nPropertiesPanel.prototype._bindListeners = function(container) {\n\n  var self = this;\n\n  // handles a change for a given event\n  var handleChange = function handleChange(event) {\n\n    // see if we handle a change inside a [data-entry] element.\n    // if not, drop out\n    var inputNode = event.delegateTarget,\n        entryNode = domClosest(inputNode, '[data-entry]'),\n        entryId, entry;\n\n    // change from outside a [data-entry] element, simply ignore\n    if (!entryNode) {\n      return;\n    }\n\n    entryId = domAttr(entryNode, 'data-entry');\n    entry = self.getEntry(entryId);\n\n    var values = getFormControlValues(entryNode);\n\n    if (event.type === 'change') {\n\n      // - if the \"data-on-change\" attribute is present and a value is changed,\n      //   then the associated action is performed.\n      // - if the associated action returns \"true\" then an update to the business\n      //   object is done\n      // - if it does not return \"true\", then only the DOM content is updated\n      var onChangeAction = domAttr(inputNode, 'data-on-change');\n\n      if (onChangeAction) {\n        var isEntryDirty = self.executeAction(entry, entryNode, onChangeAction, event);\n\n        if (!isEntryDirty) {\n          return self.update(self._current.element);\n        }\n      }\n    }\n    self.applyChanges(entry, values, entryNode);\n    self.updateState(entry, entryNode);\n  };\n\n  // debounce update only elements that are target of key events,\n  // i.e. INPUT and TEXTAREA. SELECTs will trigger an immediate update anyway.\n  domDelegate.bind(container, 'input, textarea, [contenteditable]', 'input', debounce(handleChange, DEBOUNCE_DELAY));\n  domDelegate.bind(container, 'input, textarea, select, [contenteditable]', 'change', handleChange);\n\n  // paste as plain text only\n  domDelegate.bind(container, '[contenteditable]', 'paste', handlePaste);\n\n  function handlePaste(event) {\n    var text = (event.clipboardData || window.clipboardData).getData('text');\n    document.execCommand('insertText', false, text);\n\n    event.preventDefault();\n  }\n\n  // handle key events\n  domDelegate.bind(container, 'select', 'keydown', function(e) {\n\n    // DEL\n    if (e.keyCode === 46) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  });\n\n  domDelegate.bind(container, '[data-action]', 'click', function onClick(event) {\n\n    // triggers on all inputs\n    var inputNode = event.delegateTarget,\n        entryNode = domClosest(inputNode, '[data-entry]');\n\n    var actionId = domAttr(inputNode, 'data-action'),\n        entryId = domAttr(entryNode, 'data-entry');\n\n    var entry = self.getEntry(entryId);\n\n    var isEntryDirty = self.executeAction(entry, entryNode, actionId, event);\n\n    if (isEntryDirty) {\n      var values = getFormControlValues(entryNode);\n\n      self.applyChanges(entry, values, entryNode);\n    }\n\n    self.updateState(entry, entryNode);\n  });\n\n  function handleInput(event, element) {\n    // triggers on all inputs\n    var inputNode = event.delegateTarget;\n\n    var entryNode = domClosest(inputNode, '[data-entry]');\n\n    // only work on data entries\n    if (!entryNode) {\n      return;\n    }\n\n    var eventHandlerId = domAttr(inputNode, 'data-blur'),\n        entryId = domAttr(entryNode, 'data-entry');\n\n    var entry = self.getEntry(entryId);\n\n    var isEntryDirty = self.executeAction(entry, entryNode, eventHandlerId, event);\n\n    if (isEntryDirty) {\n      var values = getFormControlValues(entryNode);\n\n      self.applyChanges(entry, values, entryNode);\n    }\n\n    self.updateState(entry, entryNode);\n  }\n\n  domDelegate.bind(container, '[data-blur]', 'blur', handleInput, true);\n\n  // make tab links interactive\n  domDelegate.bind(container, '.bpp-properties-tabs-links [data-tab-target]', 'click', function(event) {\n    event.preventDefault();\n\n    var delegateTarget = event.delegateTarget;\n\n    var tabId = domAttr(delegateTarget, 'data-tab-target');\n\n    // activate tab on link click\n    self.activateTab(tabId);\n  });\n\n};\n\nPropertiesPanel.prototype.updateState = function(entry, entryNode) {\n  this.updateShow(entry, entryNode);\n  this.updateDisable(entry, entryNode);\n};\n\n/**\n * Update the visibility of the entry node in the DOM\n */\nPropertiesPanel.prototype.updateShow = function(entry, node) {\n\n  var current = this._current;\n\n  if (!current) {\n    return;\n  }\n\n  var showNodes = domQueryAll('[data-show]', node) || [];\n\n  forEach(showNodes, function(showNode) {\n\n    var expr = domAttr(showNode, 'data-show');\n    var fn = get(entry, expr);\n    if (fn) {\n      var scope = domClosest(showNode, '[data-scope]') || node;\n      var shouldShow = fn(current.element, node, showNode, scope) || false;\n      if (shouldShow) {\n        domClasses(showNode).remove(HIDE_CLASS);\n      } else {\n        domClasses(showNode).add(HIDE_CLASS);\n      }\n    }\n  });\n};\n\n/**\n * Evaluates a given function. If it returns true, then the\n * node is marked as \"disabled\".\n */\nPropertiesPanel.prototype.updateDisable = function(entry, node) {\n  var current = this._current;\n\n  if (!current) {\n    return;\n  }\n\n  var nodes = domQueryAll('[data-disable]', node) || [];\n\n  forEach(nodes, function(currentNode) {\n    var expr = domAttr(currentNode, 'data-disable');\n    var fn = get(entry, expr);\n    if (fn) {\n      var scope = domClosest(currentNode, '[data-scope]') || node;\n      var shouldDisable = fn(current.element, node, currentNode, scope) || false;\n      domAttr(currentNode, 'disabled', shouldDisable ? '' : null);\n    }\n  });\n};\n\nPropertiesPanel.prototype.executeAction = function(entry, entryNode, actionId, event) {\n  var current = this._current;\n\n  if (!current) {\n    return;\n  }\n\n  var fn = get(entry, actionId);\n  if (fn) {\n    var scopeNode = domClosest(event.target, '[data-scope]') || entryNode;\n    return fn.apply(entry, [ current.element, entryNode, event, scopeNode ]);\n  }\n};\n\n/**\n * Apply changes to the business object by executing a command\n */\nPropertiesPanel.prototype.applyChanges = function(entry, values, containerElement) {\n\n  var element = this._current.element;\n\n  // ensure we only update the model if we got dirty changes\n  if (valuesEqual(values, entry.oldValues)) {\n    return;\n  }\n\n  var command = entry.set(element, values, containerElement);\n\n  var commandToExecute;\n\n  if (isArray(command)) {\n    if (command.length) {\n      commandToExecute = {\n        cmd: 'properties-panel.multi-command-executor',\n        context: flattenDeep(command)\n      };\n    }\n  } else {\n    commandToExecute = command;\n  }\n\n  if (commandToExecute) {\n    this._commandStack.execute(commandToExecute.cmd, commandToExecute.context || { element : element });\n  } else {\n    this.update(element);\n  }\n};\n\n\n/**\n * apply validation errors in the DOM and show or remove an error message near the entry node.\n */\nPropertiesPanel.prototype.applyValidationErrors = function(validationErrors, entryNode) {\n\n  var valid = true;\n\n  var controlNodes = getFormControls(entryNode, true);\n\n  forEach(controlNodes, function(controlNode) {\n\n    var name = domAttr(controlNode, 'name') || domAttr(controlNode, 'data-name');\n\n    var error = validationErrors && validationErrors[name];\n\n    var errorMessageNode = domQuery('.bpp-error-message', controlNode.parentNode);\n\n    if (error) {\n      valid = false;\n\n      if (!errorMessageNode) {\n        errorMessageNode = domify('<div></div>');\n\n        domClasses(errorMessageNode).add('bpp-error-message');\n\n        // insert errorMessageNode after controlNode\n        controlNode.parentNode.insertBefore(errorMessageNode, controlNode.nextSibling);\n      }\n\n      errorMessageNode.textContent = error;\n\n      domClasses(controlNode).add('invalid');\n    } else {\n      domClasses(controlNode).remove('invalid');\n\n      if (errorMessageNode) {\n        controlNode.parentNode.removeChild(errorMessageNode);\n      }\n    }\n  });\n\n  return valid;\n};\n\n\n/**\n * Check if the entry contains valid input\n */\nPropertiesPanel.prototype.validate = function(entry, values, entryNode) {\n  var self = this;\n\n  var current = this._current;\n\n  var valid = true;\n\n  entryNode = entryNode || domQuery('[data-entry=\"' + entry.id + '\"]', current.panel);\n\n  if (values instanceof Array) {\n    var listContainer = domQuery('[data-list-entry-container]', entryNode),\n        listEntryNodes = listContainer.children || [];\n\n    // create new elements\n    for (var i = 0; i < values.length; i++) {\n      var listValue = values[i];\n\n      if (entry.validateListItem) {\n\n        var validationErrors = entry.validateListItem(current.element, listValue, entryNode, i),\n            listEntryNode = listEntryNodes[i];\n\n        valid = self.applyValidationErrors(validationErrors, listEntryNode) && valid;\n      }\n    }\n  } else {\n    if (entry.validate) {\n      this.validationErrors = entry.validate(current.element, values, entryNode);\n\n      valid = self.applyValidationErrors(this.validationErrors, entryNode) && valid;\n    }\n  }\n\n  return valid;\n};\n\nPropertiesPanel.prototype.getEntry = function(id) {\n  return this._current && this._current.entries[id];\n};\n\nvar flattenDeep = require('lodash/flattenDeep'),\n    keyBy = require('lodash/keyBy'),\n    map = require('lodash/map');\n\nPropertiesPanel.prototype._create = function(element, tabs) {\n\n  if (!element) {\n    return null;\n  }\n\n  var containerNode = this._container;\n\n  var panelNode = this._createPanel(element, tabs);\n\n  containerNode.appendChild(panelNode);\n\n  var entries = extractEntries(tabs);\n  var groups = extractGroups(tabs);\n\n  return {\n    tabs: tabs,\n    groups: groups,\n    entries: entries,\n    element: element,\n    panel: panelNode\n  };\n};\n\n/**\n * Update variable parts of the entry node on element changes.\n *\n * @param {djs.model.Base} element\n * @param {EntryDescriptor} entry\n * @param {Object} values\n * @param {HTMLElement} entryNode\n * @param {Number} idx\n */\nPropertiesPanel.prototype._bindTemplate = function(element, entry, values, entryNode, idx) {\n\n  var eventBus = this._eventBus;\n\n  function isPropertyEditable(entry, propertyName) {\n    return eventBus.fire('propertiesPanel.isPropertyEditable', {\n      entry: entry,\n      propertyName: propertyName,\n      element: element\n    });\n  }\n\n  var inputNodes = getPropertyPlaceholders(entryNode);\n\n  forEach(inputNodes, function(node) {\n\n    var name,\n        newValue,\n        editable;\n\n    // we deal with an input element\n    if ('value' in node || isContentEditable(node) === 'true') {\n      name = domAttr(node, 'name') || domAttr(node, 'data-name');\n      newValue = values[name];\n\n      editable = isPropertyEditable(entry, name);\n      if (editable && entry.editable) {\n        editable = entry.editable(element, entryNode, node, name, newValue, idx);\n      }\n\n      domAttr(node, 'readonly', editable ? null : '');\n      domAttr(node, 'disabled', editable ? null : '');\n\n      // take full control over setting the value\n      // and possibly updating the input in entry#setControlValue\n      if (entry.setControlValue) {\n        entry.setControlValue(element, entryNode, node, name, newValue, idx);\n      } else if (isToggle(node)) {\n        setToggleValue(node, newValue);\n      } else if (isSelect(node)) {\n        setSelectValue(node, newValue);\n      } else {\n        setInputValue(node, newValue);\n      }\n    }\n\n    // we deal with some non-editable html element\n    else {\n      name = domAttr(node, 'data-value');\n      newValue = values[name];\n      if (entry.setControlValue) {\n        entry.setControlValue(element, entryNode, node, name, newValue, idx);\n      } else {\n        setTextValue(node, newValue);\n      }\n    }\n  });\n};\n\n// TODO(nikku): WTF freaking name? Change / clarify.\nPropertiesPanel.prototype._updateActivation = function(current) {\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var element = current.element;\n\n  function isEntryVisible(entry) {\n    return eventBus.fire('propertiesPanel.isEntryVisible', {\n      entry: entry,\n      element: element\n    });\n  }\n\n  function isGroupVisible(group, element, groupNode) {\n    if (typeof group.enabled === 'function') {\n      return group.enabled(element, groupNode);\n    } else {\n      return true;\n    }\n  }\n\n  function isTabVisible(tab, element) {\n    if (typeof tab.enabled === 'function') {\n      return tab.enabled(element);\n    } else {\n      return true;\n    }\n  }\n\n  function toggleVisible(node, visible) {\n    domClasses(node).toggle(HIDE_CLASS, !visible);\n  }\n\n  // check whether the active tab is visible\n  // if not: set the first tab as active tab\n  function checkActiveTabVisibility(node, visible) {\n    var isActive = domClasses(node).has('bpp-active');\n    if (!visible && isActive) {\n      self.activateTab(current.tabs[0]);\n    }\n  }\n\n  function updateLabel(element, selector, text) {\n    var labelNode = domQuery(selector, element);\n\n    if (!labelNode) {\n      return;\n    }\n\n    labelNode.textContent = text;\n  }\n\n  var panelNode = current.panel;\n\n  forEach(current.tabs, function(tab) {\n\n    var tabNode = domQuery('[data-tab=' + tab.id + ']', panelNode);\n    var tabLinkNode = domQuery('[data-tab-target=' + tab.id + ']', panelNode).parentNode;\n\n    var tabVisible = false;\n\n    forEach(tab.groups, function(group) {\n\n      var groupVisible = false;\n\n      var groupNode = domQuery('[data-group=' + group.id + ']', tabNode);\n\n      forEach(group.entries, function(entry) {\n\n        var entryNode = domQuery('[data-entry=\"' + entry.id + '\"]', groupNode);\n\n        var entryVisible = isEntryVisible(entry);\n\n        groupVisible = groupVisible || entryVisible;\n\n        toggleVisible(entryNode, entryVisible);\n\n        var values = 'get' in entry ? entry.get(element, entryNode) : {};\n\n        if (values instanceof Array) {\n          var listEntryContainer = domQuery('[data-list-entry-container]', entryNode);\n          var existingElements = listEntryContainer.children || [];\n\n          for (var i = 0; i < values.length; i++) {\n            var listValue = values[i];\n            var listItemNode = existingElements[i];\n            if (!listItemNode) {\n              listItemNode = domify(entry.createListEntryTemplate(listValue, i, listEntryContainer));\n              listEntryContainer.appendChild(listItemNode);\n            }\n            domAttr(listItemNode, 'data-index', i);\n\n            self._bindTemplate(element, entry, listValue, listItemNode, i);\n          }\n\n          var entriesToRemove = existingElements.length - values.length;\n\n          for (var j = 0; j < entriesToRemove; j++) {\n            // remove orphaned element\n            listEntryContainer.removeChild(listEntryContainer.lastChild);\n          }\n\n        } else {\n          self._bindTemplate(element, entry, values, entryNode);\n        }\n\n        // update conditionally visible elements\n        self.updateState(entry, entryNode);\n        self.validate(entry, values, entryNode);\n\n        // remember initial state for later dirty checking\n        entry.oldValues = getFormControlValues(entryNode);\n      });\n\n      if (typeof group.label === 'function') {\n        updateLabel(groupNode, '.group-label', group.label(element, groupNode));\n      }\n\n      groupVisible = groupVisible && isGroupVisible(group, element, groupNode);\n\n      tabVisible = tabVisible || groupVisible;\n\n      toggleVisible(groupNode, groupVisible);\n    });\n\n    tabVisible = tabVisible && isTabVisible(tab, element);\n\n    toggleVisible(tabNode, tabVisible);\n    toggleVisible(tabLinkNode, tabVisible);\n\n    checkActiveTabVisibility(tabNode, tabVisible);\n  });\n\n  // inject elements id into header\n  updateLabel(panelNode, '[data-label-id]', getBusinessObject(element).id || '');\n};\n\nPropertiesPanel.prototype._createPanel = function(element, tabs) {\n  var self = this;\n\n  var panelNode = domify('<div class=\"bpp-properties\"></div>'),\n      headerNode = domify('<div class=\"bpp-properties-header\">' +\n        '<div class=\"label\" data-label-id></div>' +\n        '<div class=\"search\">' +\n          '<input type=\"search\" placeholder=\"Search for property\" />' +\n          '<button><span>Search</span></button>' +\n        '</div>' +\n      '</div>'),\n      tabBarNode = domify('<div class=\"bpp-properties-tab-bar\"></div>'),\n      tabLinksNode = domify('<ul class=\"bpp-properties-tabs-links\"></ul>'),\n      tabContainerNode = domify('<div class=\"bpp-properties-tabs-container\"></div>');\n\n  panelNode.appendChild(headerNode);\n\n  forEach(tabs, function(tab, tabIndex) {\n\n    if (!tab.id) {\n      throw new Error('tab must have an id');\n    }\n\n    var tabNode = domify('<div class=\"bpp-properties-tab\" data-tab=\"' + escapeHTML(tab.id) + '\"></div>'),\n        tabLinkNode = domify('<li class=\"bpp-properties-tab-link\">' +\n          '<a href data-tab-target=\"' + escapeHTML(tab.id) + '\">' + escapeHTML(tab.label) + '</a>' +\n        '</li>');\n\n    var groups = tab.groups;\n\n    forEach(groups, function(group) {\n\n      if (!group.id) {\n        throw new Error('group must have an id');\n      }\n\n      var groupNode = domify('<div class=\"bpp-properties-group\" data-group=\"' + escapeHTML(group.id) + '\">' +\n          '<span class=\"group-toggle\"></span>' +\n          '<span class=\"group-label\">' + escapeHTML(group.label) + '</span>' +\n        '</div>');\n\n      // TODO(nre): use event delegation to handle that...\n      groupNode.querySelector('.group-toggle').addEventListener('click', function(evt) {\n        domClasses(groupNode).toggle('group-closed');\n        evt.preventDefault();\n        evt.stopPropagation();\n      });\n      groupNode.addEventListener('click', function(evt) {\n        if (!evt.defaultPrevented && domClasses(groupNode).has('group-closed')) {\n          domClasses(groupNode).remove('group-closed');\n        }\n      });\n\n      forEach(group.entries, function(entry) {\n\n        if (!entry.id) {\n          throw new Error('entry must have an id');\n        }\n\n        var html = entry.html;\n\n        if (typeof html === 'string') {\n          html = domify(html);\n        }\n\n        // unwrap jquery\n        if (html.get && html.constructor.prototype.jquery) {\n          html = html.get(0);\n        }\n\n        var entryNode = domify('<div class=\"bpp-properties-entry\" data-entry=\"' + escapeHTML(entry.id) + '\"></div>');\n\n        forEach(entry.cssClasses || [], function(cssClass) {\n          domClasses(entryNode).add(cssClass);\n        });\n\n        entryNode.appendChild(html);\n\n        groupNode.appendChild(entryNode);\n\n        // update conditionally visible elements\n        self.updateState(entry, entryNode);\n      });\n\n      tabNode.appendChild(groupNode);\n    });\n\n    tabLinksNode.appendChild(tabLinkNode);\n    tabContainerNode.appendChild(tabNode);\n  });\n\n  tabBarNode.appendChild(tabLinksNode);\n\n  panelNode.appendChild(tabBarNode);\n  panelNode.appendChild(tabContainerNode);\n\n  return panelNode;\n};\n\n\n\nfunction setInputValue(node, value) {\n\n  var contentEditable = isContentEditable(node);\n\n  var oldValue = contentEditable ? node.innerText : node.value;\n\n  var selection;\n\n  // prevents input fields from having the value 'undefined'\n  if (value === undefined) {\n    value = '';\n  }\n\n  if (oldValue === value) {\n    return;\n  }\n\n  // update selection on undo/redo\n  if (document.activeElement === node) {\n    selection = updateSelection(getSelection(node), oldValue, value);\n  }\n\n  if (contentEditable) {\n    node.innerText = value;\n  } else {\n    node.value = value;\n  }\n\n  if (selection) {\n    setSelection(node, selection);\n  }\n}\n\nfunction setSelectValue(node, value) {\n  if (value !== undefined) {\n    node.value = value;\n  }\n}\n\nfunction setToggleValue(node, value) {\n  var nodeValue = node.value;\n\n  node.checked = (value === nodeValue) || (!domAttr(node, 'value') && value);\n}\n\nfunction setTextValue(node, value) {\n  node.textContent = value;\n}\n\nfunction getSelection(node) {\n\n  return isContentEditable(node) ? getContentEditableSelection(node) : {\n    start: node.selectionStart,\n    end: node.selectionEnd\n  };\n}\n\nfunction getContentEditableSelection(node) {\n\n  var selection = window.getSelection();\n\n  var focusNode = selection.focusNode,\n      focusOffset = selection.focusOffset,\n      anchorOffset = selection.anchorOffset;\n\n  if (!focusNode) {\n    throw new Error('not selected');\n  }\n\n  // verify we have selection on the current element\n  if (!node.contains(focusNode)) {\n    throw new Error('not selected');\n  }\n\n  return {\n    start: Math.min(focusOffset, anchorOffset),\n    end: Math.max(focusOffset, anchorOffset)\n  };\n}\n\nfunction setSelection(node, selection) {\n\n  if (isContentEditable(node)) {\n    setContentEditableSelection(node, selection);\n  } else {\n    node.selectionStart = selection.start;\n    node.selectionEnd = selection.end;\n  }\n}\n\nfunction setContentEditableSelection(node, selection) {\n\n  var focusNode,\n      domRange,\n      domSelection;\n\n  focusNode = node.firstChild || node,\n  domRange = document.createRange();\n  domRange.setStart(focusNode, selection.start);\n  domRange.setEnd(focusNode, selection.end);\n\n  domSelection = window.getSelection();\n  domSelection.removeAllRanges();\n  domSelection.addRange(domRange);\n}\n\nfunction isImplicitRoot(element) {\n  return element.id === '__implicitroot';\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    var obj;\n\n    while (queue.length) {\n        var item = queue.pop();\n        obj = item.obj[item.prop];\n\n        if (Array.isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n\n    return obj;\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (Array.isArray(target) && Array.isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                if (target[i] && typeof target[i] === 'object') {\n                    target[i] = merge(target[i], item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nvar encode = function encode(str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    return compactQueue(queue);\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","const disallowNodeType = require('./helper').disallowNodeType;\n\nmodule.exports = disallowNodeType('bpmn:InclusiveGateway');","'use strict';\n\nvar forEach = require('lodash/forEach');\n\n/**\n * A handler that combines and executes multiple commands.\n *\n * All updates are bundled on the command stack and executed in one step.\n * This also makes it possible to revert the changes in one step.\n *\n * Example use case: remove the camunda:formKey attribute and in addition\n * add all form fields needed for the camunda:formData property.\n *\n * @class\n * @constructor\n */\nfunction MultiCommandHandler(commandStack) {\n  this._commandStack = commandStack;\n}\n\nMultiCommandHandler.$inject = [ 'commandStack' ];\n\nmodule.exports = MultiCommandHandler;\n\nMultiCommandHandler.prototype.preExecute = function(context) {\n\n  var commandStack = this._commandStack;\n\n  forEach(context, function(command) {\n    commandStack.execute(command.cmd, command.context);\n  });\n};","const {\n  is,\n  isAny\n} = require('bpmnlint-utils');\n\n\n/**\n * A rule that checks for the presence of a start event per scope.\n */\nmodule.exports = function() {\n\n  function hasStartEvent(node) {\n    const flowElements = node.flowElements || [];\n\n    return (\n      flowElements.some(node => is(node, 'bpmn:StartEvent'))\n    );\n  }\n\n  function check(node, reporter) {\n\n    if (!isAny(node, [\n      'bpmn:Process',\n      'bpmn:SubProcess'\n    ])) {\n      return;\n    }\n\n    if (!hasStartEvent(node)) {\n      const type = is(node, 'bpmn:SubProcess') ? 'Sub process' : 'Process';\n\n      reporter.report(node.id, type + ' is missing start event');\n    }\n  }\n\n  return { check };\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    forEach = require('lodash/forEach');\n\nvar EventDefinitionHelper = {};\n\nmodule.exports = EventDefinitionHelper;\n\nEventDefinitionHelper.getEventDefinition = function(element, eventType) {\n\n  var bo = getBusinessObject(element),\n      eventDefinition = null;\n\n  if (bo.eventDefinitions) {\n    forEach(bo.eventDefinitions, function(event) {\n      if (is(event, eventType)) {\n        eventDefinition = event;\n      }\n    });\n  }\n\n  return eventDefinition;\n};\n\nEventDefinitionHelper.getTimerEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:TimerEventDefinition');\n};\n\nEventDefinitionHelper.getMessageEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:MessageEventDefinition');\n};\n\nEventDefinitionHelper.getSignalEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:SignalEventDefinition');\n};\n\nEventDefinitionHelper.getErrorEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:ErrorEventDefinition');\n};\n\nEventDefinitionHelper.getEscalationEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:EscalationEventDefinition');\n};\n\nEventDefinitionHelper.getCompensateEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:CompensateEventDefinition');\n};\n\nEventDefinitionHelper.getLinkEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:LinkEventDefinition');\n};\n\nEventDefinitionHelper.getConditionalEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:ConditionalEventDefinition');\n};\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used to match wrap detail comments. */\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\n\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\nfunction insertWrapDetails(source, details) {\n  var length = details.length;\n  if (!length) {\n    return source;\n  }\n  var lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n\nmodule.exports = insertWrapDetails;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('./CmdHelper');\n\n\nvar ParticipantHelper = {};\n\nmodule.exports = ParticipantHelper;\n\nParticipantHelper.modifyProcessBusinessObject = function(element, property, values) {\n  if (!is(element, 'bpmn:Participant')) {\n    return {};\n  }\n\n  var bo = getBusinessObject(element).get('processRef'),\n      properties = {};\n\n  properties[property] = values[property];\n\n  return cmdHelper.updateBusinessObject(element, bo, properties);\n};\n\nParticipantHelper.getProcessBusinessObject = function(element, propertyName) {\n  if (!is(element, 'bpmn:Participant')) {\n    return {};\n  }\n\n  var bo = getBusinessObject(element).get('processRef'),\n      properties = {};\n\n  properties[propertyName] = bo.get(propertyName);\n\n  return properties;\n};","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","import {\n  classes as domClasses\n} from 'min-dom';\n\nvar CURSOR_CLS_PATTERN = /^djs-cursor-.*$/;\n\n\nexport function set(mode) {\n  var classes = domClasses(document.body);\n\n  classes.removeMatching(CURSOR_CLS_PATTERN);\n\n  if (mode) {\n    classes.add('djs-cursor-' + mode);\n  }\n}\n\nexport function unset() {\n  set(null);\n}\n\nexport function has(mode) {\n  var classes = domClasses(document.body);\n\n  return classes.has('djs-cursor-' + mode);\n}\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar domify = require('min-dom').domify;\n\nvar forEach = require('lodash/forEach');\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar isList = function(list) {\n  return !(!list || Object.prototype.toString.call(list) !== '[object Array]');\n};\n\nvar addEmptyParameter = function(list) {\n  return list.concat([ { name: '', value: '' } ]);\n};\n\nvar createOption = function(option) {\n  return '<option value=\"' + option.value + '\">' + option.name + '</option>';\n};\n\n/**\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} [options.label]\n * @param  {Array<Object>} options.selectOptions\n * @param  {string} options.modelProperty\n * @param  {boolean} options.emptyParameter\n * @param  {function} options.disabled\n * @param  {function} options.hidden\n * @param  {Object} defaultParameters\n *\n * @return {Object}\n */\nvar selectbox = function(options, defaultParameters) {\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      selectOptions = options.selectOptions || [ { name: '', value: '' } ],\n      modelProperty = options.modelProperty,\n      emptyParameter = options.emptyParameter,\n      canBeDisabled = !!options.disabled && typeof options.disabled === 'function',\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      description = options.description;\n\n\n  if (emptyParameter) {\n    selectOptions = addEmptyParameter(selectOptions);\n  }\n\n\n  resource.html =\n    '<label for=\"camunda-' + escapeHTML(resource.id) + '\"' +\n    (canBeDisabled ? 'data-disable=\"isDisabled\" ' : '') +\n    (canBeHidden ? 'data-show=\"isHidden\" ' : '') +\n    '>' + escapeHTML(label) + '</label>' +\n    '<select id=\"camunda-' + escapeHTML(resource.id) + '-select\" name=\"' +\n    escapeHTML(modelProperty) + '\"' +\n    (canBeDisabled ? 'data-disable=\"isDisabled\" ' : '') +\n    (canBeHidden ? 'data-show=\"isHidden\" ' : '') +\n    ' data-value>';\n\n  if (isList(selectOptions)) {\n    forEach(selectOptions, function(option) {\n      resource.html += '<option value=\"' + escapeHTML(option.value) + '\">' +\n      (option.name ? escapeHTML(option.name) : '') + '</option>';\n    });\n  }\n\n  resource.html += '</select>';\n\n  // add description below select box entry field\n  if (description && typeof options.showCustomInput !== 'function') {\n    resource.html += entryFieldDescription(description);\n  }\n\n  /**\n   * Fill the select box options dynamically.\n   *\n   * Calls the defined function #selectOptions in the entry to get the\n   * values for the options and set the value to the inputNode.\n   *\n   * @param {djs.model.Base} element\n   * @param {HTMLElement} entryNode\n   * @param {EntryDescriptor} inputNode\n   * @param {Object} inputName\n   * @param {Object} newValue\n   */\n  resource.setControlValue = function(element, entryNode, inputNode, inputName, newValue) {\n    if (typeof selectOptions === 'function') {\n\n      var options = selectOptions(element, inputNode);\n\n      if (options) {\n\n        // remove existing options\n        while (inputNode.firstChild) {\n          inputNode.removeChild(inputNode.firstChild);\n        }\n\n        // add options\n        forEach(options, function(option) {\n          var template = domify(createOption(option));\n\n          inputNode.appendChild(template);\n        });\n\n\n      }\n    }\n\n    // set select value\n    if (newValue !== undefined) {\n      inputNode.value = newValue;\n    }\n\n  };\n\n  if (canBeDisabled) {\n    resource.isDisabled = function() {\n      return options.disabled.apply(resource, arguments);\n    };\n  }\n\n  if (canBeHidden) {\n    resource.isHidden = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-dropdown'];\n\n  return resource;\n};\n\nmodule.exports = selectbox;\n","'use strict';\n\nvar reduce = require('lodash/transform'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    keys = require('lodash/keys'),\n    forEach = require('lodash/forEach');\n\n/**\n * A handler that implements a BPMN 2.0 property update\n * for business objects which are not represented in the\n * diagram.\n *\n * This is useful in the context of the properties panel in\n * order to update child elements of elements visible in\n * the diagram.\n *\n * Example: perform an update of a specific event definition\n * of an intermediate event.\n *\n * @class\n * @constructor\n */\nfunction UpdateBusinessObjectHandler(elementRegistry) {\n  this._elementRegistry = elementRegistry;\n}\n\nUpdateBusinessObjectHandler.$inject = [ 'elementRegistry' ];\n\nmodule.exports = UpdateBusinessObjectHandler;\n\n/**\n * returns the root element\n */\nfunction getRoot(businessObject) {\n  var parent = businessObject;\n  while (parent.$parent) {\n    parent = parent.$parent;\n  }\n  return parent;\n}\n\nfunction getProperties(businessObject, propertyNames) {\n  return reduce(propertyNames, function(result, key) {\n    result[key] = businessObject.get(key);\n    return result;\n  }, {});\n}\n\n\nfunction setProperties(businessObject, properties) {\n  forEach(properties, function(value, key) {\n    businessObject.set(key, value);\n  });\n}\n\n\n// api /////////////////////////////////////////////\n\n/**\n * Updates a business object with a list of new properties\n *\n * @method  UpdateBusinessObjectHandler#execute\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element the element which has a child business object updated\n * @param {moddle.businessObject} context.businessObject the businessObject to update\n * @param {Object} context.properties a list of properties to set on the businessObject\n *\n * @return {Array<djs.mode.Base>} the updated element\n */\nUpdateBusinessObjectHandler.prototype.execute = function(context) {\n\n  var element = context.element,\n      businessObject = context.businessObject,\n      rootElements = getRoot(businessObject).rootElements,\n      referenceType = context.referenceType,\n      referenceProperty = context.referenceProperty,\n      changed = [ element ]; // this will not change any diagram-js elements\n\n  if (!element) {\n    throw new Error('element required');\n  }\n\n  if (!businessObject) {\n    throw new Error('businessObject required');\n  }\n\n  var properties = context.properties,\n      oldProperties = context.oldProperties || getProperties(businessObject, keys(properties));\n\n  // check if there the update needs an external element for reference\n  if (typeof referenceType !== 'undefined' && typeof referenceProperty !== 'undefined') {\n    forEach(rootElements, function(rootElement) {\n      if (is(rootElement, referenceType)) {\n        if (rootElement.id === properties[referenceProperty]) {\n          properties[referenceProperty] = rootElement;\n        }\n      }\n    });\n  }\n\n  // update properties\n  setProperties(businessObject, properties);\n\n  // store old values\n  context.oldProperties = oldProperties;\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  UpdateBusinessObjectHandler#revert\n *\n * @param {Object} context\n *\n * @return {djs.mode.Base} the updated element\n */\nUpdateBusinessObjectHandler.prototype.revert = function(context) {\n\n  var oldProperties = context.oldProperties,\n      businessObject = context.businessObject;\n\n  // update properties\n  setProperties(businessObject, oldProperties);\n\n  return context.changed;\n};\n","'use strict';\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    is = ModelUtil.is,\n    getBusinessObject = ModelUtil.getBusinessObject;\n\nvar eventDefinitionHelper = require('./EventDefinitionHelper');\nvar extensionsElementHelper = require('./ExtensionElementsHelper');\n\nvar ImplementationTypeHelper = {};\n\nmodule.exports = ImplementationTypeHelper;\n\n/**\n * Returns 'true' if the given element is 'camunda:ServiceTaskLike'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isServiceTaskLike = function(element) {\n  return is(element, 'camunda:ServiceTaskLike');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:DmnCapable'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isDmnCapable = function(element) {\n  return is(element, 'camunda:DmnCapable');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:ExternalCapable'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isExternalCapable = function(element) {\n  return is(element, 'camunda:ExternalCapable');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:TaskListener'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isTaskListener = function(element) {\n  return is(element, 'camunda:TaskListener');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:ExecutionListener'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isExecutionListener = function(element) {\n  return is(element, 'camunda:ExecutionListener');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:ExecutionListener' or\n * 'camunda:TaskListener'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isListener = function(element) {\n  return this.isTaskListener(element) || this.isExecutionListener(element);\n};\n\n/**\n * Returns 'true' if the given element is 'bpmn:SequenceFlow'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isSequenceFlow = function(element) {\n  return is(element, 'bpmn:SequenceFlow');\n};\n\n/**\n * Get a 'camunda:ServiceTaskLike' business object.\n *\n * If the given element is not a 'camunda:ServiceTaskLike', then 'false'\n * is returned.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement} the 'camunda:ServiceTaskLike' business object\n */\nImplementationTypeHelper.getServiceTaskLikeBusinessObject = function(element) {\n\n  if (is(element, 'bpmn:IntermediateThrowEvent') || is(element, 'bpmn:EndEvent')) {\n\n    // change business object to 'messageEventDefinition' when\n    // the element is a message intermediate throw event or message end event\n    // because the camunda extensions (e.g. camunda:class) are in the message\n    // event definition tag and not in the intermediate throw event or end event tag\n    var messageEventDefinition = eventDefinitionHelper.getMessageEventDefinition(element);\n    if (messageEventDefinition) {\n      element = messageEventDefinition;\n    }\n  }\n\n  return this.isServiceTaskLike(element) && getBusinessObject(element);\n\n};\n\n/**\n * Returns the implementation type of the given element.\n *\n * Possible implementation types are:\n * - dmn\n * - connector\n * - external\n * - class\n * - expression\n * - delegateExpression\n * - script\n * - or undefined, when no matching implementation type is found\n *\n * @param  {djs.model.Base} element\n *\n * @return {String} the implementation type\n */\nImplementationTypeHelper.getImplementationType = function(element) {\n\n  var bo = this.getServiceTaskLikeBusinessObject(element);\n\n  if (!bo) {\n    if (this.isListener(element)) {\n      bo = element;\n    } else {\n      return;\n    }\n  }\n\n  if (this.isDmnCapable(bo)) {\n    var decisionRef = bo.get('camunda:decisionRef');\n    if (typeof decisionRef !== 'undefined') {\n      return 'dmn';\n    }\n  }\n\n  if (this.isServiceTaskLike(bo)) {\n    var connectors = extensionsElementHelper.getExtensionElements(bo, 'camunda:Connector');\n    if (typeof connectors !== 'undefined') {\n      return 'connector';\n    }\n  }\n\n  if (this.isExternalCapable(bo)) {\n    var type = bo.get('camunda:type');\n    if (type === 'external') {\n      return 'external';\n    }\n  }\n\n  var cls = bo.get('camunda:class');\n  if (typeof cls !== 'undefined') {\n    return 'class';\n  }\n\n  var expression = bo.get('camunda:expression');\n  if (typeof expression !== 'undefined') {\n    return 'expression';\n  }\n\n  var delegateExpression = bo.get('camunda:delegateExpression');\n  if (typeof delegateExpression !== 'undefined') {\n    return 'delegateExpression';\n  }\n\n  if (this.isListener(bo)) {\n    var script = bo.get('script');\n    if (typeof script !== 'undefined') {\n      return 'script';\n    }\n  }\n\n};\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar asyncCapableHelper = require('../../../../helper/AsyncCapableHelper'),\n    eventDefinitionHelper = require('../../../../helper/EventDefinitionHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nfunction isAsyncBefore(bo) {\n  return asyncCapableHelper.isAsyncBefore(bo);\n}\n\nfunction isAsyncAfter(bo) {\n  return asyncCapableHelper.isAsyncAfter(bo);\n}\n\nfunction isExclusive(bo) {\n  return asyncCapableHelper.isExclusive(bo);\n}\n\nfunction removeFailedJobRetryTimeCycle(bo, element) {\n  return asyncCapableHelper.removeFailedJobRetryTimeCycle(bo, element);\n}\n\nfunction canRemoveFailedJobRetryTimeCycle(element) {\n  return !eventDefinitionHelper.getTimerEventDefinition(element);\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var idPrefix = options.idPrefix || '',\n      labelPrefix = options.labelPrefix || '';\n\n\n  var asyncBeforeEntry = entryFactory.checkbox({\n    id: idPrefix + 'asyncBefore',\n    label: labelPrefix + translate('Asynchronous Before'),\n    modelProperty: 'asyncBefore',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        asyncBefore: isAsyncBefore(bo)\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      var asyncBefore = !!values.asyncBefore;\n\n      var props = {\n        'camunda:asyncBefore': asyncBefore,\n        'camunda:async': false\n      };\n\n      var commands = [];\n      if (!isAsyncAfter(bo) && !asyncBefore) {\n        props = assign({ 'camunda:exclusive' : true }, props);\n        if (canRemoveFailedJobRetryTimeCycle(element)) {\n          commands.push(removeFailedJobRetryTimeCycle(bo, element));\n        }\n      }\n\n      commands.push(cmdHelper.updateBusinessObject(element, bo, props));\n      return commands;\n    }\n  });\n\n\n  var asyncAfterEntry = entryFactory.checkbox({\n    id: idPrefix + 'asyncAfter',\n    label: labelPrefix + translate('Asynchronous After'),\n    modelProperty: 'asyncAfter',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        asyncAfter: isAsyncAfter(bo)\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      var asyncAfter = !!values.asyncAfter;\n\n      var props = {\n        'camunda:asyncAfter': asyncAfter\n      };\n\n      var commands = [];\n      if (!isAsyncBefore(bo) && !asyncAfter) {\n        props = assign({ 'camunda:exclusive' : true }, props);\n        if (canRemoveFailedJobRetryTimeCycle(element)) {\n          commands.push(removeFailedJobRetryTimeCycle(bo, element));\n        }\n      }\n\n      commands.push(cmdHelper.updateBusinessObject(element, bo, props));\n      return commands;\n    }\n  });\n\n\n  var exclusiveEntry = entryFactory.checkbox({\n    id: idPrefix + 'exclusive',\n    label: labelPrefix + translate('Exclusive'),\n    modelProperty: 'exclusive',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return { exclusive: isExclusive(bo) };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, { 'camunda:exclusive': !!values.exclusive });\n    },\n\n    hidden: function(element) {\n      var bo = getBusinessObject(element);\n      return bo && !isAsyncAfter(bo) && !isAsyncBefore(bo);\n    }\n  });\n\n  return [ asyncBeforeEntry, asyncAfterEntry, exclusiveEntry ];\n};\n","const Linter = require('./linter');\n\nmodule.exports = {\n  Linter\n};","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\n\nvar find = require('lodash/find');\n\n\nvar TEMPLATE_ATTR = 'camunda:modelerTemplate';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template is stored.\n *\n * @type {String}\n */\nmodule.exports.TEMPLATE_ATTR = TEMPLATE_ATTR;\n\n\n/**\n * Get template id for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nfunction getTemplateId(element) {\n\n  var bo = getBusinessObject(element);\n\n  if (bo) {\n    return bo.get(TEMPLATE_ATTR);\n  }\n}\n\nmodule.exports.getTemplateId = getTemplateId;\n\n\n/**\n * Get template of a given element.\n *\n * @param {Element} element\n * @param {ElementTemplates} elementTemplates\n *\n * @return {TemplateDefinition}\n */\nfunction getTemplate(element, elementTemplates) {\n  var id = getTemplateId(element);\n\n  return id && elementTemplates.get(id);\n}\n\nmodule.exports.getTemplate = getTemplate;\n\n/**\n * Get default template for a given element.\n *\n * @param {Element} element\n * @param {ElementTemplates} elementTemplates\n *\n * @return {TemplateDefinition}\n */\nfunction getDefaultTemplate(element, elementTemplates) {\n\n  // return first default template, if any exists\n  return (\n    elementTemplates.getAll().filter(function(t) {\n      return isAny(element, t.appliesTo) && t.isDefault;\n    })\n  )[0];\n}\n\nmodule.exports.getDefaultTemplate = getDefaultTemplate;\n\n\n/**\n * Find extension with given type in\n * BPMN element, diagram element or ExtensionElement.\n *\n * @param {ModdleElement|djs.model.Base} element\n * @param {String} type\n *\n * @return {ModdleElement} the extension\n */\nfunction findExtension(element, type) {\n  var bo = getBusinessObject(element);\n\n  var extensionElements;\n\n  if (is(bo, 'bpmn:ExtensionElements')) {\n    extensionElements = bo;\n  } else {\n    extensionElements = bo.extensionElements;\n  }\n\n  if (!extensionElements) {\n    return null;\n  }\n\n  return find(extensionElements.get('values'), function(e) {\n    return is(e, type);\n  });\n}\n\nmodule.exports.findExtension = findExtension;\n\n\nfunction findExtensions(element, types) {\n  var extensionElements = getExtensionElements(element);\n\n  if (!extensionElements) {\n    return [];\n  }\n\n  return extensionElements.get('values').filter(function(e) {\n    return isAny(e, types);\n  });\n}\n\nmodule.exports.findExtensions = findExtensions;\n\n\nfunction findCamundaInOut(element, binding) {\n\n  var extensionElements = getExtensionElements(element);\n\n  if (!extensionElements) {\n    return;\n  }\n\n  var matcher;\n\n  if (binding.type === 'camunda:in') {\n    matcher = function(e) {\n      return is(e, 'camunda:In') && isInOut(e, binding);\n    };\n  } else\n  if (binding.type === 'camunda:out') {\n    matcher = function(e) {\n      return is(e, 'camunda:Out') && isInOut(e, binding);\n    };\n  } else\n  if (binding.type === 'camunda:in:businessKey') {\n    matcher = function(e) {\n      return is(e, 'camunda:In') && 'businessKey' in e;\n    };\n  }\n\n  return find(extensionElements.get('values'), matcher);\n}\n\nmodule.exports.findCamundaInOut = findCamundaInOut;\n\nfunction findCamundaProperty(camundaProperties, binding) {\n  return find(camundaProperties.get('values'), function(p) {\n    return p.name === binding.name;\n  });\n}\n\nmodule.exports.findCamundaProperty = findCamundaProperty;\n\n\nfunction findInputParameter(inputOutput, binding) {\n  var parameters = inputOutput.get('inputParameters');\n\n  return find(parameters, function(p) {\n    return p.name === binding.name;\n  });\n}\n\nmodule.exports.findInputParameter = findInputParameter;\n\n\nfunction findOutputParameter(inputOutput, binding) {\n  var parameters = inputOutput.get('outputParameters');\n\n  return find(parameters, function(p) {\n    var value = p.value;\n\n    if (!binding.scriptFormat) {\n      return value === binding.source;\n    }\n\n    var definition = p.definition;\n\n    if (!definition || binding.scriptFormat !== definition.scriptFormat) {\n      return false;\n    }\n\n    return definition.value === binding.source;\n  });\n}\n\nmodule.exports.findOutputParameter = findOutputParameter;\n\n\n\n// helpers /////////////////////////////////\n\nfunction getExtensionElements(element) {\n  var bo = getBusinessObject(element);\n\n  if (is(bo, 'bpmn:ExtensionElements')) {\n    return bo;\n  } else {\n    return bo.extensionElements;\n  }\n}\n\n\nfunction isInOut(element, binding) {\n\n  if (binding.type === 'camunda:in') {\n    // find based on target attribute\n    if (binding.target) {\n      return element.target === binding.target;\n    }\n  }\n\n  if (binding.type === 'camunda:out') {\n    // find based on source / sourceExpression\n    if (binding.source) {\n      return element.source === binding.source;\n    }\n\n    if (binding.sourceExpression) {\n      return element.sourceExpression === binding.sourceExpression;\n    }\n  }\n\n  // find based variables / local combination\n  if (binding.variables) {\n    return element.variables === 'all' && (\n      binding.variables !== 'local' || element.local\n    );\n  }\n}\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","export {\n  default as escapeCSS\n} from 'css.escape';\n\nvar HTML_ESCAPE_MAP = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nexport function escapeHTML(str) {\n  str = '' + str;\n\n  return str && str.replace(/[&<>\"']/g, function(match) {\n    return HTML_ESCAPE_MAP[match];\n  });\n}\n","import { Linter } from 'bpmnlint';\nimport { reduce, groupBy, assign } from 'min-dash';\nimport { domify } from 'min-dom';\nimport { escapeHTML } from 'diagram-js/lib/util/EscapeUtil';\n\nfunction EditorActions(injector, linting) {\n  var editorActions = injector.get('editorActions', false);\n\n  editorActions && editorActions.register({\n    toggleLinting: function() {\n      linting.toggle();\n    }\n  });\n}\n\nEditorActions.$inject = [\n  'injector',\n  'linting'\n];\n\nvar ErrorSvg = \"<svg width=\\\"12\\\" height=\\\"12\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 352 512\\\"><path fill=\\\"currentColor\\\" d=\\\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\\\"></path></svg>\";\n\nvar WarningSvg = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"12\\\" height=\\\"12\\\" viewBox=\\\"0 0 512 512\\\"><path fill=\\\"currentColor\\\" d=\\\"M288 328.83c-45.518 0-82.419 34.576-82.419 77.229 0 42.652 36.9 77.229 82.419 77.229 45.518 0 82.419-34.577 82.419-77.23 0-42.652-36.9-77.229-82.419-77.229zM207.439 57.034l11.61 204.348c.544 9.334 8.78 16.64 18.755 16.64h100.392c9.975 0 18.211-7.306 18.754-16.64l11.611-204.348c.587-10.082-7.98-18.56-18.754-18.56H226.192c-10.775 0-19.34 8.478-18.753 18.56z\\\"/></svg>\";\n\nvar SuccessSvg = \"<svg width=\\\"12\\\" height=\\\"12\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path fill=\\\"currentColor\\\" d=\\\"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\\\"></path></svg>\";\n\nvar OFFSET_TOP = -7,\r\n    OFFSET_RIGHT = -7;\r\n\r\nvar LOW_PRIORITY = 500;\r\n\r\nvar emptyConfig = {\r\n  resolver: {\r\n    resolveRule: function() {\r\n      return null;\r\n    }\r\n  },\r\n  config: {}\r\n};\r\n\r\nvar stateToIcon = {\r\n  error: ErrorSvg,\r\n  warning: WarningSvg,\r\n  success: SuccessSvg,\r\n  inactive: SuccessSvg\r\n};\r\n\r\nfunction Linting(\r\n    bpmnjs,\r\n    canvas,\r\n    config,\r\n    elementRegistry,\r\n    eventBus,\r\n    overlays,\r\n    translate\r\n) {\r\n  this._bpmnjs = bpmnjs;\r\n  this._canvas = canvas;\r\n  this._elementRegistry = elementRegistry;\r\n  this._eventBus = eventBus;\r\n  this._overlays = overlays;\r\n  this._translate = translate;\r\n\r\n  this._issues = {};\r\n\r\n  this._active = config && config.active || false;\r\n  this._linterConfig = emptyConfig;\r\n\r\n  this._overlayIds = {};\r\n\r\n  var self = this;\r\n\r\n  eventBus.on([\r\n    'import.done',\r\n    'elements.changed',\r\n    'linting.configChanged',\r\n    'linting.toggle'\r\n  ], LOW_PRIORITY, function(e) {\r\n    if (self.isActive()) {\r\n      self.update();\r\n    }\r\n  });\r\n\r\n  eventBus.on('linting.toggle', function(event) {\r\n\r\n    const active = event.active;\r\n\r\n    if (!active) {\r\n      self._clearIssues();\r\n      self._updateButton();\r\n    }\r\n  });\r\n\r\n  eventBus.on('diagram.clear', function() {\r\n    self._clearIssues();\r\n  });\r\n\r\n  var linterConfig = config && config.bpmnlint;\r\n\r\n  linterConfig && eventBus.once('diagram.init', function() {\r\n\r\n    // bail out if config was already provided\r\n    // during initialization of other modules\r\n    if (self.getLinterConfig() !== emptyConfig) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      self.setLinterConfig(linterConfig);\r\n    } catch (err) {\r\n      console.error(\r\n        '[bpmn-js-bpmnlint] Invalid lint rules configured. ' +\r\n        'Please doublecheck your linting.bpmnlint configuration, ' +\r\n        'cf. https://github.com/bpmn-io/bpmn-js-bpmnlint#configure-lint-rules'\r\n      );\r\n    }\r\n  });\r\n\r\n  this._init();\r\n}\r\n\r\nLinting.prototype.setLinterConfig = function(linterConfig) {\r\n\r\n  if (!linterConfig.config || !linterConfig.resolver) {\r\n    throw new Error('Expected linterConfig = { config, resolver }');\r\n  }\r\n\r\n  this._linterConfig = linterConfig;\r\n\r\n  this._eventBus.fire('linting.configChanged');\r\n};\r\n\r\nLinting.prototype.getLinterConfig = function() {\r\n  return this._linterConfig;\r\n};\r\n\r\nLinting.prototype._init = function() {\r\n  this._createButton();\r\n\r\n  this._updateButton();\r\n};\r\n\r\nLinting.prototype.isActive = function() {\r\n  return this._active;\r\n};\r\n\r\nLinting.prototype._formatIssues = function(issues) {\r\n\r\n  const reports = reduce(issues, function(reports, ruleReports, rule) {\r\n\r\n    return reports.concat(ruleReports.map(function(report) {\r\n      report.rule = rule;\r\n\r\n      return report;\r\n    }));\r\n\r\n  }, []);\r\n\r\n  return groupBy(reports, function(report) {\r\n    return report.id;\r\n  });\r\n};\r\n\r\n/**\r\n * Toggle linting on or off.\r\n *\r\n * @param {boolean} [newActive]\r\n *\r\n * @return {boolean} the new active state\r\n */\r\nLinting.prototype.toggle = function(newActive) {\r\n\r\n  newActive = typeof newActive === 'undefined' ? !this.isActive() : newActive;\r\n\r\n  this._setActive(newActive);\r\n\r\n  return newActive;\r\n};\r\n\r\nLinting.prototype._setActive = function(active) {\r\n\r\n  if (this._active === active) {\r\n    return;\r\n  }\r\n\r\n  this._active = active;\r\n\r\n  this._eventBus.fire('linting.toggle', { active: active });\r\n};\r\n\r\n/**\r\n * Update overlays. Always lint and check wether overlays need update or not.\r\n */\r\nLinting.prototype.update = function() {\r\n  var self = this;\r\n\r\n  var definitions = this._bpmnjs.getDefinitions();\r\n\r\n  if (!definitions) {\r\n    return;\r\n  }\r\n\r\n  var lintStart = this._lintStart = Math.random();\r\n\r\n  this.lint().then(function(newIssues) {\r\n\r\n    if (self._lintStart !== lintStart) {\r\n      return;\r\n    }\r\n\r\n    newIssues = self._formatIssues(newIssues);\r\n\r\n    var remove = {},\r\n        update = {},\r\n        add = {};\r\n\r\n    for (var id1 in self._issues) {\r\n      if (!newIssues[id1]) {\r\n        remove[id1] = self._issues[id1];\r\n      }\r\n    }\r\n\r\n    for (var id2 in newIssues) {\r\n      if (!self._issues[id2]) {\r\n        add[id2] = newIssues[id2];\r\n      } else {\r\n        if (newIssues[id2] !== self._issues[id2]) {\r\n          update[id2] = newIssues[id2];\r\n        }\r\n      }\r\n    }\r\n\r\n    remove = assign(remove, update);\r\n    add = assign(add, update);\r\n\r\n    self._clearOverlays();\r\n    self._createIssues(add);\r\n\r\n    self._issues = newIssues;\r\n\r\n    self._updateButton();\r\n\r\n    self._fireComplete(newIssues);\r\n  });\r\n};\r\n\r\nLinting.prototype._fireComplete = function(issues) {\r\n  this._eventBus.fire('linting.completed', { issues: issues });\r\n};\r\n\r\nLinting.prototype._createIssues = function(issues) {\r\n  for (var id in issues) {\r\n    this._createElementIssues(id, issues[id]);\r\n  }\r\n};\r\n\r\n/**\r\n * Create overlays for an elements issues.\r\n *\r\n * @param {string} elementId - Elements ID.\r\n * @param {Array} elementIssues - All element issues including warnings and errors.\r\n */\r\nLinting.prototype._createElementIssues = function(elementId, elementIssues) {\r\n  var element = this._elementRegistry.get(elementId);\r\n\r\n  if (!element) {\r\n    return;\r\n  }\r\n\r\n  var menuPosition;\r\n  var position;\r\n\r\n  if (element === this._canvas.getRootElement()) {\r\n    menuPosition = 'bottom-right';\r\n\r\n    position = {\r\n      top: 20,\r\n      left: 150\r\n    };\r\n  } else {\r\n    menuPosition = 'top-right';\r\n\r\n    position = {\r\n      top: OFFSET_TOP,\r\n      left: OFFSET_RIGHT\r\n    };\r\n  }\r\n\r\n  var issuesByType = groupBy(elementIssues, function(elementIssue) {\r\n    return elementIssue.category;\r\n  });\r\n\r\n  var errors = issuesByType.error,\r\n      warnings = issuesByType.warn;\r\n\r\n  if (!errors && !warnings) {\r\n    return;\r\n  }\r\n\r\n  var $html = domify(\r\n    '<div class=\"bjsl-overlay bjsl-issues-' + menuPosition + '\"></div>'\r\n  );\r\n\r\n  var $icon = errors\r\n    ? domify('<div class=\"bjsl-icon bjsl-icon-error\">' + ErrorSvg + '</div>')\r\n    : domify('<div class=\"bjsl-icon bjsl-icon-warning\">' + WarningSvg + '</div>');\r\n\r\n  var $dropdown = domify('<div class=\"bjsl-dropdown\"></div>');\r\n  var $dropdownContent = domify('<div class=\"bjsl-dropdown-content\"></div>');\r\n  var $issues = domify('<div class=\"bjsl-issues\"></div>');\r\n  var $issueList = domify('<ul></ul>');\r\n\r\n  $html.appendChild($icon);\r\n  $html.appendChild($dropdown);\r\n\r\n  $dropdown.appendChild($dropdownContent);\r\n  $dropdownContent.appendChild($issues);\r\n\r\n  $issues.appendChild($issueList);\r\n\r\n  if (errors) {\r\n    this._addErrors($issueList, errors);\r\n  }\r\n\r\n  if (warnings) {\r\n    this._addWarnings($issueList, warnings);\r\n  }\r\n\r\n  this._overlayIds[elementId] = this._overlays.add(element, 'linting', {\r\n    position: position,\r\n    html: $html,\r\n    scale: {\r\n      min: .9\r\n    }\r\n  });\r\n};\r\n\r\nLinting.prototype._addErrors = function($ul, errors) {\r\n\r\n  var self = this;\r\n\r\n  errors.forEach(function(error) {\r\n    self._addEntry($ul, 'error', error);\r\n  });\r\n};\r\n\r\nLinting.prototype._addWarnings = function($ul, warnings) {\r\n\r\n  var self = this;\r\n\r\n  warnings.forEach(function(error) {\r\n    self._addEntry($ul, 'warning', error);\r\n  });\r\n};\r\n\r\nLinting.prototype._addEntry = function($ul, state, entry) {\r\n\r\n  var rule = entry.rule,\r\n      message = this._translate(entry.message);\r\n\r\n  var icon = stateToIcon[state];\r\n\r\n  var $entry = domify(\r\n    '<li class=\"' + state + '\">' +\r\n      icon +\r\n      '<a title=\"' + escapeHTML(rule) + ': ' + escapeHTML(message) + '\" ' +\r\n         'data-rule=\"' + escapeHTML(rule) + '\" ' +\r\n         'data-message=\"' + escapeHTML(message) + '\"' +\r\n      '>' +\r\n        escapeHTML(message) +\r\n      '</a>' +\r\n    '</li>'\r\n  );\r\n\r\n  $ul.appendChild($entry);\r\n};\r\n\r\nLinting.prototype._clearOverlays = function() {\r\n  this._overlays.remove({ type: 'linting' });\r\n\r\n  this._overlayIds = {};\r\n};\r\n\r\nLinting.prototype._clearIssues = function() {\r\n  this._issues = {};\r\n\r\n  this._clearOverlays();\r\n};\r\n\r\nLinting.prototype._setButtonState = function(state, errors, warnings) {\r\n  var button = this._button;\r\n\r\n  var icon = stateToIcon[state];\r\n\r\n  var html = icon + '<span>' + this._translate('{errors} Errors, {warnings} Warnings', { errors: errors.toString(), warnings: warnings.toString() }) + '</span>';\r\n\r\n  [\r\n    'error',\r\n    'inactive',\r\n    'success',\r\n    'warning'\r\n  ].forEach(function(s) {\r\n    if (state === s) {\r\n      button.classList.add('bjsl-button-' + s);\r\n    } else {\r\n      button.classList.remove('bjsl-button-' + s);\r\n    }\r\n  });\r\n\r\n  button.innerHTML = html;\r\n};\r\n\r\nLinting.prototype._updateButton = function() {\r\n\r\n  if (!this.isActive()) {\r\n    this._setButtonState('inactive', 0, 0);\r\n\r\n    return;\r\n  }\r\n\r\n  var errors = 0,\r\n      warnings = 0;\r\n\r\n  for (var id in this._issues) {\r\n    this._issues[id].forEach(function(issue) {\r\n      if (issue.category === 'error') {\r\n        errors++;\r\n      } else if (issue.category === 'warn') {\r\n        warnings++;\r\n      }\r\n    });\r\n  }\r\n\r\n  var state = (errors && 'error') || (warnings && 'warning') || 'success';\r\n\r\n  this._setButtonState(state, errors, warnings);\r\n};\r\n\r\nLinting.prototype._createButton = function() {\r\n\r\n  var self = this;\r\n\r\n  this._button = domify(\r\n    '<button class=\"bjsl-button bjsl-button-inactive\" title=\"' + this._translate('Toggle linting') + '\"></button>'\r\n  );\r\n\r\n  this._button.addEventListener('click', function() {\r\n    self.toggle();\r\n  });\r\n\r\n  this._canvas.getContainer().appendChild(this._button);\r\n};\r\n\r\nLinting.prototype.lint = function() {\r\n  var definitions = this._bpmnjs.getDefinitions();\r\n\r\n  var linter = new Linter(this._linterConfig);\r\n\r\n  return linter.lint(definitions);\r\n};\r\n\r\nLinting.$inject = [\r\n  'bpmnjs',\r\n  'canvas',\r\n  'config.linting',\r\n  'elementRegistry',\r\n  'eventBus',\r\n  'overlays',\r\n  'translate'\r\n];\n\nvar index = {\r\n  __init__: [ 'linting', 'lintingEditorActions' ],\r\n  linting: [ 'type', Linting ],\r\n  lintingEditorActions: ['type', EditorActions ]\r\n};\n\nexport default index;\n//# sourceMappingURL=index.esm.js.map\n","var isLaziable = require('./_isLaziable'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & WRAP_CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n  if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n    bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n  }\n  var newData = [\n    func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n    newHoldersRight, argPos, ary, arity\n  ];\n\n  var result = wrapFunc.apply(undefined, newData);\n  if (isLaziable(func)) {\n    setData(result, newData);\n  }\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n\nmodule.exports = createRecurry;\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: there’s no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, […]\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), […]\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), […]\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, […]\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), […]\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\n// input entities\nvar textInputField = require('./TextInputEntryFactory'),\n    checkboxField = require('./CheckboxEntryFactory'),\n    selectBoxField = require('./SelectEntryFactory'),\n    comboBoxField = require('./ComboEntryFactory'),\n    textBoxField = require('./TextBoxEntryFactory'),\n    validationAwareTextInputField = require('./ValidationAwareTextInput'),\n    tableField = require('./TableEntryFactory'),\n    labelEntry = require('./LabelFactory'),\n    link = require('./LinkEntryFactory');\n\nvar cmdHelper = require('../helper/CmdHelper');\n\n// helpers ////////////////////////////////////////\n\nfunction ensureNotNull(prop) {\n  if (!prop) {\n    throw new Error(prop + ' must be set.');\n  }\n\n  return prop;\n}\n\n/**\n * sets the default parameters which are needed to create an entry\n *\n * @param options\n * @returns {{id: *, description: (*|string), get: (*|Function), set: (*|Function),\n *            validate: (*|Function), html: string}}\n */\nvar setDefaultParameters = function(options) {\n\n  // default method to fetch the current value of the input field\n  var defaultGet = function(element) {\n    var bo = getBusinessObject(element),\n        res = {},\n        prop = ensureNotNull(options.modelProperty);\n    res[prop] = bo.get(prop);\n\n    return res;\n  };\n\n  // default method to set a new value to the input field\n  var defaultSet = function(element, values) {\n    var res = {},\n        prop = ensureNotNull(options.modelProperty);\n    if (values[prop] !== '') {\n      res[prop] = values[prop];\n    } else {\n      res[prop] = undefined;\n    }\n\n    return cmdHelper.updateProperties(element, res);\n  };\n\n  // default validation method\n  var defaultValidate = function() {\n    return {};\n  };\n\n  return {\n    id : options.id,\n    description : (options.description || ''),\n    get : (options.get || defaultGet),\n    set : (options.set || defaultSet),\n    validate : (options.validate || defaultValidate),\n    html: ''\n  };\n};\n\nfunction EntryFactory() {\n\n}\n\n/**\n * Generates an text input entry object for a property panel.\n * options are:\n * - id: id of the entry - String\n *\n * - description: description of the property - String\n *\n * - label: label for the input field - String\n *\n * - set: setter method - Function\n *\n * - get: getter method - Function\n *\n * - validate: validation mehtod - Function\n *\n * - modelProperty: name of the model property - String\n *\n * - buttonAction: Object which contains the following properties: - Object\n * ---- name: name of the [data-action] callback - String\n * ---- method: callback function for [data-action] - Function\n *\n * - buttonShow: Object which contains the following properties: - Object\n * ---- name: name of the [data-show] callback - String\n * ---- method: callback function for [data-show] - Function\n *\n * @param options\n * @returns the propertyPanel entry resource object\n */\nEntryFactory.textField = function(options) {\n  return textInputField(options, setDefaultParameters(options));\n};\n\nEntryFactory.validationAwareTextField = function(options) {\n  return validationAwareTextInputField(options, setDefaultParameters(options));\n};\n\n/**\n * Generates a checkbox input entry object for a property panel.\n * options are:\n * - id: id of the entry - String\n *\n * - description: description of the property - String\n *\n * - label: label for the input field - String\n *\n * - set: setter method - Function\n *\n * - get: getter method - Function\n *\n * - validate: validation method - Function\n *\n * - modelProperty: name of the model property - String\n *\n * @param options\n * @returns the propertyPanel entry resource object\n */\nEntryFactory.checkbox = function(options) {\n  return checkboxField(options, setDefaultParameters(options));\n};\n\nEntryFactory.textBox = function(options) {\n  return textBoxField(options, setDefaultParameters(options));\n};\n\nEntryFactory.selectBox = function(options) {\n  return selectBoxField(options, setDefaultParameters(options));\n};\n\nEntryFactory.comboBox = function(options) {\n  return comboBoxField(options);\n};\n\nEntryFactory.table = function(options) {\n  return tableField(options);\n};\n\nEntryFactory.label = function(options) {\n  return labelEntry(options);\n};\n\nEntryFactory.link = function(options) {\n  return link(options);\n};\n\nmodule.exports = EntryFactory;\n","/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\nmodule.exports = replaceHolders;\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var baseSetData = require('./_baseSetData'),\n    createBind = require('./_createBind'),\n    createCurry = require('./_createCurry'),\n    createHybrid = require('./_createHybrid'),\n    createPartial = require('./_createPartial'),\n    getData = require('./_getData'),\n    mergeData = require('./_mergeData'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString'),\n    toInteger = require('./toInteger');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *    1 - `_.bind`\n *    2 - `_.bindKey`\n *    4 - `_.curry` or `_.curryRight` of a bound function\n *    8 - `_.curry`\n *   16 - `_.curryRight`\n *   32 - `_.partial`\n *   64 - `_.partialRight`\n *  128 - `_.rearg`\n *  256 - `_.ary`\n *  512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n  var data = isBindKey ? undefined : getData(func);\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  if (data) {\n    mergeData(newData, data);\n  }\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] === undefined\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setWrapToString(setter(result, newData), func, bitmask);\n}\n\nmodule.exports = createWrap;\n","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar inputOutputParameter = require('./implementation/InputOutputParameter');\n\nmodule.exports = function(group, element, bpmnFactory, options, translate) {\n\n  options = assign({\n    idPrefix: 'connector-',\n    insideConnector: true\n  }, options);\n\n  group.entries = group.entries.concat(inputOutputParameter(element, bpmnFactory, options, translate));\n\n};\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable explicit method chain sequences.\n */\nfunction LodashWrapper(value, chainAll) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__chain__ = !!chainAll;\n  this.__index__ = 0;\n  this.__values__ = undefined;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nmodule.exports = LodashWrapper;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * The base implementation of methods like `_.xor`, without support for\n * iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of values.\n */\nfunction baseXor(arrays, iteratee, comparator) {\n  var length = arrays.length;\n  if (length < 2) {\n    return length ? baseUniq(arrays[0]) : [];\n  }\n  var index = -1,\n      result = Array(length);\n\n  while (++index < length) {\n    var array = arrays[index],\n        othIndex = -1;\n\n    while (++othIndex < length) {\n      if (othIndex != index) {\n        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n      }\n    }\n  }\n  return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n}\n\nmodule.exports = baseXor;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar candidateStarter = require('./implementation/CandidateStarter');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'camunda:Process') ||\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n\n    group.entries = group.entries.concat(candidateStarter(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        var bo = getBusinessObject(element);\n\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n\n        return bo.get('processRef');\n      }\n    }, translate));\n\n  }\n};\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    getExtensionElements = require('../../../helper/ExtensionElementsHelper').getExtensionElements,\n    removeEntry = require('../../../helper/ExtensionElementsHelper').removeEntry,\n    extensionElements = require('./implementation/ExtensionElements'),\n    properties = require('./implementation/Properties'),\n    entryFactory = require('../../../factory/EntryFactory'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    formHelper = require('../../../helper/FormHelper'),\n    utils = require('../../../Utils'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    find = require('lodash/find'),\n    each = require('lodash/forEach');\n\nfunction generateValueId() {\n  return utils.nextId('Value_');\n}\n\n/**\n * Generate a form field specific textField using entryFactory.\n *\n * @param  {string} options.id\n * @param  {string} options.label\n * @param  {string} options.modelProperty\n * @param  {function} options.validate\n *\n * @return {Object} an entryFactory.textField object\n */\nfunction formFieldTextField(options, getSelectedFormField) {\n\n  var id = options.id,\n      label = options.label,\n      modelProperty = options.modelProperty,\n      validate = options.validate;\n\n  return entryFactory.textField({\n    id: id,\n    label: label,\n    modelProperty: modelProperty,\n    get: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node) || {},\n          values = {};\n\n      values[modelProperty] = selectedFormField[modelProperty];\n\n      return values;\n    },\n\n    set: function(element, values, node) {\n      var commands = [];\n\n      if (typeof options.set === 'function') {\n        var cmd = options.set(element, values, node);\n\n        if (cmd) {\n          commands.push(cmd);\n        }\n      }\n\n      var formField = getSelectedFormField(element, node),\n          properties = {};\n\n      properties[modelProperty] = values[modelProperty] || undefined;\n\n      commands.push(cmdHelper.updateBusinessObject(element, formField, properties));\n\n      return commands;\n    },\n    hidden: function(element, node) {\n      return !getSelectedFormField(element, node);\n    },\n    validate: validate\n  });\n}\n\nfunction ensureFormKeyAndDataSupported(element) {\n  return (\n    is(element, 'bpmn:StartEvent') && !is(element.parent, 'bpmn:SubProcess')\n  ) || is(element, 'bpmn:UserTask');\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!ensureFormKeyAndDataSupported(element)) {\n    return;\n  }\n\n\n  /**\n   * Return the currently selected form field querying the form field select box\n   * from the DOM.\n   *\n   * @param  {djs.model.Base} element\n   * @param  {DOMElement} node - DOM element of any form field text input\n   *\n   * @return {ModdleElement} the currently selected form field\n   */\n  function getSelectedFormField(element, node) {\n    var selected = formFieldsEntry.getSelected(element, node.parentNode);\n\n    if (selected.idx === -1) {\n      return;\n    }\n\n    return formHelper.getFormField(element, selected.idx);\n  }\n\n  // [FormKey] form key text input field\n  group.entries.push(entryFactory.textField({\n    id : 'form-key',\n    label : translate('Form Key'),\n    modelProperty: 'formKey',\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n\n      return {\n        formKey: bo.get('camunda:formKey')\n      };\n    },\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element),\n          formKey = values.formKey || undefined;\n\n      return cmdHelper.updateBusinessObject(element, bo, { 'camunda:formKey': formKey });\n    }\n  }));\n\n  // [FormData] form field select box\n  var formFieldsEntry = extensionElements(element, bpmnFactory, {\n    id: 'form-fields',\n    label: translate('Form Fields'),\n    modelProperty: 'id',\n    prefix: 'FormField',\n    createExtensionElement: function(element, extensionElements, value) {\n      var bo = getBusinessObject(element), commands = [];\n\n      if (!extensionElements) {\n        extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n        commands.push(cmdHelper.updateProperties(element, { extensionElements: extensionElements }));\n      }\n\n      var formData = formHelper.getFormData(element);\n\n      if (!formData) {\n        formData = elementHelper.createElement('camunda:FormData', { fields: [] }, extensionElements, bpmnFactory);\n        commands.push(cmdHelper.addAndRemoveElementsFromList(\n          element,\n          extensionElements,\n          'values',\n          'extensionElements',\n          [formData],\n          []\n        ));\n      }\n\n      var field = elementHelper.createElement('camunda:FormField', { id: value }, formData, bpmnFactory);\n      if (typeof formData.fields !== 'undefined') {\n        commands.push(cmdHelper.addElementsTolist(element, formData, 'fields', [ field ]));\n      } else {\n        commands.push(cmdHelper.updateBusinessObject(element, formData, {\n          fields: [ field ]\n        }));\n      }\n      return commands;\n    },\n    removeExtensionElement: function(element, extensionElements, value, idx) {\n      var formData = getExtensionElements(getBusinessObject(element), 'camunda:FormData')[0],\n          entry = formData.fields[idx],\n          commands = [];\n\n      if (formData.fields.length < 2) {\n        commands.push(removeEntry(getBusinessObject(element), element, formData));\n      } else {\n        commands.push(cmdHelper.removeElementsFromList(element, formData, 'fields', null, [entry]));\n\n        if (entry.id === formData.get('businessKey')) {\n          commands.push(cmdHelper.updateBusinessObject(element, formData, { 'businessKey': undefined }));\n        }\n      }\n\n      return commands;\n    },\n    getExtensionElements: function(element) {\n      return formHelper.getFormFields(element);\n    },\n    hideExtensionElements: function(element, node) {\n      return false;\n    }\n  });\n  group.entries.push(formFieldsEntry);\n\n  // [FormData] business key form field select box\n  var formBusinessKeyFormFieldEntry = entryFactory.selectBox({\n    id: 'form-business-key',\n    label: translate('Business Key'),\n    modelProperty: 'businessKey',\n    selectOptions: function(element, inputNode) {\n      var selectOptions = [{ name: '', value: '' }];\n      var formFields = formHelper.getFormFields(element);\n      each(formFields, function(field) {\n        if (field.type !== 'boolean') {\n          selectOptions.push({ name: field.id, value: field.id });\n        }\n      });\n      return selectOptions;\n    },\n    get: function(element, node) {\n      var result = { businessKey: '' };\n      var bo = getBusinessObject(element);\n      var formDataExtension = getExtensionElements(bo, 'camunda:FormData');\n      if (formDataExtension) {\n        var formData = formDataExtension[0];\n        var storedValue = formData.get('businessKey');\n        result = { businessKey: storedValue };\n      }\n      return result;\n    },\n    set: function(element, values, node) {\n      var formData = getExtensionElements(getBusinessObject(element), 'camunda:FormData')[0];\n      return cmdHelper.updateBusinessObject(element, formData, { 'businessKey': values.businessKey || undefined });\n    },\n    hidden: function(element, node) {\n      var isStartEvent = is(element,'bpmn:StartEvent');\n      return !(isStartEvent && formHelper.getFormFields(element).length > 0);\n    }\n  });\n  group.entries.push(formBusinessKeyFormFieldEntry);\n\n  // [FormData] Form Field label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-header',\n    labelText: translate('Form Field'),\n    showLabel: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] form field id text input field\n  group.entries.push(entryFactory.validationAwareTextField({\n    id: 'form-field-id',\n    label: translate('ID'),\n    modelProperty: 'id',\n\n    getProperty: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node) || {};\n\n      return selectedFormField.id;\n    },\n\n    setProperty: function(element, properties, node) {\n      var formField = getSelectedFormField(element, node);\n\n      return cmdHelper.updateBusinessObject(element, formField, properties);\n    },\n\n    hidden: function(element, node) {\n      return !getSelectedFormField(element, node);\n    },\n\n    validate: function(element, values, node) {\n\n      var formField = getSelectedFormField(element, node);\n\n      if (formField) {\n\n        var idValue = values.id;\n\n        if (!idValue || idValue.trim() === '') {\n          return { id: 'Form field id must not be empty' };\n        }\n\n        var formFields = formHelper.getFormFields(element);\n\n        var existingFormField = find(formFields, function(f) {\n          return f !== formField && f.id === idValue;\n        });\n\n        if (existingFormField) {\n          return { id: 'Form field id already used in form data.' };\n        }\n      }\n    }\n  }));\n\n  // [FormData] form field type combo box\n  group.entries.push(entryFactory.comboBox({\n    id: 'form-field-type',\n    label: translate('Type'),\n    selectOptions: [\n      { name: 'string', value: 'string' },\n      { name: 'long', value: 'long' },\n      { name: 'boolean', value: 'boolean' },\n      { name: 'date', value: 'date' },\n      { name: 'enum', value: 'enum' }\n    ],\n    modelProperty: 'type',\n    emptyParameter: true,\n\n    get: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      if (selectedFormField) {\n        return { type: selectedFormField.type };\n      } else {\n        return {};\n      }\n    },\n    set: function(element, values, node) {\n      var selectedFormField = getSelectedFormField(element, node),\n          formData = getExtensionElements(getBusinessObject(element), 'camunda:FormData')[0],\n          commands = [];\n\n      if (selectedFormField.type === 'enum' && values.type !== 'enum') {\n        // delete camunda:value objects from formField.values when switching from type enum\n        commands.push(cmdHelper.updateBusinessObject(element, selectedFormField, { values: undefined }));\n      }\n      if (values.type === 'boolean' && selectedFormField.get('id') === formData.get('businessKey')) {\n        commands.push(cmdHelper.updateBusinessObject(element, formData, { 'businessKey': undefined }));\n      }\n      commands.push(cmdHelper.updateBusinessObject(element, selectedFormField, values));\n\n      return commands;\n    },\n    hidden: function(element, node) {\n      return !getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] form field label text input field\n  group.entries.push(formFieldTextField({\n    id: 'form-field-label',\n    label: translate('Label'),\n    modelProperty: 'label'\n  }, getSelectedFormField));\n\n  // [FormData] form field defaultValue text input field\n  group.entries.push(formFieldTextField({\n    id: 'form-field-defaultValue',\n    label: translate('Default Value'),\n    modelProperty: 'defaultValue'\n  }, getSelectedFormField));\n\n\n  // [FormData] form field enum values label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-enum-values-header',\n    labelText: translate('Values'),\n    divider: true,\n    showLabel: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      return selectedFormField && selectedFormField.type === 'enum';\n    }\n  }));\n\n  // [FormData] form field enum values table\n  group.entries.push(entryFactory.table({\n    id: 'form-field-enum-values',\n    labels: [ translate('Id'), translate('Name') ],\n    modelProperties: [ 'id', 'name' ],\n    show: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      return selectedFormField && selectedFormField.type === 'enum';\n    },\n    getElements: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      return formHelper.getEnumValues(selectedFormField);\n    },\n    addElement: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node),\n          id = generateValueId();\n\n      var enumValue = elementHelper.createElement(\n        'camunda:Value',\n        { id: id, name: undefined },\n        getBusinessObject(element),\n        bpmnFactory\n      );\n\n      return cmdHelper.addElementsTolist(element, selectedFormField, 'values', [enumValue]);\n    },\n    removeElement: function(element, node, idx) {\n      var selectedFormField = getSelectedFormField(element, node),\n          enumValue = selectedFormField.values[idx];\n\n      return cmdHelper.removeElementsFromList(element, selectedFormField, 'values', null, [enumValue]);\n    },\n    updateElement: function(element, value, node, idx) {\n      var selectedFormField = getSelectedFormField(element, node),\n          enumValue = selectedFormField.values[idx];\n\n      value.name = value.name || undefined;\n      return cmdHelper.updateBusinessObject(element, enumValue, value);\n    },\n    validate: function(element, value, node, idx) {\n\n      var selectedFormField = getSelectedFormField(element, node),\n          enumValue = selectedFormField.values[idx];\n\n      if (enumValue) {\n        // check if id is valid\n        var validationError = utils.isIdValid(enumValue, value.id, translate);\n\n        if (validationError) {\n          return { id: validationError };\n        }\n      }\n    }\n  }));\n\n  // [FormData] Validation label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-validation-header',\n    labelText: translate('Validation'),\n    divider: true,\n    showLabel: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] form field constraints table\n  group.entries.push(entryFactory.table({\n    id: 'constraints-list',\n    modelProperties: [ 'name', 'config' ],\n    labels: [ translate('Name'), translate('Config') ],\n    addLabel: translate('Add Constraint'),\n    getElements: function(element, node) {\n      var formField = getSelectedFormField(element, node);\n\n      return formHelper.getConstraints(formField);\n    },\n    addElement: function(element, node) {\n\n      var commands = [],\n          formField = getSelectedFormField(element, node),\n          validation = formField.validation;\n\n      if (!validation) {\n        // create validation business object and add it to form data, if it doesn't exist\n        validation = elementHelper.createElement('camunda:Validation', {}, getBusinessObject(element), bpmnFactory);\n\n        commands.push(cmdHelper.updateBusinessObject(element, formField, { 'validation': validation }));\n      }\n\n      var newConstraint = elementHelper.createElement(\n        'camunda:Constraint',\n        { name: undefined, config: undefined },\n        validation,\n        bpmnFactory\n      );\n\n      commands.push(cmdHelper.addElementsTolist(element, validation, 'constraints', [ newConstraint ]));\n\n      return commands;\n    },\n    updateElement: function(element, value, node, idx) {\n      var formField = getSelectedFormField(element, node),\n          constraint = formHelper.getConstraints(formField)[idx];\n\n      value.name = value.name || undefined;\n      value.config = value.config || undefined;\n\n      return cmdHelper.updateBusinessObject(element, constraint, value);\n    },\n    removeElement: function(element, node, idx) {\n      var commands = [],\n          formField = getSelectedFormField(element, node),\n          constraints = formHelper.getConstraints(formField),\n          currentConstraint = constraints[idx];\n\n      commands.push(cmdHelper.removeElementsFromList(\n        element,\n        formField.validation,\n        'constraints',\n        null,\n        [ currentConstraint ]\n      ));\n\n      if (constraints.length === 1) {\n        // remove camunda:validation if the last existing constraint has been removed\n        commands.push(cmdHelper.updateBusinessObject(element, formField, { validation: undefined }));\n      }\n\n      return commands;\n    },\n    show: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] Properties label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-properties-header',\n    labelText: translate('Properties'),\n    divider: true,\n    showLabel: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] camunda:properties table\n  group.entries.push(properties(element, bpmnFactory, {\n    id: 'form-field-properties',\n    modelProperties: [ 'id', 'value' ],\n    labels: [ translate('Id'), translate('Value') ],\n    getParent: function(element, node) {\n      return getSelectedFormField(element, node);\n    },\n    show: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }, translate));\n};\n","'use strict';\r\n\r\nvar entryFactory = require('../../../../factory/EntryFactory');\r\n\r\nvar cmdHelper = require('../../../../helper/CmdHelper');\r\n\r\nmodule.exports = function(element, bpmnFactory, options, translate) {\r\n\r\n  var getBusinessObject = options.getBusinessObject;\r\n\r\n  var isStartableInTasklistEntry = entryFactory.checkbox({\r\n    id: 'isStartableInTasklist',\r\n    label: translate('Startable'),\r\n    modelProperty: 'isStartableInTasklist',\r\n\r\n    get: function(element, node) {\r\n      var bo = getBusinessObject(element);\r\n      var isStartableInTasklist = bo.get('camunda:isStartableInTasklist');\r\n\r\n      return {\r\n        isStartableInTasklist: isStartableInTasklist ? isStartableInTasklist : ''\r\n      };\r\n    },\r\n\r\n    set: function(element, values) {\r\n      var bo = getBusinessObject(element);\r\n      return cmdHelper.updateBusinessObject(element, bo, {\r\n        'camunda:isStartableInTasklist': !!values.isStartableInTasklist\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return [\r\n    isStartableInTasklistEntry\r\n  ];\r\n};\r\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar participantHelper = require('../../../helper/ParticipantHelper');\n\nmodule.exports = function(group, element, translate) {\n\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(element, 'bpmn:Process') || (is(element, 'bpmn:Participant') && bo.get('processRef'))) {\n\n    var executableEntry = entryFactory.checkbox({\n      id: 'process-is-executable',\n      label: translate('Executable'),\n      modelProperty: 'isExecutable'\n    });\n\n    // in participants we have to change the default behavior of set and get\n    if (is(element, 'bpmn:Participant')) {\n      executableEntry.get = function(element) {\n        return participantHelper.getProcessBusinessObject(element, 'isExecutable');\n      };\n\n      executableEntry.set = function(element, values) {\n        return participantHelper.modifyProcessBusinessObject(element, 'isExecutable', values);\n      };\n    }\n\n    group.entries.push(executableEntry);\n  }\n\n};\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, escalationEventDefinition, showEscalationCodeVariable, translate) {\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, escalationEventDefinition, bpmnFactory, {\n    label: translate('Escalation'),\n    elementName: 'escalation',\n    elementType: 'bpmn:Escalation',\n    referenceProperty: 'escalationRef',\n    newElementIdPrefix: 'Escalation_'\n  }));\n\n\n  group.entries = group.entries.concat(elementReferenceProperty(element, escalationEventDefinition, bpmnFactory, {\n    id: 'escalation-element-name',\n    label: translate('Escalation Name'),\n    referenceProperty: 'escalationRef',\n    modelProperty: 'name',\n    shouldValidate: true\n  }));\n\n\n  group.entries = group.entries.concat(elementReferenceProperty(element, escalationEventDefinition, bpmnFactory, {\n    id: 'escalation-element-code',\n    label: translate('Escalation Code'),\n    referenceProperty: 'escalationRef',\n    modelProperty: 'escalationCode'\n  }));\n\n\n  if (showEscalationCodeVariable) {\n    group.entries.push(entryFactory.textField({\n      id : 'escalationCodeVariable',\n      label : translate('Escalation Code Variable'),\n      modelProperty : 'escalationCodeVariable',\n\n      get: function(element) {\n        var codeVariable = escalationEventDefinition.get('camunda:escalationCodeVariable');\n        return {\n          escalationCodeVariable: codeVariable\n        };\n      },\n\n      set: function(element, values) {\n        return cmdHelper.updateBusinessObject(element, escalationEventDefinition, {\n          'camunda:escalationCodeVariable': values.escalationCodeVariable || undefined\n        });\n      }\n    }));\n  }\n};\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var baseSetData = require('./_baseSetData'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity\n * function to avoid garbage collection pauses in V8. See\n * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = shortOut(baseSetData);\n\nmodule.exports = setData;\n","'use strict';\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nvar domQuery = require('min-dom').query,\n    domify = require('min-dom').domify,\n    domAttr = require('min-dom').attr;\n\nvar forEach = require('lodash/forEach'),\n    find = require('lodash/find');\n\nvar elementHelper = require('../../../../helper/ElementHelper');\nvar utils = require('../../../../Utils'),\n    escapeHTML = utils.escapeHTML;\n\nvar selector = 'select[name=selectedElement]';\n\n/**\n * Get select box containing all elements.\n *\n * @param {DOMElement} node\n *\n * @return {DOMElement} the select box\n */\nfunction getSelectBox(node) {\n  return domQuery(selector, node.parentElement);\n}\n\n/**\n * Find element by given id.\n *\n * @param {ModdleElement} eventDefinition\n *\n * @return {ModdleElement} an element\n */\nfunction findElementById(eventDefinition, type, id) {\n  var elements = utils.findRootElementsByType(eventDefinition, type);\n  return find(elements, function(element) {\n    return element.id === id;\n  });\n}\n\n/**\n * Create an entry to modify the reference to an element from an\n * event definition.\n *\n * @param  {djs.model.Base} element\n * @param  {ModdleElement} definition\n * @param  {BpmnFactory} bpmnFactory\n * @param  {Object} options\n * @param  {string} options.label the label of the entry\n * @param  {string} options.description the description of the entry\n * @param  {string} options.elementName the name of the element\n * @param  {string} options.elementType the type of the element\n * @param  {string} options.referenceProperty the name of referencing property\n * @param  {string} options.newElementIdPrefix the prefix of a new created element\n *\n * @return {Array<Object>} return an array containing the entries\n */\nmodule.exports = function(element, definition, bpmnFactory, options) {\n\n  var elementName = options.elementName || '',\n      elementType = options.elementType,\n      referenceProperty = options.referenceProperty;\n\n  var newElementIdPrefix = options.newElementIdPrefix || 'elem_';\n\n  var label = options.label || '',\n      description = options.description || '';\n\n  var entries = [];\n\n  entries.push({\n\n    id: 'event-definitions-' + elementName,\n    description: description,\n    html: '<div class=\"bpp-row bpp-select\">' +\n             '<label for=\"camunda-' + escapeHTML(elementName) + '\">' + escapeHTML(label) + '</label>' +\n             '<div class=\"bpp-field-wrapper\">' +\n               '<select id=\"camunda-' + escapeHTML(elementName) + '\" name=\"selectedElement\" data-value>' +\n               '</select>' +\n               '<button class=\"add\" id=\"addElement\" data-action=\"addElement\"><span>+</span></button>' +\n             '</div>' +\n          '</div>',\n\n    get: function(element, entryNode) {\n      utils.updateOptionsDropDown(selector, definition, elementType, entryNode);\n      var reference = definition.get(referenceProperty);\n      return {\n        selectedElement: (reference && reference.id) || ''\n      };\n    },\n\n    set: function(element, values) {\n      var selection = values.selectedElement;\n\n      var props = {};\n\n      if (!selection || typeof selection === 'undefined') {\n        // remove reference to element\n        props[referenceProperty] = undefined;\n        return cmdHelper.updateBusinessObject(element, definition, props);\n      }\n\n      var commands = [];\n\n      var selectedElement = findElementById(definition, elementType, selection);\n      if (!selectedElement) {\n        var root = utils.getRoot(definition);\n\n        // create a new element\n        selectedElement = elementHelper.createElement(elementType, { name: selection }, root, bpmnFactory);\n        commands.push(cmdHelper.addAndRemoveElementsFromList(element, root, 'rootElements', null, [ selectedElement ]));\n      }\n\n      // update reference to element\n      props[referenceProperty] = selectedElement;\n      commands.push(cmdHelper.updateBusinessObject(element, definition, props));\n\n      return commands;\n    },\n\n    addElement: function(element, inputNode) {\n      // note: this generated id will be used as name\n      // of the element and not as id\n      var id = utils.nextId(newElementIdPrefix);\n\n      var optionTemplate = domify('<option value=\"' + escapeHTML(id) + '\"> (id='+escapeHTML(id)+')' + '</option>');\n\n      // add new option\n      var selectBox = getSelectBox(inputNode);\n      selectBox.insertBefore(optionTemplate, selectBox.firstChild);\n\n      // select new element in the select box\n      forEach(selectBox, function(option) {\n        if (option.value === id) {\n          domAttr(option, 'selected', 'selected');\n        } else {\n          domAttr(option, 'selected', null);\n        }\n      });\n\n      return true;\n    }\n\n  });\n\n  return entries;\n\n};\n","'use strict';\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, messageEventDefinition, translate) {\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, messageEventDefinition, bpmnFactory, {\n    label: translate('Message'),\n    elementName: 'message',\n    elementType: 'bpmn:Message',\n    referenceProperty: 'messageRef',\n    newElementIdPrefix: 'Message_'\n  }));\n\n\n  group.entries = group.entries.concat(elementReferenceProperty(element, messageEventDefinition, bpmnFactory, {\n    id: 'message-element-name',\n    label: translate('Message Name'),\n    referenceProperty: 'messageRef',\n    modelProperty: 'name',\n    shouldValidate: true\n  }));\n\n};\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar jobPriority = require('./implementation/JobPriority'),\n    jobRetryTimeCycle = require('./implementation/JobRetryTimeCycle');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'camunda:JobPriorized') ||\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n\n    group.entries = group.entries.concat(jobPriority(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        var bo = getBusinessObject(element);\n\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n\n        return bo.get('processRef');\n      }\n    }, translate));\n  }\n\n  if (is(element, 'camunda:AsyncCapable')) {\n    group.entries = group.entries.concat(jobRetryTimeCycle(element, bpmnFactory, {\n      getBusinessObject: getBusinessObject\n    }, translate));\n  }\n\n};\n","'use strict';\n\nvar extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar utils = require('../../../../Utils');\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar extensionElementsEntry = require('./ExtensionElements');\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    getBusinessObject = ModelUtil.getBusinessObject;\n\nvar assign = require('lodash/assign');\n\n\nvar DEFAULT_PROPS = {\n  'stringValue': undefined,\n  'string': undefined,\n  'expression': undefined\n};\n\nvar CAMUNDA_FIELD_EXTENSION_ELEMENT = 'camunda:Field';\n\nmodule.exports = function(element, bpmnFactory, translate, options) {\n\n  options = options || {};\n\n  var insideListener = !!options.insideListener,\n      idPrefix = options.idPrefix || '',\n      getSelectedListener = options.getSelectedListener,\n      businessObject = options.businessObject || getBusinessObject(element);\n\n  var entries = [];\n\n  var isSelected = function(element, node) {\n    return getSelectedField(element, node);\n  };\n\n  function getSelectedField(element, node) {\n    var selected = fieldEntry.getSelected(element, node.parentNode);\n\n    if (selected.idx === -1) {\n      return;\n    }\n\n    var fields = getCamundaFields(element, node);\n\n    return fields[selected.idx];\n  }\n\n  function getCamundaFields(element, node) {\n    if (!insideListener) {\n      return (\n        businessObject &&\n        extensionElementsHelper.getExtensionElements(businessObject, CAMUNDA_FIELD_EXTENSION_ELEMENT)\n      ) || [];\n    }\n    return getCamundaListenerFields(element, node);\n  }\n\n  function getCamundaListenerFields(element, node) {\n    var selectedListener = getSelectedListener(element, node);\n    return selectedListener && selectedListener.fields || [];\n  }\n\n  function getFieldType(bo) {\n    var fieldType = 'string';\n\n    var expressionValue = bo && bo.expression;\n    var stringValue = bo && (bo.string || bo.stringValue);\n\n    if (typeof stringValue !== 'undefined') {\n      fieldType = 'string';\n    } else if (typeof expressionValue !== 'undefined') {\n      fieldType = 'expression';\n    }\n\n    return fieldType;\n  }\n\n  var setOptionLabelValue = function() {\n    return function(element, node, option, property, value, idx) {\n      var camundaFields = getCamundaFields(element, node);\n      var field = camundaFields[idx];\n\n      value = (field.name) ? field.name : '<empty>';\n\n      var label = idx + ' : ' + value;\n\n      option.text = label;\n    };\n  };\n\n  var newElement = function() {\n    return function(element, extensionElements, value, node) {\n\n      var props = {\n        name: '',\n        string: ''\n      };\n\n      var newFieldElem;\n\n      if (!insideListener) {\n\n        newFieldElem = elementHelper.createElement(CAMUNDA_FIELD_EXTENSION_ELEMENT, props, extensionElements, bpmnFactory);\n        return cmdHelper.addElementsTolist(element, extensionElements, 'values', [ newFieldElem ]);\n\n      } else {\n\n        var selectedListener = getSelectedListener(element, node);\n        newFieldElem = elementHelper.createElement(CAMUNDA_FIELD_EXTENSION_ELEMENT, props, selectedListener, bpmnFactory);\n        return cmdHelper.addElementsTolist(element, selectedListener, 'fields', [ newFieldElem ]);\n\n      }\n\n    };\n  };\n\n  var removeElement = function() {\n    return function(element, extensionElements, value, idx, node) {\n      var camundaFields= getCamundaFields(element, node);\n      var field = camundaFields[idx];\n      if (field) {\n        if (!insideListener) {\n          return extensionElementsHelper.removeEntry(businessObject, element, field);\n        }\n        var selectedListener = getSelectedListener(element, node);\n        return cmdHelper.removeElementsFromList(element, selectedListener, 'fields', null, [ field ]);\n      }\n    };\n  };\n\n\n  var fieldEntry = extensionElementsEntry(element, bpmnFactory, {\n    id : idPrefix + 'fields',\n    label : translate('Fields'),\n    modelProperty: 'fieldName',\n    idGeneration: 'false',\n\n    businessObject: businessObject,\n\n    createExtensionElement: newElement(),\n    removeExtensionElement: removeElement(),\n\n    getExtensionElements: function(element, node) {\n      return getCamundaFields(element, node);\n    },\n\n    setOptionLabelValue: setOptionLabelValue()\n\n  });\n  entries.push(fieldEntry);\n\n\n  entries.push(entryFactory.validationAwareTextField({\n    id: idPrefix + 'field-name',\n    label: translate('Name'),\n    modelProperty: 'fieldName',\n\n    getProperty: function(element, node) {\n      return (getSelectedField(element, node) || {}).name;\n    },\n\n    setProperty: function(element, values, node) {\n      var selectedField = getSelectedField(element, node);\n      return cmdHelper.updateBusinessObject(element, selectedField, { name : values.fieldName });\n    },\n\n    validate: function(element, values, node) {\n      var bo = getSelectedField(element, node);\n\n      var validation = {};\n      if (bo) {\n        var nameValue = values.fieldName;\n\n        if (nameValue) {\n          if (utils.containsSpace(nameValue)) {\n            validation.fieldName = translate('Name must not contain spaces');\n          }\n        } else {\n          validation.fieldName = translate('Parameter must have a name');\n        }\n      }\n\n      return validation;\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n  var fieldTypeOptions = [\n    {\n      name: translate('String'),\n      value: 'string'\n    },\n    {\n      name: translate('Expression'),\n      value: 'expression'\n    }\n  ];\n\n  entries.push(entryFactory.selectBox({\n    id: idPrefix + 'field-type',\n    label: translate('Type'),\n    selectOptions: fieldTypeOptions,\n    modelProperty: 'fieldType',\n\n    get: function(element, node) {\n      var bo = getSelectedField(element, node);\n\n      var fieldType = getFieldType(bo);\n\n      return {\n        fieldType: fieldType\n      };\n    },\n\n    set: function(element, values, node) {\n      var props = assign({}, DEFAULT_PROPS);\n\n      var fieldType = values.fieldType;\n\n      if (fieldType === 'string') {\n        props.string = '';\n      }\n      else if (fieldType === 'expression') {\n        props.expression = '';\n      }\n\n      return cmdHelper.updateBusinessObject(element, getSelectedField(element, node), props);\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  entries.push(entryFactory.textBox({\n    id: idPrefix + 'field-value',\n    label: translate('Value'),\n    modelProperty: 'fieldValue',\n\n    get: function(element, node) {\n      var bo = getSelectedField(element, node);\n      var fieldType = getFieldType(bo);\n\n      var fieldValue;\n\n      if (fieldType === 'string') {\n        fieldValue = bo && (bo.string || bo.stringValue);\n      }\n      else if (fieldType === 'expression') {\n        fieldValue = bo && bo.expression;\n      }\n\n      return {\n        fieldValue: fieldValue\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getSelectedField(element, node);\n      var fieldType = getFieldType(bo);\n\n      var props = assign({}, DEFAULT_PROPS);\n\n      var fieldValue = values.fieldValue || undefined;\n\n      if (fieldType === 'string') {\n        props.string = fieldValue;\n      }\n      else if (fieldType === 'expression') {\n        props.expression = fieldValue;\n      }\n\n      return cmdHelper.updateBusinessObject(element, bo, props);\n\n    },\n\n    validate: function(element, values, node) {\n      var bo = getSelectedField(element, node);\n\n      var validation = {};\n      if (bo) {\n        if (!values.fieldValue) {\n          validation.fieldValue = translate('Must provide a value');\n        }\n      }\n\n      return validation;\n    },\n\n    show: function(element, node) {\n      return isSelected(element, node);\n    }\n\n  }));\n\n  return entries;\n\n};\n","'use strict';\n\nvar textField = require('./TextInputEntryFactory');\n\n/**\n * This function is a wrapper around TextInputEntryFactory.\n * It adds functionality to cache an invalid value entered in the\n * text input, instead of setting it on the business object.\n */\nvar validationAwareTextField = function(options, defaultParameters) {\n\n  var modelProperty = options.modelProperty;\n\n  defaultParameters.get = function(element, node) {\n    var value = this.__lastInvalidValue;\n\n    delete this.__lastInvalidValue;\n\n    var properties = {};\n\n    properties[modelProperty] = value !== undefined ? value : options.getProperty(element, node);\n\n    return properties;\n  };\n\n  defaultParameters.set = function(element, values, node) {\n    var validationErrors = validate.apply(this, [ element, values, node ]),\n        propertyValue = values[modelProperty];\n\n    // make sure we do not update the id\n    if (validationErrors && validationErrors[modelProperty]) {\n      this.__lastInvalidValue = propertyValue;\n\n      return options.setProperty(element, {}, node);\n    } else {\n      var properties = {};\n\n      properties[modelProperty] = propertyValue;\n\n      return options.setProperty(element, properties, node);\n    }\n  };\n\n  var validate = defaultParameters.validate = function(element, values, node) {\n    var value = values[modelProperty] || this.__lastInvalidValue;\n\n    var property = {};\n    property[modelProperty] = value;\n\n    return options.validate(element, property, node);\n  };\n\n  return textField(options, defaultParameters);\n};\n\nmodule.exports = validationAwareTextField;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=style&index=0&id=8d3627ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=style&index=0&id=8d3627ba&scoped=true&lang=css&\"","var arrayEach = require('./_arrayEach'),\n    arrayIncludes = require('./_arrayIncludes');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256,\n    WRAP_FLIP_FLAG = 512;\n\n/** Used to associate wrap methods with their bit flags. */\nvar wrapFlags = [\n  ['ary', WRAP_ARY_FLAG],\n  ['bind', WRAP_BIND_FLAG],\n  ['bindKey', WRAP_BIND_KEY_FLAG],\n  ['curry', WRAP_CURRY_FLAG],\n  ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n  ['flip', WRAP_FLIP_FLAG],\n  ['partial', WRAP_PARTIAL_FLAG],\n  ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n  ['rearg', WRAP_REARG_FLAG]\n];\n\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function(pair) {\n    var value = '_.' + pair[0];\n    if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n\nmodule.exports = updateWrapDetails;\n","const {\n  isAny\n} = require('bpmnlint-utils');\n\n/**\n * A rule that checks that no fake join is modeled by attempting\n * to give a task or event join semantics.\n *\n * Users should model a parallel joining gateway\n * to achieve the desired behavior.\n */\nmodule.exports = function() {\n\n  function check(node, reporter) {\n\n    if (!isAny(node, [\n      'bpmn:Task',\n      'bpmn:Event'\n    ])) {\n      return;\n    }\n\n    const incoming = node.incoming || [];\n\n    if (incoming.length > 1) {\n      reporter.report(node.id, 'Incoming flows do not join');\n    }\n  }\n\n  return {\n    check\n  };\n\n};","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","import {\n  domify,\n  classes as domClasses,\n  matches as domMatches,\n  delegate as domDelegate,\n  query as domQuery,\n  queryAll as domQueryAll,\n  event as domEvent,\n  attr as domAttr\n} from 'min-dom';\n\nimport {\n  filter,\n  assign\n} from 'min-dash';\n\nimport createEmitter from 'mitt';\n\nvar DEFAULT_OPTIONS = {\n  scrollSymbolLeft: '‹',\n  scrollSymbolRight: '›'\n};\n\n\n/**\n * This component adds the functionality to scroll over a list of tabs.\n *\n * It adds scroll buttons on the left and right side of the tabs container\n * if not all tabs are visible. It also adds a mouse wheel listener on the\n * container.\n *\n * If either a button is clicked or the mouse wheel is used over the tabs,\n * a 'scroll' event is being fired. This event contains the node elements\n * of the new and old active tab, and the direction in which the tab has\n * changed relative to the old active tab.\n *\n * @example:\n * (1) provide a tabs-container:\n *\n * var $el = (\n *   <div>\n *     <!-- button added by scrollTabs -->\n *     <span class=\"scroll-tabs-button scroll-tabs-left\"></span>\n *     <ul class=\"my-tabs-container\">\n *       <li class=\"my-tab i-am-active\"></li>\n *       <li class=\"my-tab\"></li>\n *       <li class=\"my-tab ignore-me\"></li>\n *     </ul>\n *     <!-- button added by scrollTabs -->\n *     <span class=\"scroll-tabs-button scroll-tabs-right\"></span>\n *   </div>\n * );\n *\n *\n * (2) initialize scrollTabs:\n *\n *  var scroller = scrollTabs(tabBarNode, {\n *    selectors: {\n *      tabsContainer: '.my-tabs-container',\n *      tab: '.my-tab',\n *      ignore: '.ignore-me',\n *      active: '.i-am-active'\n *    }\n *  });\n *\n *\n * (3) listen to the scroll event:\n *\n * scroller.on('scroll', function(newActiveNode, oldActiveNode, direction) {\n *   // direction is any of (-1: left, 1: right)\n *   // activate the new active tab\n * });\n *\n *\n * (4) update the scroller if tabs change and or the tab container resizes:\n *\n * scroller.update();\n *\n *\n * @param  {DOMElement} el\n * @param  {Object} options\n * @param  {Object} options.selectors\n * @param  {String} options.selectors.tabsContainer the container all tabs are contained in\n * @param  {String} options.selectors.tab a single tab inside the tab container\n * @param  {String} options.selectors.ignore tabs that should be ignored during scroll left/right\n * @param  {String} options.selectors.active selector for the current active tab\n * @param  {String} [options.scrollSymbolLeft]\n * @param  {String} [options.scrollSymbolRight]\n */\nfunction ScrollTabs($el, options) {\n\n  // we are an event emitter\n  assign(this, createEmitter());\n\n  this.options = options = assign({}, DEFAULT_OPTIONS, options);\n  this.container = $el;\n\n  this._createScrollButtons($el, options);\n\n  this._bindEvents($el);\n}\n\n\n/**\n * Create a clickable scroll button\n *\n * @param {Object} options\n * @param {String} options.className\n * @param {String} options.label\n * @param {Number} options.direction\n *\n * @return {DOMElement} The created scroll button node\n */\nScrollTabs.prototype._createButton = function(parentNode, options) {\n\n  var className = options.className,\n      direction = options.direction;\n\n\n  var button = domQuery('.' + className, parentNode);\n\n  if (!button) {\n    button = domify('<span class=\"scroll-tabs-button ' + className + '\">' +\n                                options.label +\n                              '</span>');\n\n    parentNode.insertBefore(button, parentNode.childNodes[0]);\n  }\n\n  domAttr(button, 'data-direction', direction);\n\n  return button;\n};\n\n/**\n * Create both scroll buttons\n *\n * @param  {DOMElement} parentNode\n * @param  {Object} options\n * @param  {String} options.scrollSymbolLeft\n * @param  {String} options.scrollSymbolRight\n */\nScrollTabs.prototype._createScrollButtons = function(parentNode, options) {\n\n  // Create a button that scrolls to the tab left to the currently active tab\n  this._createButton(parentNode, {\n    className: 'scroll-tabs-left',\n    label: options.scrollSymbolLeft,\n    direction: -1\n  });\n\n  // Create a button that scrolls to the tab right to the currently active tab\n  this._createButton(parentNode, {\n    className: 'scroll-tabs-right',\n    label: options.scrollSymbolRight,\n    direction: 1\n  });\n};\n\n/**\n * Get the current active tab\n *\n * @return {DOMElement}\n */\nScrollTabs.prototype.getActiveTabNode = function() {\n  return domQuery(this.options.selectors.active, this.container);\n};\n\n\n/**\n * Get the container all tabs are contained in\n *\n * @return {DOMElement}\n */\nScrollTabs.prototype.getTabsContainerNode = function() {\n  return domQuery(this.options.selectors.tabsContainer, this.container);\n};\n\n\n/**\n * Get all tabs (visible and invisible ones)\n *\n * @return {Array<DOMElement>}\n */\nScrollTabs.prototype.getAllTabNodes = function() {\n  return domQueryAll(this.options.selectors.tab, this.container);\n};\n\n\n/**\n * Gets all tabs that don't have the ignore class set\n *\n * @return {Array<DOMElement>}\n */\nScrollTabs.prototype.getVisibleTabs = function() {\n  var allTabs = this.getAllTabNodes();\n\n  var ignore = this.options.selectors.ignore;\n\n  return filter(allTabs, function(tabNode) {\n    return !domMatches(tabNode, ignore);\n  });\n};\n\n\n/**\n * Get a tab relative to a reference tab.\n *\n * @param  {DOMElement} referenceTabNode\n * @param  {Number} n gets the nth tab next or previous to the reference tab\n *\n * @return {DOMElement}\n *\n * @example:\n * Visible tabs: [ A | B | C | D | E ]\n * Assume tab 'C' is the reference tab:\n * If direction === -1, it returns tab 'B',\n * if direction ===  2, it returns tab 'E'\n */\nScrollTabs.prototype.getAdjacentTab = function(referenceTabNode, n) {\n  var visibleTabs = this.getVisibleTabs();\n\n  var index = visibleTabs.indexOf(referenceTabNode);\n\n  return visibleTabs[index + n];\n};\n\nScrollTabs.prototype._bindEvents = function(node) {\n  this._bindWheelEvent(node);\n  this._bindTabClickEvents(node);\n  this._bindScrollButtonEvents(node);\n};\n\n/**\n *  Bind a click listener to a DOM node.\n *  Make sure a tab link is entirely visible after onClick.\n *\n * @param {DOMElement} node\n */\nScrollTabs.prototype._bindTabClickEvents = function(node) {\n  var selector = this.options.selectors.tab;\n\n  var self = this;\n\n  domDelegate.bind(node, selector, 'click', function onClick(event) {\n    self.scrollToTabNode(event.delegateTarget);\n  });\n};\n\n\n/**\n * Bind the wheel event listener to a DOM node\n *\n * @param {DOMElement} node\n */\nScrollTabs.prototype._bindWheelEvent = function(node) {\n  var self = this;\n\n  domEvent.bind(node, 'wheel', function(e) {\n\n    // scroll direction (-1: left, 1: right)\n    var direction = Math.sign(e.deltaY);\n\n    var oldActiveTab = self.getActiveTabNode();\n\n    var newActiveTab = self.getAdjacentTab(oldActiveTab, direction);\n\n    if (newActiveTab) {\n      self.scrollToTabNode(newActiveTab);\n      self.emit('scroll', newActiveTab, oldActiveTab, direction);\n    }\n\n    e.preventDefault();\n  });\n};\n\n/**\n * Bind scroll button events to a DOM node\n *\n * @param  {DOMElement} node\n */\nScrollTabs.prototype._bindScrollButtonEvents = function(node) {\n\n  var self = this;\n\n  domDelegate.bind(node, '.scroll-tabs-button', 'click', function(event) {\n\n    var target = event.delegateTarget;\n\n    // data-direction is either -1 or 1\n    var direction = parseInt(domAttr(target, 'data-direction'), 10);\n\n    var oldActiveTabNode = self.getActiveTabNode();\n\n    var newActiveTabNode = self.getAdjacentTab(oldActiveTabNode, direction);\n\n    if (newActiveTabNode) {\n      self.scrollToTabNode(newActiveTabNode);\n      self.emit('scroll', newActiveTabNode, oldActiveTabNode, direction);\n    }\n\n    event.preventDefault();\n  });\n};\n\n\n/**\n* Scroll to a tab if it is not entirely visible\n*\n* @param  {DOMElement} tabNode tab node to scroll to\n*/\nScrollTabs.prototype.scrollToTabNode = function(tabNode) {\n  if (!tabNode) {\n    return;\n  }\n\n  var tabsContainerNode = tabNode.parentNode;\n\n  var tabWidth = tabNode.offsetWidth,\n      tabOffsetLeft = tabNode.offsetLeft,\n      tabOffsetRight = tabOffsetLeft + tabWidth,\n      containerWidth = tabsContainerNode.offsetWidth,\n      containerScrollLeft = tabsContainerNode.scrollLeft;\n\n  if (containerScrollLeft > tabOffsetLeft) {\n    // scroll to the left, if the tab is overflowing on the left side\n    tabsContainerNode.scrollLeft = 0;\n  } else if (tabOffsetRight > containerWidth) {\n    // scroll to the right, if the tab is overflowing on the right side\n    tabsContainerNode.scrollLeft = tabOffsetRight - containerWidth;\n  }\n};\n\n\n/**\n * React on tab changes from outside (resize/show/hide/add/remove),\n * update scroll button visibility.\n */\nScrollTabs.prototype.update = function() {\n\n  var tabsContainerNode = this.getTabsContainerNode();\n\n  // check if tabs fit in container\n  var overflow = tabsContainerNode.scrollWidth > tabsContainerNode.offsetWidth;\n\n  // TODO(nikku): distinguish overflow left / overflow right?\n  var overflowClass = 'scroll-tabs-overflow';\n\n  domClasses(this.container).toggle(overflowClass, overflow);\n\n  if (overflow) {\n    // make sure the current active tab is always visible\n    this.scrollToTabNode(this.getActiveTabNode());\n  }\n};\n\n\n// exports ////////////////\n\n/**\n * Create a scrollTabs instance on the given element.\n *\n * @param {DOMElement} $el\n * @param {Object} options\n *\n * @return {ScrollTabs}\n */\nexport default function create($el, options) {\n\n  var scrollTabs = get($el);\n\n  if (!scrollTabs) {\n    scrollTabs = new ScrollTabs($el, options);\n\n    $el.__scrollTabs = scrollTabs;\n  }\n\n  return scrollTabs;\n}\n\n\n/**\n * Return the scrollTabs instance that has been previously\n * initialized on the element.\n *\n * @param {DOMElement} $el\n * @return {ScrollTabs}\n */\nfunction get($el) {\n  return $el.__scrollTabs;\n}\n\ncreate.get = get;","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n"],"sourceRoot":""}